{"version":3,"file":"src_js_plugins_updateSelectBox_updateSelectBoxCore_ts.4b6a52280ddc539d54e5.js","mappings":";;;;;;;;;;;;;;;;;AAAuD;AACM;AACtD;AACP;AACA,aAAa,0EAAqB;AAClC;AACA;AACA;AACA,YAAY,8GAAyD;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,CAAC;AACT;AACA;AACA,QAAQ,CAAC;AACT;AACA;AACA,QAAQ,CAAC;AACT;AACA;AACA,QAAQ,CAAC;AACT;AACA;AACA,IAAI,CAAC;AACL,8FAA8F,mGAA8C;AAC5I,QAAQ,+FAA0C;AAClD;AACA;AACA;AACA,QAAQ,CAAC;AACT,QAAQ,CAAC;AACT;AACA;AACA,QAAQ,CAAC;AACT;AACA;AACA;AACA,YAAY,CAAC,mEAAmE;AAChF,YAAY,CAAC;AACb,YAAY,CAAC;AACb,iHAAiH,6DAAO;AACxH,YAAY,CAAC;AACb,YAAY,CAAC,oDAAoD,8DAAQ,4BAA4B;AACrG;AACA;AACA,YAAY,CAAC;AACb,YAAY,CAAC;AACb,YAAY,CAAC;AACb,YAAY,CAAC;AACb,YAAY,CAAC;AACb,YAAY,CAAC;AACb;AACA,YAAY,CAAC;AACb,YAAY,CAAC;AACb,YAAY,CAAC;AACb;AACA;AACA;AACA,QAAQ,CAAC;AACT,QAAQ,CAAC;AACT,QAAQ,CAAC;AACT,QAAQ,CAAC;AACT,QAAQ,CAAC;AACT;AACA;AACA;AACA;AACA;AACA,gBAAgB,CAAC;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,CAAC;AACb;AACA;AACA;AACA,QAAQ,CAAC;AACT;AACA;AACO;AACP;AACA,IAAI,0EAAqB;AACzB;AACA;AACA;AACA,KAAK;AACL","sources":["webpack://keeptrack.space/./src/js/plugins/updateSelectBox/updateSelectBoxCore.ts"],"sourcesContent":["import { keepTrackApi } from '@app/js/api/externalApi';\nimport { cKmPerMs, DEG2RAD } from '@app/js/lib/constants.js';\nexport var updateSelectBoxCoreCallback = function (sat) {\n    var _a;\n    var _b = keepTrackApi.programs, satellite = _b.satellite, missileManager = _b.missileManager, timeManager = _b.timeManager, settingsManager = _b.settingsManager, objectManager = _b.objectManager, sensorManager = _b.sensorManager, uiManager = _b.uiManager;\n    if (typeof sat === 'undefined' || sat == null)\n        throw new Error('updateSelectBoxCoreCallback: sat is undefined');\n    if (!sat.missile) {\n        if (keepTrackApi.programs.objectManager.isSensorManagerLoaded) {\n            sat.getTEARR();\n        }\n    }\n    else {\n        satellite.setTEARR(missileManager.getMissileTEARR(sat));\n    }\n    if (satellite.degreesLong(satellite.currentTEARR.lon) >= 0) {\n        $('#sat-longitude').html(satellite.degreesLong(satellite.currentTEARR.lon).toFixed(3) + '°E');\n    }\n    else {\n        $('#sat-longitude').html((satellite.degreesLong(satellite.currentTEARR.lon) * -1).toFixed(3) + '°W');\n    }\n    if (satellite.degreesLat(satellite.currentTEARR.lat) >= 0) {\n        $('#sat-latitude').html(satellite.degreesLat(satellite.currentTEARR.lat).toFixed(3) + '°N');\n    }\n    else {\n        $('#sat-latitude').html((satellite.degreesLat(satellite.currentTEARR.lat) * -1).toFixed(3) + '°S');\n    }\n    var jday = timeManager.getDayOfYear(timeManager.simulationTimeObj);\n    $('#jday').html(jday);\n    if (((_a = settingsManager.plugins) === null || _a === void 0 ? void 0 : _a.stereoMap) && keepTrackApi.programs.mapManager.isMapMenuOpen && timeManager.realTime > settingsManager.lastMapUpdateTime + 30000) {\n        keepTrackApi.programs.mapManager.updateMap();\n        settingsManager.lastMapUpdateTime = timeManager.realTime;\n    }\n    if (!sat.missile) {\n        $('#sat-altitude').html(sat.getAltitude().toFixed(2) + ' km');\n        $('#sat-velocity').html(sat.velocity.total.toFixed(2) + ' km/s');\n    }\n    else {\n        $('#sat-altitude').html(satellite.currentTEARR.alt.toFixed(2) + ' km');\n    }\n    if (objectManager.isSensorManagerLoaded) {\n        if (satellite.currentTEARR.inView) {\n            $('#sat-azimuth').html(satellite.currentTEARR.az.toFixed(0) + '°'); // Convert to Degrees\n            $('#sat-elevation').html(satellite.currentTEARR.el.toFixed(1) + '°');\n            $('#sat-range').html(satellite.currentTEARR.rng.toFixed(2) + ' km');\n            var beamwidthString = sensorManager.currentSensor.beamwidth ? (satellite.currentTEARR.rng * Math.sin(DEG2RAD * sensorManager.currentSensor.beamwidth)).toFixed(2) + ' km' : 'Unknown';\n            $('#sat-beamwidth').html(beamwidthString);\n            $('#sat-maxTmx').html(((satellite.currentTEARR.rng / cKmPerMs) * 2).toFixed(2) + ' ms'); // Time for RF to hit target and bounce back\n        }\n        else {\n            $('#sat-azimuth').html('Out of FOV');\n            $('#sat-azimuth').prop('title', 'Azimuth: ' + satellite.currentTEARR.az.toFixed(0) + '°');\n            $('#sat-elevation').html('Out of FOV');\n            $('#sat-elevation').prop('title', 'Elevation: ' + satellite.currentTEARR.el.toFixed(1) + '°');\n            $('#sat-range').html('Out of FOV');\n            $('#sat-range').prop('title', 'Range: ' + satellite.currentTEARR.rng.toFixed(2) + ' km');\n            var beamwidthString = sensorManager.currentSensor.beamwidth ? sensorManager.currentSensor.beamwidth + '°' : 'Unknown';\n            $('#sat-beamwidth').html('Out of FOV');\n            $('#sat-beamwidth').prop('title', beamwidthString);\n            $('#sat-maxTmx').html('Out of FOV');\n        }\n    }\n    else {\n        $('#sat-azimuth').parent().hide();\n        $('#sat-elevation').parent().hide();\n        $('#sat-range').parent().hide();\n        $('#sat-beamwidth').parent().hide();\n        $('#sat-maxTmx').parent().hide();\n    }\n    if (objectManager.isSensorManagerLoaded) {\n        if (sensorManager.checkSensorSelected()) {\n            // If we didn't just calculate next pass time for this satellite and sensor combination do it\n            if (objectManager.selectedSat !== uiManager.lastNextPassCalcSatId && sensorManager.currentSensor.shortName !== uiManager.lastNextPassCalcSensorId && !sat.missile) {\n                $('#sat-nextpass').html(satellite.nextpass(sat));\n                // IDEA: Code isInSun()\n                //sun.getXYZ();\n                //lineManager.create('ref',[sun.sunvar.position.x,sun.sunvar.position.y,sun.sunvar.position.z]);\n            }\n            uiManager.lastNextPassCalcSatId = objectManager.selectedSat;\n            uiManager.lastNextPassCalcSensorId = sensorManager.currentSensor.shortName;\n        }\n        else {\n            $('#sat-nextpass').html('Unavailable');\n        }\n    }\n    else {\n        $('#sat-nextpass').parent().hide();\n    }\n};\nexport var init = function () {\n    // Register updateSelectBox\n    keepTrackApi.register({\n        method: 'updateSelectBox',\n        cbName: 'updateSelectBoxCore',\n        cb: updateSelectBoxCoreCallback,\n    });\n};\n"],"names":[],"sourceRoot":""}
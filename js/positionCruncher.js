/*! For license information please see positionCruncher.js.LICENSE.txt */
(()=>{var __webpack_modules__={32:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var numeric=exports;void 0!==__webpack_require__.g&&(__webpack_require__.g.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(r,n){var e,t,a;for(void 0===n&&(n=15),t=.5,e=new Date;;){for(a=t*=2;a>3;a-=4)r(),r(),r(),r();for(;a>0;)r(),a--;if(new Date-e>n)break}for(a=t;a>3;a-=4)r(),r(),r(),r();for(;a>0;)r(),a--;return 1e3*(3*t-1)/(new Date-e)},numeric._myIndexOf=function(r){var n,e=this.length;for(n=0;n<e;++n)if(this[n]===r)return n;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(r){function n(r){if(0===r)return"0";if(isNaN(r))return"NaN";if(r<0)return"-"+n(-r);if(isFinite(r)){var e=Math.floor(Math.log(r)/Math.log(10)),t=r/Math.pow(10,e),a=t.toPrecision(numeric.precision);return 10===parseFloat(a)&&(e++,a=(t=1).toPrecision(numeric.precision)),parseFloat(a).toString()+"e"+e.toString()}return"Infinity"}var e=[];return function r(t){var a;if(void 0===t)return e.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof t)return e.push('"'+t+'"'),!1;if("boolean"==typeof t)return e.push(t.toString()),!1;if("number"==typeof t){var o=n(t),i=t.toPrecision(numeric.precision),s=parseFloat(t.toString()).toString(),c=[o,i,s,parseFloat(i).toString(),parseFloat(s).toString()];for(a=1;a<c.length;a++)c[a].length<o.length&&(o=c[a]);return e.push(Array(numeric.precision+8-o.length).join(" ")+o),!1}if(null===t)return e.push("null"),!1;if("function"==typeof t){e.push(t.toString());var u=!1;for(a in t)t.hasOwnProperty(a)&&(u?e.push(",\n"):e.push("\n{"),u=!0,e.push(a),e.push(": \n"),r(t[a]));return u&&e.push("}\n"),!0}if(t instanceof Array){if(t.length>numeric.largeArray)return e.push("...Large Array..."),!0;for(u=!1,e.push("["),a=0;a<t.length;a++)a>0&&(e.push(","),u&&e.push("\n ")),u=r(t[a]);return e.push("]"),!0}for(a in e.push("{"),u=!1,t)t.hasOwnProperty(a)&&(u&&e.push(",\n"),u=!0,e.push(a),e.push(": \n"),r(t[a]));return e.push("}"),!0}(r),e.join("")},numeric.parseDate=function(r){return function r(n){if("string"==typeof n)return Date.parse(n.replace(/-/g,"/"));if(!(n instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var e,t=[];for(e=0;e<n.length;e++)t[e]=r(n[e]);return t}(r)},numeric.parseFloat=function(r){return function r(n){if("string"==typeof n)return parseFloat(n);if(!(n instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var e,t=[];for(e=0;e<n.length;e++)t[e]=r(n[e]);return t}(r)},numeric.parseCSV=function(r){var n,e,t,a=r.split("\n"),o=[],i=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,c=0;for(e=0;e<a.length;e++){var u,l=(a[e]+",").match(i);if(l.length>0){for(o[c]=[],n=0;n<l.length;n++)u=(t=l[n]).substr(0,t.length-1),s.test(u)?o[c][n]=parseFloat(u):o[c][n]=u;c++}}return o},numeric.toCSV=function(r){var n,e,t,a,o,i=numeric.dim(r);for(t=i[0],i[1],o=[],n=0;n<t;n++){for(a=[],e=0;e<t;e++)a[e]=r[n][e].toString();o[n]=a.join(", ")}return o.join("\n")+"\n"},numeric.getURL=function(r){var n=new XMLHttpRequest;return n.open("GET",r,!1),n.send(),n},numeric.imageURL=function(r){function n(r,n,e){void 0===n&&(n=0),void 0===e&&(e=r.length);var t,a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=-1;for(r.length,t=n;t<e;t++)o=o>>>8^a[255&(o^r[t])];return-1^o}var e,t,a,o,i,s,c,u,l,h,m=r[0].length,f=r[0][0].length,d=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,f>>24&255,f>>16&255,f>>8&255,255&f,m>>24&255,m>>16&255,m>>8&255,255&m,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(h=n(d,12,29),d[29]=h>>24&255,d[30]=h>>16&255,d[31]=h>>8&255,d[32]=255&h,e=1,t=0,c=0;c<m;c++){for(c<m-1?d.push(0):d.push(1),i=3*f+1+(0===c)&255,s=3*f+1+(0===c)>>8&255,d.push(i),d.push(s),d.push(255&~i),d.push(255&~s),0===c&&d.push(0),u=0;u<f;u++)for(a=0;a<3;a++)t=(t+(e=(e+(i=(i=r[a][c][u])>255?255:i<0?0:Math.round(i)))%65521))%65521,d.push(i);d.push(0)}return l=(t<<16)+e,d.push(l>>24&255),d.push(l>>16&255),d.push(l>>8&255),d.push(255&l),o=d.length-41,d[33]=o>>24&255,d[34]=o>>16&255,d[35]=o>>8&255,d[36]=255&o,h=n(d,37),d.push(h>>24&255),d.push(h>>16&255),d.push(h>>8&255),d.push(255&h),d.push(0),d.push(0),d.push(0),d.push(0),d.push(73),d.push(69),d.push(78),d.push(68),d.push(174),d.push(66),d.push(96),d.push(130),"data:image/png;base64,"+function(r){var n,e,t,a,o,i,s,c=r.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="";for(n=0;n<c;n+=3)o=((3&(e=r[n]))<<4)+((t=r[n+1])>>4),i=((15&t)<<2)+((a=r[n+2])>>6),s=63&a,n+1>=c?i=s=64:n+2>=c&&(s=64),l+=u.charAt(e>>2)+u.charAt(o)+u.charAt(i)+u.charAt(s);return l}(d)},numeric._dim=function(r){for(var n=[];"object"==typeof r;)n.push(r.length),r=r[0];return n},numeric.dim=function(r){var n;return"object"==typeof r?"object"==typeof(n=r[0])?"object"==typeof n[0]?numeric._dim(r):[r.length,n.length]:[r.length]:[]},numeric.mapreduce=function(r,n){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+n+';\nif(typeof x === "number") { var xi = x; '+r+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+r+";\n    xi = x[i-1];\n    "+r+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+r+"\n}\nreturn accum;")},numeric.mapreduce2=function(r,n){return Function("x","var n = x.length;\nvar i,xi;\n"+n+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+r+";\n}\nreturn accum;")},numeric.same=function r(n,e){var t,a;if(!(n instanceof Array&&e instanceof Array))return!1;if((a=n.length)!==e.length)return!1;for(t=0;t<a;t++)if(n[t]!==e[t]){if("object"!=typeof n[t])return!1;if(!r(n[t],e[t]))return!1}return!0},numeric.rep=function(r,n,e){void 0===e&&(e=0);var t,a=r[e],o=Array(a);if(e===r.length-1){for(t=a-2;t>=0;t-=2)o[t+1]=n,o[t]=n;return-1===t&&(o[0]=n),o}for(t=a-1;t>=0;t--)o[t]=numeric.rep(r,n,e+1);return o},numeric.dotMMsmall=function(r,n){var e,t,a,o,i,s,c,u,l,h,m;for(o=r.length,i=n.length,s=n[0].length,c=Array(o),e=o-1;e>=0;e--){for(u=Array(s),l=r[e],a=s-1;a>=0;a--){for(h=l[i-1]*n[i-1][a],t=i-2;t>=1;t-=2)m=t-1,h+=l[t]*n[t][a]+l[m]*n[m][a];0===t&&(h+=l[0]*n[0][a]),u[a]=h}c[e]=u}return c},numeric._getCol=function(r,n,e){var t;for(t=r.length-1;t>0;--t)e[t]=r[t][n],e[--t]=r[t][n];0===t&&(e[0]=r[0][n])},numeric.dotMMbig=function(r,n){var e,t,a,o=numeric._getCol,i=n.length,s=Array(i),c=r.length,u=n[0].length,l=new Array(c),h=numeric.dotVV;for(--i,t=--c;-1!==t;--t)l[t]=Array(u);for(t=--u;-1!==t;--t)for(o(n,t,s),a=c;-1!==a;--a)e=r[a],l[a][t]=h(e,s);return l},numeric.dotMV=function(r,n){var e,t=r.length,a=(n.length,Array(t)),o=numeric.dotVV;for(e=t-1;e>=0;e--)a[e]=o(r[e],n);return a},numeric.dotVM=function(r,n){var e,t,a,o,i,s,c;for(a=r.length,o=n[0].length,i=Array(o),t=o-1;t>=0;t--){for(s=r[a-1]*n[a-1][t],e=a-2;e>=1;e-=2)c=e-1,s+=r[e]*n[e][t]+r[c]*n[c][t];0===e&&(s+=r[0]*n[0][t]),i[t]=s}return i},numeric.dotVV=function(r,n){var e,t,a=r.length,o=r[a-1]*n[a-1];for(e=a-2;e>=1;e-=2)t=e-1,o+=r[e]*n[e]+r[t]*n[t];return 0===e&&(o+=r[0]*n[0]),o},numeric.dot=function(r,n){var e=numeric.dim;switch(1e3*e(r).length+e(n).length){case 2002:return n.length<10?numeric.dotMMsmall(r,n):numeric.dotMMbig(r,n);case 2001:return numeric.dotMV(r,n);case 1002:return numeric.dotVM(r,n);case 1001:return numeric.dotVV(r,n);case 1e3:return numeric.mulVS(r,n);case 1:return numeric.mulSV(r,n);case 0:return r*n;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(r){var n,e,t,a,o=r.length,i=Array(o);for(n=o-1;n>=0;n--){for(a=Array(o),e=n+2,t=o-1;t>=e;t-=2)a[t]=0,a[t-1]=0;for(t>n&&(a[t]=0),a[n]=r[n],t=n-1;t>=1;t-=2)a[t]=0,a[t-1]=0;0===t&&(a[0]=0),i[n]=a}return i},numeric.getDiag=function(r){var n,e=Math.min(r.length,r[0].length),t=Array(e);for(n=e-1;n>=1;--n)t[n]=r[n][n],t[--n]=r[n][n];return 0===n&&(t[0]=r[0][0]),t},numeric.identity=function(r){return numeric.diag(numeric.rep([r],1))},numeric.pointwise=function(r,n,e){void 0===e&&(e="");var t,a,o=[],i=/\[i\]$/,s="",c=!1;for(t=0;t<r.length;t++)i.test(r[t])?s=a=r[t].substring(0,r[t].length-3):a=r[t],"ret"===a&&(c=!0),o.push(a);return o[r.length]="_s",o[r.length+1]="_k",o[r.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(c?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+r.join(",")+",_s,_k+1);\n    return ret;\n}\n"+e+"\nfor(i=_n-1;i!==-1;--i) {\n    "+n+"\n}\nreturn ret;",Function.apply(null,o)},numeric.pointwise2=function(r,n,e){void 0===e&&(e="");var t,a,o=[],i=/\[i\]$/,s="",c=!1;for(t=0;t<r.length;t++)i.test(r[t])?s=a=r[t].substring(0,r[t].length-3):a=r[t],"ret"===a&&(c=!0),o.push(a);return o[r.length]="var _n = "+s+".length;\nvar i"+(c?"":", ret = Array(_n)")+";\n"+e+"\nfor(i=_n-1;i!==-1;--i) {\n"+n+"\n}\nreturn ret;",Function.apply(null,o)},numeric._biforeach=function r(n,e,t,a,o){var i;if(a!==t.length-1)for(i=t[a]-1;i>=0;i--)r("object"==typeof n?n[i]:n,"object"==typeof e?e[i]:e,t,a+1,o);else o(n,e)},numeric._biforeach2=function r(n,e,t,a,o){if(a===t.length-1)return o(n,e);var i,s=t[a],c=Array(s);for(i=s-1;i>=0;--i)c[i]=r("object"==typeof n?n[i]:n,"object"==typeof e?e[i]:e,t,a+1,o);return c},numeric._foreach=function r(n,e,t,a){var o;if(t!==e.length-1)for(o=e[t]-1;o>=0;o--)r(n[o],e,t+1,a);else a(n)},numeric._foreach2=function r(n,e,t,a){if(t===e.length-1)return a(n);var o,i=e[t],s=Array(i);for(o=i-1;o>=0;o--)s[o]=r(n[o],e,t+1,a);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var r,n;for(r=0;r<numeric.mathfuns2.length;++r)n=numeric.mathfuns2[r],numeric.ops2[n]=n;for(r in numeric.ops2)if(numeric.ops2.hasOwnProperty(r)){n=numeric.ops2[r];var e,t,a="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,r)?(a="var "+n+" = Math."+n+";\n",e=function(r,e,t){return r+" = "+n+"("+e+","+t+")"},t=function(r,e){return r+" = "+n+"("+r+","+e+")"}):(e=function(r,e,t){return r+" = "+e+" "+n+" "+t},t=numeric.opseq.hasOwnProperty(r+"eq")?function(r,e){return r+" "+n+"= "+e}:function(r,e){return r+" = "+r+" "+n+" "+e}),numeric[r+"VV"]=numeric.pointwise2(["x[i]","y[i]"],e("ret[i]","x[i]","y[i]"),a),numeric[r+"SV"]=numeric.pointwise2(["x","y[i]"],e("ret[i]","x","y[i]"),a),numeric[r+"VS"]=numeric.pointwise2(["x[i]","y"],e("ret[i]","x[i]","y"),a),numeric[r]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+r+"VV, VS = numeric."+r+"VS, SV = numeric."+r+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+t("x","y")+"\n}\nreturn x;\n"),numeric[n]=numeric[r],numeric[r+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],t("ret[i]","x[i]"),a),numeric[r+"eqS"]=numeric.pointwise2(["ret[i]","x"],t("ret[i]","x"),a),numeric[r+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+r+"eqV, S = numeric."+r+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(r=0;r<numeric.mathfuns2.length;++r)n=numeric.mathfuns2[r],delete numeric.ops2[n];for(r=0;r<numeric.mathfuns.length;++r)n=numeric.mathfuns[r],numeric.ops1[n]=n;for(r in numeric.ops1)numeric.ops1.hasOwnProperty(r)&&(a="",n=numeric.ops1[r],-1!==numeric.myIndexOf.call(numeric.mathfuns,r)&&Math.hasOwnProperty(n)&&(a="var "+n+" = Math."+n+";\n"),numeric[r+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+n+"(ret[i]);",a),numeric[r+"eq"]=Function("x",'if(typeof x !== "object") return '+n+"x\nvar i;\nvar V = numeric."+r+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[r+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+n+"(x[i]);",a),numeric[r]=Function("x",'if(typeof x !== "object") return '+n+"(x)\nvar i;\nvar V = numeric."+r+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(r=0;r<numeric.mathfuns.length;++r)n=numeric.mathfuns[r],delete numeric.ops1[n];for(r in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(r)&&(n=numeric.mapreducers[r],numeric[r+"V"]=numeric.mapreduce2(n[0],n[1]),numeric[r]=Function("x","s","k",n[1]+'if(typeof x !== "object") {    xi = x;\n'+n[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+r+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+n[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(r,n){return"object"==typeof r?"object"==typeof n?numeric.truncVV(r,n):numeric.truncVS(r,n):"object"==typeof n?numeric.truncSV(r,n):Math.round(r/n)*n},numeric.inv=function(r){var n,e,t,a,o,i,s,c=numeric.dim(r),u=Math.abs,l=c[0],h=c[1],m=numeric.clone(r),f=numeric.identity(l);for(i=0;i<h;++i){var d=-1,p=-1;for(o=i;o!==l;++o)(s=u(m[o][i]))>p&&(d=o,p=s);for(e=m[d],m[d]=m[i],m[i]=e,a=f[d],f[d]=f[i],f[i]=a,r=e[i],s=i;s!==h;++s)e[s]/=r;for(s=h-1;-1!==s;--s)a[s]/=r;for(o=l-1;-1!==o;--o)if(o!==i){for(n=m[o],t=f[o],r=n[i],s=i+1;s!==h;++s)n[s]-=e[s]*r;for(s=h-1;s>0;--s)t[s]-=a[s]*r,t[--s]-=a[s]*r;0===s&&(t[0]-=a[0]*r)}}return f},numeric.det=function(r){var n=numeric.dim(r);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: det() only works on square matrices");var e,t,a,o,i,s,c,u,l=n[0],h=1,m=numeric.clone(r);for(t=0;t<l-1;t++){for(a=t,e=t+1;e<l;e++)Math.abs(m[e][t])>Math.abs(m[a][t])&&(a=e);for(a!==t&&(c=m[a],m[a]=m[t],m[t]=c,h*=-1),o=m[t],e=t+1;e<l;e++){for(s=(i=m[e])[t]/o[t],a=t+1;a<l-1;a+=2)u=a+1,i[a]-=o[a]*s,i[u]-=o[u]*s;a!==l&&(i[a]-=o[a]*s)}if(0===o[t])return 0;h*=o[t]}return h*m[t][t]},numeric.transpose=function(r){var n,e,t,a,o,i=r.length,s=r[0].length,c=Array(s);for(e=0;e<s;e++)c[e]=Array(i);for(n=i-1;n>=1;n-=2){for(a=r[n],t=r[n-1],e=s-1;e>=1;--e)(o=c[e])[n]=a[e],o[n-1]=t[e],(o=c[--e])[n]=a[e],o[n-1]=t[e];0===e&&((o=c[0])[n]=a[0],o[n-1]=t[0])}if(0===n){for(t=r[0],e=s-1;e>=1;--e)c[e][0]=t[e],c[--e][0]=t[e];0===e&&(c[0][0]=t[0])}return c},numeric.negtranspose=function(r){var n,e,t,a,o,i=r.length,s=r[0].length,c=Array(s);for(e=0;e<s;e++)c[e]=Array(i);for(n=i-1;n>=1;n-=2){for(a=r[n],t=r[n-1],e=s-1;e>=1;--e)(o=c[e])[n]=-a[e],o[n-1]=-t[e],(o=c[--e])[n]=-a[e],o[n-1]=-t[e];0===e&&((o=c[0])[n]=-a[0],o[n-1]=-t[0])}if(0===n){for(t=r[0],e=s-1;e>=1;--e)c[e][0]=-t[e],c[--e][0]=-t[e];0===e&&(c[0][0]=-t[0])}return c},numeric._random=function r(n,e){var t,a,o=n[e],i=Array(o);if(e===n.length-1){for(a=Math.random,t=o-1;t>=1;t-=2)i[t]=a(),i[t-1]=a();return 0===t&&(i[0]=a()),i}for(t=o-1;t>=0;t--)i[t]=r(n,e+1);return i},numeric.random=function(r){return numeric._random(r,0)},numeric.norm2=function(r){return Math.sqrt(numeric.norm2Squared(r))},numeric.linspace=function(r,n,e){if(void 0===e&&(e=Math.max(Math.round(n-r)+1,1)),e<2)return 1===e?[r]:[];var t,a=Array(e);for(t=--e;t>=0;t--)a[t]=(t*n+(e-t)*r)/e;return a},numeric.getBlock=function(r,n,e){var t=numeric.dim(r);return function r(a,o){var i,s=n[o],c=e[o]-s,u=Array(c);if(o===t.length-1){for(i=c;i>=0;i--)u[i]=a[i+s];return u}for(i=c;i>=0;i--)u[i]=r(a[i+s],o+1);return u}(r,0)},numeric.setBlock=function(r,n,e,t){var a=numeric.dim(r);return function r(t,o,i){var s,c=n[i],u=e[i]-c;if(i===a.length-1)for(s=u;s>=0;s--)t[s+c]=o[s];for(s=u;s>=0;s--)r(t[s+c],o[s],i+1)}(r,t,0),r},numeric.getRange=function(r,n,e){var t,a,o,i,s=n.length,c=e.length,u=Array(s);for(t=s-1;-1!==t;--t)for(u[t]=Array(c),o=u[t],i=r[n[t]],a=c-1;-1!==a;--a)o[a]=i[e[a]];return u},numeric.blockMatrix=function(r){var n=numeric.dim(r);if(n.length<4)return numeric.blockMatrix([r]);var e,t,a,o,i,s=n[0],c=n[1];for(e=0,t=0,a=0;a<s;++a)e+=r[a][0].length;for(o=0;o<c;++o)t+=r[0][o][0].length;var u=Array(e);for(a=0;a<e;++a)u[a]=Array(t);var l,h,m,f,d,p=0;for(a=0;a<s;++a){for(l=t,o=c-1;-1!==o;--o)for(l-=(i=r[a][o])[0].length,m=i.length-1;-1!==m;--m)for(d=i[m],h=u[p+m],f=d.length-1;-1!==f;--f)h[l+f]=d[f];p+=r[a][0].length}return u},numeric.tensor=function(r,n){if("number"==typeof r||"number"==typeof n)return numeric.mul(r,n);var e=numeric.dim(r),t=numeric.dim(n);if(1!==e.length||1!==t.length)throw new Error("numeric: tensor product is only defined for vectors");var a,o,i,s,c=e[0],u=t[0],l=Array(c);for(o=c-1;o>=0;o--){for(a=Array(u),s=r[o],i=u-1;i>=3;--i)a[i]=s*n[i],a[--i]=s*n[i],a[--i]=s*n[i],a[--i]=s*n[i];for(;i>=0;)a[i]=s*n[i],--i;l[o]=a}return l},numeric.T=function(r,n){this.x=r,this.y=n},numeric.t=function(r,n){return new numeric.T(r,n)},numeric.Tbinop=function(r,n,e,t,a){var o;if(numeric.indexOf,"string"!=typeof a)for(o in a="",numeric)numeric.hasOwnProperty(o)&&(r.indexOf(o)>=0||n.indexOf(o)>=0||e.indexOf(o)>=0||t.indexOf(o)>=0)&&o.length>1&&(a+="var "+o+" = numeric."+o+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+a+"\nif(x.y) {  if(y.y) {    return new numeric.T("+t+");\n  }\n  return new numeric.T("+e+");\n}\nif(y.y) {\n  return new numeric.T("+n+");\n}\nreturn new numeric.T("+r+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var r=numeric.mul,n=numeric.div;if(this.y){var e=numeric.add(r(this.x,this.x),r(this.y,this.y));return new numeric.T(n(this.x,e),n(numeric.neg(this.y),e))}return new T(n(1,this.x))},numeric.T.prototype.div=function(r){if(r instanceof numeric.T||(r=new numeric.T(r)),r.y)return this.mul(r.reciprocal());var n=numeric.div;return this.y?new numeric.T(n(this.x,r.x),n(this.y,r.x)):new numeric.T(n(this.x,r.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var r=numeric.transpose,n=this.x,e=this.y;return e?new numeric.T(r(n),r(e)):new numeric.T(r(n))},numeric.T.prototype.transjugate=function(){var r=numeric.transpose,n=this.x,e=this.y;return e?new numeric.T(r(n),numeric.negtranspose(e)):new numeric.T(r(n))},numeric.Tunop=function(r,n,e){return"string"!=typeof e&&(e=""),Function("var x = this;\n"+e+"\nif(x.y) {  "+n+";\n}\n"+r+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var r=this;if(void 0===r.y)return new numeric.T(numeric.inv(r.x));var n,e,t,a,o,i,s,c,u,l,h,m,f,d,p,M,g,x,v=r.x.length,y=numeric.identity(v),b=numeric.rep([v,v],0),T=numeric.clone(r.x),w=numeric.clone(r.y);for(u=0;u<v;u++){for(m=(d=T[u][u])*d+(p=w[u][u])*p,h=u,l=u+1;l<v;l++)(f=(d=T[l][u])*d+(p=w[l][u])*p)>m&&(h=l,m=f);for(h!==u&&(x=T[u],T[u]=T[h],T[h]=x,x=w[u],w[u]=w[h],w[h]=x,x=y[u],y[u]=y[h],y[h]=x,x=b[u],b[u]=b[h],b[h]=x),n=T[u],e=w[u],o=y[u],i=b[u],d=n[u],p=e[u],l=u+1;l<v;l++)M=n[l],g=e[l],n[l]=(M*d+g*p)/m,e[l]=(g*d-M*p)/m;for(l=0;l<v;l++)M=o[l],g=i[l],o[l]=(M*d+g*p)/m,i[l]=(g*d-M*p)/m;for(l=u+1;l<v;l++){for(t=T[l],a=w[l],s=y[l],c=b[l],d=t[u],p=a[u],h=u+1;h<v;h++)M=n[h],g=e[h],t[h]-=M*d-g*p,a[h]-=g*d+M*p;for(h=0;h<v;h++)M=o[h],g=i[h],s[h]-=M*d-g*p,c[h]-=g*d+M*p}}for(u=v-1;u>0;u--)for(o=y[u],i=b[u],l=u-1;l>=0;l--)for(s=y[l],c=b[l],d=T[l][u],p=w[l][u],h=v-1;h>=0;h--)M=o[h],g=i[h],s[h]-=d*M-p*g,c[h]-=d*g+p*M;return new numeric.T(y,b)},numeric.T.prototype.get=function(r){var n,e=this.x,t=this.y,a=0,o=r.length;if(t){for(;a<o;)e=e[n=r[a]],t=t[n],a++;return new numeric.T(e,t)}for(;a<o;)e=e[n=r[a]],a++;return new numeric.T(e)},numeric.T.prototype.set=function(r,n){var e,t=this.x,a=this.y,o=0,i=r.length,s=n.x,c=n.y;if(0===i)return c?this.y=c:a&&(this.y=void 0),this.x=t,this;if(c){for(a||(a=numeric.rep(numeric.dim(t),0),this.y=a);o<i-1;)t=t[e=r[o]],a=a[e],o++;return t[e=r[o]]=s,a[e]=c,this}if(a){for(;o<i-1;)t=t[e=r[o]],a=a[e],o++;return t[e=r[o]]=s,a[e]=s instanceof Array?numeric.rep(numeric.dim(s),0):0,this}for(;o<i-1;)t=t[e=r[o]],o++;return t[e=r[o]]=s,this},numeric.T.prototype.getRows=function(r,n){var e,t,a=n-r+1,o=Array(a),i=this.x,s=this.y;for(e=r;e<=n;e++)o[e-r]=i[e];if(s){for(t=Array(a),e=r;e<=n;e++)t[e-r]=s[e];return new numeric.T(o,t)}return new numeric.T(o)},numeric.T.prototype.setRows=function(r,n,e){var t,a=this.x,o=this.y,i=e.x,s=e.y;for(t=r;t<=n;t++)a[t]=i[t-r];if(s)for(o||(o=numeric.rep(numeric.dim(a),0),this.y=o),t=r;t<=n;t++)o[t]=s[t-r];else if(o)for(t=r;t<=n;t++)o[t]=numeric.rep([i[t-r].length],0);return this},numeric.T.prototype.getRow=function(r){var n=this.x,e=this.y;return e?new numeric.T(n[r],e[r]):new numeric.T(n[r])},numeric.T.prototype.setRow=function(r,n){var e=this.x,t=this.y,a=n.x,o=n.y;return e[r]=a,o?(t||(t=numeric.rep(numeric.dim(e),0),this.y=t),t[r]=o):t&&(t=numeric.rep([a.length],0)),this},numeric.T.prototype.getBlock=function(r,n){var e=this.x,t=this.y,a=numeric.getBlock;return t?new numeric.T(a(e,r,n),a(t,r,n)):new numeric.T(a(e,r,n))},numeric.T.prototype.setBlock=function(r,n,e){e instanceof numeric.T||(e=new numeric.T(e));var t=this.x,a=this.y,o=numeric.setBlock,i=e.x,s=e.y;if(s)return a||(this.y=numeric.rep(numeric.dim(this),0),a=this.y),o(t,r,n,i),o(a,r,n,s),this;o(t,r,n,i),a&&o(a,r,n,numeric.rep(numeric.dim(i),0))},numeric.T.rep=function(r,n){var e=numeric.T;n instanceof e||(n=new e(n));var t=n.x,a=n.y,o=numeric.rep;return a?new e(o(r,t),o(r,a)):new e(o(r,t))},numeric.T.diag=function(r){r instanceof numeric.T||(r=new numeric.T(r));var n=r.x,e=r.y,t=numeric.diag;return e?new numeric.T(t(n),t(e)):new numeric.T(t(n))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(r){return new numeric.T(numeric.identity(r))},numeric.T.prototype.getDiag=function(){var r=numeric,n=this.x,e=this.y;return e?new r.T(r.getDiag(n),r.getDiag(e)):new r.T(r.getDiag(n))},numeric.house=function(r){var n=numeric.clone(r),e=(r[0]>=0?1:-1)*numeric.norm2(r);n[0]+=e;var t=numeric.norm2(n);if(0===t)throw new Error("eig: internal error");return numeric.div(n,t)},numeric.toUpperHessenberg=function(r){var n=numeric.dim(r);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var e,t,a,o,i,s,c,u,l,h,m=n[0],f=numeric.clone(r),d=numeric.identity(m);for(t=0;t<m-2;t++){for(o=Array(m-t-1),e=t+1;e<m;e++)o[e-t-1]=f[e][t];if(numeric.norm2(o)>0){for(i=numeric.house(o),s=numeric.getBlock(f,[t+1,t],[m-1,m-1]),c=numeric.tensor(i,numeric.dot(i,s)),e=t+1;e<m;e++)for(u=f[e],l=c[e-t-1],a=t;a<m;a++)u[a]-=2*l[a-t];for(s=numeric.getBlock(f,[0,t+1],[m-1,m-1]),c=numeric.tensor(numeric.dot(s,i),i),e=0;e<m;e++)for(u=f[e],l=c[e],a=t+1;a<m;a++)u[a]-=2*l[a-t-1];for(s=Array(m-t-1),e=t+1;e<m;e++)s[e-t-1]=d[e];for(c=numeric.tensor(i,numeric.dot(i,s)),e=t+1;e<m;e++)for(h=d[e],l=c[e-t-1],a=0;a<m;a++)h[a]-=2*l[a]}}return{H:f,Q:d}},numeric.epsilon=2220446049250313e-31,numeric.QRFrancis=function(r,n){void 0===n&&(n=1e4),r=numeric.clone(r),numeric.clone(r);var e,t,a,o,i,s,c,u,l,h,m,f,d,p,M,g,x,v,y=numeric.dim(r)[0],b=numeric.identity(y);if(y<3)return{Q:b,B:[[0,y-1]]};var T=numeric.epsilon;for(v=0;v<n;v++){for(g=0;g<y-1;g++)if(Math.abs(r[g+1][g])<T*(Math.abs(r[g][g])+Math.abs(r[g+1][g+1]))){var w=numeric.QRFrancis(numeric.getBlock(r,[0,0],[g,g]),n),A=numeric.QRFrancis(numeric.getBlock(r,[g+1,g+1],[y-1,y-1]),n);for(f=Array(g+1),M=0;M<=g;M++)f[M]=b[M];for(d=numeric.dot(w.Q,f),M=0;M<=g;M++)b[M]=d[M];for(f=Array(y-g-1),M=g+1;M<y;M++)f[M-g-1]=b[M];for(d=numeric.dot(A.Q,f),M=g+1;M<y;M++)b[M]=d[M-g-1];return{Q:b,B:w.B.concat(numeric.add(A.B,g+1))}}var _,z,S;for(a=r[y-2][y-2],o=r[y-2][y-1],i=r[y-1][y-2],u=a+(s=r[y-1][y-1]),c=a*s-o*i,l=numeric.getBlock(r,[0,0],[2,2]),u*u>=4*c?(_=.5*(u+Math.sqrt(u*u-4*c)),z=.5*(u-Math.sqrt(u*u-4*c)),l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,_+z)),numeric.diag(numeric.rep([3],_*z)))):l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,u)),numeric.diag(numeric.rep([3],c))),e=[l[0][0],l[1][0],l[2][0]],t=numeric.house(e),f=[r[0],r[1],r[2]],d=numeric.tensor(t,numeric.dot(t,f)),M=0;M<3;M++)for(m=r[M],p=d[M],x=0;x<y;x++)m[x]-=2*p[x];for(f=numeric.getBlock(r,[0,0],[y-1,2]),d=numeric.tensor(numeric.dot(f,t),t),M=0;M<y;M++)for(m=r[M],p=d[M],x=0;x<3;x++)m[x]-=2*p[x];for(f=[b[0],b[1],b[2]],d=numeric.tensor(t,numeric.dot(t,f)),M=0;M<3;M++)for(h=b[M],p=d[M],x=0;x<y;x++)h[x]-=2*p[x];for(g=0;g<y-2;g++){for(x=g;x<=g+1;x++)if(Math.abs(r[x+1][x])<T*(Math.abs(r[x][x])+Math.abs(r[x+1][x+1]))){for(w=numeric.QRFrancis(numeric.getBlock(r,[0,0],[x,x]),n),A=numeric.QRFrancis(numeric.getBlock(r,[x+1,x+1],[y-1,y-1]),n),f=Array(x+1),M=0;M<=x;M++)f[M]=b[M];for(d=numeric.dot(w.Q,f),M=0;M<=x;M++)b[M]=d[M];for(f=Array(y-x-1),M=x+1;M<y;M++)f[M-x-1]=b[M];for(d=numeric.dot(A.Q,f),M=x+1;M<y;M++)b[M]=d[M-x-1];return{Q:b,B:w.B.concat(numeric.add(A.B,x+1))}}for(S=Math.min(y-1,g+3),e=Array(S-g),M=g+1;M<=S;M++)e[M-g-1]=r[M][g];for(t=numeric.house(e),f=numeric.getBlock(r,[g+1,g],[S,y-1]),d=numeric.tensor(t,numeric.dot(t,f)),M=g+1;M<=S;M++)for(m=r[M],p=d[M-g-1],x=g;x<y;x++)m[x]-=2*p[x-g];for(f=numeric.getBlock(r,[0,g+1],[y-1,S]),d=numeric.tensor(numeric.dot(f,t),t),M=0;M<y;M++)for(m=r[M],p=d[M],x=g+1;x<=S;x++)m[x]-=2*p[x-g-1];for(f=Array(S-g),M=g+1;M<=S;M++)f[M-g-1]=b[M];for(d=numeric.tensor(t,numeric.dot(t,f)),M=g+1;M<=S;M++)for(h=b[M],p=d[M-g-1],x=0;x<y;x++)h[x]-=2*p[x]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(r,n){var e,t,a,o,i,s,c,u,l,h,m,f,d,p,M,g,x=numeric.toUpperHessenberg(r),v=numeric.QRFrancis(x.H,n),y=numeric.T,b=r.length,T=v.B,w=numeric.dot(v.Q,numeric.dot(x.H,numeric.transpose(v.Q))),A=new y(numeric.dot(v.Q,x.Q)),_=T.length,z=Math.sqrt;for(t=0;t<_;t++)if((e=T[t][0])===T[t][1]);else{if(o=e+1,i=w[e][e],s=w[e][o],c=w[o][e],u=w[o][o],0===s&&0===c)continue;(h=(l=-i-u)*l-4*(i*u-s*c))>=0?((M=(i-(m=l<0?-.5*(l-z(h)):-.5*(l+z(h))))*(i-m)+s*s)>(g=c*c+(u-m)*(u-m))?(d=(i-m)/(M=z(M)),p=s/M):(d=c/(g=z(g)),p=(u-m)/g),a=new y([[p,-d],[d,p]]),A.setRows(e,o,a.dot(A.getRows(e,o)))):(m=-.5*l,f=.5*z(-h),(M=(i-m)*(i-m)+s*s)>(g=c*c+(u-m)*(u-m))?(d=(i-m)/(M=z(M+f*f)),p=s/M,m=0,f/=M):(d=c/(g=z(g+f*f)),p=(u-m)/g,m=f/g,f=0),a=new y([[p,-d],[d,p]],[[m,f],[f,-m]]),A.setRows(e,o,a.dot(A.getRows(e,o))))}var S=A.dot(r).dot(A.transjugate()),j=(b=r.length,numeric.T.identity(b));for(o=0;o<b;o++)if(o>0)for(t=o-1;t>=0;t--){var I=S.get([t,t]),k=S.get([o,o]);numeric.neq(I.x,k.x)||numeric.neq(I.y,k.y)?(m=S.getRow(t).getBlock([t],[o-1]),f=j.getRow(o).getBlock([t],[o-1]),j.set([o,t],S.get([t,o]).neg().sub(m.dot(f)).div(I.sub(k)))):j.setRow(o,j.getRow(t))}for(o=0;o<b;o++)m=j.getRow(o),j.setRow(o,m.div(m.norm2()));return j=j.transpose(),j=A.transjugate().dot(j),{lambda:S.getDiag(),E:j}},numeric.ccsSparse=function(r){var n,e,t,a=r.length,o=[];for(e=a-1;-1!==e;--e)for(t in n=r[e]){for(t=parseInt(t);t>=o.length;)o[o.length]=0;0!==n[t]&&o[t]++}var i=o.length,s=Array(i+1);for(s[0]=0,e=0;e<i;++e)s[e+1]=s[e]+o[e];var c=Array(s[i]),u=Array(s[i]);for(e=a-1;-1!==e;--e)for(t in n=r[e])0!==n[t]&&(o[t]--,c[s[t]+o[t]]=e,u[s[t]+o[t]]=n[t]);return[s,c,u]},numeric.ccsFull=function(r){var n,e,t,a,o=r[0],i=r[1],s=r[2],c=numeric.ccsDim(r),u=c[0],l=c[1],h=numeric.rep([u,l],0);for(n=0;n<l;n++)for(t=o[n],a=o[n+1],e=t;e<a;++e)h[i[e]][n]=s[e];return h},numeric.ccsTSolve=function(r,n,e,t,a){var o,i,s,c,u,l,h,m=r[0],f=r[1],d=r[2],p=m.length-1,M=Math.max,g=0;function x(r){var n;if(0===e[r]){for(e[r]=1,n=m[r];n<m[r+1];++n)x(f[n]);a[g]=r,++g}}for(void 0===t&&(e=numeric.rep([p],0)),void 0===t&&(t=numeric.linspace(0,e.length-1)),void 0===a&&(a=[]),o=t.length-1;-1!==o;--o)x(t[o]);for(a.length=g,o=a.length-1;-1!==o;--o)e[a[o]]=0;for(o=t.length-1;-1!==o;--o)i=t[o],e[i]=n[i];for(o=a.length-1;-1!==o;--o){for(i=a[o],s=m[i],c=M(m[i+1],s),u=s;u!==c;++u)if(f[u]===i){e[i]/=d[u];break}for(h=e[i],u=s;u!==c;++u)(l=f[u])!==i&&(e[l]-=h*d[u])}return e},numeric.ccsDFS=function(r){this.k=Array(r),this.k1=Array(r),this.j=Array(r)},numeric.ccsDFS.prototype.dfs=function(r,n,e,t,a,o){var i,s,c,u=0,l=a.length,h=this.k,m=this.k1,f=this.j;if(0===t[r])for(t[r]=1,f[0]=r,h[0]=s=n[r],m[0]=c=n[r+1];;)if(s>=c){if(a[l]=f[u],0===u)return;++l,s=h[--u],c=m[u]}else 0===t[i=o[e[s]]]?(t[i]=1,h[u]=s,f[++u]=i,s=n[i],m[u]=c=n[i+1]):++s},numeric.ccsLPSolve=function(r,n,e,t,a,o,i){var s,c,u,l,h,m,f,d,p,M=r[0],g=r[1],x=r[2],v=(M.length,n[0]),y=n[1],b=n[2];for(c=v[a],u=v[a+1],t.length=0,s=c;s<u;++s)i.dfs(o[y[s]],M,g,e,t,o);for(s=t.length-1;-1!==s;--s)e[t[s]]=0;for(s=c;s!==u;++s)e[l=o[y[s]]]=b[s];for(s=t.length-1;-1!==s;--s){for(h=M[l=t[s]],m=M[l+1],f=h;f<m;++f)if(o[g[f]]===l){e[l]/=x[f];break}for(p=e[l],f=h;f<m;++f)(d=o[g[f]])!==l&&(e[d]-=p*x[f])}return e},numeric.ccsLUP1=function(r,n){var e,t,a,o,i,s,c,u=r[0].length-1,l=[numeric.rep([u+1],0),[],[]],h=[numeric.rep([u+1],0),[],[]],m=l[0],f=l[1],d=l[2],p=h[0],M=h[1],g=h[2],x=numeric.rep([u],0),v=numeric.rep([u],0),y=numeric.ccsLPSolve,b=(Math.max,Math.abs),T=numeric.linspace(0,u-1),w=numeric.linspace(0,u-1),A=new numeric.ccsDFS(u);for(void 0===n&&(n=1),e=0;e<u;++e){for(y(l,r,x,v,e,w,A),o=-1,i=-1,t=v.length-1;-1!==t;--t)(a=v[t])<=e||(s=b(x[a]))>o&&(i=a,o=s);for(b(x[e])<n*o&&(t=T[e],o=T[i],T[e]=o,w[o]=e,T[i]=t,w[t]=i,o=x[e],x[e]=x[i],x[i]=o),o=m[e],i=p[e],c=x[e],f[o]=T[e],d[o]=1,++o,t=v.length-1;-1!==t;--t)s=x[a=v[t]],v[t]=0,x[a]=0,a<=e?(M[i]=a,g[i]=s,++i):(f[o]=T[a],d[o]=s/c,++o);m[e+1]=o,p[e+1]=i}for(t=f.length-1;-1!==t;--t)f[t]=w[f[t]];return{L:l,U:h,P:T,Pinv:w}},numeric.ccsDFS0=function(r){this.k=Array(r),this.k1=Array(r),this.j=Array(r)},numeric.ccsDFS0.prototype.dfs=function(r,n,e,t,a,o,i){var s,c,u,l=0,h=a.length,m=this.k,f=this.k1,d=this.j;if(0===t[r])for(t[r]=1,d[0]=r,m[0]=c=n[o[r]],f[0]=u=n[o[r]+1];;){if(isNaN(c))throw new Error("Ow!");if(c>=u){if(a[h]=o[d[l]],0===l)return;++h,c=m[--l],u=f[l]}else 0===t[s=e[c]]?(t[s]=1,m[l]=c,d[++l]=s,c=n[s=o[s]],f[l]=u=n[s+1]):++c}},numeric.ccsLPSolve0=function(r,n,e,t,a,o,i,s){var c,u,l,h,m,f,d,p,M,g=r[0],x=r[1],v=r[2],y=(g.length,n[0]),b=n[1],T=n[2];for(u=y[a],l=y[a+1],t.length=0,c=u;c<l;++c)s.dfs(b[c],g,x,e,t,o,i);for(c=t.length-1;-1!==c;--c)e[i[h=t[c]]]=0;for(c=u;c!==l;++c)e[h=b[c]]=T[c];for(c=t.length-1;-1!==c;--c){for(p=i[h=t[c]],m=g[h],f=g[h+1],d=m;d<f;++d)if(x[d]===p){e[p]/=v[d];break}for(M=e[p],d=m;d<f;++d)e[x[d]]-=M*v[d];e[p]=M}},numeric.ccsLUP0=function(r,n){var e,t,a,o,i,s,c,u=r[0].length-1,l=[numeric.rep([u+1],0),[],[]],h=[numeric.rep([u+1],0),[],[]],m=l[0],f=l[1],d=l[2],p=h[0],M=h[1],g=h[2],x=numeric.rep([u],0),v=numeric.rep([u],0),y=numeric.ccsLPSolve0,b=(Math.max,Math.abs),T=numeric.linspace(0,u-1),w=numeric.linspace(0,u-1),A=new numeric.ccsDFS0(u);for(void 0===n&&(n=1),e=0;e<u;++e){for(y(l,r,x,v,e,w,T,A),o=-1,i=-1,t=v.length-1;-1!==t;--t)(a=v[t])<=e||(s=b(x[T[a]]))>o&&(i=a,o=s);for(b(x[T[e]])<n*o&&(t=T[e],o=T[i],T[e]=o,w[o]=e,T[i]=t,w[t]=i),o=m[e],i=p[e],c=x[T[e]],f[o]=T[e],d[o]=1,++o,t=v.length-1;-1!==t;--t)s=x[T[a=v[t]]],v[t]=0,x[T[a]]=0,a<=e?(M[i]=a,g[i]=s,++i):(f[o]=T[a],d[o]=s/c,++o);m[e+1]=o,p[e+1]=i}for(t=f.length-1;-1!==t;--t)f[t]=w[f[t]];return{L:l,U:h,P:T,Pinv:w}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(r){return[numeric.sup(r[1])+1,r[0].length-1]},numeric.ccsGetBlock=function(r,n,e){var t=numeric.ccsDim(r),a=t[0],o=t[1];void 0===n?n=numeric.linspace(0,a-1):"number"==typeof n&&(n=[n]),void 0===e?e=numeric.linspace(0,o-1):"number"==typeof e&&(e=[e]);var i,s,c,u,l=n.length,h=e.length,m=numeric.rep([o],0),f=[],d=[],p=[m,f,d],M=r[0],g=r[1],x=r[2],v=numeric.rep([a],0),y=0,b=numeric.rep([a],0);for(s=0;s<h;++s){var T=M[u=e[s]],w=M[u+1];for(i=T;i<w;++i)b[c=g[i]]=1,v[c]=x[i];for(i=0;i<l;++i)b[n[i]]&&(f[y]=i,d[y]=v[n[i]],++y);for(i=T;i<w;++i)b[c=g[i]]=0;m[s+1]=y}return p},numeric.ccsDot=function(r,n){var e,t,a,o,i,s,c,u,l,h,m,f=r[0],d=r[1],p=r[2],M=n[0],g=n[1],x=n[2],v=numeric.ccsDim(r),y=numeric.ccsDim(n),b=v[0],T=(v[1],y[1]),w=numeric.rep([b],0),A=numeric.rep([b],0),_=Array(b),z=numeric.rep([T],0),S=[],j=[],I=[z,S,j];for(a=0;a!==T;++a){for(o=M[a],i=M[a+1],l=0,t=o;t<i;++t)for(h=g[t],m=x[t],s=f[h],c=f[h+1],e=s;e<c;++e)0===A[u=d[e]]&&(_[l]=u,A[u]=1,l+=1),w[u]=w[u]+p[e]*m;for(i=(o=z[a])+l,z[a+1]=i,t=l-1;-1!==t;--t)m=o+t,e=_[t],S[m]=e,j[m]=w[e],A[e]=0,w[e]=0;z[a+1]=z[a]+l}return I},numeric.ccsLUPSolve=function(r,n){var e=r.L,t=r.U,a=(r.P,n[0]),o=!1;"object"!=typeof a&&(a=(n=[[0,n.length],numeric.linspace(0,n.length-1),n])[0],o=!0);var i,s,c,u,l,h,m=n[1],f=n[2],d=e[0].length-1,p=a.length-1,M=numeric.rep([d],0),g=Array(d),x=numeric.rep([d],0),v=Array(d),y=numeric.rep([p+1],0),b=[],T=[],w=numeric.ccsTSolve,A=0;for(i=0;i<p;++i){for(l=0,c=a[i],u=a[i+1],s=c;s<u;++s)h=r.Pinv[m[s]],v[l]=h,x[h]=f[s],++l;for(v.length=l,w(e,x,M,v,g),s=v.length-1;-1!==s;--s)x[v[s]]=0;if(w(t,M,x,g,v),o)return x;for(s=g.length-1;-1!==s;--s)M[g[s]]=0;for(s=v.length-1;-1!==s;--s)h=v[s],b[A]=h,T[A]=x[h],x[h]=0,++A;y[i+1]=A}return[y,b,T]},numeric.ccsbinop=function(r,n){return void 0===n&&(n=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+n+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+r+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(r){var n,e=r[0],t=r[1],a=r[2],o=numeric.sup(t)+1,i=e.length,s=numeric.rep([o],0),c=Array(i),u=Array(i),l=numeric.rep([o],0);for(n=0;n<i;++n)l[t[n]]++;for(n=0;n<o;++n)s[n+1]=s[n]+l[n];var h,m,f=s.slice(0);for(n=0;n<i;++n)c[h=f[m=t[n]]]=e[n],u[h]=a[n],f[m]=f[m]+1;return[s,c,u]},numeric.ccsGather=function(r){var n,e,t,a,o,i=r[0],s=r[1],c=r[2],u=i.length-1,l=s.length,h=Array(l),m=Array(l),f=Array(l);for(o=0,n=0;n<u;++n)for(t=i[n],a=i[n+1],e=t;e!==a;++e)m[o]=n,h[o]=s[e],f[o]=c[e],++o;return[h,m,f]},numeric.sdim=function r(n,e,t){if(void 0===e&&(e=[]),"object"!=typeof n)return e;var a;for(a in void 0===t&&(t=0),t in e||(e[t]=0),n.length>e[t]&&(e[t]=n.length),n)n.hasOwnProperty(a)&&r(n[a],e,t+1);return e},numeric.sclone=function r(n,e,t){void 0===e&&(e=0),void 0===t&&(t=numeric.sdim(n).length);var a,o=Array(n.length);if(e===t-1){for(a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);return o}for(a in n)n.hasOwnProperty(a)&&(o[a]=r(n[a],e+1,t));return o},numeric.sdiag=function(r){var n,e,t=r.length,a=Array(t);for(n=t-1;n>=1;n-=2)e=n-1,a[n]=[],a[n][n]=r[n],a[e]=[],a[e][e]=r[e];return 0===n&&(a[0]=[],a[0][0]=r[n]),a},numeric.sidentity=function(r){return numeric.sdiag(numeric.rep([r],1))},numeric.stranspose=function(r){var n,e,t,a=[];for(n in r.length,r)if(r.hasOwnProperty(n))for(e in t=r[n])t.hasOwnProperty(e)&&("object"!=typeof a[e]&&(a[e]=[]),a[e][n]=t[e]);return a},numeric.sLUP=function(r,n){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(r,n){var e,t,a,o,i,s,c,u=r.length,l=(n.length,numeric.stranspose(n)),h=l.length,m=Array(u);for(a=u-1;a>=0;a--){for(c=[],e=r[a],i=h-1;i>=0;i--){for(o in s=0,t=l[i],e)e.hasOwnProperty(o)&&o in t&&(s+=e[o]*t[o]);s&&(c[i]=s)}m[a]=c}return m},numeric.sdotMV=function(r,n){var e,t,a,o,i=r.length,s=Array(i);for(t=i-1;t>=0;t--){for(a in o=0,e=r[t])e.hasOwnProperty(a)&&n[a]&&(o+=e[a]*n[a]);o&&(s[t]=o)}return s},numeric.sdotVM=function(r,n){var e,t,a,o,i=[];for(e in r)if(r.hasOwnProperty(e))for(t in a=n[e],o=r[e],a)a.hasOwnProperty(t)&&(i[t]||(i[t]=0),i[t]+=o*a[t]);return i},numeric.sdotVV=function(r,n){var e,t=0;for(e in r)r[e]&&n[e]&&(t+=r[e]*n[e]);return t},numeric.sdot=function(r,n){var e=numeric.sdim(r).length,t=numeric.sdim(n).length;switch(1e3*e+t){case 0:return r*n;case 1001:return numeric.sdotVV(r,n);case 2001:return numeric.sdotMV(r,n);case 1002:return numeric.sdotVM(r,n);case 2002:return numeric.sdotMM(r,n);default:throw new Error("numeric.sdot not implemented for tensors of order "+e+" and "+t)}},numeric.sscatter=function(r){var n,e,t,a,o=r[0].length,i=r.length,s=[];for(e=o-1;e>=0;--e)if(r[i-1][e]){for(a=s,t=0;t<i-2;t++)a[n=r[t][e]]||(a[n]=[]),a=a[n];a[r[t][e]]=r[t+1][e]}return s},numeric.sgather=function r(n,e,t){var a,o,i;for(o in void 0===e&&(e=[]),void 0===t&&(t=[]),a=t.length,n)if(n.hasOwnProperty(o))if(t[a]=parseInt(o),"number"==typeof(i=n[o])){if(i){if(0===e.length)for(o=a+1;o>=0;--o)e[o]=[];for(o=a;o>=0;--o)e[o].push(t[o]);e[a+1].push(i)}}else r(i,e,t);return t.length>a&&t.pop(),e},numeric.cLU=function(r){var n,e,t,a,o,i,s=r[0],c=r[1],u=r[2],l=s.length,h=0;for(n=0;n<l;n++)s[n]>h&&(h=s[n]);h++;var m,f=Array(h),d=Array(h),p=numeric.rep([h],1/0),M=numeric.rep([h],-1/0);for(t=0;t<l;t++)n=s[t],(e=c[t])<p[n]&&(p[n]=e),e>M[n]&&(M[n]=e);for(n=0;n<h-1;n++)M[n]>M[n+1]&&(M[n+1]=M[n]);for(n=h-1;n>=1;n--)p[n]<p[n-1]&&(p[n-1]=p[n]);for(n=0;n<h;n++)d[n]=numeric.rep([M[n]-p[n]+1],0),f[n]=numeric.rep([n-p[n]],0),p[n],M[n];for(t=0;t<l;t++)d[n=s[t]][c[t]-p[n]]=u[t];for(n=0;n<h-1;n++)for(a=n-p[n],v=d[n],e=n+1;p[e]<=n&&e<h;e++)if(o=n-p[e],i=M[n]-n,m=(y=d[e])[o]/v[a]){for(t=1;t<=i;t++)y[t+o]-=m*v[t+a];f[e][n-p[e]]=m}var g,x,v=[],y=[],b=[],T=[],w=[],A=[];for(l=0,g=0,n=0;n<h;n++){for(a=p[n],o=M[n],x=d[n],e=n;e<=o;e++)x[e-a]&&(v[l]=n,y[l]=e,b[l]=x[e-a],l++);for(x=f[n],e=a;e<n;e++)x[e-a]&&(T[g]=n,w[g]=e,A[g]=x[e-a],g++);T[g]=n,w[g]=n,A[g]=1,g++}return{U:[v,y,b],L:[T,w,A]}},numeric.cLUsolve=function(r,n){var e,t,a=r.L,o=r.U,i=numeric.clone(n),s=a[0],c=a[1],u=a[2],l=o[0],h=o[1],m=o[2],f=l.length,d=(s.length,i.length);for(t=0,e=0;e<d;e++){for(;c[t]<e;)i[e]-=u[t]*i[c[t]],t++;t++}for(t=f-1,e=d-1;e>=0;e--){for(;h[t]>e;)i[e]-=m[t]*i[h[t]],t--;i[e]/=m[t],t--}return i},numeric.cgrid=function(r,n){"number"==typeof r&&(r=[r,r]);var e,t,a,o=numeric.rep(r,-1);for("function"!=typeof n&&(n="L"===n?function(n,e){return n>=r[0]/2||e<r[1]/2}:function(r,n){return!0}),a=0,e=1;e<r[0]-1;e++)for(t=1;t<r[1]-1;t++)n(e,t)&&(o[e][t]=a,a++);return o},numeric.cdelsq=function(r){var n,e,t,a,o,i=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(r),c=s[0],u=s[1],l=[],h=[],m=[];for(n=1;n<c-1;n++)for(e=1;e<u-1;e++)if(!(r[n][e]<0)){for(t=0;t<4;t++)a=n+i[t][0],o=e+i[t][1],r[a][o]<0||(l.push(r[n][e]),h.push(r[a][o]),m.push(-1));l.push(r[n][e]),h.push(r[n][e]),m.push(4)}return[l,h,m]},numeric.cdotMV=function(r,n){var e,t,a,o=r[0],i=r[1],s=r[2],c=o.length;for(a=0,t=0;t<c;t++)o[t]>a&&(a=o[t]);for(a++,e=numeric.rep([a],0),t=0;t<c;t++)e[o[t]]+=s[t]*n[i[t]];return e},numeric.Spline=function(r,n,e,t,a){this.x=r,this.yl=n,this.yr=e,this.kl=t,this.kr=a},numeric.Spline.prototype._at=function(r,n){var e,t,a,o=this.x,i=this.yl,s=this.yr,c=this.kl,u=this.kr,l=numeric.add,h=numeric.sub,m=numeric.mul;e=h(m(c[n],o[n+1]-o[n]),h(s[n+1],i[n])),t=l(m(u[n+1],o[n]-o[n+1]),h(s[n+1],i[n]));var f=(a=(r-o[n])/(o[n+1]-o[n]))*(1-a);return l(l(l(m(1-a,i[n]),m(a,s[n+1])),m(e,f*(1-a))),m(t,f*a))},numeric.Spline.prototype.at=function(r){if("number"==typeof r){var n,e,t,a=this.x,o=a.length,i=Math.floor;for(n=0,e=o-1;e-n>1;)a[t=i((n+e)/2)]<=r?n=t:e=t;return this._at(r,n)}o=r.length;var s,c=Array(o);for(s=o-1;-1!==s;--s)c[s]=this.at(r[s]);return c},numeric.Spline.prototype.diff=function(){var r,n,e,t=this.x,a=this.yl,o=this.yr,i=this.kl,s=this.kr,c=a.length,u=i,l=s,h=Array(c),m=Array(c),f=numeric.add,d=numeric.mul,p=numeric.div,M=numeric.sub;for(r=c-1;-1!==r;--r)n=t[r+1]-t[r],e=M(o[r+1],a[r]),h[r]=p(f(d(e,6),d(i[r],-4*n),d(s[r+1],-2*n)),n*n),m[r+1]=p(f(d(e,-6),d(i[r],2*n),d(s[r+1],4*n)),n*n);return new numeric.Spline(t,u,l,h,m)},numeric.Spline.prototype.roots=function(){function r(r){return r*r}var n=[],e=this.x,t=this.yl,a=this.yr,o=this.kl,i=this.kr;"number"==typeof t[0]&&(t=[t],a=[a],o=[o],i=[i]);var s,c,u,l,h,m,f,d,p,M,g,x,v,y,b,T,w,A,_,z,S,j,I,k=t.length,P=e.length-1,q=(n=Array(k),Math.sqrt);for(s=0;s!==k;++s){for(l=t[s],h=a[s],m=o[s],f=i[s],d=[],c=0;c!==P;c++){for(c>0&&h[c]*l[c]<0&&d.push(e[c]),T=e[c+1]-e[c],e[c],g=l[c],x=h[c+1],p=m[c]/T,v=(M=f[c+1]/T)+3*g+2*p-3*x,y=3*(M+p+2*(g-x)),(b=r(p-M+3*(g-x))+12*M*g)<=0?w=(A=v/y)>e[c]&&A<e[c+1]?[e[c],A,e[c+1]]:[e[c],e[c+1]]:(A=(v-q(b))/y,_=(v+q(b))/y,w=[e[c]],A>e[c]&&A<e[c+1]&&w.push(A),_>e[c]&&_<e[c+1]&&w.push(_),w.push(e[c+1])),S=w[0],A=this._at(S,c),u=0;u<w.length-1;u++)if(j=w[u+1],_=this._at(j,c),0!==A)if(0===_||A*_>0)S=j,A=_;else{for(var L=0;!((I=(A*j-_*S)/(A-_))<=S||I>=j);)if((z=this._at(I,c))*_>0)j=I,_=z,-1===L&&(A*=.5),L=-1;else{if(!(z*A>0))break;S=I,A=z,1===L&&(_*=.5),L=1}d.push(I),S=w[u+1],A=this._at(S,c)}else d.push(S),S=j,A=_;0===_&&d.push(j)}n[s]=d}return"number"==typeof this.yl[0]?n[0]:n},numeric.spline=function(r,n,e,t){var a,o=r.length,i=[],s=[],c=[],u=numeric.sub,l=numeric.mul,h=numeric.add;for(a=o-2;a>=0;a--)s[a]=r[a+1]-r[a],c[a]=u(n[a+1],n[a]);"string"!=typeof e&&"string"!=typeof t||(e=t="periodic");var m=[[],[],[]];switch(typeof e){case"undefined":i[0]=l(3/(s[0]*s[0]),c[0]),m[0].push(0,0),m[1].push(0,1),m[2].push(2/s[0],1/s[0]);break;case"string":i[0]=h(l(3/(s[o-2]*s[o-2]),c[o-2]),l(3/(s[0]*s[0]),c[0])),m[0].push(0,0,0),m[1].push(o-2,0,1),m[2].push(1/s[o-2],2/s[o-2]+2/s[0],1/s[0]);break;default:i[0]=e,m[0].push(0),m[1].push(0),m[2].push(1)}for(a=1;a<o-1;a++)i[a]=h(l(3/(s[a-1]*s[a-1]),c[a-1]),l(3/(s[a]*s[a]),c[a])),m[0].push(a,a,a),m[1].push(a-1,a,a+1),m[2].push(1/s[a-1],2/s[a-1]+2/s[a],1/s[a]);switch(typeof t){case"undefined":i[o-1]=l(3/(s[o-2]*s[o-2]),c[o-2]),m[0].push(o-1,o-1),m[1].push(o-2,o-1),m[2].push(1/s[o-2],2/s[o-2]);break;case"string":m[1][m[1].length-1]=0;break;default:i[o-1]=t,m[0].push(o-1),m[1].push(o-1),m[2].push(1)}i="number"!=typeof i[0]?numeric.transpose(i):[i];var f=Array(i.length);if("string"==typeof e)for(a=f.length-1;-1!==a;--a)f[a]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(m)),i[a]),f[a][o-1]=f[a][0];else for(a=f.length-1;-1!==a;--a)f[a]=numeric.cLUsolve(numeric.cLU(m),i[a]);return f="number"==typeof n[0]?f[0]:numeric.transpose(f),new numeric.Spline(r,n,n,f,f)},numeric.fftpow2=function r(n,e){var t=n.length;if(1!==t){var a,o,i=Math.cos,s=Math.sin,c=Array(t/2),u=Array(t/2),l=Array(t/2),h=Array(t/2);for(o=t/2,a=t-1;-1!==a;--a)l[--o]=n[a],h[o]=e[a],--a,c[o]=n[a],u[o]=e[a];r(c,u),r(l,h),o=t/2;var m,f,d,p=-6.283185307179586/t;for(a=t-1;-1!==a;--a)-1==--o&&(o=t/2-1),f=i(m=p*a),d=s(m),n[a]=c[o]+f*l[o]-d*h[o],e[a]=u[o]+f*h[o]+d*l[o]}},numeric._ifftpow2=function r(n,e){var t=n.length;if(1!==t){var a,o,i=Math.cos,s=Math.sin,c=Array(t/2),u=Array(t/2),l=Array(t/2),h=Array(t/2);for(o=t/2,a=t-1;-1!==a;--a)l[--o]=n[a],h[o]=e[a],--a,c[o]=n[a],u[o]=e[a];r(c,u),r(l,h),o=t/2;var m,f,d,p=6.283185307179586/t;for(a=t-1;-1!==a;--a)-1==--o&&(o=t/2-1),f=i(m=p*a),d=s(m),n[a]=c[o]+f*l[o]-d*h[o],e[a]=u[o]+f*h[o]+d*l[o]}},numeric.ifftpow2=function(r,n){numeric._ifftpow2(r,n),numeric.diveq(r,r.length),numeric.diveq(n,n.length)},numeric.convpow2=function(r,n,e,t){var a,o,i,s,c;for(numeric.fftpow2(r,n),numeric.fftpow2(e,t),a=r.length-1;-1!==a;--a)o=r[a],s=n[a],i=e[a],c=t[a],r[a]=o*i-s*c,n[a]=o*c+s*i;numeric.ifftpow2(r,n)},numeric.T.prototype.fft=function(){var r,n,e=this.x,t=this.y,a=e.length,o=Math.log,i=o(2),s=Math.ceil(o(2*a-1)/i),c=Math.pow(2,s),u=numeric.rep([c],0),l=numeric.rep([c],0),h=Math.cos,m=Math.sin,f=-3.141592653589793/a,d=numeric.rep([c],0),p=numeric.rep([c],0);for(Math.floor(a/2),r=0;r<a;r++)d[r]=e[r];if(void 0!==t)for(r=0;r<a;r++)p[r]=t[r];for(u[0]=1,r=1;r<=c/2;r++)n=f*r*r,u[r]=h(n),l[r]=m(n),u[c-r]=h(n),l[c-r]=m(n);var M=new numeric.T(d,p),g=new numeric.T(u,l);return M=M.mul(g),numeric.convpow2(M.x,M.y,numeric.clone(g.x),numeric.neg(g.y)),(M=M.mul(g)).x.length=a,M.y.length=a,M},numeric.T.prototype.ifft=function(){var r,n,e=this.x,t=this.y,a=e.length,o=Math.log,i=o(2),s=Math.ceil(o(2*a-1)/i),c=Math.pow(2,s),u=numeric.rep([c],0),l=numeric.rep([c],0),h=Math.cos,m=Math.sin,f=3.141592653589793/a,d=numeric.rep([c],0),p=numeric.rep([c],0);for(Math.floor(a/2),r=0;r<a;r++)d[r]=e[r];if(void 0!==t)for(r=0;r<a;r++)p[r]=t[r];for(u[0]=1,r=1;r<=c/2;r++)n=f*r*r,u[r]=h(n),l[r]=m(n),u[c-r]=h(n),l[c-r]=m(n);var M=new numeric.T(d,p),g=new numeric.T(u,l);return M=M.mul(g),numeric.convpow2(M.x,M.y,numeric.clone(g.x),numeric.neg(g.y)),(M=M.mul(g)).x.length=a,M.y.length=a,M.div(a)},numeric.gradient=function(r,n){var e=n.length,t=r(n);if(isNaN(t))throw new Error("gradient: f(x) is a NaN!");var a,o,i,s,c,u,l,h,m,f=Math.max,d=numeric.clone(n),p=Array(e),M=(numeric.div,numeric.sub,f=Math.max,Math.abs),g=Math.min,x=0;for(a=0;a<e;a++)for(var v=f(1e-6*t,1e-8);;){if(++x>20)throw new Error("Numerical gradient fails");if(d[a]=n[a]+v,o=r(d),d[a]=n[a]-v,i=r(d),d[a]=n[a],isNaN(o)||isNaN(i))v/=16;else{if(p[a]=(o-i)/(2*v),s=n[a]-v,c=n[a],u=n[a]+v,l=(o-t)/v,h=(t-i)/v,m=f(M(p[a]),M(t),M(o),M(i),M(s),M(c),M(u),1e-8),!(g(f(M(l-p[a]),M(h-p[a]),M(l-h))/m,v/m)>.001))break;v/=16}}return p},numeric.uncmin=function(r,n,e,t,a,o,i){var s=numeric.gradient;void 0===i&&(i={}),void 0===e&&(e=1e-8),void 0===t&&(t=function(n){return s(r,n)}),void 0===a&&(a=1e3);var c,u,l=(n=numeric.clone(n)).length,h=r(n);if(isNaN(h))throw new Error("uncmin: f(x0) is a NaN!");var m=Math.max,f=numeric.norm2;e=m(e,numeric.epsilon);var d,p,M,g,x,v,y,b,T,w,A=i.Hinv||numeric.identity(l),_=numeric.dot,z=(numeric.inv,numeric.sub),S=numeric.add,j=numeric.tensor,I=numeric.div,k=numeric.mul,P=numeric.all,q=numeric.isFinite,L=numeric.neg,D=0,C="";for(p=t(n);D<a;){if("function"==typeof o&&o(D,n,h,p,A)){C="Callback returned true";break}if(!P(q(p))){C="Gradient has Infinity or NaN";break}if(!P(q(d=L(_(A,p))))){C="Search direction has Infinity or NaN";break}if((w=f(d))<e){C="Newton step smaller than tol";break}for(T=1,u=_(p,d),x=n;D<a&&!(T*w<e)&&(x=S(n,g=k(d,T)),(c=r(x))-h>=.1*T*u||isNaN(c));)T*=.5,++D;if(T*w<e){C="Line search step size smaller than tol";break}if(D===a){C="maxit reached during line search";break}b=_(v=z(M=t(x),p),g),y=_(A,v),A=z(S(A,k((b+_(v,y))/(b*b),j(g,g))),I(S(j(y,g),j(g,y)),b)),n=x,h=c,p=M,++D}return{solution:n,f:h,gradient:p,invHessian:A,iterations:D,message:C}},numeric.Dopri=function(r,n,e,t,a,o,i){this.x=r,this.y=n,this.f=e,this.ymid=t,this.iterations=a,this.events=i,this.message=o},numeric.Dopri.prototype._at=function(r,n){function e(r){return r*r}var t,a,o,i,s,c,u,l,h,m=this,f=m.x,d=m.y,p=m.f,M=m.ymid,g=(f.length,Math.floor,numeric.add),x=numeric.mul,v=numeric.sub;return t=f[n],a=f[n+1],i=d[n],s=d[n+1],o=t+.5*(a-t),c=M[n],u=v(p[n],x(i,1/(t-o)+2/(t-a))),l=v(p[n+1],x(s,1/(a-o)+2/(a-t))),g(g(g(g(x(i,(h=[e(r-a)*(r-o)/e(t-a)/(t-o),e(r-t)*e(r-a)/e(t-o)/e(a-o),e(r-t)*(r-o)/e(a-t)/(a-o),(r-t)*e(r-a)*(r-o)/e(t-a)/(t-o),(r-a)*e(r-t)*(r-o)/e(t-a)/(a-o)])[0]),x(c,h[1])),x(s,h[2])),x(u,h[3])),x(l,h[4]))},numeric.Dopri.prototype.at=function(r){var n,e,t,a=Math.floor;if("number"!=typeof r){var o=r.length,i=Array(o);for(n=o-1;-1!==n;--n)i[n]=this.at(r[n]);return i}var s=this.x;for(n=0,e=s.length-1;e-n>1;)s[t=a(.5*(n+e))]<=r?n=t:e=t;return this._at(r,n)},numeric.dopri=function(r,n,e,t,a,o,i){void 0===a&&(a=1e-6),void 0===o&&(o=1e3);var s,c,u,l,h,m,f,d,p,M,g,x,v,y=[r],b=[e],T=[t(r,e)],w=[],A=[3/40,9/40],_=[44/45,-56/15,32/9],z=[19372/6561,-25360/2187,64448/6561,-212/729],S=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],j=[35/384,0,500/1113,125/192,-2187/6784,11/84],I=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,5618549.5/235043384],k=[.2,.3,.8,8/9,1,1],P=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40],q=0,L=(n-r)/10,D=0,C=numeric.add,E=numeric.mul,N=(Math.max,Math.min),R=Math.abs,O=numeric.norminf,U=Math.pow,F=numeric.any,J=numeric.lt,G=numeric.and,V=(numeric.sub,new numeric.Dopri(y,b,T,w,-1,""));for("function"==typeof i&&(g=i(r,e));r<n&&D<o;)if(++D,r+L>n&&(L=n-r),s=t(r+k[0]*L,C(e,E(.2*L,T[q]))),c=t(r+k[1]*L,C(C(e,E(A[0]*L,T[q])),E(A[1]*L,s))),u=t(r+k[2]*L,C(C(C(e,E(_[0]*L,T[q])),E(_[1]*L,s)),E(_[2]*L,c))),l=t(r+k[3]*L,C(C(C(C(e,E(z[0]*L,T[q])),E(z[1]*L,s)),E(z[2]*L,c)),E(z[3]*L,u))),h=t(r+k[4]*L,C(C(C(C(C(e,E(S[0]*L,T[q])),E(S[1]*L,s)),E(S[2]*L,c)),E(S[3]*L,u)),E(S[4]*L,l))),m=t(r+L,p=C(C(C(C(C(e,E(T[q],L*j[0])),E(c,L*j[2])),E(u,L*j[3])),E(l,L*j[4])),E(h,L*j[5]))),(M="number"==typeof(f=C(C(C(C(C(E(T[q],L*P[0]),E(c,L*P[2])),E(u,L*P[3])),E(l,L*P[4])),E(h,L*P[5])),E(m,L*P[6])))?R(f):O(f))>a){if(r+(L=.2*L*U(a/M,.25))===r){V.msg="Step size became too small";break}}else{if(w[q]=C(C(C(C(C(C(e,E(T[q],L*I[0])),E(c,L*I[2])),E(u,L*I[3])),E(l,L*I[4])),E(h,L*I[5])),E(m,L*I[6])),y[++q]=r+L,b[q]=p,T[q]=m,"function"==typeof i){var Y,B,H=r,X=r+.5*L;if(x=i(X,w[q-1]),F(v=G(J(g,0),J(0,x)))||(H=X,g=x,x=i(X=r+L,p),v=G(J(g,0),J(0,x))),F(v)){for(var Q,Z,W=0,K=1,$=1;;){if("number"==typeof g)B=($*x*H-K*g*X)/($*x-K*g);else for(B=X,d=g.length-1;-1!==d;--d)g[d]<0&&x[d]>0&&(B=N(B,($*x[d]*H-K*g[d]*X)/($*x[d]-K*g[d])));if(B<=H||B>=X)break;Z=i(B,Y=V._at(B,q-1)),F(Q=G(J(g,0),J(0,Z)))?(X=B,x=Z,v=Q,$=1,-1===W?K*=.5:K=1,W=-1):(H=B,g=Z,K=1,1===W?$*=.5:$=1,W=1)}return p=V._at(.5*(r+B),q-1),V.f[q]=t(B,Y),V.x[q]=B,V.y[q]=Y,V.ymid[q-1]=p,V.events=v,V.iterations=D,V}}r+=L,e=p,g=x,L=N(.8*L*U(a/M,.25),4*L)}return V.iterations=D,V},numeric.LU=function(r,n){n=n||!1;var e,t,a,o,i,s,c,u,l,h=Math.abs,m=r.length,f=m-1,d=new Array(m);for(n||(r=numeric.clone(r)),a=0;a<m;++a){for(c=a,l=h((s=r[a])[a]),t=a+1;t<m;++t)l<(o=h(r[t][a]))&&(l=o,c=t);for(d[a]=c,c!=a&&(r[a]=r[c],r[c]=s,s=r[a]),i=s[a],e=a+1;e<m;++e)r[e][a]/=i;for(e=a+1;e<m;++e){for(u=r[e],t=a+1;t<f;++t)u[t]-=u[a]*s[t],u[++t]-=u[a]*s[t];t===f&&(u[t]-=u[a]*s[t])}}return{LU:r,P:d}},numeric.LUsolve=function(r,n){var e,t,a,o,i,s=r.LU,c=s.length,u=numeric.clone(n),l=r.P;for(e=c-1;-1!==e;--e)u[e]=n[e];for(e=0;e<c;++e)for(a=l[e],l[e]!==e&&(i=u[e],u[e]=u[a],u[a]=i),o=s[e],t=0;t<e;++t)u[e]-=u[t]*o[t];for(e=c-1;e>=0;--e){for(o=s[e],t=e+1;t<c;++t)u[e]-=u[t]*o[t];u[e]/=o[e]}return u},numeric.solve=function(r,n,e){return numeric.LUsolve(numeric.LU(r,e),n)},numeric.echelonize=function(r){var n,e,t,a,o,i,s,c,u=numeric.dim(r),l=u[0],h=u[1],m=numeric.identity(l),f=Array(l),d=Math.abs,p=numeric.diveq;for(r=numeric.clone(r),n=0;n<l;++n){for(t=0,o=r[n],i=m[n],e=1;e<h;++e)d(o[t])<d(o[e])&&(t=e);for(f[n]=t,p(i,o[t]),p(o,o[t]),e=0;e<l;++e)if(e!==n){for(c=(s=r[e])[t],a=h-1;-1!==a;--a)s[a]-=o[a]*c;for(s=m[e],a=l-1;-1!==a;--a)s[a]-=i[a]*c}}return{I:m,A:r,P:f}},numeric.__solveLP=function(r,n,e,t,a,o,i){var s,c,u,l,h=numeric.sum,m=(numeric.log,numeric.mul),f=numeric.sub,d=numeric.dot,p=numeric.div,M=numeric.add,g=r.length,x=e.length,v=!1,y=1,b=(numeric.transpose(n),numeric.svd,numeric.transpose),T=(numeric.leq,Math.sqrt),w=Math.abs,A=(numeric.muleq,numeric.norminf,numeric.any,Math.min),_=numeric.all,z=numeric.gt,S=Array(g),j=Array(x),I=(numeric.rep([x],1),numeric.solve),k=f(e,d(n,o)),P=d(r,r);for(u=0;u<a;++u){var q,L;for(q=x-1;-1!==q;--q)j[q]=p(n[q],k[q]);var D=b(j);for(q=g-1;-1!==q;--q)S[q]=h(D[q]);y=.25*w(P/d(r,S));var C=100*T(P/d(S,S));for((!isFinite(y)||y>C)&&(y=C),l=M(r,m(y,S)),c=d(D,j),q=g-1;-1!==q;--q)c[q][q]+=1;L=I(c,p(l,y),!0);var E=p(k,d(n,L)),N=1;for(q=x-1;-1!==q;--q)E[q]<0&&(N=A(N,-.999*E[q]));if(s=f(o,m(L,N)),!_(z(k=f(e,d(n,s)),0)))return{solution:o,message:"",iterations:u};if(o=s,y<t)return{solution:s,message:"",iterations:u};if(i){var R=d(r,l),O=d(n,l);for(v=!0,q=x-1;-1!==q;--q)if(R*O[q]<0){v=!1;break}}else v=!(o[g-1]>=0);if(v)return{solution:s,message:"Unbounded",iterations:u}}return{solution:o,message:"maximum iteration count exceeded",iterations:u}},numeric._solveLP=function(r,n,e,t,a){var o=r.length,i=e.length,s=(numeric.sum,numeric.log,numeric.mul,numeric.sub),c=numeric.dot,u=(numeric.div,numeric.add,numeric.rep([o],0).concat([1])),l=numeric.rep([i,1],-1),h=numeric.blockMatrix([[n,l]]),m=e,f=numeric.rep([o],0).concat(Math.max(0,numeric.sup(numeric.neg(e)))+1),d=numeric.__solveLP(u,h,m,t,a,f,!1),p=numeric.clone(d.solution);if(p.length=o,numeric.inf(s(e,c(n,p)))<0)return{solution:NaN,message:"Infeasible",iterations:d.iterations};var M=numeric.__solveLP(r,n,e,t,a-d.iterations,p,!0);return M.iterations+=d.iterations,M},numeric.solveLP=function(r,n,e,t,a,o,i){if(void 0===i&&(i=1e3),void 0===o&&(o=numeric.epsilon),void 0===t)return numeric._solveLP(r,n,e,o,i);var s,c=t.length,u=t[0].length,l=n.length,h=numeric.echelonize(t),m=numeric.rep([u],0),f=h.P,d=[];for(s=f.length-1;-1!==s;--s)m[f[s]]=1;for(s=u-1;-1!==s;--s)0===m[s]&&d.push(s);var p=numeric.getRange,M=numeric.linspace(0,c-1),g=numeric.linspace(0,l-1),x=p(t,M,d),v=p(n,g,f),y=p(n,g,d),b=numeric.dot,T=numeric.sub,w=b(v,h.I),A=T(y,b(w,x)),_=T(e,b(w,a)),z=Array(f.length),S=Array(d.length);for(s=f.length-1;-1!==s;--s)z[s]=r[f[s]];for(s=d.length-1;-1!==s;--s)S[s]=r[d[s]];var j=T(S,b(z,b(h.I,x))),I=numeric._solveLP(j,A,_,o,i),k=I.solution;if(k!=k)return I;var P=b(h.I,T(a,b(x,k))),q=Array(r.length);for(s=f.length-1;-1!==s;--s)q[f[s]]=P[s];for(s=d.length-1;-1!==s;--s)q[d[s]]=k[s];return{solution:q,message:I.message,iterations:I.iterations}},numeric.MPStoLP=function(r){r instanceof String&&r.split("\n");var n,e,t,a,o=0,i=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],s=r.length,c=0,u={},l=[],h=0,m={},f=0,d=[],p=[],M=[];function g(e){throw new Error("MPStoLP: "+e+"\nLine "+n+": "+r[n]+"\nCurrent state: "+i[o]+"\n")}for(n=0;n<s;++n){var x=(t=r[n]).match(/\S*/g),v=[];for(e=0;e<x.length;++e)""!==x[e]&&v.push(x[e]);if(0!==v.length){for(e=0;e<i.length&&t.substr(0,i[e].length)!==i[e];++e);if(e<i.length){if(o=e,1===e&&(a=v[1]),6===e)return{name:a,c:d,A:numeric.transpose(p),b:M,rows:u,vars:m}}else switch(o){case 0:case 1:g("Unexpected line");case 2:switch(v[0]){case"N":0===c?c=v[1]:g("Two or more N rows");break;case"L":u[v[1]]=h,l[h]=1,M[h]=0,++h;break;case"G":u[v[1]]=h,l[h]=-1,M[h]=0,++h;break;case"E":u[v[1]]=h,l[h]=0,M[h]=0,++h;break;default:g("Parse error "+numeric.prettyPrint(v))}break;case 3:m.hasOwnProperty(v[0])||(m[v[0]]=f,d[f]=0,p[f]=numeric.rep([h],0),++f);var y=m[v[0]];for(e=1;e<v.length;e+=2)if(v[e]!==c){var b=u[v[e]];p[y][b]=(l[b]<0?-1:1)*parseFloat(v[e+1])}else d[y]=parseFloat(v[e+1]);break;case 4:for(e=1;e<v.length;e+=2)M[u[v[e]]]=(l[u[v[e]]]<0?-1:1)*parseFloat(v[e+1]);break;case 5:break;case 6:g("Internal error")}}}g("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(r,n,e,t,a,o,i){function s(r){var n,t,a=this,o=r.length,i=0,s=a.i=a.j=a.m=0;for(a.S=[],a.c=[],o||(r=[o++]);i<e;)a.S[i]=i++;for(i=0;i<e;i++)s=l(s+(n=a.S[i])+r[i%o]),t=a.S[s],a.S[i]=t,a.S[s]=n;a.g=function(r){var n=a.S,t=l(a.i+1),o=n[t],i=l(a.j+o),s=n[i];n[t]=s,n[i]=o;for(var c=n[l(o+s)];--r;)t=l(t+1),s=n[i=l(i+(o=n[t]))],n[t]=s,n[i]=o,c=c*e+n[l(o+s)];return a.i=t,a.j=i,c},a.g(e)}function c(r,n,e,t,a){if(e=[],a=typeof r,n&&"object"==a)for(t in r)if(t.indexOf("S")<5)try{e.push(c(r[t],n-1))}catch(r){}return e.length?e:r+("string"!=a?"\0":"")}function u(r,n,e,t){for(r+="",e=0,t=0;t<r.length;t++)n[l(t)]=l((e^=19*n[l(t)])+r.charCodeAt(t));for(t in r="",n)r+=String.fromCharCode(n[t]);return r}function l(r){return 255&r}n.seedrandom=function(t,l){var h,m=[];return t=u(c(l?[t,r]:arguments.length?t:[(new Date).getTime(),r,window],3),m),u((h=new s(m)).S,r),n.random=function(){for(var r=h.g(6),n=i,t=0;r<a;)r=(r+t)*e,n*=e,t=h.g(1);for(;r>=o;)r/=2,n/=2,t>>>=1;return(r+t)/n},t},i=n.pow(e,6),a=n.pow(2,a),o=2*a,u(n.random(),r)}([],numeric.seedrandom,256,0,52),function(r){function n(r){if("object"!=typeof r)return r;var e,t=[],a=r.length;for(e=0;e<a;e++)t[e+1]=n(r[e]);return t}function e(r){if("object"!=typeof r)return r;var n,t=[],a=r.length;for(n=1;n<a;n++)t[n-1]=e(r[n]);return t}r.solveQP=function(r,t,a,o,i,s){r=n(r),t=n(t),a=n(a);var c,u,l,h,m,f=[],d=[],p=[],M=[],g=[];if(i=i||0,s=s?n(s):[void 0,0],o=o?n(o):[],u=r.length-1,l=a[1].length-1,!o)for(c=1;c<=l;c+=1)o[c]=0;for(c=1;c<=l;c+=1)d[c]=0;for(h=Math.min(u,l),c=1;c<=u;c+=1)p[c]=0;for(f[1]=0,c=1;c<=2*u+h*(h+5)/2+2*l+1;c+=1)M[c]=0;for(c=1;c<=2;c+=1)g[c]=0;return function(r,n,e,t,a,o,i,s,c,u,l,h,m,f,d,p){var M,g,x,v,y,b,T,w,A,_,z,S,j,I,k,P,q,L,D,C,E,N,R,O,U,F,J;j=Math.min(t,u),x=2*t+j*(j+5)/2+2*u+1,O=1e-60;do{U=1+.1*(O+=O),F=1+.2*O}while(U<=1||F<=1);for(M=1;M<=t;M+=1)d[M]=n[M];for(M=t+1;M<=x;M+=1)d[M]=0;for(M=1;M<=u;M+=1)h[M]=0;if(y=[],0===p[1]){if(function(r,n,e,t){var a,o,i,s,c,u;for(o=1;o<=e;o+=1){if(t[1]=o,u=0,(i=o-1)<1){if((u=r[o][o]-u)<=0)break;r[o][o]=Math.sqrt(u)}else{for(s=1;s<=i;s+=1){for(c=r[s][o],a=1;a<s;a+=1)c-=r[a][o]*r[a][s];c/=r[s][s],r[s][o]=c,u+=c*c}if((u=r[o][o]-u)<=0)break;r[o][o]=Math.sqrt(u)}t[1]=0}}(r,0,t,y),0!==y[1])return void(p[1]=2);!function(r,n,e,t){var a,o,i,s;for(o=1;o<=e;o+=1){for(s=0,a=1;a<o;a+=1)s+=r[a][o]*t[a];t[o]=(t[o]-s)/r[o][o]}for(i=1;i<=e;i+=1)for(t[o=e+1-i]=t[o]/r[o][o],s=-t[o],a=1;a<o;a+=1)t[a]=t[a]+s*r[a][o]}(r,0,t,n),function(r,n,e){var t,a,o,i,s;for(o=1;o<=e;o+=1){for(r[o][o]=1/r[o][o],s=-r[o][o],t=1;t<o;t+=1)r[t][o]=s*r[t][o];if(e<(i=o+1))break;for(a=i;a<=e;a+=1)for(s=r[o][a],r[o][a]=0,t=1;t<=o;t+=1)r[t][a]=r[t][a]+s*r[t][o]}}(r,0,t)}else{for(g=1;g<=t;g+=1)for(a[g]=0,M=1;M<=g;M+=1)a[g]=a[g]+r[M][g]*n[M];for(g=1;g<=t;g+=1)for(n[g]=0,M=g;M<=t;M+=1)n[g]=n[g]+r[g][M]*a[M]}for(o[1]=0,g=1;g<=t;g+=1)for(a[g]=n[g],o[1]=o[1]+d[g]*a[g],d[g]=0,M=g+1;M<=t;M+=1)r[M][g]=0;for(o[1]=-o[1]/2,p[1]=0,I=(_=(A=(z=(w=(T=t)+t)+j)+j+1)+j*(j+1)/2)+u,M=1;M<=u;M+=1){for(P=0,g=1;g<=t;g+=1)P+=i[g][M]*i[g][M];d[I+M]=Math.sqrt(P)}function G(){for(f[1]=f[1]+1,x=_,M=1;M<=u;M+=1){for(x+=1,P=-s[M],g=1;g<=t;g+=1)P+=i[g][M]*a[g];if(Math.abs(P)<O&&(P=0),M>l)d[x]=P;else if(d[x]=-Math.abs(P),P>0){for(g=1;g<=t;g+=1)i[g][M]=-i[g][M];s[M]=-s[M]}}for(M=1;M<=m;M+=1)d[_+h[M]]=0;for(S=0,k=0,M=1;M<=u;M+=1)d[_+M]<k*d[I+M]&&(S=M,k=d[_+M]/d[I+M]);return 0===S?999:0}function V(){for(M=1;M<=t;M+=1){for(P=0,g=1;g<=t;g+=1)P+=r[g][M]*i[g][S];d[M]=P}for(v=T,M=1;M<=t;M+=1)d[v+M]=0;for(g=m+1;g<=t;g+=1)for(M=1;M<=t;M+=1)d[v+M]=d[v+M]+r[M][g]*d[g];for(N=!0,M=m;M>=1;M-=1){for(P=d[M],v=(x=A+M*(M+3)/2)-M,g=M+1;g<=m;g+=1)P-=d[x]*d[w+g],x+=g;if(P/=d[v],d[w+M]=P,h[M]<l)break;if(P<0)break;N=!1,b=M}if(!N)for(q=d[z+b]/d[w+b],M=1;M<=m&&!(h[M]<l)&&!(d[w+M]<0);M+=1)(k=d[z+M]/d[w+M])<q&&(q=k,b=M);for(P=0,M=T+1;M<=T+t;M+=1)P+=d[M]*d[M];if(Math.abs(P)<=O){if(N)return p[1]=1,999;for(M=1;M<=m;M+=1)d[z+M]=d[z+M]-q*d[w+M];return d[z+m+1]=d[z+m+1]+q,700}for(P=0,M=1;M<=t;M+=1)P+=d[T+M]*i[M][S];for(L=-d[_+S]/P,R=!0,N||q<L&&(L=q,R=!1),M=1;M<=t;M+=1)a[M]=a[M]+L*d[T+M],Math.abs(a[M])<O&&(a[M]=0);for(o[1]=o[1]+L*P*(L/2+d[z+m+1]),M=1;M<=m;M+=1)d[z+M]=d[z+M]-L*d[w+M];if(d[z+m+1]=d[z+m+1]+L,!R){for(P=-s[S],g=1;g<=t;g+=1)P+=a[g]*i[g][S];if(S>l)d[_+S]=P;else if(d[_+S]=-Math.abs(P),P>0){for(g=1;g<=t;g+=1)i[g][S]=-i[g][S];s[S]=-s[S]}return 700}for(h[m+=1]=S,x=A+(m-1)*m/2+1,M=1;M<=m-1;M+=1)d[x]=d[M],x+=1;if(m===t)d[x]=d[t];else{for(M=t;M>=m+1&&0!==d[M]&&(D=Math.max(Math.abs(d[M-1]),Math.abs(d[M])),C=Math.min(Math.abs(d[M-1]),Math.abs(d[M])),k=d[M-1]>=0?Math.abs(D*Math.sqrt(1+C*C/(D*D))):-Math.abs(D*Math.sqrt(1+C*C/(D*D))),D=d[M-1]/k,C=d[M]/k,1!==D);M-=1)if(0===D)for(d[M-1]=C*k,g=1;g<=t;g+=1)k=r[g][M-1],r[g][M-1]=r[g][M],r[g][M]=k;else for(d[M-1]=k,E=C/(1+D),g=1;g<=t;g+=1)k=D*r[g][M-1]+C*r[g][M],r[g][M]=E*(r[g][M-1]+k)-r[g][M],r[g][M-1]=k;d[x]=d[m]}return 0}function Y(){if(0===d[v=(x=A+b*(b+1)/2+1)+b])return 798;if(D=Math.max(Math.abs(d[v-1]),Math.abs(d[v])),C=Math.min(Math.abs(d[v-1]),Math.abs(d[v])),k=d[v-1]>=0?Math.abs(D*Math.sqrt(1+C*C/(D*D))):-Math.abs(D*Math.sqrt(1+C*C/(D*D))),D=d[v-1]/k,C=d[v]/k,1===D)return 798;if(0===D){for(M=b+1;M<=m;M+=1)k=d[v-1],d[v-1]=d[v],d[v]=k,v+=M;for(M=1;M<=t;M+=1)k=r[M][b],r[M][b]=r[M][b+1],r[M][b+1]=k}else{for(E=C/(1+D),M=b+1;M<=m;M+=1)k=D*d[v-1]+C*d[v],d[v]=E*(d[v-1]+k)-d[v],d[v-1]=k,v+=M;for(M=1;M<=t;M+=1)k=D*r[M][b]+C*r[M][b+1],r[M][b+1]=E*(r[M][b]+k)-r[M][b+1],r[M][b]=k}return 0}function B(){for(v=x-b,M=1;M<=b;M+=1)d[v]=d[x],x+=1,v+=1;return d[z+b]=d[z+b+1],h[b]=h[b+1],(b+=1)<m?797:0}function H(){return d[z+m]=d[z+m+1],d[z+m+1]=0,h[m]=0,m-=1,f[2]=f[2]+1,0}for(m=0,f[1]=0,f[2]=0,J=0;;){if(999===(J=G()))return;for(;0!==(J=V());){if(999===J)return;if(700===J)if(b===m)H();else{for(;Y(),797===(J=B()););H()}}}}(r,t,0,u,p,f,a,o,0,l,i,d,0,g,M,s),m="",1===s[1]&&(m="constraints are inconsistent, no solution!"),2===s[1]&&(m="matrix D in quadratic function is not positive definite!"),{solution:e(p),value:e(f),unconstrained_solution:e(t),iterations:e(g),iact:e(d),message:m}}}(numeric),numeric.svd=function(r){var n,e=numeric.epsilon,t=1e-64/e,a=0,o=0,i=0,s=0,c=0,u=numeric.clone(r),l=u.length,h=u[0].length;if(l<h)throw"Need more rows than columns";var m=new Array(h),f=new Array(h);for(o=0;o<h;o++)m[o]=f[o]=0;var d=numeric.rep([h,h],0);function p(r,n){return(r=Math.abs(r))>(n=Math.abs(n))?r*Math.sqrt(1+n*n/r/r):0==n?r:n*Math.sqrt(1+r*r/n/n)}var M=0,g=0,x=0,v=0,y=0,b=0,T=0;for(o=0;o<h;o++){for(m[o]=g,T=0,c=o+1,i=o;i<l;i++)T+=u[i][o]*u[i][o];if(T<=t)g=0;else for(M=u[o][o],g=Math.sqrt(T),M>=0&&(g=-g),x=M*g-T,u[o][o]=M-g,i=c;i<h;i++){for(T=0,s=o;s<l;s++)T+=u[s][o]*u[s][i];for(M=T/x,s=o;s<l;s++)u[s][i]+=M*u[s][o]}for(f[o]=g,T=0,i=c;i<h;i++)T+=u[o][i]*u[o][i];if(T<=t)g=0;else{for(M=u[o][o+1],g=Math.sqrt(T),M>=0&&(g=-g),x=M*g-T,u[o][o+1]=M-g,i=c;i<h;i++)m[i]=u[o][i]/x;for(i=c;i<l;i++){for(T=0,s=c;s<h;s++)T+=u[i][s]*u[o][s];for(s=c;s<h;s++)u[i][s]+=T*m[s]}}(y=Math.abs(f[o])+Math.abs(m[o]))>v&&(v=y)}for(o=h-1;-1!=o;o+=-1){if(0!=g){for(x=g*u[o][o+1],i=c;i<h;i++)d[i][o]=u[o][i]/x;for(i=c;i<h;i++){for(T=0,s=c;s<h;s++)T+=u[o][s]*d[s][i];for(s=c;s<h;s++)d[s][i]+=T*d[s][o]}}for(i=c;i<h;i++)d[o][i]=0,d[i][o]=0;d[o][o]=1,g=m[o],c=o}for(o=h-1;-1!=o;o+=-1){for(c=o+1,g=f[o],i=c;i<h;i++)u[o][i]=0;if(0!=g){for(x=u[o][o]*g,i=c;i<h;i++){for(T=0,s=c;s<l;s++)T+=u[s][o]*u[s][i];for(M=T/x,s=o;s<l;s++)u[s][i]+=M*u[s][o]}for(i=o;i<l;i++)u[i][o]=u[i][o]/g}else for(i=o;i<l;i++)u[i][o]=0;u[o][o]+=1}for(e*=v,s=h-1;-1!=s;s+=-1)for(var w=0;w<50;w++){var A=!1;for(c=s;-1!=c;c+=-1){if(Math.abs(m[c])<=e){A=!0;break}if(Math.abs(f[c-1])<=e)break}if(!A){a=0,T=1;var _=c-1;for(o=c;o<s+1&&(M=T*m[o],m[o]=a*m[o],!(Math.abs(M)<=e));o++)for(x=p(M,g=f[o]),f[o]=x,a=g/x,T=-M/x,i=0;i<l;i++)y=u[i][_],b=u[i][o],u[i][_]=y*a+b*T,u[i][o]=-y*T+b*a}if(b=f[s],c==s){if(b<0)for(f[s]=-b,i=0;i<h;i++)d[i][s]=-d[i][s];break}if(w>=49)throw"Error: no convergence.";for(v=f[c],g=p(M=(((y=f[s-1])-b)*(y+b)+((g=m[s-1])-(x=m[s]))*(g+x))/(2*x*y),1),M=M<0?((v-b)*(v+b)+x*(y/(M-g)-x))/v:((v-b)*(v+b)+x*(y/(M+g)-x))/v,a=1,T=1,o=c+1;o<s+1;o++){for(g=m[o],y=f[o],x=T*g,g*=a,b=p(M,x),m[o-1]=b,M=v*(a=M/b)+g*(T=x/b),g=-v*T+g*a,x=y*T,y*=a,i=0;i<h;i++)v=d[i][o-1],b=d[i][o],d[i][o-1]=v*a+b*T,d[i][o]=-v*T+b*a;for(b=p(M,x),f[o-1]=b,M=(a=M/b)*g+(T=x/b)*y,v=-T*g+a*y,i=0;i<l;i++)y=u[i][o-1],b=u[i][o],u[i][o-1]=y*a+b*T,u[i][o]=-y*T+b*a}m[c]=0,m[s]=M,f[s]=v}for(o=0;o<f.length;o++)f[o]<e&&(f[o]=0);for(o=0;o<h;o++)for(i=o-1;i>=0;i--)if(f[i]<f[o]){for(a=f[i],f[i]=f[o],f[o]=a,s=0;s<u.length;s++)n=u[s][o],u[s][o]=u[s][i],u[s][i]=n;for(s=0;s<d.length;s++)n=d[s][o],d[s][o]=d[s][i],d[s][i]=n;o=i}return{U:u,S:f,V:d}}},991:function(r){r.exports=(()=>{"use strict";var r={378:(r,n,e)=>{e.r(n),e.d(n,{Sgp4:()=>u,Transforms:()=>l,Utils:()=>h});var t={};e.r(t);var a=Math.PI,o=2*a,i=a/180,s=2/3,c=15e-13,u=function(){function r(){}return r.dpper=function(r,n){var e=r.e3,t=r.ee2,i=r.peo,s=r.pgho,c=r.pho,u=r.PInco,l=r.plo,h=r.se2,m=r.se3,f=r.sgh2,d=r.sgh3,p=r.sgh4,M=r.sh2,g=r.sh3,x=r.si2,v=r.si3,y=r.sl2,b=r.sl3,T=r.sl4,w=r.t,A=r.xgh2,_=r.xgh3,z=r.xgh4,S=r.xh2,j=r.xh3,I=r.xi2,k=r.xi3,P=r.xl2,q=r.xl3,L=r.xl4,D=r.zmol,C=r.zmos,E=n.ep,N=n.inclp,R=n.nodep,O=n.argpp,U=n.mp,F=n.opsmode,J=void 0===F?"i":F,G=n.init,V=C+119459e-10*w;"y"===G&&(V=C);var Y=V+.0335*Math.sin(V),B=Math.sin(Y),H=.5*B*B-.25,X=-.5*B*Math.cos(Y),Q=h*H+m*X,Z=x*H+v*X,W=y*H+b*X+T*B,K=f*H+d*X+p*B,$=M*H+g*X;V=D+.00015835218*w,"y"===G&&(V=D),Y=V+.1098*Math.sin(V);var rr=Q+(t*(H=.5*(B=Math.sin(Y))*B-.25)+e*(X=-.5*B*Math.cos(Y))),nr=Z+(I*H+k*X),er=W+(P*H+q*X+L*B),tr=K+(A*H+_*X+z*B),ar=$+(S*H+j*X);if("n"===G){er-=l,tr-=s,ar-=c,N+=nr-=u,E+=rr-=i;var or=Math.sin(N),ir=Math.cos(N);if(N>=.2)O+=tr-=ir*(ar/=or),R+=ar,U+=er;else{var sr=Math.sin(R),cr=Math.cos(R),ur=or*sr,lr=or*cr;ur+=ar*cr+nr*ir*sr,lr+=-ar*sr+nr*ir*cr,(R%=o)<0&&"a"===J&&(R+=o);var hr=U+O+ir*R;hr+=er+tr-nr*R*or;var mr=R;(R=Math.atan2(ur,lr))<0&&"a"===J&&(R+=o),Math.abs(mr-R)>a&&(R<mr?R+=o:R-=o),O=hr-(U+=er)-ir*R}}return{ep:E,inclp:N,nodep:R,argpp:O,mp:U}},r.dscom=function(r){var n,e,t,a,o,i,s,c,u,l,h,m,f,d,p,M,g,x,v,y,b,T,w,A,_,z,S,j,I,k,P,q,L,D,C,E,N,R,O=r.epoch,U=r.ep,F=r.argpp,J=r.tc,G=r.inclp,V=r.nodep,Y=r.np,B=.01675,H=.0549,X=2*Math.PI,Q=Y,Z=U,W=Math.sin(V),K=Math.cos(V),$=Math.sin(F),rr=Math.cos(F),nr=Math.sin(G),er=Math.cos(G),tr=Z*Z,ar=1-tr,or=Math.sqrt(ar),ir=O+18261.5+J/1440,sr=(4.523602-.00092422029*ir)%X,cr=Math.sin(sr),ur=Math.cos(sr),lr=.91375164-.03568096*ur,hr=Math.sqrt(1-lr*lr),mr=.089683511*cr/hr,fr=Math.sqrt(1-mr*mr),dr=5.8351514+.001944368*ir,pr=.39785416*cr/hr,Mr=fr*ur+.91744867*mr*cr;pr=Math.atan2(pr,Mr),pr+=dr-sr;for(var gr=Math.cos(pr),xr=Math.sin(pr),vr=.1945905,yr=-.98088458,br=.91744867,Tr=.39785416,wr=K,Ar=W,_r=29864797e-13,zr=1/Q,Sr=1;Sr<=2;Sr++){var jr=vr*wr+yr*br*Ar,Ir=-yr*wr+vr*br*Ar,kr=-vr*Ar+yr*br*wr,Pr=yr*Tr,qr=yr*Ar+vr*br*wr,Lr=vr*Tr,Dr=er*kr+nr*Pr,Cr=er*qr+nr*Lr,Er=-nr*kr+er*Pr,Nr=-nr*qr+er*Lr,Rr=jr*rr+Dr*$,Or=Ir*rr+Cr*$,Ur=-jr*$+Dr*rr,Fr=-Ir*$+Cr*rr,Jr=Er*$,Gr=Nr*$,Vr=Er*rr,Yr=Nr*rr;L=-6*jr*Er+tr*(-24*Rr*Vr-6*Ur*Jr),D=-6*(jr*Nr+Ir*Er)+tr*(-24*(Or*Vr+Rr*Yr)+-6*(Ur*Gr+Fr*Jr)),C=-6*Ir*Nr+tr*(-24*Or*Yr-6*Fr*Gr),E=6*Dr*Er+tr*(24*Rr*Jr-6*Ur*Vr),N=6*(Cr*Er+Dr*Nr)+tr*(24*(Or*Jr+Rr*Gr)-6*(Fr*Vr+Ur*Yr)),R=6*Cr*Nr+tr*(24*Or*Gr-6*Fr*Yr),k=(k=3*(jr*jr+Dr*Dr)+(S=12*Rr*Rr-3*Ur*Ur)*tr)+k+ar*S,P=(P=6*(jr*Ir+Dr*Cr)+(j=24*Rr*Or-6*Ur*Fr)*tr)+P+ar*j,q=(q=3*(Ir*Ir+Cr*Cr)+(I=12*Or*Or-3*Fr*Fr)*tr)+q+ar*I,e=-.5*(t=_r*zr)/or,n=-15*Z*(a=t*or),o=Rr*Ur+Or*Fr,i=Or*Ur+Rr*Fr,s=Or*Fr-Rr*Ur,1===Sr&&(c=n,u=e,l=t,h=a,m=o,f=i,d=s,p=k,M=P,g=q,x=L,v=D,y=C,b=E,T=N,w=R,A=S,_=j,z=I,vr=gr,yr=xr,br=lr,Tr=hr,wr=fr*K+mr*W,Ar=W*fr-K*mr,_r=4.7968065e-7)}return{snodm:W,cnodm:K,sinim:nr,cosim:er,sinomm:$,cosomm:rr,day:ir,e3:2*n*s,ee2:2*n*i,em:Z,emsq:tr,gam:dr,peo:0,pgho:0,pho:0,PInco:0,plo:0,rtemsq:or,se2:2*c*f,se3:2*c*d,sgh2:2*h*_,sgh3:2*h*(z-A),sgh4:-18*h*B,sh2:-2*u*T,sh3:-2*u*(w-b),si2:2*u*v,si3:2*u*(y-x),sl2:-2*l*M,sl3:-2*l*(g-p),sl4:-2*l*(-21-9*tr)*B,s1:n,s2:e,s3:t,s4:a,s5:o,s6:i,s7:s,ss1:c,ss2:u,ss3:l,ss4:h,ss5:m,ss6:f,ss7:d,sz1:p,sz2:M,sz3:g,sz11:x,sz12:v,sz13:y,sz21:b,sz22:T,sz23:w,sz31:A,sz32:_,sz33:z,xgh2:2*a*j,xgh3:2*a*(I-S),xgh4:-18*a*H,xh2:-2*e*N,xh3:-2*e*(R-E),xi2:2*e*D,xi3:2*e*(C-L),xl2:-2*t*P,xl3:-2*t*(q-k),xl4:-2*t*(-21-9*tr)*H,nm:Q,z1:k,z2:P,z3:q,z11:L,z12:D,z13:C,z21:E,z22:N,z23:R,z31:S,z32:j,z33:I,zmol:(.2299715*ir-dr+4.7199672)%X,zmos:(6.2565837+.017201977*ir)%X}},r.dsinit=function(r){var n=r.xke,e=r.cosim,t=r.argpo,i=r.s1,s=r.s2,c=r.s3,u=r.s4,l=r.s5,h=r.sinim,m=r.ss1,f=r.ss2,d=r.ss3,p=r.ss4,M=r.ss5,g=r.sz1,x=r.sz3,v=r.sz11,y=r.sz13,b=r.sz21,T=r.sz23,w=r.sz31,A=r.sz33,_=r.t,z=r.tc,S=r.gsto,j=r.mo,I=r.mdot,k=r.no,P=r.nodeo,q=r.nodedot,L=r.xPIdot,D=r.z1,C=r.z3,E=r.z11,N=r.z13,R=r.z21,O=r.z23,U=r.z31,F=r.z33,J=r.ecco,G=r.eccsq,V=r.emsq,Y=r.em,B=r.argpm,H=r.inclm,X=r.mm,Q=r.nm,Z=r.nodem,W=r.irez,K=r.atime,$=r.d2201,rr=r.d2211,nr=r.d3210,er=r.d3222,tr=r.d4410,ar=r.d4422,or=r.d5220,ir=r.d5232,sr=r.d5421,cr=r.d5433,ur=r.dedt,lr=r.didt,hr=r.dmdt,mr=r.dnodt,fr=r.domdt,dr=r.del1,pr=r.del2,Mr=r.del3,gr=r.xfact,xr=r.xlamo,vr=r.xli,yr=r.xni,br=.0043752690880113,Tr=.00015835218,wr=119459e-10;W=0,Q<.0052359877&&Q>.0034906585&&(W=1),Q>=.00826&&Q<=.00924&&Y>=.5&&(W=2);var Ar=-wr*f*(b+T);(H<.052359877||H>a-.052359877)&&(Ar=0),0!==h&&(Ar/=h);var _r=-Tr*s*(R+O);(H<.052359877||H>a-.052359877)&&(_r=0),fr=p*wr*(w+A-6)-e*Ar+u*Tr*(U+F-6),mr=Ar,0!==h&&(fr-=e/h*_r,mr+=_r/h);var zr=(S+z*br)%o;if(Y+=(ur=m*wr*M+i*Tr*l)*_,H+=(lr=f*wr*(v+y)+s*Tr*(E+N))*_,B+=fr*_,Z+=mr*_,X+=(hr=-wr*d*(g+x-14-6*V)-Tr*c*(D+C-14-6*V))*_,0!==W){var Sr=Math.pow(Q/n,2/3);if(2===W){var jr=e*e,Ir=Y,kr=V,Pr=(Y=J)*(V=G),qr=void 0,Lr=void 0,Dr=void 0,Cr=void 0,Er=void 0,Nr=void 0,Rr=void 0,Or=void 0,Ur=void 0;Y<=.65?(qr=3.616-13.247*Y+16.29*V,Lr=117.39*Y-19.302-228.419*V+156.591*Pr,Dr=109.7927*Y-18.9068-214.6334*V+146.5816*Pr,Cr=242.694*Y-41.122-471.094*V+313.953*Pr,Er=841.88*Y-146.407-1629.014*V+1083.435*Pr,Nr=3017.977*Y-532.114-5740.032*V+3708.276*Pr):(qr=331.819*Y-72.099-508.738*V+266.724*Pr,Lr=1582.851*Y-346.844-2415.925*V+1246.113*Pr,Dr=1554.908*Y-342.585-2366.899*V+1215.972*Pr,Cr=4758.686*Y-1052.797-7193.992*V+3651.957*Pr,Er=16178.11*Y-3581.69-24462.77*V+12422.52*Pr,Nr=Y>.715?29936.92*Y-5149.66-54087.36*V+31324.56*Pr:1464.74-4664.75*Y+3763.64*V),Y<.7?(Rr=4988.61*Y-919.2277-9064.77*V+5542.21*Pr,Or=4568.6173*Y-822.71072-8491.4146*V+5337.524*Pr,Ur=4690.25*Y-853.666-8624.77*V+5341.4*Pr):(Rr=161616.52*Y-37995.78-229838.2*V+109377.94*Pr,Or=218913.95*Y-51752.104-309468.16*V+146349.42*Pr,Ur=170470.89*Y-40023.88-242699.48*V+115605.82*Pr);var Fr=h*h,Jr=Q*Q*3*(Sr*Sr),Gr=17891679e-13*Jr;$=Gr*(Vr=.75*(1+2*e+jr))*(-.306-.44*(Y-.64)),rr=Gr*(1.5*Fr)*qr,nr=(Gr=3.7393792e-7*(Jr*=Sr))*(1.875*h*(1-2*e-3*jr))*Lr,er=Gr*(-1.875*h*(1+2*e-3*jr))*Dr,tr=(Gr=2*(Jr*=Sr)*7.3636953e-9)*(35*Fr*Vr)*Cr,ar=Gr*(39.375*Fr*Fr)*Er,or=(Gr=1.1428639e-7*(Jr*=Sr))*(9.84375*h*(Fr*(1-2*e-5*jr)+.33333333*(4*e-2+6*jr)))*Nr,ir=Gr*(h*(4.92187512*Fr*(-2-4*e+10*jr)+6.56250012*(1+2*e-3*jr)))*Ur,sr=(Gr=2*Jr*2.1765803e-9)*(29.53125*h*(2-8*e+jr*(8*e-12+10*jr)))*Or,cr=Gr*(29.53125*h*(-2-8*e+jr*(12+8*e-10*jr)))*Rr,xr=(j+P+P-(zr+zr))%o,gr=I+hr+2*(q+mr-br)-k,Y=Ir,V=kr}if(1===W){var Vr,Yr=1+e;pr=2*(dr=3*Q*Q*Sr*Sr)*(Vr=.75*(1+e)*(1+e))*(1+V*(.8125*V-2.5))*17891679e-13,Mr=3*dr*(Yr*=1.875*Yr*Yr)*(1+V*(6.60937*V-6))*2.2123015e-7*Sr,dr=dr*(.9375*h*h*(1+3*e)-.75*(1+e))*(Lr=1+2*V)*21460748e-13*Sr,xr=(j+P+t-zr)%o,gr=I+L+hr+fr+mr-(k+br)}vr=xr,yr=k,K=0,Q=k+0}return{em:Y,argpm:B,inclm:H,mm:X,nm:Q,nodem:Z,irez:W,atime:K,d2201:$,d2211:rr,d3210:nr,d3222:er,d4410:tr,d4422:ar,d5220:or,d5232:ir,d5421:sr,d5433:cr,dedt:ur,didt:lr,dmdt:hr,dndt:0,dnodt:mr,domdt:fr,del1:dr,del2:pr,del3:Mr,xfact:gr,xlamo:xr,xli:vr,xni:yr}},r.dspace=function(r,n,e,t,a,i,s,c,u,l,h,m,f,d,p,M,g,x,v,y,b,T,w,A,_,z,S,j,I,k,P,q,L,D,C,E){var N=.13130908,R=2.8843198,O=.37448087,U=5.7686396,F=.95240898,J=1.8014998,G=1.050833,V=4.4108898,Y=259200,B=0,H=(A+.0043752690880113*w)%o;if(I+=m*T,P+=M*T,k+=v*T,C+=x*T,L+=g*T,0!==r){var X;(0===j||T*j<=0||Math.abs(T)<Math.abs(j))&&(j=0,D=S,q=z),X=T>0?720:-720;for(var Q=void 0,Z=void 0,W=void 0,K=void 0,$=void 0,rr=void 0,nr=void 0,er=381;381===er;)2!==r?(Q=f*Math.sin(q-N)+d*Math.sin(2*(q-R))+p*Math.sin(3*(q-O)),Z=D+_,W=f*Math.cos(q-N)+2*d*Math.cos(2*(q-R))+3*p*Math.cos(3*(q-O)),W*=Z):($=(K=y+b*j)+K,rr=q+q,Q=n*Math.sin($+q-U)+e*Math.sin(q-U)+t*Math.sin(K+q-F)+a*Math.sin(-K+q-F)+i*Math.sin($+rr-J)+s*Math.sin(rr-J)+c*Math.sin(K+q-G)+u*Math.sin(-K+q-G)+l*Math.sin(K+rr-V)+h*Math.sin(-K+rr-V),Z=D+_,W=n*Math.cos($+q-U)+e*Math.cos(q-U)+t*Math.cos(K+q-F)+a*Math.cos(-K+q-F)+c*Math.cos(K+q-G)+u*Math.cos(-K+q-G)+2*i*Math.cos($+rr-J)+s*Math.cos(rr-J)+l*Math.cos(K+rr-V)+h*Math.cos(-K+rr-V),W*=Z),Math.abs(T-j)>=720?er=381:(nr=T-j,er=0),381===er&&(q+=Z*X+Q*Y,D+=Q*X+W*Y,j+=X);E=D+Q*nr+W*nr*nr*.5;var tr=q+Z*nr+Q*nr*nr*.5;1!==r?(L=tr-2*C+2*H,B=E-S):(L=tr-C-k+H,B=E-S),E=S+B}return[I,k,P,L,C,E]},r.initl=function(n){var e=n.opsmode,t=n.ecco,a=n.epoch,o=n.inclo,i=n.xke,s=n.j2,c=n.no,u=2*Math.PI,l=2/3,h=t*t,m=1-h,f=Math.sqrt(m),d=Math.cos(o),p=d*d,M=Math.pow(i/c,l),g=.75*s*(3*p-1)/(f*m),x=g/(M*M),v=M*(1-x*x-x*(1/3+134*x*x/81));c/=1+(x=g/(v*v));var y,b=Math.pow(i/c,l),T=Math.sin(o),w=b*m,A=1-5*p,_=-A-p-p,z=1/b,S=w*w,j=b*(1-t);if("a"==e){var I=a-7305,k=Math.floor(I+1e-8),P=.017202791694070362;(y=(1.7321343856509375+P*k+(P+u)*(I-k)+I*I*5075514194322695e-30)%u)<0&&(y+=u)}else y=r.gstime(a+2433281.5);return{no:c,method:"n",ainv:z,ao:b,con41:_,con42:A,cosio:d,cosio2:p,eccsq:h,omeosq:m,posq:S,rp:j,rteosq:f,sinio:T,gsto:y}},r.sgp4init=function(n,e){var t=e.whichconst,a=void 0===t?"wgs72":t,i=e.opsmode,u=void 0===i?"i":i,l=e.satn,h=void 0===l?n.satnum:l,m=e.epoch,f=e.xbstar,d=e.xecco,p=e.xargpo,M=e.xinclo,g=e.xndot,x=e.xnddot,v=e.xmo,y=e.xno,b=e.xnodeo;n.isimp=0,n.method="n",n.aycof=0,n.con41=0,n.cc1=0,n.cc4=0,n.cc5=0,n.d2=0,n.d3=0,n.d4=0,n.delmo=0,n.eta=0,n.argpdot=0,n.omgcof=0,n.sinmao=0,n.t=0,n.t2cof=0,n.t3cof=0,n.t4cof=0,n.t5cof=0,n.x1mth2=0,n.x7thm1=0,n.mdot=0,n.nodedot=0,n.xlcof=0,n.xmcof=0,n.nodecf=0,n.irez=0,n.d2201=0,n.d2211=0,n.d3210=0,n.d3222=0,n.d4410=0,n.d4422=0,n.d5220=0,n.d5232=0,n.d5421=0,n.d5433=0,n.dedt=0,n.del1=0,n.del2=0,n.del3=0,n.didt=0,n.dmdt=0,n.dnodt=0,n.domdt=0,n.e3=0,n.ee2=0,n.peo=0,n.pgho=0,n.pho=0,n.PInco=0,n.plo=0,n.se2=0,n.se3=0,n.sgh2=0,n.sgh3=0,n.sgh4=0,n.sh2=0,n.sh3=0,n.si2=0,n.si3=0,n.sl2=0,n.sl3=0,n.sl4=0,n.gsto=0,n.xfact=0,n.xgh2=0,n.xgh3=0,n.xgh4=0,n.xh2=0,n.xh3=0,n.xi2=0,n.xi3=0,n.xl2=0,n.xl3=0,n.xl4=0,n.xlamo=0,n.zmol=0,n.zmos=0,n.atime=0,n.xli=0,n.xni=0;var T=r.getgravconst(a);n.tumin=T.tumin,n.mus=T.mus,n.radiusearthkm=T.radiusearthkm,n.xke=T.xke,n.j2=T.j2,n.j3=T.j3,n.j4=T.j4,n.j3oj2=T.j3oj2;var w=T.j2,A=T.j4,_=T.xke,z=T.j3oj2;n.error=0,n.operationmode=u;var S=h.split("")[0].toLowerCase();isNaN(parseInt(S))?n.satnum=parseInt(S.charCodeAt(0)-96+9+n.satnum.slice(1,5)).toString():n.satnum=h,n.bstar=f,n.ndot=g,n.nddot=x,n.ecco=d,n.argpo=p,n.inclo=M,n.mo=v,n.no=y,n.nodeo=b;var j=78/n.radiusearthkm+1,I=42/n.radiusearthkm,k=I*I*I*I;n.init="y",n.t=0;var P={ecco:n.ecco,epoch:m,inclo:n.inclo,no:n.no,method:n.method,opsmode:n.operationmode,xke:n.xke,j2:n.j2},q=r.initl(P),L=q.ao,D=q.con42,C=q.cosio,E=q.cosio2,N=q.eccsq,R=q.omeosq,O=q.posq,U=q.rp,F=q.rteosq,J=q.sinio;if(n.no=q.no,n.con41=q.con41,n.gsto=q.gsto,n.a=Math.pow(n.no*n.tumin,-2/3),n.alta=n.a*(1+n.ecco)-1,n.altp=n.a*(1-n.ecco)-1,n.error=0,R>=0||n.no>=0){n.isimp=0,U<220/n.radiusearthkm+1&&(n.isimp=1);var G=j,V=k,Y=(U-1)*n.radiusearthkm;if(Y<156){G=Y-78,Y<98&&(G=20);var B=(120-G)/n.radiusearthkm;V=B*B*B*B,G=G/n.radiusearthkm+1}var H=1/O,X=1/(L-G);n.eta=L*n.ecco*X;var Q=n.eta*n.eta,Z=n.ecco*n.eta,W=Math.abs(1-Q),K=V*Math.pow(X,4),$=K/Math.pow(W,3.5),rr=$*n.no*(L*(1+1.5*Q+Z*(4+Q))+.375*w*X/W*n.con41*(8+3*Q*(8+Q)));n.cc1=n.bstar*rr;var nr=0;n.ecco>1e-4&&(nr=-2*K*X*z*n.no*J/n.ecco),n.x1mth2=1-E,n.cc4=2*n.no*$*L*R*(n.eta*(2+.5*Q)+n.ecco*(.5+2*Q)-w*X/(L*W)*(-3*n.con41*(1-2*Z+Q*(1.5-.5*Z))+.75*n.x1mth2*(2*Q-Z*(1+Q))*Math.cos(2*n.argpo))),n.cc5=2*$*L*R*(1+2.75*(Q+Z)+Z*Q);var er=E*E,tr=1.5*w*H*n.no,ar=.5*tr*w*H,or=-.46875*A*H*H*n.no;n.mdot=n.no+.5*tr*F*n.con41+.0625*ar*F*(13-78*E+137*er),n.argpdot=-.5*tr*D+.0625*ar*(7-114*E+395*er)+or*(3-36*E+49*er);var ir=-tr*C;n.nodedot=ir+(.5*ar*(4-19*E)+2*or*(3-7*E))*C;var sr=n.argpdot+n.nodedot;n.omgcof=n.bstar*nr*Math.cos(n.argpo),n.xmcof=0,n.ecco>1e-4&&(n.xmcof=-s*K*n.bstar/Z),n.nodecf=3.5*R*ir*n.cc1,n.t2cof=1.5*n.cc1,Math.abs(C+1)>15e-13?n.xlcof=-.25*z*J*(3+5*C)/(1+C):n.xlcof=-.25*z*J*(3+5*C)/c,n.aycof=-.5*z*J;var cr=1+n.eta*Math.cos(n.mo);if(n.delmo=cr*cr*cr,n.sinmao=Math.sin(n.mo),n.x7thm1=7*E-1,o/n.no>=225){n.method="d",n.isimp=1;var ur=n.inclo,lr={epoch:m,ep:n.ecco,argpp:n.argpo,tc:0,inclp:n.inclo,nodep:n.nodeo,np:n.no,e3:n.e3,ee2:n.ee2,peo:n.peo,pgho:n.pgho,pho:n.pho,PInco:n.PInco,plo:n.plo,se2:n.se2,se3:n.se3,sgh2:n.sgh2,sgh3:n.sgh3,sgh4:n.sgh4,sh2:n.sh2,sh3:n.sh3,si2:n.si2,si3:n.si3,sl2:n.sl2,sl3:n.sl3,sl4:n.sl4,xgh2:n.xgh2,xgh3:n.xgh3,xgh4:n.xgh4,xh2:n.xh2,xh3:n.xh3,xi2:n.xi2,xi3:n.xi3,xl2:n.xl2,xl3:n.xl3,xl4:n.xl4,zmol:n.zmol,zmos:n.zmos},hr=r.dscom(lr);n.e3=hr.e3,n.ee2=hr.ee2,n.peo=hr.peo,n.pgho=hr.pgho,n.pho=hr.pho,n.PInco=hr.PInco,n.plo=hr.plo,n.se2=hr.se2,n.se3=hr.se3,n.sgh2=hr.sgh2,n.sgh3=hr.sgh3,n.sgh4=hr.sgh4,n.sh2=hr.sh2,n.sh3=hr.sh3,n.si2=hr.si2,n.si3=hr.si3,n.sl2=hr.sl2,n.sl3=hr.sl3,n.sl4=hr.sl4;var mr=hr.sinim,fr=hr.cosim,dr=hr.em,pr=hr.emsq,Mr=hr.s1,gr=hr.s2,xr=hr.s3,vr=hr.s4,yr=hr.s5,br=hr.ss1,Tr=hr.ss2,wr=hr.ss3,Ar=hr.ss4,_r=hr.ss5,zr=hr.sz1,Sr=hr.sz3,jr=hr.sz11,Ir=hr.sz13,kr=hr.sz21,Pr=hr.sz23,qr=hr.sz31,Lr=hr.sz33;n.xgh2=hr.xgh2,n.xgh3=hr.xgh3,n.xgh4=hr.xgh4,n.xh2=hr.xh2,n.xh3=hr.xh3,n.xi2=hr.xi2,n.xi3=hr.xi3,n.xl2=hr.xl2,n.xl3=hr.xl3,n.xl4=hr.xl4,n.zmol=hr.zmol,n.zmos=hr.zmos;var Dr=hr.nm,Cr=hr.z1,Er=hr.z3,Nr=hr.z11,Rr=hr.z13,Or=hr.z21,Ur=hr.z23,Fr=hr.z31,Jr=hr.z33,Gr={inclo:ur,init:n.init,ep:n.ecco,inclp:n.inclo,nodep:n.nodeo,argpp:n.argpo,mp:n.mo,opsmode:n.operationmode},Vr=r.dpper(n,Gr);n.ecco=Vr.ep,n.inclo=Vr.inclp,n.nodeo=Vr.nodep,n.argpo=Vr.argpp,n.mo=Vr.mp;var Yr={xke:_,cosim:fr,emsq:pr,argpo:n.argpo,s1:Mr,s2:gr,s3:xr,s4:vr,s5:yr,sinim:mr,ss1:br,ss2:Tr,ss3:wr,ss4:Ar,ss5:_r,sz1:zr,sz3:Sr,sz11:jr,sz13:Ir,sz21:kr,sz23:Pr,sz31:qr,sz33:Lr,t:n.t,tc:0,gsto:n.gsto,mo:n.mo,mdot:n.mdot,no:n.no,nodeo:n.nodeo,nodedot:n.nodedot,xPIdot:sr,z1:Cr,z3:Er,z11:Nr,z13:Rr,z21:Or,z23:Ur,z31:Fr,z33:Jr,ecco:n.ecco,eccsq:N,em:dr,argpm:0,inclm:ur,mm:0,nm:Dr,nodem:0,irez:n.irez,atime:n.atime,d2201:n.d2201,d2211:n.d2211,d3210:n.d3210,d3222:n.d3222,d4410:n.d4410,d4422:n.d4422,d5220:n.d5220,d5232:n.d5232,d5421:n.d5421,d5433:n.d5433,dedt:n.dedt,didt:n.didt,dmdt:n.dmdt,dnodt:n.dnodt,domdt:n.domdt,del1:n.del1,del2:n.del2,del3:n.del3,xfact:n.xfact,xlamo:n.xlamo,xli:n.xli,xni:n.xni},Br=r.dsinit(Yr);n.irez=Br.irez,n.atime=Br.atime,n.d2201=Br.d2201,n.d2211=Br.d2211,n.d3210=Br.d3210,n.d3222=Br.d3222,n.d4410=Br.d4410,n.d4422=Br.d4422,n.d5220=Br.d5220,n.d5232=Br.d5232,n.d5421=Br.d5421,n.d5433=Br.d5433,n.dedt=Br.dedt,n.didt=Br.didt,n.dmdt=Br.dmdt,n.dnodt=Br.dnodt,n.domdt=Br.domdt,n.del1=Br.del1,n.del2=Br.del2,n.del3=Br.del3,n.xfact=Br.xfact,n.xlamo=Br.xlamo,n.xli=Br.xli,n.xni=Br.xni}if(1!==n.isimp){var Hr=n.cc1*n.cc1;n.d2=4*L*X*Hr;var Xr=n.d2*X*n.cc1/3;n.d3=(17*L+G)*Xr,n.d4=.5*Xr*L*X*(221*L+31*G)*n.cc1,n.t3cof=n.d2+2*Hr,n.t4cof=.25*(3*n.d3+n.cc1*(12*n.d2+10*Hr)),n.t5cof=.2*(3*n.d4+12*n.cc1*n.d3+6*n.d2*n.d2+15*Hr*(2*n.d2+Hr))}}r.propagate(n,0),n.init="n"},r.propagate=function(n,e){var t=n.xke,i=n.j2,u=n.j3oj2,l=n.radiusearthkm*n.xke/60;n.t=e,n.error=0;var h=n.mo+n.mdot*n.t,m=n.argpo+n.argpdot*n.t,f=n.nodeo+n.nodedot*n.t,d=m,p=h,M=n.t*n.t,g=f+n.nodecf*M,x=1-n.cc1*n.t,v=n.bstar*n.cc4*n.t,y=n.t2cof*M;if(1!==n.isimp){var b=n.omgcof*n.t,T=1+n.eta*Math.cos(h),w=b+n.xmcof*(T*T*T-n.delmo);p=h+w,d=m-w;var A=M*n.t,_=A*n.t;x=x-n.d2*M-n.d3*A-n.d4*_,v+=n.bstar*n.cc5*(Math.sin(p)-n.sinmao),y=y+n.t3cof*A+_*(n.t4cof+n.t*n.t5cof)}var z=n.no,S=n.ecco,j=n.inclo;if("d"===n.method){var I=n.t,k=r.dspace(n.irez,n.d2201,n.d2211,n.d3210,n.d3222,n.d4410,n.d4422,n.d5220,n.d5232,n.d5421,n.d5433,n.dedt,n.del1,n.del2,n.del3,n.didt,n.dmdt,n.dnodt,n.domdt,n.argpo,n.argpdot,n.t,I,n.gsto,n.xfact,n.xlamo,n.no,n.atime,S,d,j,n.xli,p,n.xni,g,z);S=k[0],d=k[1],j=k[2],p=k[3],g=k[4],z=k[5]}if(z<=0)return n.error=2,{position:!1,velocity:!1};var P=Math.pow(t/z,s)*x*x;if(z=t/Math.pow(P,1.5),(S-=v)>=1||S<-.001)return n.error=1,{position:!1,velocity:!1};S<1e-6&&(S=1e-6);var q=(p+=n.no*y)+d+g,L=S,D=j,C=d%=o,E=g%=o,N=p=((q%=o)-d-g)%o,R=Math.sin(j),O=Math.cos(j);if("d"===n.method){var U={inclo:n.inclo,init:"n",ep:L,inclp:D,nodep:E,argpp:C,mp:N,opsmode:n.operationmode},F=r.dpper(n,U);if(L=F.ep,E=F.nodep,C=F.argpp,N=F.mp,(D=F.inclp)<0&&(D=-D,E+=a,C-=a),L<0||L>1)return n.error=3,{position:!1,velocity:!1}}"d"===n.method&&(R=Math.sin(D),O=Math.cos(D),n.aycof=-.5*u*R,Math.abs(O+1)>15e-13?n.xlcof=-.25*u*R*(3+5*O)/(1+O):n.xlcof=-.25*u*R*(3+5*O)/c);for(var J,G,V=L*Math.cos(C),Y=1/(P*(1-L*L)),B=L*Math.sin(C)+Y*n.aycof,H=(N+C+E+Y*n.xlcof*V-E)%o,X=H,Q=9999.9,Z=1;Math.abs(Q)>=1e-12&&Z<=10;)J=Math.sin(X),Q=(H-B*(G=Math.cos(X))+V*J-X)/(Q=1-G*V-J*B),Math.abs(Q)>=.95&&(Q=Q>0?.95:-.95),X+=Q,Z+=1;var W=V*G+B*J,K=V*J-B*G,$=V*V+B*B,rr=P*(1-$);if(rr<0)return n.error=4,{position:!1,velocity:!1};var nr=P*(1-W),er=Math.sqrt(P)*K/nr,tr=Math.sqrt(rr)/nr,ar=Math.sqrt(1-$),or=P/nr*(J-B-V*(Y=K/(1+ar))),ir=P/nr*(G-V+B*Y),sr=Math.atan2(or,ir),cr=(ir+ir)*or,ur=1-2*or*or,lr=.5*i*(Y=1/rr),hr=lr*Y;if("d"===n.method){var mr=O*O;n.con41=3*mr-1,n.x1mth2=1-mr,n.x7thm1=7*mr-1}var fr=nr*(1-1.5*hr*ar*n.con41)+.5*lr*n.x1mth2*ur;if(fr<1)return n.error=6,{position:!1,velocity:!1};sr-=.25*hr*n.x7thm1*cr;var dr=E+1.5*hr*O*cr,pr=D+1.5*hr*O*R*ur,Mr=er-z*lr*n.x1mth2*cr/t,gr=tr+z*lr*(n.x1mth2*ur+1.5*n.con41)/t,xr=Math.sin(sr),vr=Math.cos(sr),yr=Math.sin(dr),br=Math.cos(dr),Tr=Math.sin(pr),wr=Math.cos(pr),Ar=-yr*wr,_r=br*wr,zr=Ar*xr+br*vr,Sr=_r*xr+yr*vr,jr=Tr*xr,Ir=Ar*vr-br*xr,kr=_r*vr-yr*xr,Pr=Tr*vr;return{position:{x:fr*zr*n.radiusearthkm,y:fr*Sr*n.radiusearthkm,z:fr*jr*n.radiusearthkm},velocity:{x:(Mr*zr+gr*Ir)*l,y:(Mr*Sr+gr*kr)*l,z:(Mr*jr+gr*Pr)*l}}},r.getgravconst=function(r){var n,e,t,a,o,i,s,c;switch(r){case"wgs72old":e=398600.79964,t=6378.135,n=1/(a=.0743669161),s=-165597e-11,c=(i=-253881e-11)/(o=.001082616);break;case"wgs72":e=398600.8,t=6378.135,n=1/(a=60/Math.sqrt(t*t*t/e)),s=-165597e-11,c=(i=-253881e-11)/(o=.001082616);break;case"wgs84":e=398600.5,t=6378.137,n=1/(a=60/Math.sqrt(t*t*t/e)),s=-161098761e-14,c=(i=-253215306e-14)/(o=.00108262998905);break;default:throw new Error("unknown gravity option ".concat(r))}return{tumin:n,mus:e,radiusearthkm:t,xke:a,j2:o,j3:i,j4:s,j3oj2:c}},r.createSatrec=function(n,e,t,o){void 0===t&&(t="wgs72"),void 0===o&&(o="i");var s,c={a:null,am:null,alta:null,altp:null,argpdot:null,argpo:null,aycof:null,bstar:null,cc1:null,cc4:null,cc5:null,con41:null,d2:null,d3:null,d4:null,d5232:null,d5421:null,d5433:null,dedt:null,delmo:null,del1:null,ecco:null,em:null,epochdays:null,epochyr:null,error:null,eta:null,gsto:null,im:null,inclo:null,init:null,isimp:null,jdsatepoch:null,mdot:null,method:null,mo:null,mm:null,nddot:null,ndot:null,no:null,nodecf:null,nodedot:null,nodeo:null,om:null,Om:null,omgcof:null,operationmode:null,satnum:null,sinmao:null,t:null,t2cof:null,t3cof:null,t4cof:null,t5cof:null,x1mth2:null,x7thm1:null,xlcof:null,xmcof:null,xfact:null,xlamo:null,xli:null,xgh4:null,xgh3:null,xh2:null,xi2:null,xi3:null,xl2:null,xl3:null,xl4:null,zmol:null,zmos:null,dmdt:null,dnodt:null,domdt:null,e3:null,ee2:null,peo:null,pgho:null,pho:null,PInco:null,plo:null,se2:null,se3:null,sgh2:null,sgh3:null,sgh4:null,sh2:null,sh3:null,si2:null,si3:null,sl2:null,sl3:null,sl4:null,xgh2:null,xh3:null,tumin:null,radiusearthkm:null,irez:null,d3210:null,d3222:null,d4410:null,d4422:null,d5220:null,del2:null,del3:null,didt:null,atime:null,j2:null,j3:null,j4:null,mus:null,xke:null,j3oj2:null,xni:null,d2201:null,d2211:null,nm:null},u=1440/(2*a);c.error=0,c.satnum=n.substring(2,7),c.epochyr=parseInt(n.substring(18,20)),c.epochdays=parseFloat(n.substring(20,32)),c.ndot=parseFloat(n.substring(33,43)),c.nddot=parseFloat("".concat(n.substring(44,45),".").concat(n.substring(45,50),"E").concat(n.substring(50,52))),c.bstar=parseFloat("".concat(n.substring(53,54),".").concat(n.substring(54,59),"E").concat(n.substring(59,61))),c.inclo=parseFloat(e.substring(8,16)),c.nodeo=parseFloat(e.substring(17,25)),c.ecco=parseFloat(".".concat(e.substring(26,33))),c.argpo=parseFloat(e.substring(34,42)),c.mo=parseFloat(e.substring(43,51)),c.no=parseFloat(e.substring(52,63)),c.no/=u,c.inclo*=i,c.nodeo*=i,c.argpo*=i,c.mo*=i,s=c.epochyr<57?c.epochyr+2e3:c.epochyr+1900;var l=r.days2mdhms(s,c.epochdays),h=l.mon,m=l.day,f=l.hr,d=l.minute,p=l.sec,M=r.jday(s,h,m,f,d,p);return c.jdsatepoch=M.jd+M.jdFrac,r.sgp4init(c,{whichconst:t,opsmode:o,satn:c.satnum,epoch:c.jdsatepoch-2433281.5,xbstar:c.bstar,xecco:c.ecco,xargpo:c.argpo,xinclo:c.inclo,xndot:c.ndot,xnddot:c.nddot,xmo:c.mo,xno:c.no,xnodeo:c.nodeo}),c},r.gstime=function(r){var n=(r-2451545)/36525,e=-62e-7*n*n*n+.093104*n*n+3164400184.812866*n+67310.54841;return(e=e*i/240%o)<0&&(e+=o),e},r.sgn=function(r){return r<0?-1:1},r.mag=function(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2])},r.cross=function(r,n){var e=[0,0,0];return e[0]=r[1]*n[2]-r[2]*n[1],e[1]=r[2]*n[0]-r[0]*n[2],e[2]=r[0]*n[1]-r[1]*n[0],e},r.dot=function(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]},r.angle=function(n,e){var t=r.mag(n),a=r.mag(e);if(t*a>1e-8*1e-8){var o=r.dot(n,e)/(t*a);return Math.abs(o)>1&&(o=1*r.sgn(o)),Math.acos(o)}return 999999.1},r.asinh=function(r){return Math.log(r+Math.sqrt(r*r+1))},r.newtonnu=function(n,e){var t=999999.9,o=999999.9,i=1e-8;if(Math.abs(n)<i)o=e,t=e;else if(n<1-i){var s=Math.sqrt(1-n*n)*Math.sin(e)/(1+n*Math.cos(e)),c=(n+Math.cos(e))/(1+n*Math.cos(e));o=(t=Math.atan2(s,c))-n*Math.sin(t)}else n>1+i?n>1&&Math.abs(e)+1e-5<a-Math.acos(1/n)&&(s=Math.sqrt(n*n-1)*Math.sin(e)/(1+n*Math.cos(e)),t=r.asinh(s),o=n*r.sinh(t)-t):Math.abs(e)<168*a/180&&(o=(t=Math.tan(.5*e))+t*t*t/3);return n<1&&((o%=2*a)<0&&(o+=2*a),t%=2*a),{e0:t,m:o}},r.sinh=function(r){return(Math.exp(r)-Math.exp(-r))/2},r.rv2coe=function(n,e,t){var i,s,c,u,l,h,m,f,d,p,M,g,x,v,y,b,T,w=[0,0,0],A=[0,0,0],_=.5*a,z=1e-8,S=999999.1,j=r.mag(n),I=r.mag(e),k=r.cross(n,e),P=r.mag(k);if(P>z){w[0]=-k[1],w[1]=k[0],w[2]=0,x=r.mag(w);var q=I*I-t/j;for(g=r.dot(n,e),b=0;b<=2;b++)A[b]=(q*n[b]-g*e[b])/t;if(c=r.mag(A),y=I*I*.5-t/j,s=Math.abs(y)>z?-t/(2*y):999999.9,i=P*P/t,v=k[2]/P,u=Math.acos(v),T=1,c<z?T=u<z||Math.abs(u-a)<z?2:3:(u<z||Math.abs(u-a)<z)&&(T=4),x>z){var L=w[0]/x;Math.abs(L)>1&&(L=r.sgn(L)),l=Math.acos(L),w[1]<0&&(l=o-l)}else l=S;1==T?(h=r.angle(w,A),A[2]<0&&(h=o-h)):h=S,1==T||4==T?(m=r.angle(A,n),g<0&&(m=o-m)):m=S,3==T?(d=r.angle(w,n),n[2]<0&&(d=o-d),f=d):d=S,c>z&&4==T?(L=A[0]/c,Math.abs(L)>1&&(L=r.sgn(L)),M=Math.acos(L),A[1]<0&&(M=o-M),u>_&&(M=o-M)):M=S,j>z&&2==T?(L=n[0]/j,Math.abs(L)>1&&(L=r.sgn(L)),p=Math.acos(L),n[1]<0&&(p=o-p),u>_&&(p=o-p),f=p):p=S,1!=T&&4!=T||(f=r.newtonnu(c,m).m)}else i=S,s=S,c=S,u=S,l=S,h=S,m=S,f=S,d=S,p=S,M=S;return{p:i,a:s,ecc:c,incl:u,omega:l,argp:h,nu:m,m:f,arglat:d,truelon:p,lonper:M}},r.jday=function(r,n,e,t,a,o){var i=367*r-Math.floor(7*(r+Math.floor((n+9)/12))*.25)+Math.floor(275*n/9)+e+1721013.5,s=(o+60*a+3600*t)/86400;if(Math.abs(s)>1){var c=Math.floor(s);i+=c,s-=c}return{jd:i,jdFrac:s}},r.days2mdhms=function(r,n){for(var e=[31,r%4==0?29:28,31,30,31,30,31,31,30,31,30,31],t=Math.floor(n),a=1,o=0;t>o+e[a-1]&&a<12;)o+=e[a-1],a+=1;var i=a,s=t-o,c=24*(n-t),u=Math.floor(c);c=60*(c-u);var l=Math.floor(c);return{mon:i,day:s,hr:u,minute:l,sec:60*(c-l)}},r.invjday=function(n,e){var t,a;Math.abs(e)>=1&&(n+=Math.floor(e),e-=Math.floor(e));var o=n-Math.floor(n)-.5;Math.abs(o)>1e-8&&(n-=o,e+=o);var i=n-2415019.5,s=i/365.25,c=1900+Math.floor(s);t=Math.floor(.25*(c-1901)),(a=Math.floor(i-(365*(c-1900)+t)))+e<1&&(c-=1,t=Math.floor(.25*(c-1901)),a=Math.floor(i-(365*(c-1900)+t)));var u=r.days2mdhms(c,a+e);return{year:c,mon:u.mon,day:u.day,hr:u.hr,minute:u.minute,sec:u.sec}},r}(),l=function(){function r(){}return r.getDegLat=function(n){if(n<-a/2||n>a/2)throw new RangeError("Latitude radians must be in range [-PI/2; PI/2].");return r.rad2deg(n)},r.getDegLon=function(n){if(n<-a||n>a)throw new RangeError("Longitude radians must be in range [-PI; PI].");return r.rad2deg(n)},r.getRadLat=function(n){if(n<-90||n>90)throw new RangeError("Latitude degrees must be in range [-90; 90].");return r.deg2rad(n)},r.getRadLon=function(n){if(n<-180||n>180)throw new RangeError("Longitude degrees must be in range [-180; 180].");return r.deg2rad(n)},r.rad2deg=function(r){return 180*r/a},r.deg2rad=function(r){return r*a/180},r.ecf2eci=function(r,n){return{x:r.x*Math.cos(n)-r.y*Math.sin(n),y:r.x*Math.sin(n)+r.y*Math.cos(n),z:r.z}},r.ecf2rae=function(n,e){var t=r.lla2sez(n,e);return r.sez2rae(t)},r.eci2lla=function(r,n){for(var e=6378.137,t=Math.sqrt(r.x*r.x+r.y*r.y),i=(e-6356.7523142)/e,s=2*i-i*i,c=Math.atan2(r.y,r.x)-n;c<-a;)c+=o;for(;c>a;)c-=o;for(var u,l=0,h=Math.atan2(r.z,Math.sqrt(r.x*r.x+r.y*r.y));l<20;)u=1/Math.sqrt(1-s*(Math.sin(h)*Math.sin(h))),h=Math.atan2(r.z+e*u*s*Math.sin(h),t),l+=1;return{lon:c,lat:h,alt:t/Math.cos(h)-e*u}},r.eci2ecf=function(r,n){return{x:r.x*Math.cos(n)+r.y*Math.sin(n),y:r.x*-Math.sin(n)+r.y*Math.cos(n),z:r.z}},r.lla2ecf=function(r){var n=r.lon,e=r.lat,t=r.alt,a=6378.137,o=(a-6356.7523142)/a,i=2*o-o*o,s=a/Math.sqrt(1-i*(Math.sin(e)*Math.sin(e)));return{x:(s+t)*Math.cos(e)*Math.cos(n),y:(s+t)*Math.cos(e)*Math.sin(n),z:(s*(1-i)+t)*Math.sin(e)}},r.lla2sez=function(n,e){var t=n.lon,a=n.lat,o=r.lla2ecf(n),i=e.x-o.x,s=e.y-o.y,c=e.z-o.z;return{s:Math.sin(a)*Math.cos(t)*i+Math.sin(a)*Math.sin(t)*s-Math.cos(a)*c,e:-Math.sin(t)*i+Math.cos(t)*s,z:Math.cos(a)*Math.cos(t)*i+Math.cos(a)*Math.sin(t)*s+Math.sin(a)*c}},r.rae2sez=function(r){return{s:-r.rng*Math.cos(r.el)*Math.cos(r.az),e:r.rng*Math.cos(r.el)*Math.sin(r.az),z:r.rng*Math.sin(r.el)}},r.rae2ecf=function(n,e){var t=r.lla2ecf(e),a=r.rae2sez(n),o=Math.sin(e.lat),i=Math.sin(e.lon),s=Math.cos(e.lat),c=Math.cos(e.lon);return{x:o*c*a.s+-i*a.e+s*c*a.z+t.x,y:o*i*a.s+c*a.e+s*i*a.z+t.y,z:-s*a.s+o*a.z+t.z}},r.sez2rae=function(r){var n=Math.sqrt(r.s*r.s+r.e*r.e+r.z*r.z),e=Math.asin(r.z/n);return{rng:n,az:Math.atan2(-r.e,r.s)+a,el:e}},r}(),h=function(){function r(){}return r.distance=function(r,n){return Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)+Math.pow(r.z-n.z,2))},r.dopplerFactor=function(n,e,t){var a=7292115e-11,o={x:e.x-n.x,y:e.y-n.y,z:e.z-n.z},i=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)+Math.pow(o.z,2)),s=t.x+a*n.y,c=t.y-a*n.x,u=t.z,l=(o.x*s+o.y*c+o.z*u)/i;return 1+l/299792.458*r.sign(l)},r.createVec=function(r,n,e){for(var t=[],a=r;a<=n;a+=e)t.push(a);return t},r.Types=t,r.sign=function(r){return r>=0?1:-1},r}()}},n={};function e(t){if(n[t])return n[t].exports;var a=n[t]={exports:{}};return r[t](a,a.exports,e),a.exports}return e.d=(r,n)=>{for(var t in n)e.o(n,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:n[t]})},e.o=(r,n)=>Object.prototype.hasOwnProperty.call(r,n),e.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},e(378)})()}},__webpack_module_cache__={};function __webpack_require__(r){var n=__webpack_module_cache__[r];if(void 0!==n)return n.exports;var e=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r].call(e.exports,e,e.exports,__webpack_require__),e.exports}__webpack_require__.n=r=>{var n=r&&r.__esModule?()=>r.default:()=>r;return __webpack_require__.d(n,{a:n}),n},__webpack_require__.d=(r,n)=>{for(var e in n)__webpack_require__.o(n,e)&&!__webpack_require__.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:n[e]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),__webpack_require__.o=(r,n)=>Object.prototype.hasOwnProperty.call(r,n);var __webpack_exports__={};(()=>{"use strict";const r=Math.PI,n=2*Math.PI,e=n/360,t=360/n,a=1.15741e-8,o=6371;var i,s={MILLISECONDS_IN_A_DAY:864e5,J1970:2440588,J2000:2451545,J0:9e-4,lw:null,phi:null,d:null,H:null,h:null,times:[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]],toJulian:r=>r.valueOf()/s.MILLISECONDS_IN_A_DAY-.5+s.J1970,fromJulian:r=>new Date((r+.5-s.J1970)*s.MILLISECONDS_IN_A_DAY),toDays:r=>s.toJulian(r)-s.J2000,e:n/360*23.4397,rightAscension:(r,n)=>Math.atan2(Math.sin(r)*Math.cos(s.e)-Math.tan(n)*Math.sin(s.e),Math.cos(r)),declination:(r,n)=>Math.asin(Math.sin(n)*Math.cos(s.e)+Math.cos(n)*Math.sin(s.e)*Math.sin(r)),azimuth:(r,n,e)=>Math.atan2(Math.sin(r),Math.cos(r)*Math.sin(n)-Math.tan(e)*Math.cos(n)),altitude:(r,n,e)=>Math.asin(Math.sin(n)*Math.sin(e)+Math.cos(n)*Math.cos(e)*Math.cos(r)),siderealTime:(r,e)=>n/360*(280.16+360.9856235*r)-e,astroRefraction:r=>(r<0&&(r=0),2967e-7/Math.tan(r+.00312536/(r+.08901179))),solarMeanAnomaly:r=>n/360*(357.5291+.98560028*r),eclipticLongitude:r=>r+n/360*(1.9148*Math.sin(r)+.02*Math.sin(2*r)+3e-4*Math.sin(3*r))+n/360*102.9372+n/2,sunCoords:r=>{var n=s.solarMeanAnomaly(r),e=s.eclipticLongitude(n);return{dec:s.declination(e,0),ra:s.rightAscension(e,0)}},julianCycle:(r,e)=>Math.round(r-s.J0-e/(2*n/2)),approxTransit:(r,e,t)=>s.J0+(r+e)/(2*n/2)+t,solarTransitJ:(r,n,e)=>s.J2000+r+.0053*Math.sin(n)-.0069*Math.sin(2*e),hourAngle:(r,n,e)=>Math.acos((Math.sin(r)-Math.sin(n)*Math.sin(e))/(Math.cos(n)*Math.cos(e))),getSetJ:(r,n,e,t,a,o,i)=>{var c=s.hourAngle(r,e,t),u=s.approxTransit(c,n,a);return s.solarTransitJ(u,o,i)},moonCoords:r=>{var e=n/360*(134.963+13.064993*r),t=n/360*(93.272+13.22935*r),a=n/360*(218.316+13.176396*r)+n/360*6.289*Math.sin(e),o=n/360*5.128*Math.sin(t),i=385001-20905*Math.cos(e);return{ra:s.rightAscension(a,o),dec:s.declination(a,o),dist:i}},hoursLater:(r,n)=>new Date(r.valueOf()+n*s.MILLISECONDS_IN_A_DAY/24),getStarPosition:(r,n,t,a)=>(s.lw=e*-t,s.phi=e*n,s.d=s.toDays(r),s.H=s.siderealTime(s.d,s.lw)-a.ra/12*Math.PI,s.h=s.altitude(s.H,s.phi,a.dec/180*Math.PI),s.h+=s.astroRefraction(s.h),{azimuth:s.azimuth(s.H,s.phi,a.dec/180*Math.PI),altitude:s.h,vmag:a.vmag,name:a.name,dist:a.dist}),getSunPosition:(r,e,t)=>{var a=n/360*-t,o=n/360*e,i=s.toDays(r),c=s.sunCoords(i),u=s.siderealTime(i,a)-c.ra;return{azimuth:s.azimuth(u,o,c.dec),altitude:s.altitude(u,o,c.dec)}},addTime:(r,n,e)=>{s.times.push([r,n,e])},getTimes:(r,e,t)=>{var a,o,i,c,u,l=n/360*-t,h=n/360*e,m=s.toDays(r),f=s.julianCycle(m,l),d=s.approxTransit(0,l,f),p=s.solarMeanAnomaly(d),M=s.eclipticLongitude(p),g=s.declination(M,0),x=s.solarTransitJ(d,p,M),v={solarNoon:s.fromJulian(x),nadir:s.fromJulian(x-.5)};for(a=0,o=s.times.length;a<o;a+=1)i=s.times[a],u=x-((c=s.getSetJ(i[0]*n/360,l,h,g,f,p,M))-x),v[i[1]]=s.fromJulian(u),v[i[2]]=s.fromJulian(c);return v},getMoonPosition:(r,e,t)=>{var a=n/360*-t,o=n/360*e,i=s.toDays(r),c=s.moonCoords(i),u=s.siderealTime(i,a)-c.ra,l=s.altitude(u,o,c.dec),h=Math.atan2(Math.sin(u),Math.tan(o)*Math.cos(c.dec)-Math.sin(c.dec)*Math.cos(u));return l+=s.astroRefraction(l),{azimuth:s.azimuth(u,o,c.dec),altitude:l,distance:c.dist,parallacticAngle:h}},getMoonIllumination:r=>{var e=s.toDays(r||new Date),t=s.sunCoords(e),a=s.moonCoords(e),o=149598e3,i=Math.acos(Math.sin(t.dec)*Math.sin(a.dec)+Math.cos(t.dec)*Math.cos(a.dec)*Math.cos(t.ra-a.ra)),c=Math.atan2(o*Math.sin(i),a.dist-o*Math.cos(i)),u=Math.atan2(Math.cos(t.dec)*Math.sin(t.ra-a.ra),Math.sin(t.dec)*Math.cos(a.dec)-Math.cos(t.dec)*Math.sin(a.dec)*Math.cos(t.ra-a.ra));return{fraction:(1+Math.cos(c))/2,phase:.5+.5*c*(u<0?-1:1)/n/2,angle:u}},getMoonTimes:(r,e,t,a)=>{var o=new Date(r);a?o.setUTCHours(0,0,0,0):o.setHours(0,0,0,0);for(var i,c,u,l,h,m,f,d,p,M,g,x,v,y=.133*n/360,b=s.getMoonPosition(o,e,t).altitude-y,T=1;T<=24&&(i=s.getMoonPosition(s.hoursLater(o,T),e,t).altitude-y,d=((h=(b+(c=s.getMoonPosition(s.hoursLater(o,T+1),e,t).altitude-y))/2-i)*(f=-(m=(c-b)/2)/(2*h))+m)*f+i,M=0,(p=m*m-4*h*i)>=0&&(g=f-(v=Math.sqrt(p)/(2*Math.abs(h))),x=f+v,Math.abs(g)<=1&&M++,Math.abs(x)<=1&&M++,g<-1&&(g=x)),1===M?b<0?u=T+g:l=T+g:2===M&&(u=T+(d<0?x:g),l=T+(d<0?g:x)),!u||!l);T+=2)b=c;var w={};return u&&(w.rise=s.hoursLater(o,u)),l&&(w.set=s.hoursLater(o,l)),u||l||(w[d>0?"alwaysUp":"alwaysDown"]=!0),w}},c=__webpack_require__(32),u=__webpack_require__.n(c),l=__webpack_require__(991);!function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.PAYLOAD=1]="PAYLOAD",r[r.ROCKET_BODY=2]="ROCKET_BODY",r[r.DEBRIS=3]="DEBRIS",r[r.SPECIAL=4]="SPECIAL",r[r.RADAR_MEASUREMENT=5]="RADAR_MEASUREMENT",r[r.RADAR_TRACK=6]="RADAR_TRACK",r[r.RADAR_OBJECT=7]="RADAR_OBJECT",r[r.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",r[r.STAR=9]="STAR",r[r.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",r[r.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",r[r.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",r[r.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",r[r.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",r[r.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",r[r.LAUNCH_SITE=16]="LAUNCH_SITE",r[r.LAUNCH_POSITION=17]="LAUNCH_POSITION",r[r.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",r[r.CONTROL_FACILITY=19]="CONTROL_FACILITY",r[r.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",r[r.OPTICAL=21]="OPTICAL",r[r.MECHANICAL=22]="MECHANICAL",r[r.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",r[r.OBSERVER=24]="OBSERVER",r[r.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",r[r.COUNTRY=26]="COUNTRY",r[r.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",r[r.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER"}(i||(i={}));const h={lat:null,lon:0,alt:0},m={JMod:2400000.5,J2000:2451545,J1900:2415020,B1900:2415020.3135,B1950:2433282.4235,JulianYear:365.25,JulianCentury:36525,BesselianYear:365.2421988,AU:149597870,EclCoord:function(r,n,e){if(isNaN(r)||isNaN(n))throw Error("Invalid EclCoord object: ("+r+", "+n+")");this.lat=r,this.lng=n,void 0!==e&&(this.h=e)}};m.EclCoord.prototype={toWgs84String:function(){return m.Math.formatNum(180*this.lat/Math.PI)+", "+m.Math.formatNum(180*-this.lng/Math.PI)}},m.EclCoordfromWgs84=function(r,n,e){return new m.EclCoord(r*Math.PI/180,-n*Math.PI/180,e)},m.EqCoord=function(r,n){if(isNaN(r)||isNaN(n))throw Error("Invalid EqCoord object: ("+r+", "+n+")");this.ra=r,this.dec=n},m.EqCoord.prototype={toString:function(){return"ra:"+m.Math.formatNum(180*this.ra/Math.PI)+", dec:"+m.Math.formatNum(180*this.dec/Math.PI)}},m.HzCoord=function(r,n){if(isNaN(r)||isNaN(n))throw Error("Invalid HzCoord object: ("+r+", "+n+")");this.az=r,this.alt=n},m.HzCoord.prototype={toString:function(){return"azi:"+m.Math.formatNum(180*this.az/Math.PI)+", alt:"+m.Math.formatNum(180*this.alt/Math.PI)}},m.Coord={dmsToDeg:function(r,n,e,t){return t=(60*(60*n+e)+t)/3600,r?-t:t},calcAngle:function(r,n,e,t){return m.Coord.dmsToDeg(r,n,e,t)*Math.PI/180},calcRA:function(r,n,e){return m.Coord.dmsToDeg(!1,r,n,e)%24*15*Math.PI/180},secondsToHMSStr:function(r){var n=Math.floor(r/86400);r=m.Math.pMod(r,86400);var e=Math.floor(r/3600)%24,t=Math.floor(r/60)%60;return(0!==n?n+"d ":"")+(10>e?"0":"")+e+":"+(10>t?"0":"")+t+":"+(10>(r=Math.floor(r%60))?"0":"")+r},secondsToHMStr:function(r){var n=Math.floor(r/86400);r=m.Math.pMod(r,86400);var e=Math.floor(r/3600)%24;return(0!==n?n+"d ":"")+(10>e?"0":"")+e+":"+(10>(r=Math.floor(r/60)%60)?"0":"")+r},eqToEcl:function(r,n){var e=Math.sin(r.ra),t=Math.sin(r.dec),a=Math.cos(r.dec),o=Math.sin(n);return n=Math.cos(n),new m.EclCoord(Math.atan2(e*n+t/a*o,Math.cos(r.ra)),Math.asin(t*n-a*o*e))},eclToEq:function(r,n){var e=Math.sin(r.lat),t=Math.sin(r.lng),a=Math.cos(r.lng),o=Math.sin(n);n=Math.cos(n);let i=Math.atan2(e*n-t/a*o,Math.cos(r.lat));return 0>i&&(i+=2*Math.PI),new m.EqCoord(i,Math.asin(t*n+a*o*e))},eqToHz:function(r,n,e){e=e-n.lng-r.ra;var t=Math.cos(e),a=Math.sin(n.lat);n=Math.cos(n.lat);var o=Math.sin(r.dec);return r=Math.cos(r.dec),new m.HzCoord(Math.atan2(Math.sin(e),t*a-o/r*n),Math.asin(a*o+n*r*t))}},m.DeltaT={jdToJde:function(r,n){return n||(n=m.DeltaT.estimate(r)),r+n/86400},jdeToJd:function(r,n){return n||(n=m.DeltaT.estimate(r)),r-n/86400},decimalYear:function(r){return(r=m.JulianDay.jdToCalendar(r)).y+(r.m-.5)/12},estimate:function(r){var n=m.DeltaT.decimalYear(r);return r=Math.pow,-500>n?32*r((n-1820)/100,2)-20:500>n?10583.6-1014.41*(n/=100)+33.78311*r(n,2)-5.952053*r(n,3)-.1798452*r(n,4)+.022174192*r(n,5)+.0090316521*r(n,6):1600>n?1574.2-556.01*(n=(n-1e3)/100)+71.23472*r(n,2)+.319781*r(n,3)-.8503463*r(n,4)-.005050998*r(n,5)+.0083572073*r(n,6):1700>n?120-.9808*(n-=1600)-.01532*r(n,2)+r(n,3)/7129:1800>n?8.83+.1603*(n-=1700)-.0059285*r(n,2)+13336e-8*r(n,3)-r(n,4)/1174e3:1860>n?13.72-.332447*(n-=1800)+.0068612*r(n,2)+.0041116*r(n,3)-37436e-8*r(n,4)+121272e-10*r(n,5)-1.699e-7*r(n,6)+8.75e-10*r(n,7):1900>n?7.62+.5737*(n-=1860)-.251754*r(n,2)+.01680668*r(n,3)-.0004473624*r(n,4)+r(n,5)/233174:1920>n?1.494119*(n-=1900)-2.79-.0598939*r(n,2)+.0061966*r(n,3)-197e-6*r(n,4):1941>n?21.2+.84493*(n-=1920)-.0761*r(n,2)+.0020936*r(n,3):1961>n?29.07+.407*(n-=1950)-r(n,2)/233+r(n,3)/2547:1986>n?45.45+1.067*(n-=1975)-r(n,2)/260-r(n,3)/718:2005>n?63.86+.3345*(n-=2e3)-.060374*r(n,2)+.0017275*r(n,3)+651814e-9*r(n,4)+2373599e-11*r(n,5):2050>n?62.92+.32217*(n-=2e3)+.005589*r(n,2):2150>n?32*r((n-1820)/100,2)-20-.5628*(2150-n):32*r((n-1820)/100,2)-20}},m.Globe={Er:6378.14,Fl:1/298.257,parallaxConstants:function(r,n){n||(n=0);var e=1-m.Globe.Fl;return n=.001*n/m.Globe.Er,{rhoslat:Math.sin(Math.atan(e*Math.tan(r)))*e+n*Math.sin(r),rhoclat:Math.cos(Math.atan(e*Math.tan(r)))+n*Math.cos(r)}}},m.Interp={newLen3:function(r,n,e){if(3!=e.length)throw"Error not 3";if(n==r)throw"Error no x range";var t=e[1]-e[0],a=e[2]-e[1];return{x1:r,x3:n,y:e,a:t,b:a,c:a-t,abSum:t+a,xSum:n+r,xDiff:n-r}},interpolateX:function(r,n){return m.Interp.interpolateN(r,(2*n-r.xSum)/r.xDiff)},interpolateN:function(r,n){return r.y[1]+.5*n*(r.abSum+n*r.c)}},m.JulianDay=function(r,n){r instanceof Date&&(r=m.JulianDay.dateToJD(r)),this.jd=r,this.deltaT=n||m.DeltaT.estimate(this.jd),this.jde=m.DeltaT.jdToJde(this.jd,this.deltaT)},m.JulianDay.prototype={toCalendar:function(){return m.JulianDay.jdToCalendar(this.jd)},toDate:function(){return m.JulianDay.jdToDate(this.jd)},jdJ2000Century:function(){return(this.jd-m.J2000)/m.JulianCentury},jdeJ2000Century:function(){return(this.jde-m.J2000)/m.JulianCentury},startOfDay:function(){return new m.JulianDay(Math.floor(this.jde-.5)+.5,this.deltaT)}},m.JulianDay.gregorianTimeStart=Date.UTC(1582,9,4),m.JulianDay.jdFromGregorian=function(r,n,e){return new m.JulianDay(m.JulianDay.jdFromGregorian(r,n,e))},m.JulianDay.jdFromJulian=function(r,n,e){return new m.JulianDay(m.JulianDay.calendarJulianToJD(r,n,e))},m.JulianDay.jdFromJDE=function(r){var n=m.DeltaT.estimate(r);return r=m.DeltaT.jdeToJd(r,n),new m.JulianDay(r,n)},m.JulianDay.dateToJD=function(r){var n=r.getUTCDate()+m.JulianDay.secondsFromHMS(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds())/86400;return r.getTime()<m.JulianDay.gregorianTimeStart?m.JulianDay.calendarJulianToJD(r.getUTCFullYear(),r.getUTCMonth()+1,n):m.JulianDay.calendarGregorianToJD(r.getUTCFullYear(),r.getUTCMonth()+1,n)},m.JulianDay.calendarGregorianToJD=function(r,n,e){1!=n&&2!=n||(r--,n+=12);var t=Math.floor(r/100);return Math.floor(36525*(r+4716)/100)+Math.floor(306*(n+1)/10)+(2-t+Math.floor(t/4))+e-1524.5},m.JulianDay.calendarJulianToJD=function(r,n,e){return 1!=n&&2!=n||(r--,n+=12),Math.floor(36525*(r+4716)/100)+Math.floor(306*(n+1)/10)+e-1524.5},m.JulianDay.secondsFromHMS=function(r,n,e){return 3600*r+60*n+e},m.JulianDay.jdToDate=function(r){var n=m.JulianDay.jdToCalendar(r);return r=m.Math.modF(r+.5)[1],r=Math.round(86400*r),new Date(Date.UTC(n.y,n.m-1,Math.floor(n.d),Math.floor(r/3600)%24,Math.floor(r/60)%60,Math.floor(r%60)))},m.JulianDay.jdToCalendar=function(r){var n=(r=m.Math.modF(r+.5))[0],e=n;2299151<=n&&(e=n+1+(e=Math.floor((100*n-186721625)/3652425))-Math.floor(e/4));var t=e+1524;n=Math.floor((100*t-12210)/36525);var a=Math.floor(36525*n/100);return e=Math.floor(1e4*(t-a)/306001),r=t-a-Math.floor(306001*e/1e4)+r[1],{y:1==(e=14==e||15==e?e-13:e-1)||2==e?Math.floor(n)-4715:Math.floor(n)-4716,m:e,d:r}},m.JulianDay.leapYearGregorian=function(r){return 0==r%4&&0!=r%100||0==r%400},m.JulianDay.dayOfYear=function(r,n,e,t){return r=2,t&&r--,m.JulianDay._wholeMonths(n,r)+e},m.JulianDay._wholeMonths=function(r,n){return Math.round(275*r/9-(r+9)/12*n-30)},m.Math={pMod:function(r,n){return 0>(r%=n)&&(r+=n),r},modF:function(r){return 0>r?(r=-r,[-Math.floor(r),-r%1]):[Math.floor(r),r%1]},horner:function(r,n){var e=n.length-1;if(0>=e)throw"empty array not supported";for(var t=n[e];0<e;)t=t*r+n[--e];return t},formatNum:function(r,n){return n=Math.pow(10,4|n),Math.round(r*n)/n}},m.Moon={parallax:function(r){return Math.asin(6378.14/r)},apparentEquatorial:function(r){var n=m.Moon.geocentricPosition(r),e=m.Nutation.nutation(r);return r=m.Nutation.meanObliquityLaskar(r)+e.deltaobliquity,{eq:m.Coord.eclToEq(new m.EclCoord(n.lng+e.deltalng,n.lat),r),delta:n.delta}},apparentTopocentric:function(r,n,e){var t=m.Moon.apparentEquatorial(r),a=m.Globe.parallaxConstants(n.lat,n.h),o=m.Moon.parallax(t.delta);return e||(e=m.Sidereal.apparentInRa(r)),{eq:m.Parallax.topocentric(t.eq,o,a.rhoslat,a.rhoclat,n.lng,e),delta:t.delta}},topocentricPosition:function(r,n,e){var t=m.Sidereal.apparentInRa(r);r=m.Moon.apparentTopocentric(r,n,t);var a=m.Coord.eqToHz(r.eq,n,t);return!0===e&&(a.alt+=m.Refraction.bennett2(a.alt)),n=m.Moon.parallacticAngle(n.lat,t-(n.lng+r.eq.ra),r.eq.dec),{hz:a,eq:r.eq,delta:r.delta,q:n}},approxTransit:function(r,n){return r=r.startOfDay(),m.Rise.approxTransit(n,m.Sidereal.apparent0UT(r),m.Moon.apparentTopocentric(r,n).eq)},approxTimes:function(r,n){r=r.startOfDay();var e=m.Moon.apparentTopocentric(r,n),t=m.Moon.parallax(e.delta);return t=m.Rise.stdh0Lunar(t),r=m.Sidereal.apparent0UT(r),m.Rise.approxTimes(n,t,r,e.eq)},times:function(r,n){r=r.startOfDay();var e=m.Moon.apparentTopocentric(new m.JulianDay(r.jd-1,r.deltaT),n),t=m.Moon.apparentTopocentric(r,n),a=m.Moon.apparentTopocentric(new m.JulianDay(r.jd+1,r.deltaT),n),o=m.Moon.parallax(t.delta);o=m.Rise.stdh0Lunar(o);var i=m.Sidereal.apparent0UT(r);return m.Rise.times(n,r.deltaT,o,i,[e.eq,t.eq,a.eq])},parallacticAngle:function(r,n,e){return Math.atan2(Math.sin(n),Math.tan(r)*Math.cos(e)-Math.sin(e)*Math.cos(n))},geocentricPosition:function(r){var n=Math.PI/180,e=r.jdeJ2000Century();r=m.Math.pMod(m.Math.horner(e,[218.3164477*n,481267.88123421*n,-.0015786*n,n/538841,-n/65194e3]),2*Math.PI);var t=m.Math.pMod(m.Math.horner(e,[297.8501921*n,445267.1114034*n,-.0018819*n,n/545868,-n/113065e3]),2*Math.PI),a=m.Math.pMod(m.Math.horner(e,[357.5291092*n,35999.0502909*n,-1535e-7*n,n/2449e4]),2*Math.PI),o=m.Math.pMod(m.Math.horner(e,[134.9633964*n,477198.8675055*n,.0087414*n,n/69699,-n/14712e3]),2*Math.PI),i=m.Math.pMod(m.Math.horner(e,[93.272095*n,483202.0175233*n,-.0036539*n,-n/3526e3,n/86331e4]),2*Math.PI),s=119.75*n+131.849*n*e,c=53.09*n+479264.29*n*e,u=313.45*n+481266.484*n*e,l=(e=m.Math.horner(e,[1,-.002516,-74e-7]))*e;c=3958*Math.sin(s)+1962*Math.sin(r-i)+318*Math.sin(c);var h=0;for(s=-2235*Math.sin(r)+382*Math.sin(u)+175*Math.sin(s-i)+175*Math.sin(s+i)+127*Math.sin(r-o)-115*Math.sin(r+o),u=0;u<m.Moon.ta.length;u++){var f=m.Moon.ta[u],d=t*f[0]+a*f[1]+o*f[2]+i*f[3],p=Math.sin(d);switch(d=Math.cos(d),f[1]){case 0:c+=f[4]*p,h+=f[5]*d;break;case 1:case-1:c+=f[4]*p*e,h+=f[5]*d*e;break;case 2:case-2:c+=f[4]*p*l,h+=f[5]*d*l;break;default:throw"error"}}for(u=0;u<m.Moon.tb.length;u++)switch(f=m.Moon.tb[u],p=Math.sin(t*f[0]+a*f[1]+o*f[2]+i*f[3]),f[1]){case 0:s+=f[4]*p;break;case 1:case-1:s+=f[4]*p*e;break;case 2:case-2:s+=f[4]*p*l;break;default:throw"error"}return{lng:m.Math.pMod(r,2*Math.PI)+1e-6*c*n,lat:1e-6*s*n,delta:385000.56+.001*h}},ta:[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],tb:[[0,0,0,1,5128122],[0,0,1,1,280602],[0,0,1,-1,277693],[2,0,0,-1,173237],[2,0,-1,1,55413],[2,0,-1,-1,46271],[2,0,0,1,32573],[0,0,2,1,17198],[2,0,1,-1,9266],[0,0,2,-1,8822],[2,-1,0,-1,8216],[2,0,-2,-1,4324],[2,0,1,1,4200],[2,1,0,-1,-3359],[2,-1,-1,1,2463],[2,-1,0,1,2211],[2,-1,-1,-1,2065],[0,1,-1,-1,-1870],[4,0,-1,-1,1828],[0,1,0,1,-1794],[0,0,0,3,-1749],[0,1,-1,1,-1565],[1,0,0,1,-1491],[0,1,1,1,-1475],[0,1,1,-1,-1410],[0,1,0,-1,-1344],[1,0,0,-1,-1335],[0,0,3,1,1107],[4,0,0,-1,1021],[4,0,-1,1,833],[0,0,1,-3,777],[4,0,-2,1,671],[2,0,0,-3,607],[2,0,2,-1,596],[2,-1,1,-1,491],[2,0,-2,1,-451],[0,0,3,-1,439],[2,0,2,1,422],[2,0,-3,-1,421],[2,1,-1,1,-366],[2,1,0,1,-351],[4,0,0,1,331],[2,-1,1,1,315],[2,-2,0,-1,302],[0,0,1,3,-283],[2,1,1,-1,-229],[1,1,0,-1,223],[1,1,0,1,223],[0,1,-2,-1,-220],[2,1,-1,-1,-220],[1,0,1,1,-185],[2,-1,-2,-1,181],[0,1,2,1,-177],[4,0,-2,-1,176],[4,-1,-1,-1,166],[1,0,1,-1,-164],[4,0,1,-1,132],[1,0,-1,-1,-119],[4,-1,0,-1,115],[2,-2,0,1,107]]},m.MoonIllum={phaseAngleEq:function(r,n,e,t){return r=m.MoonIllum._coselong(r,e),Math.atan2(t*Math.sin(Math.acos(r)),n-t*r)},phaseAngleEq2:function(r,n){return Math.acos(-m.MoonIllum._coselong(r,n))},illuminated:function(r){return(1+Math.cos(r))/2},positionAngle:function(r,n){var e=Math.cos(n.dec);return Math.atan2(e*Math.sin(n.ra-r.ra),Math.sin(n.dec)*Math.cos(r.dec)-e*Math.sin(r.dec)*Math.cos(n.ra-r.ra))},_coselong:function(r,n){return Math.sin(n.dec)*Math.sin(r.dec)+Math.cos(n.dec)*Math.cos(r.dec)*Math.cos(n.ra-r.ra)}},m.Nutation={nutation:function(r){r=r.jdeJ2000Century();for(var n=m.Math.horner(r,[297.85036,445267.11148,-.0019142,1/189474])*Math.PI/180,e=m.Math.horner(r,[357.52772,35999.05034,-1603e-7,-1/3e5])*Math.PI/180,t=m.Math.horner(r,[134.96298,477198.867398,.0086972,1/5620])*Math.PI/180,a=m.Math.horner(r,[93.27191,483202.017538,-.0036825,1/327270])*Math.PI/180,o=m.Math.horner(r,[125.04452,-1934.136261,.0020708,1/45e4])*Math.PI/180,i=0,s=0,c=m.Nutation.table22A.length-1;0<=c;c--){var u=m.Nutation.table22A[c],l=u[0]*n+u[1]*e+u[2]*t+u[3]*a+u[4]*o,h=Math.cos(l);i+=Math.sin(l)*(u[5]+u[6]*r),s+=h*(u[7]+u[8]*r)}return{deltalng:1e-4/3600*i*(Math.PI/180),deltaobliquity:1e-4/3600*s*(Math.PI/180)}},nutationInRA:function(r){var n=m.Nutation.meanObliquityLaskar(r);return(r=m.Nutation.nutation(r)).deltalng*Math.cos(n+r.deltaobliquity)},trueObliquity:function(r){return m.Nutation.meanObliquityLaskar(r)+(r=m.Nutation.nutation(r)).deltaobliquity},meanObliquity:function(r){return m.Math.horner(r.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-46.815/3600*(Math.PI/180),-59e-5/3600*(Math.PI/180),.001813/3600*(Math.PI/180)])},meanObliquityLaskar:function(r){return m.Math.horner(.01*r.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-4680.93/3600*(Math.PI/180),-1.55/3600*(Math.PI/180),1999.25/3600*(Math.PI/180),-51.38/3600*(Math.PI/180),-249.67/3600*(Math.PI/180),-39.05/3600*(Math.PI/180),7.12/3600*(Math.PI/180),27.87/3600*(Math.PI/180),5.79/3600*(Math.PI/180),2.45/3600*(Math.PI/180)])},table22A:[[0,0,0,0,1,-171996,-174.2,92025,8.9],[-2,0,0,2,2,-13187,-1.6,5736,-3.1],[0,0,0,2,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[0,0,1,0,0,712,.1,-7,0],[-2,1,0,2,2,-517,1.2,224,-.6],[0,0,0,2,1,-386,-.4,200,0],[0,0,1,2,2,-301,0,129,-.1],[-2,-1,0,2,2,217,-.5,-95,.3],[-2,0,1,0,0,-158,0,0,0],[-2,0,0,2,1,129,.1,-70,0],[0,0,-1,2,2,123,0,-53,0],[2,0,0,0,0,63,0,0,0],[0,0,1,0,1,63,.1,-33,0],[2,0,-1,2,2,-59,0,26,0],[0,0,-1,0,1,-58,-.1,32,0],[0,0,1,2,1,-51,0,27,0],[-2,0,2,0,0,48,0,0,0],[0,0,-2,2,1,46,0,-24,0],[2,0,0,2,2,-38,0,16,0],[0,0,2,2,2,-31,0,13,0],[0,0,2,0,0,29,0,0,0],[-2,0,1,2,2,29,0,-12,0],[0,0,0,2,0,26,0,0,0],[-2,0,0,2,0,-22,0,0,0],[0,0,-1,2,1,21,0,-10,0],[0,2,0,0,0,17,-.1,0,0],[2,0,-1,0,1,16,0,-8,0],[-2,2,0,2,2,-16,.1,7,0],[0,1,0,0,1,-15,0,9,0],[-2,0,1,0,1,-13,0,7,0],[0,-1,0,0,1,-12,0,6,0],[0,0,2,-2,0,11,0,0,0],[2,0,-1,2,1,-10,0,5,0],[2,0,1,2,2,-8,0,3,0],[0,1,0,2,2,7,0,-3,0],[-2,1,1,0,0,-7,0,0,0],[0,-1,0,2,2,-7,0,3,0],[2,0,0,2,1,-7,0,3,0],[2,0,1,0,0,6,0,0,0],[-2,0,2,2,2,6,0,-3,0],[-2,0,1,2,1,6,0,-3,0],[2,0,-2,0,1,-6,0,3,0],[2,0,0,0,1,-6,0,3,0],[0,-1,1,0,0,5,0,0,0],[-2,-1,0,2,1,-5,0,3,0],[-2,0,0,0,1,-5,0,3,0],[0,0,2,2,1,-5,0,3,0],[-2,0,2,0,1,4,0,0,0],[-2,1,0,2,1,4,0,0,0],[0,0,1,-2,0,4,0,0,0],[-1,0,1,0,0,-4,0,0,0],[-2,1,0,0,0,-4,0,0,0],[1,0,0,0,0,-4,0,0,0],[0,0,1,2,0,3,0,0,0],[0,0,-2,2,2,-3,0,0,0],[-1,-1,1,0,0,-3,0,0,0],[0,1,1,0,0,-3,0,0,0],[0,-1,1,2,2,-3,0,0,0],[2,-1,-1,2,2,-3,0,0,0],[0,0,3,2,2,-3,0,0,0],[2,-1,0,2,2,-3,0,0,0]]},m.Parallax={earthsunParallax:8.794/60/60*Math.PI/180,horizontal:function(r){return 8.794/60/60*Math.PI/180/r},topocentric:function(r,n,e,t,a,o){a=m.Math.pMod(o-a-r.ra,2*Math.PI),n=Math.sin(n),o=Math.cos(a);var i=Math.cos(r.dec);return a=Math.atan2(-t*n*Math.sin(a),i-t*n*o),new m.EqCoord(r.ra+a,Math.atan2((Math.sin(r.dec)-e*n)*Math.cos(a),i-t*n*o))},topocentric2:function(r,n,e,t,a,o){return a=m.Math.pMod(o-a-r.ra,2*Math.PI),o=Math.cos(r.dec),new m.EqCoord(r.ra+-n*t*Math.sin(a)/o,r.dec+-n*(e*o-t*Math.cos(a)*Math.sin(r.dec)))}},m.Refraction={bennett:function(r){0>r&&(r=0);var n=Math.PI/180;return n/60/Math.tan(r+7.31*n*n/(r+4.4*n))},bennett2:function(r){var n=Math.PI/180,e=60/n,t=.06/e;return e=14.7*e*n,n*=13,(r=m.Refraction.bennett(r))-t*Math.sin(e*r+n)},saemundsson:function(r){var n=Math.PI/180;return 1.02*n/60/Math.tan(r+10.3*n*n/(r+5.11*n))}},m.Rise={meanRefraction:.5667*Math.PI/180,stdh0Stellar:-.5667*Math.PI/180,stdh0Solar:-.8333*Math.PI/180,stdh0LunarMean:.125*Math.PI/180,stdh0Lunar:function(r){return.7275*r-m.Rise.meanRefraction},circumpolar:function(r,n,e){return-1>(r=(Math.sin(n)-Math.sin(r)*Math.sin(e))/(Math.cos(r)*Math.cos(e)))||1<r?null:r},approxTransit:function(r,n,e){return 43200*(e.ra+r.lng)/Math.PI-n},approxTimes:function(r,n,e,t){return(n=m.Rise.circumpolar(r.lat,n,t.dec))?(n=43200*Math.acos(n)/Math.PI,r=43200*(t.ra+r.lng)/Math.PI-e,{transit:m.Math.pMod(r,86400),transitd:Math.floor(r/86400),rise:m.Math.pMod(r-n,86400),rised:Math.floor((r-n)/86400),set:m.Math.pMod(r+n,86400),setd:Math.floor((r+n)/86400)}):null},times:function(r,n,e,t,a){function o(a){var o=m.Math.pMod(t+360.985647*a/360,86400),i=a+n,u=m.Interp.interpolateX(s,i);return i=m.Interp.interpolateX(c,i),o=o*Math.PI/43200-(r.lng+u),u=Math.cos(i),m.Math.pMod(a+(l*Math.sin(i)+h*u*Math.cos(o)-e)/(u*h*Math.sin(o))*43200/Math.PI,86400)}var i=m.Rise.approxTimes(r,e,t,a[1]);if(!i)return null;var s=m.Interp.newLen3(-86400,86400,[a[0].ra,a[1].ra,a[2].ra]),c=m.Interp.newLen3(-86400,86400,[a[0].dec,a[1].dec,a[2].dec]);a=t+360.985647*i.transit/360;var u=m.Interp.interpolateX(s,i.transit+n);i.transit=m.Math.pMod(i.transit-(a-43200*(r.lng+u)/Math.PI),86400);var l=Math.sin(r.lat),h=Math.cos(r.lat);return i.rise=o(i.rise),i.set=o(i.set),i}},m.Sidereal={iau82:[24110.54841,8640184.812866,.093104,62e-7],jdToCFrac:function(r){return r=m.Math.modF(r.jd+.5),[new m.JulianDay(r[0]-.5).jdJ2000Century(),r[1]]},mean:function(r){return m.Math.pMod(m.Sidereal._mean(r),86400)},_mean:function(r){return(r=m.Sidereal._mean0UT(r)).s+86636.55536784*r.f},_meanInRA:function(r){return(r=m.Sidereal._mean0UT(r)).s*Math.PI/43200+2.0054758187*r.f*Math.PI},mean0UT:function(r){return r=m.Sidereal._mean0UT(r),m.Math.pMod(r.s,86400)},_mean0UT:function(r){return r=m.Sidereal.jdToCFrac(r),{s:m.Math.horner(r[0],m.Sidereal.iau82),f:r[1]}},apparentInRa:function(r){var n=m.Sidereal._meanInRA(r);return r=m.Nutation.nutationInRA(r),m.Math.pMod(n+r,2*Math.PI)},apparent:function(r){var n=m.Sidereal._mean(r);return r=648e3*m.Nutation.nutationInRA(r)/Math.PI/15,m.Math.pMod(n+r,86400)},apparentLocal:function(r,n){return r=m.Sidereal.apparent(r),m.Math.pMod(r-43200*n/Math.PI,86400)},apparent0UT:function(r){var n=m.Math.modF(r.jd+.5);return r=m.Math.modF(r.jde+.5),n=m.Math.horner((n[0]-.5-m.J2000)/36525,m.Sidereal.iau82)+86636.55536784*n[1],r=648e3*m.Nutation.nutationInRA(new m.JulianDay(r[0]))/Math.PI/15,m.Math.pMod(n+r,86400)}},m.Solar={earthsunDelta:149597870,apparentEquatorial:function(r){var n=r.jdJ2000Century(),e=m.Solar.node(n);return n=m.Solar.apparentLongitude(n,e),r=m.Nutation.meanObliquityLaskar(r)+.00256*Math.PI/180*Math.cos(e),e=Math.sin(n),new m.EqCoord(Math.atan2(Math.cos(r)*e,Math.cos(n)),Math.asin(Math.sin(r)*e))},apparentTopocentric:function(r,n,e){var t=m.Solar.apparentEquatorial(r),a=m.Globe.parallaxConstants(n.lat,n.h);return e||(e=m.Sidereal.apparentInRa(r)),m.Parallax.topocentric2(t,m.Parallax.earthsunParallax,a.rhoslat,a.rhoclat,n.lng,e)},topocentricPosition:function(r,n,e){var t=m.Sidereal.apparentInRa(r);return r=m.Solar.apparentTopocentric(r,n,t),n=m.Coord.eqToHz(r,n,t),!0===e&&(n.alt+=m.Refraction.bennett2(n.alt)),{hz:n,eq:r}},approxTransit:function(r,n){return r=r.startOfDay(),m.Rise.approxTransit(n,m.Sidereal.apparent0UT(r),m.Solar.apparentTopocentric(r,n))},approxTimes:function(r,n){var e=r.startOfDay();r=m.Solar.apparentTopocentric(e,n);var t=m.Rise.stdh0Solar;return e=m.Sidereal.apparent0UT(e),m.Rise.approxTimes(n,t,e,r)},times:function(r,n){r=r.startOfDay();var e=m.Solar.apparentTopocentric(new m.JulianDay(r.jd-1,r.deltaT),n),t=m.Solar.apparentTopocentric(r,n),a=m.Solar.apparentTopocentric(new m.JulianDay(r.jd+1,r.deltaT),n),o=m.Rise.stdh0Solar,i=m.Sidereal.apparent0UT(r);return m.Rise.times(n,r.deltaT,o,i,[e,t,a])},meanAnomaly:function(r){return m.Math.horner(r,[357.52911,35999.05029,-1537e-7])*Math.PI/180},trueLongitude:function(r){var n=m.Math.horner(r,[280.46646,36000.76983,3032e-7])*Math.PI/180,e=m.Solar.meanAnomaly(r);return r=(m.Math.horner(r,[1.914602,-.004817,-14e-6])*Math.sin(e)+(.019993-101e-6*r)*Math.sin(2*e)+289e-6*Math.sin(3*e))*Math.PI/180,{s:m.Math.pMod(n+r,2*Math.PI),v:m.Math.pMod(e+r,2*Math.PI)}},apparentLongitude:function(r,n){return n||(n=m.Solar.node(r)),m.Solar.trueLongitude(r).s-.00569*Math.PI/180-.00478*Math.PI/180*Math.sin(n)},node:function(r){return(125.04-1934.136*r)*Math.PI/180}},m.Solistice={march:function(r){return 1e3>r?m.Solistice._eq(r,m.Solistice.mc0):m.Solistice._eq(r-2e3,m.Solistice.mc2)},june:function(r){return 1e3>r?m.Solistice._eq(r,m.Solistice.jc0):m.Solistice._eq(r-2e3,m.Solistice.jc2)},september:function(r){return 1e3>r?m.Solistice._eq(r,m.Solistice.sc0):m.Solistice._eq(r-2e3,m.Solistice.sc2)},december:function(r){return 1e3>r?m.Solistice._eq(r,m.Solistice.dc0):m.Solistice._eq(r-2e3,m.Solistice.dc2)},_eq:function(r,n){n=((r=m.Math.horner(.001*r,n))-m.J2000)/m.JulianCentury;var e=35999.373*Math.PI/180*n-2.47*Math.PI/180;e=1+.0334*Math.cos(e)+7e-4*Math.cos(2*e);for(var t=0,a=this.terms.length-1;0<=a;a--){var o=this.terms[a];t+=o[0]*Math.cos((o[1]+o[2]*n)*Math.PI/180)}return r+1e-5*t/e},mc0:[1721139.29189,365242.1374,.06134,.00111,-71e-5],jc0:[1721233.25401,365241.72562,-.05232,.00907,25e-5],sc0:[1721325.70455,365242.49558,-.11677,-.00297,74e-5],dc0:[1721414.39987,365242.88257,-.00769,-.00933,-6e-5],mc2:[2451623.80984,365242.37404,.05169,-.00411,-57e-5],jc2:[2451716.56767,365241.62603,.00325,.00888,-3e-4],sc2:[2451810.21715,365242.01767,-.11575,.00337,78e-5],dc2:[2451900.05952,365242.74049,-.06223,-.00823,32e-5],terms:[[485,324.96,1934.136],[203,337.23,32964.467],[199,342.08,20.186],[182,27.85,445267.112],[156,73.14,45036.886],[136,171.52,22518.443],[77,222.54,65928.934],[74,296.72,3034.906],[70,243.58,9037.513],[58,119.81,33718.147],[52,297.17,150.678],[50,21.02,2281.226],[45,247.54,29929.562],[44,325.15,31555.956],[29,60.93,4443.417],[18,155.12,67555.328],[17,288.79,4562.452],[16,198.04,62894.029],[14,199.76,31436.921],[12,95.39,14577.848],[12,287.11,31931.756],[12,320.81,34777.259],[9,227.73,1222.114],[8,15.45,16859.074]]};const f=(r,n,e,t,o,i)=>{if(r)return 367*r-Math.floor(7*(r+Math.floor((n+9)/12))*.25)+Math.floor(275*n/9)+e+1721013.5+((i/60+o)/60+t)/24;{const r=new Date,n=new Date(r.getUTCFullYear(),0,0),e=r.getDate()-n.getDate();return Math.floor(e/a)}},d=(r,n,t,a,o,i)=>{const s={lat:a,lon:o,alt:i},c=l.Transforms.lla2ecf(s),u=Math.sin(a),h=Math.sin(o),m=Math.cos(a),f=Math.cos(o),d=e*r,p=e*n,M=-t*Math.cos(p)*Math.cos(d),g=t*Math.cos(p)*Math.sin(d),x=t*Math.sin(p);return{x:u*f*M+-h*g+m*f*x+c.x,y:u*h*M+f*g+m*h*x+c.y,z:-m*M+u*x+c.z}},p=(r,n)=>{const e=r.az*t,a=r.el*t,o=r.rng;if(n.obsminaz>n.obsmaxaz){if((e>=n.obsminaz||e<=n.obsmaxaz)&&a>=n.obsminel&&a<=n.obsmaxel&&o<=n.obsmaxrange&&o>=n.obsminrange||(e>=n.obsminaz2||e<=n.obsmaxaz2)&&a>=n.obsminel2&&a<=n.obsmaxel2&&o<=n.obsmaxrange2&&o>=n.obsminrange2)return 1}else if(e>=n.obsminaz&&e<=n.obsmaxaz&&a>=n.obsminel&&a<=n.obsmaxel&&o<=n.obsmaxrange&&o>=n.obsminrange||e>=n.obsminaz2&&e<=n.obsmaxaz2&&a>=n.obsminel2&&a<=n.obsmaxel2&&o<=n.obsmaxrange2&&o>=n.obsminrange2)return 1;return 0},M=(r,n,e)=>({lon:n,lat:r,alt:e}),g=(r,n)=>r.el*t>0&&90-r.el*t<n,x=(r,n)=>r.length>1&&n.type===i.OPTICAL||r.length>1&&n.type===i.OBSERVER||r.length>1&&n.type===i.MECHANICAL,v=(r,n,e)=>(r[3*n]=e.x,r[3*n+1]=e.y,r[3*n+2]=e.z,r),y=(r,n)=>(r[3*n]=0,r[3*n+1]=0,r[3*n+2]=0,r),b=(r,n)=>(r[3*n]=0,r[3*n+1]=0,r[3*n+2]=0,r),T=l.Sgp4,w=new Float32Array(0),A=new Int8Array(0);let _,z=[],S=w,j=w,I=A,k=A,P=[0],q=[-1],L=!1,D=1e3,C=1,E=!1,N=1,R=Date.now(),O=0,U=1,F=90,J=!1,G=!1,V=!1,Y=!1,B=!1,H=!1,X=!1,Q=!1,Z=!1,W=!1,K=0,$=[],rr={observerGd:{lat:null,lon:0,alt:0},alt:null,country:"",lat:null,lon:null,name:"",obsmaxaz:0,obsmaxel:0,obsmaxrange:0,obsminaz:0,obsminel:0,obsminrange:0,shortName:"",staticNum:0,sun:"",volume:!1,zoom:""};try{onmessage=r=>nr(r)}catch(r){if(!process)throw r}const nr=t=>{let a,i,s,c=[];switch(t.data.typ){case"offset":return O=t.data.staticOffset,R=t.data.dynamicOffsetEpoch,U=t.data.propRate,L=!0,void(N=1);case"satdata":for(a=JSON.parse(t.data.dat),_=a.length,i=0;i<_;){const r={lowAlt:null,inclination:null,eccentricity:null,raan:null,argPe:null,meanMotion:null,semiMajorAxis:null,semiMinorAxis:null,apogee:null,perigee:null,period:null};s=null,a[i].static||a[i].missile||a[i].isRadarData?(s=a[i],delete s.id,c.push(r),z.push(s),i++):(s=T.createSatrec(a[i].TLE1,a[i].TLE2),r.lowAlt=s.isimp,r.inclination=s.inclo,r.eccentricity=s.ecco,r.raan=s.nodeo,r.argPe=s.argpo,r.meanMotion=60*s.no*24/n,r.semiMajorAxis=Math.pow(8681663.653/r.meanMotion,2/3),r.semiMinorAxis=r.semiMajorAxis*Math.sqrt(1-Math.pow(r.eccentricity,2)),r.apogee=r.semiMajorAxis*(1+r.eccentricity)-o,s.apogee=r.apogee,r.perigee=r.semiMajorAxis*(1-r.eccentricity)-o,r.period=1440/r.meanMotion,c.push(r),delete s.id,z.push(s),i++)}S=new Float32Array(3*_),j=new Float32Array(3*_),I=new Int8Array(_),k=new Int8Array(_);try{postMessage({extraData:JSON.stringify(c)})}catch(r){if(!process)throw r}break;case"satEdit":s=l.Sgp4.createSatrec(t.data.TLE1,t.data.TLE2),z[t.data.id]=Object.assign(Object.assign({},z[t.data.id]),s),c=[];const u={lowAlt:null,inclination:null,eccentricity:null,raan:null,argPe:null,meanMotion:null,semiMajorAxis:null,semiMinorAxis:null,apogee:null,perigee:null,period:null,TLE1:null,TLE2:null};if(u.inclination=s.inclo,u.eccentricity=s.ecco,u.raan=s.nodeo,u.argPe=s.argpo,u.meanMotion=60*s.no*24/(2*r),u.semiMajorAxis=Math.pow(8681663.653/u.meanMotion,2/3),u.semiMinorAxis=u.semiMajorAxis*Math.sqrt(1-Math.pow(u.eccentricity,2)),u.apogee=u.semiMajorAxis*(1+u.eccentricity)-o,u.perigee=u.semiMajorAxis*(1-u.eccentricity)-o,u.period=1440/u.meanMotion,u.TLE1=t.data.TLE1,u.TLE2=t.data.TLE2,c.push(u),"undefined"!=typeof process)return;postMessage({extraUpdate:!0,extraData:JSON.stringify(c),satId:t.data.id});break;case"newMissile":z[t.data.id]=t.data;break;case"satelliteSelected":q=t.data.satelliteSelected,-1===q[0]&&(B=!0,Z||(Z=!0));break;case"sensor":t.data.multiSensor?(H=!0,$=t.data.sensor,rr=t.data.sensor,C=2,W||(W=!0)):t.data.sensor&&(rr=t.data.sensor[0],t.data.setlatlong&&(t.data.resetObserverGd?(C=1,rr.observerGd=h,$=[],W||(W=!0)):(C=2,rr.observerGd={lon:t.data.sensor[0].lon*e,lat:t.data.sensor[0].lat*e,alt:parseFloat(t.data.sensor[0].alt)},W||(W=!0))),H=!1);break;case"isShowSatOverfly":F=t.data.selectedSatFOV?t.data.selectedSatFOV:F,"enable"===t.data.isShowSatOverfly&&(Y=!0),"reset"===t.data.isShowSatOverfly&&(B=!0,Y=!1,Z||(Z=!0));break;default:t.data.isSunlightView&&(X=t.data.isSunlightView),t.data.isSlowCPUModeEnabled&&(D=2e3),t.data.isLowPerf&&(Q=!0),t.data.fieldOfViewSetLength&&(K=t.data.fieldOfViewSetLength),"enable"===t.data.isShowFOVBubble&&(J=!0),"reset"===t.data.isShowFOVBubble&&(V=!0,J=!1,Z||(Z=!0)),"enable"===t.data.isShowSurvFence&&(G=!0,Z||(Z=!0)),"disable"===t.data.isShowSurvFence&&(G=!1,Z||(Z=!0))}E||"satdata"!==t.data.typ||(_=-1,er(),E=!0)},er=n=>{z=n||z;const{now:e,j:o,gmst:s,gmstNext:c,isSunExclusion:u,sunEci:p}=((n,e,o,s,c,u)=>{const p=((r,n,e)=>{const t=new Date,a=t.getTime()-r;return t.setTime(r+n+a*e),t})(n,e,o),M=f(p.getUTCFullYear(),p.getUTCMonth()+1,p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds())+p.getUTCMilliseconds()*a,g=l.Sgp4.gstime(M);let x=!1,v={x:0,y:0,z:0};s&&!c&&([x,v]=((n,e,a,o)=>{const s=new m.JulianDay(e),c=m.EclCoordfromWgs84(0,0,0),u=m.EclCoordfromWgs84(n.observerGd.lat*t,n.observerGd.lon*t,n.observerGd.alt),f=m.Solar.topocentricPosition(s,c,!1),p=m.Solar.topocentricPosition(s,u,!1),M=f.hz.az*t+180,g=f.hz.alt*t%360,x=p.hz.alt*t%360,v=new m.JulianDay(m.JulianDay.dateToJD(o)).jdJ2000Century();let y=180*m.Solar.meanAnomaly(v)/r;y%=360;const b=149597870700*(1.00014-.01671*Math.cos(y)-14e-5*Math.cos(2*y))/1e3,T=l.Transforms.ecf2eci(d(M,g,b,0,0,0),a);return n.observerGd!==h&&(n.type===i.OPTICAL||n.type===i.OBSERVER)&&x>-6?[!0,T]:[!1,T]})(u,M,g,p));const y=f(p.getUTCFullYear(),p.getUTCMonth()+1,p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds()+1)+p.getUTCMilliseconds()*a;return{now:p,j:M,gmst:g,gmstNext:l.Sgp4.gstime(y),isSunExclusion:x,sunEci:v}})(R,O,U,X,H,rr);_=lr()?z.length-1-K:z.length-1,tr(e,o,s,c,u,p),V&&(V=!1,_-=K),L||fr(),L=!1,setTimeout((()=>{er()}),D*C/N)},tr=(r,n,e,t,a,o)=>{let s=-1;for(;s<_&&!L;){s++;let c=!1;if(z[s].satnum?c=!ur(s,e,o,n,a):z[s].isRadarData?c=!ar(s):z[s].static&&!z[s].marker&&z[s].type===i.STAR?(ir(s,r),b(j,s)):z[s].static&&!z[s].marker?(cr(s,e),b(j,s)):z[s].missile?c=!sr(s,r,t,e):z[s].marker&&(J||V)?s=mr(s,e):z[s].marker&&(Y||B)&&(s=or(s,e)),!c&&(B=!1,z[s].marker)){hr(s);break}}},ar=r=>!z[r].skip&&(z[r].skip=!0,y(S,r),b(j,r),!0),or=(r,n)=>{if(B&&!0===z[r].active)return r;let a,o,i,s,c,u,h,m,f,d,p,x,y;for(let T=0;T<q.length+1;T++){if(T===q.length){P.push(r);break}if(-1!==q[T]){if(!Y)continue;for(c={x:S[3*q[T]],y:S[3*q[T]+1],z:S[3*q[T]+2]},u=l.Transforms.ecf2eci(c,n),h=l.Transforms.eci2lla(u,n),m=h.alt,f=M(h.lat,h.lon,1),p=1,m<2500&&F<=60&&(p=.5),(m>7e3||F>=90)&&(p=2),q.length>1&&(p=2),d=-60;d<60;d+=p)if(o=Math.max(Math.min(Math.round(h.lat*t)+d,90),-90)*e,!(o>90))for(y=m<2500&&F<=60?.5:m>7e3||F>=90?2:1,q.length>1&&(y=2),x=0;x<181;x+=y){if(i=h.longitude+x*e,f=M(o,i,15),a=l.Transforms.ecf2rae(f,c),g(a,F)){if(s=l.Transforms.lla2ecf(f),r===_)continue;z[r].active=!0,S=v(S,r,s),b(j,r),r++}if(0!==x&&180!==x){if(i=h.longitude-x*e,f=M(o,i,15),a=l.Transforms.ecf2rae(f,c),g(a,F)){if(s=l.Transforms.lla2ecf(f),r===_)continue;z[r].active=!0,S=v(S,r,s),b(j,r),r++}if(90===o||-90===o)break}}}}return r},ir=(r,n)=>{const e=s.getStarPosition(n,180,0,z[r]),a=d(e.azimuth*t,e.altitude*t,25e4,0,0,0);(0===S[3*r]||S[3*r]-a.x<.1&&S[3*r]-a.x>-.1)&&(S[3*r]=a.x),(0===S[3*r+1]||S[3*r+1]-a.y<.1&&S[3*r+1]-a.y>-.1)&&(S[3*r+1]=a.y),(0===S[3*r+2]||S[3*r+2]-a.z<.1&&S[3*r+2]-a.z>-.1)&&(S[3*r+2]=a.z)},sr=(r,n,t,a)=>{if(!z[r].active)return S[3*r]=0,S[3*r+1]=0,S[3*r+2]=0,!1;let o,i,s,c;const u=z[r].altList.length;let h;for(let e=0;e<u;e++)if(1*z[r].startTime+1e3*e>=n.getTime()){h=e;break}z[r].lastTime=z[r].lastTime>=0?z[r].lastTime:0,o=Math.cos(z[r].latList[z[r].lastTime+1]*e),i=Math.sin(z[r].latList[z[r].lastTime+1]*e),s=Math.cos(z[r].lonList[z[r].lastTime+1]*e+t),c=Math.sin(z[r].lonList[z[r].lastTime+1]*e+t),0===z[r].lastTime?b(j,r):0===j[3*r]&&0===j[3*r+1]&&0===j[3*r+2]?(j[3*r]=(6371+z[r].altList[z[r].lastTime+1])*o*s-S[3*r],j[3*r+1]=(6371+z[r].altList[z[r].lastTime+1])*o*c-S[3*r+1],j[3*r+2]=(6371+z[r].altList[z[r].lastTime+1])*i-S[3*r+2]):(j[3*r]+=(6371+z[r].altList[z[r].lastTime+1])*o*s-S[3*r],j[3*r+1]+=(6371+z[r].altList[z[r].lastTime+1])*o*c-S[3*r+1],j[3*r+2]+=(6371+z[r].altList[z[r].lastTime+1])*i-S[3*r+2],j[3*r]*=.5,j[3*r+1]*=.5,j[3*r+2]*=.5),o=Math.cos(z[r].latList[h]*e),i=Math.sin(z[r].latList[h]*e),s=Math.cos(z[r].lonList[h]*e+a),c=Math.sin(z[r].lonList[h]*e+a),S[3*r]=(6371+z[r].altList[h])*o*s,S[3*r+1]=(6371+z[r].altList[h])*o*c,S[3*r+2]=(6371+z[r].altList[h])*i,z[r].lastTime=h;const m=S[3*r],f=S[3*r+1],d=S[3*r+2],M=l.Transforms.eci2ecf({x:m,y:f,z:d},a);l.Transforms.eci2lla({x:m,y:f,z:d},a).alt<=150&&!1===z[r].missile&&(z[r].skip=!0);const g=l.Transforms.ecf2rae(rr.observerGd,M);return I[r]=p(g,rr),!0},cr=(r,n)=>{const t=Math.cos(z[r].lat*e),a=Math.sin(z[r].lat*e),o=Math.cos(z[r].lon*e+n),i=Math.sin(z[r].lon*e+n);S[3*r]=(6372+z[r].alt)*t*o,S[3*r+1]=(6372+z[r].alt)*t*i,S[3*r+2]=(6372+z[r].alt)*a},ur=(a,s,c,m,f)=>{let d,M,g,x,v;if(z[a].skip)return!1;const y=1440*(m-z[a].jdsatepoch),b=T.propagate(z[a],y);try{if(S[3*a]=b.position.x,S[3*a+1]=b.position.y,S[3*a+2]=b.position.z,j[3*a]=b.velocity.x,j[3*a+1]=b.velocity.y,j[3*a+2]=b.velocity.z,z[a].isimp||y/1440>20){const e=6378.137,t=6356.7523142,o=Math.sqrt(b.position.x*b.position.x+b.position.y*b.position.y),i=(e-t)/e,c=2*i-i*i;let u=Math.atan2(b.position.y,b.position.x)-s;for(;u<-r;)u+=n;for(;u>r;)u-=n;const l=20;let h,m=0,f=Math.atan2(b.position.z,Math.sqrt(b.position.x*b.position.x+b.position.y*b.position.y));for(;m<l;)h=1/Math.sqrt(1-c*(Math.sin(f)*Math.sin(f))),f=Math.atan2(b.position.z+e*h*c*Math.sin(f),o),m+=1;if(o/Math.cos(f)-e*h>z[a].apogee+1e3)throw new Error("Impossible orbit")}if(z[a].apogee<350&&Math.sqrt(b.velocity.x*b.velocity.x+b.velocity.y*b.velocity.y)<5.5)throw new Error("Impossible orbit");rr.observerGd===h||H||(v=l.Transforms.ecf2rae(rr.observerGd,l.Transforms.eci2ecf(b.position,s)))}catch(r){z[a].skip=!0,S[3*a]=0,S[3*a+1]=0,S[3*a+2]=0,j[3*a]=0,j[3*a+1]=0,j[3*a+2]=0,x=0,v=0}if(I[a]=0,k[a]=2,X&&(d=Math.asin(o/Math.sqrt(Math.pow(-S[3*a],2)+Math.pow(-S[3*a+1],2)+Math.pow(-S[3*a+2],2)))*t,M=Math.asin(695700/Math.sqrt(Math.pow(-S[3*a]+c.x,2)+Math.pow(-S[3*a+1]+c.y,2)+Math.pow(-S[3*a+2]+c.z,2)))*t,g=Math.acos(u().dot([-S[3*a],-S[3*a+1],-S[3*a+2]],[-S[3*a]+c.x,-S[3*a+1]+c.y,-S[3*a+2]+c.z])/(Math.sqrt(Math.pow(-S[3*a],2)+Math.pow(-S[3*a+1],2)+Math.pow(-S[3*a+2],2))*Math.sqrt(Math.pow(-S[3*a]+c.x,2)+Math.pow(-S[3*a+1]+c.y,2)+Math.pow(-S[3*a+2]+c.z,2))))*t,d>M&&g<d-M&&(k[a]=0),Math.abs(d-M)<g&&g<d+M&&(k[a]=1),M>d&&(k[a]=1),g<M-d&&(k[a]=1)),rr.observerGd!==h&&!f)if(H){for(let r=0;r<$.length;r++)if(rr.type!==i.OPTICAL||0!==k[a]){if(I[a])break;rr=$[r],rr.observerGd={lon:rr.lon*e,lat:rr.lat*e,alt:1*rr.alt};try{x=l.Transforms.eci2ecf(b.position,s),v=l.Transforms.ecf2rae(rr.observerGd,x)}catch(r){continue}I[a]=p(v,rr)}}else rr.type===i.OPTICAL&&0===k[a]||(I[a]=p(v,rr));return!0},lr=()=>!B&&!Y&&!V&&!J||Q,hr=r=>{for(;r<_;r++){if(!z[r].active){_-=K;break}y(S,r),b(j,r),z[r].active=!1}},mr=(r,n)=>{let t,a,o,i,s,c;H||rr.observerGd===h||($[0]=rr,$.length=1),P=[];for(let u=0;u<$.length+1&&(P.push(r),u!==$.length);u++)if(rr=$[u],rr.observerGd=M(rr.lat*e,rr.lon*e,rr.alt),y(S,r),b(j,r),!V&&J&&rr.observerGd!==h&&!x($,rr)){if(s=Math.abs(rr.obsmaxaz-rr.obsminaz)<30?.5:3,c=rr.obsmaxrange-rr.obsminrange<720?125:30,!G)if(0!==rr.obsminaz&&360!==rr.obsmaxaz){for(o=Math.max(rr.obsminrange,100);o<Math.min(rr.obsmaxrange,6e4);o+=Math.min(rr.obsmaxrange,6e4)/c)for(t=rr.obsminaz,a=rr.obsminel;a<rr.obsmaxel;a+=s){i=l.Transforms.ecf2eci(d(t,a,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n);try{z[r].active=!0,S=v(S,r,i),b(j,r),r++}catch(r){}}for(o=Math.max(rr.obsminrange,100);o<Math.min(rr.obsmaxrange,6e4);o+=Math.min(rr.obsmaxrange,6e4)/c)for(t=rr.obsmaxaz,a=rr.obsminel;a<rr.obsmaxel;a+=s){i=l.Transforms.ecf2eci(d(t,a,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n);try{z[r].active=!0}catch(r){}S=v(S,r,i),b(j,r),r++}if(void 0!==rr.obsminaz2){for(o=Math.max(rr.obsminrange,100);o<Math.min(rr.obsmaxrange,6e4);o+=Math.min(rr.obsmaxrange,6e4)/c)for(t=rr.obsminaz2,a=rr.obsminel2;a<rr.obsmaxel2;a+=s)i=l.Transforms.ecf2eci(d(t,a,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n),z[r].active=!0,S=v(S,r,i),b(j,r),r++;for(o=Math.max(rr.obsminrange,100);o<Math.min(rr.obsmaxrange,6e4);o+=Math.min(rr.obsmaxrange,6e4)/c)for(t=rr.obsmaxaz2,a=rr.obsminel2;a<rr.obsmaxel2;a+=s)i=l.Transforms.ecf2eci(d(t,a,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n),z[r].active=!0,S=v(S,r,i),b(j,r),r++}}else for(o=Math.max(rr.obsminrange,100);o<Math.min(rr.obsmaxrange,6e4);o+=Math.min(rr.obsmaxrange,6e4)/c)for(a=rr.obsmaxel,t=rr.obsminaz;t<rr.obsmaxaz;t+=s)i=l.Transforms.ecf2eci(d(t,a,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n),z[r].active=!0,S=v(S,r,i),b(j,r),r++;if(rr.obsmaxel-rr.obsminel<20)for(o=Math.max(rr.obsminrange,100);o<Math.min(rr.obsmaxrange,6e4);o+=Math.min(rr.obsmaxrange,6e4)/c)for(t=0;t<Math.max(360,rr.obsmaxaz);t+=s){if(rr.obsminaz>rr.obsmaxaz){if(!(t>=rr.obsminaz||t<=rr.obsmaxaz))continue}else if(!(t>=rr.obsminaz&&t<=rr.obsmaxaz))continue;if(i=l.Transforms.ecf2eci(d(t,rr.obsmaxel,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n),r===_)break;z[r].active=!0,S=v(S,r,i),b(j,r),r++}if(void 0!==rr.obsminaz2)for(s=2,o=Math.max(rr.obsminrange2,100);o<Math.min(rr.obsmaxrange2,6e4);o+=Math.min(rr.obsmaxrange2,6e4)/c)for(t=0;t<360;t+=1*s){if(rr.obsminaz2>rr.obsmaxaz2){if(!(t>=rr.obsminaz2||t<=rr.obsmaxaz2))continue}else if(!(t>=rr.obsminaz2&&t<=rr.obsmaxaz2))continue;if(i=l.Transforms.ecf2eci(d(t,rr.obsminel2,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n),r===_)break;z[r].active=!0,S=v(S,r,i),b(j,r),r++}if(!G){for(o=Math.min(rr.obsmaxrange,6e4),t=0;t<Math.max(360,rr.obsmaxaz);t+=s){if(rr.obsminaz>rr.obsmaxaz){if(!(t>=rr.obsminaz||t<=rr.obsmaxaz))continue}else if(!(t>=rr.obsminaz&&t<=rr.obsmaxaz))continue;for(a=rr.obsminel;a<rr.obsmaxel&&(i=l.Transforms.ecf2eci(d(t,a,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n),r!==_);a+=s)z[r].active=!0,S=v(S,r,i),b(j,r),r++}if(void 0!==rr.obsminaz2)for(o=Math.min(rr.obsmaxrange2,6e4),t=0;t<Math.max(360,rr.obsmaxaz2);t+=s){if(rr.obsminaz2>rr.obsmaxaz2){if(!(t>=rr.obsminaz2||t<=rr.obsmaxaz2))continue}else if(!(t>=rr.obsminaz2&&t<=rr.obsmaxaz2))continue;for(a=rr.obsminel2;a<rr.obsmaxel2&&(i=l.Transforms.ecf2eci(d(t,a,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n),r!==_);a+=s)z[r].active=!0,S=v(S,r,i),b(j,r),r++}}for(s=.25,o=rr.obsmaxrange;o===rr.obsmaxrange;o+=1)for(t=0;t<Math.max(360,rr.obsmaxaz);t+=s){if(rr.obsminaz>rr.obsmaxaz){if(!(t>=rr.obsminaz||t<=rr.obsmaxaz))continue}else if(!(t>=rr.obsminaz&&t<=rr.obsmaxaz))continue;if(i=l.Transforms.ecf2eci(d(t,rr.obsminel,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n),r===_)break;z[r].active=!0,S=v(S,r,i),b(j,r),r++}for(o=rr.obsminrange;o===rr.obsminrange;o+=1)for(t=0;t<Math.max(360,rr.obsmaxaz);t+=s){if(rr.obsminaz>rr.obsmaxaz){if(!(t>=rr.obsminaz||t<=rr.obsmaxaz))continue}else if(!(t>=rr.obsminaz&&t<=rr.obsmaxaz))continue;if(i=l.Transforms.ecf2eci(d(t,rr.obsminel,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n),r===_)break;z[r].active=!0,S=v(S,r,i),b(j,r),r++}if(rr.obsmaxrange-rr.obsminrange<720)for(o=Math.max(rr.obsminrange,100);o<Math.min(rr.obsmaxrange,6e4);o+=Math.min(rr.obsmaxrange,6e4)/c)for(t=0;t<Math.max(360,rr.obsmaxaz);t+=s){if(rr.obsminaz>rr.obsmaxaz){if(!(t>=rr.obsminaz||t<=rr.obsmaxaz))continue}else if(!(t>=rr.obsminaz&&t<=rr.obsmaxaz))continue;if(i=l.Transforms.ecf2eci(d(t,rr.obsminel,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n),r===_)break;z[r].active=!0,S=v(S,r,i),b(j,r),r++}if(rr.obsminaz!==rr.obsmaxaz&&rr.obsminaz!==rr.obsmaxaz-360){for(t=rr.obsmaxaz;t===rr.obsmaxaz;t+=1)for(o=rr.obsminrange;o<rr.obsmaxrange&&(i=l.Transforms.ecf2eci(d(t,rr.obsminel,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n),r!==_);o+=s)z[r].active=!0,S=v(S,r,i),b(j,r),r++;for(t=rr.obsminaz;t===rr.obsminaz;t+=1)for(o=rr.obsminrange;o<rr.obsmaxrange&&(i=l.Transforms.ecf2eci(d(t,rr.obsminel,o,rr.observerGd.lat,rr.observerGd.lon,rr.observerGd.alt),n),r!==_);o+=s)z[r].active=!0,S=v(S,r,i),b(j,r),r++}}return r},fr=()=>{const r={satPos:S};rr.observerGd!==h?r.satInView=I:r.satInView=A,r.satInSun=X?k:A,P.length>=1?r.sensorMarkerArray=P:r.sensorMarkerArray=[];try{postMessage(r),postMessage({satVel:j})}catch(r){if(!process)throw r}}})()})();
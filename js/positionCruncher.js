/*! For license information please see positionCruncher.js.LICENSE.txt */
(()=>{var __webpack_modules__={32:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var numeric=exports;void 0!==__webpack_require__.g&&(__webpack_require__.g.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,n){var r,t,a;for(void 0===n&&(n=15),t=.5,r=new Date;;){for(a=t*=2;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;if(new Date-r>n)break}for(a=t;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;return 1e3*(3*t-1)/(new Date-r)},numeric._myIndexOf=function(e){var n,r=this.length;for(n=0;n<r;++n)if(this[n]===e)return n;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){function n(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(e<0)return"-"+n(-e);if(isFinite(e)){var r=Math.floor(Math.log(e)/Math.log(10)),t=e/Math.pow(10,r),a=t.toPrecision(numeric.precision);return 10===parseFloat(a)&&(r++,a=(t=1).toPrecision(numeric.precision)),parseFloat(a).toString()+"e"+r.toString()}return"Infinity"}var r=[];return function e(t){var a;if(void 0===t)return r.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof t)return r.push('"'+t+'"'),!1;if("boolean"==typeof t)return r.push(t.toString()),!1;if("number"==typeof t){var o=n(t),i=t.toPrecision(numeric.precision),s=parseFloat(t.toString()).toString(),u=[o,i,s,parseFloat(i).toString(),parseFloat(s).toString()];for(a=1;a<u.length;a++)u[a].length<o.length&&(o=u[a]);return r.push(Array(numeric.precision+8-o.length).join(" ")+o),!1}if(null===t)return r.push("null"),!1;if("function"==typeof t){r.push(t.toString());var c=!1;for(a in t)t.hasOwnProperty(a)&&(c?r.push(",\n"):r.push("\n{"),c=!0,r.push(a),r.push(": \n"),e(t[a]));return c&&r.push("}\n"),!0}if(t instanceof Array){if(t.length>numeric.largeArray)return r.push("...Large Array..."),!0;for(c=!1,r.push("["),a=0;a<t.length;a++)a>0&&(r.push(","),c&&r.push("\n ")),c=e(t[a]);return r.push("]"),!0}for(a in r.push("{"),c=!1,t)t.hasOwnProperty(a)&&(c&&r.push(",\n"),c=!0,r.push(a),r.push(": \n"),e(t[a]));return r.push("}"),!0}(e),r.join("")},numeric.parseDate=function(e){return function e(n){if("string"==typeof n)return Date.parse(n.replace(/-/g,"/"));if(!(n instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var r,t=[];for(r=0;r<n.length;r++)t[r]=e(n[r]);return t}(e)},numeric.parseFloat=function(e){return function e(n){if("string"==typeof n)return parseFloat(n);if(!(n instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var r,t=[];for(r=0;r<n.length;r++)t[r]=e(n[r]);return t}(e)},numeric.parseCSV=function(e){var n,r,t,a=e.split("\n"),o=[],i=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,u=0;for(r=0;r<a.length;r++){var c,l=(a[r]+",").match(i);if(l.length>0){for(o[u]=[],n=0;n<l.length;n++)c=(t=l[n]).substr(0,t.length-1),s.test(c)?o[u][n]=parseFloat(c):o[u][n]=c;u++}}return o},numeric.toCSV=function(e){var n,r,t,a,o,i=numeric.dim(e);for(t=i[0],i[1],o=[],n=0;n<t;n++){for(a=[],r=0;r<t;r++)a[r]=e[n][r].toString();o[n]=a.join(", ")}return o.join("\n")+"\n"},numeric.getURL=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(),n},numeric.imageURL=function(e){function n(e,n,r){void 0===n&&(n=0),void 0===r&&(r=e.length);var t,a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=-1;for(e.length,t=n;t<r;t++)o=o>>>8^a[255&(o^e[t])];return-1^o}var r,t,a,o,i,s,u,c,l,m,h=e[0].length,f=e[0][0].length,d=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,f>>24&255,f>>16&255,f>>8&255,255&f,h>>24&255,h>>16&255,h>>8&255,255&h,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(m=n(d,12,29),d[29]=m>>24&255,d[30]=m>>16&255,d[31]=m>>8&255,d[32]=255&m,r=1,t=0,u=0;u<h;u++){for(u<h-1?d.push(0):d.push(1),i=3*f+1+(0===u)&255,s=3*f+1+(0===u)>>8&255,d.push(i),d.push(s),d.push(255&~i),d.push(255&~s),0===u&&d.push(0),c=0;c<f;c++)for(a=0;a<3;a++)t=(t+(r=(r+(i=(i=e[a][u][c])>255?255:i<0?0:Math.round(i)))%65521))%65521,d.push(i);d.push(0)}return l=(t<<16)+r,d.push(l>>24&255),d.push(l>>16&255),d.push(l>>8&255),d.push(255&l),o=d.length-41,d[33]=o>>24&255,d[34]=o>>16&255,d[35]=o>>8&255,d[36]=255&o,m=n(d,37),d.push(m>>24&255),d.push(m>>16&255),d.push(m>>8&255),d.push(255&m),d.push(0),d.push(0),d.push(0),d.push(0),d.push(73),d.push(69),d.push(78),d.push(68),d.push(174),d.push(66),d.push(96),d.push(130),"data:image/png;base64,"+function(e){var n,r,t,a,o,i,s,u=e.length,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="";for(n=0;n<u;n+=3)o=((3&(r=e[n]))<<4)+((t=e[n+1])>>4),i=((15&t)<<2)+((a=e[n+2])>>6),s=63&a,n+1>=u?i=s=64:n+2>=u&&(s=64),l+=c.charAt(r>>2)+c.charAt(o)+c.charAt(i)+c.charAt(s);return l}(d)},numeric._dim=function(e){for(var n=[];"object"==typeof e;)n.push(e.length),e=e[0];return n},numeric.dim=function(e){var n;return"object"==typeof e?"object"==typeof(n=e[0])?"object"==typeof n[0]?numeric._dim(e):[e.length,n.length]:[e.length]:[]},numeric.mapreduce=function(e,n){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+n+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,n){return Function("x","var n = x.length;\nvar i,xi;\n"+n+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(n,r){var t,a;if(!(n instanceof Array&&r instanceof Array))return!1;if((a=n.length)!==r.length)return!1;for(t=0;t<a;t++)if(n[t]!==r[t]){if("object"!=typeof n[t])return!1;if(!e(n[t],r[t]))return!1}return!0},numeric.rep=function(e,n,r){void 0===r&&(r=0);var t,a=e[r],o=Array(a);if(r===e.length-1){for(t=a-2;t>=0;t-=2)o[t+1]=n,o[t]=n;return-1===t&&(o[0]=n),o}for(t=a-1;t>=0;t--)o[t]=numeric.rep(e,n,r+1);return o},numeric.dotMMsmall=function(e,n){var r,t,a,o,i,s,u,c,l,m,h;for(o=e.length,i=n.length,s=n[0].length,u=Array(o),r=o-1;r>=0;r--){for(c=Array(s),l=e[r],a=s-1;a>=0;a--){for(m=l[i-1]*n[i-1][a],t=i-2;t>=1;t-=2)h=t-1,m+=l[t]*n[t][a]+l[h]*n[h][a];0===t&&(m+=l[0]*n[0][a]),c[a]=m}u[r]=c}return u},numeric._getCol=function(e,n,r){var t;for(t=e.length-1;t>0;--t)r[t]=e[t][n],r[--t]=e[t][n];0===t&&(r[0]=e[0][n])},numeric.dotMMbig=function(e,n){var r,t,a,o=numeric._getCol,i=n.length,s=Array(i),u=e.length,c=n[0].length,l=new Array(u),m=numeric.dotVV;for(--i,t=--u;-1!==t;--t)l[t]=Array(c);for(t=--c;-1!==t;--t)for(o(n,t,s),a=u;-1!==a;--a)r=e[a],l[a][t]=m(r,s);return l},numeric.dotMV=function(e,n){var r,t=e.length,a=(n.length,Array(t)),o=numeric.dotVV;for(r=t-1;r>=0;r--)a[r]=o(e[r],n);return a},numeric.dotVM=function(e,n){var r,t,a,o,i,s,u;for(a=e.length,o=n[0].length,i=Array(o),t=o-1;t>=0;t--){for(s=e[a-1]*n[a-1][t],r=a-2;r>=1;r-=2)u=r-1,s+=e[r]*n[r][t]+e[u]*n[u][t];0===r&&(s+=e[0]*n[0][t]),i[t]=s}return i},numeric.dotVV=function(e,n){var r,t,a=e.length,o=e[a-1]*n[a-1];for(r=a-2;r>=1;r-=2)t=r-1,o+=e[r]*n[r]+e[t]*n[t];return 0===r&&(o+=e[0]*n[0]),o},numeric.dot=function(e,n){var r=numeric.dim;switch(1e3*r(e).length+r(n).length){case 2002:return n.length<10?numeric.dotMMsmall(e,n):numeric.dotMMbig(e,n);case 2001:return numeric.dotMV(e,n);case 1002:return numeric.dotVM(e,n);case 1001:return numeric.dotVV(e,n);case 1e3:return numeric.mulVS(e,n);case 1:return numeric.mulSV(e,n);case 0:return e*n;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var n,r,t,a,o=e.length,i=Array(o);for(n=o-1;n>=0;n--){for(a=Array(o),r=n+2,t=o-1;t>=r;t-=2)a[t]=0,a[t-1]=0;for(t>n&&(a[t]=0),a[n]=e[n],t=n-1;t>=1;t-=2)a[t]=0,a[t-1]=0;0===t&&(a[0]=0),i[n]=a}return i},numeric.getDiag=function(e){var n,r=Math.min(e.length,e[0].length),t=Array(r);for(n=r-1;n>=1;--n)t[n]=e[n][n],t[--n]=e[n][n];return 0===n&&(t[0]=e[0][0]),t},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,n,r){void 0===r&&(r="");var t,a,o=[],i=/\[i\]$/,s="",u=!1;for(t=0;t<e.length;t++)i.test(e[t])?s=a=e[t].substring(0,e[t].length-3):a=e[t],"ret"===a&&(u=!0),o.push(a);return o[e.length]="_s",o[e.length+1]="_k",o[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(u?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+r+"\nfor(i=_n-1;i!==-1;--i) {\n    "+n+"\n}\nreturn ret;",Function.apply(null,o)},numeric.pointwise2=function(e,n,r){void 0===r&&(r="");var t,a,o=[],i=/\[i\]$/,s="",u=!1;for(t=0;t<e.length;t++)i.test(e[t])?s=a=e[t].substring(0,e[t].length-3):a=e[t],"ret"===a&&(u=!0),o.push(a);return o[e.length]="var _n = "+s+".length;\nvar i"+(u?"":", ret = Array(_n)")+";\n"+r+"\nfor(i=_n-1;i!==-1;--i) {\n"+n+"\n}\nreturn ret;",Function.apply(null,o)},numeric._biforeach=function e(n,r,t,a,o){var i;if(a!==t.length-1)for(i=t[a]-1;i>=0;i--)e("object"==typeof n?n[i]:n,"object"==typeof r?r[i]:r,t,a+1,o);else o(n,r)},numeric._biforeach2=function e(n,r,t,a,o){if(a===t.length-1)return o(n,r);var i,s=t[a],u=Array(s);for(i=s-1;i>=0;--i)u[i]=e("object"==typeof n?n[i]:n,"object"==typeof r?r[i]:r,t,a+1,o);return u},numeric._foreach=function e(n,r,t,a){var o;if(t!==r.length-1)for(o=r[t]-1;o>=0;o--)e(n[o],r,t+1,a);else a(n)},numeric._foreach2=function e(n,r,t,a){if(t===r.length-1)return a(n);var o,i=r[t],s=Array(i);for(o=i-1;o>=0;o--)s[o]=e(n[o],r,t+1,a);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,n;for(e=0;e<numeric.mathfuns2.length;++e)n=numeric.mathfuns2[e],numeric.ops2[n]=n;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){n=numeric.ops2[e];var r,t,a="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(a="var "+n+" = Math."+n+";\n",r=function(e,r,t){return e+" = "+n+"("+r+","+t+")"},t=function(e,r){return e+" = "+n+"("+e+","+r+")"}):(r=function(e,r,t){return e+" = "+r+" "+n+" "+t},t=numeric.opseq.hasOwnProperty(e+"eq")?function(e,r){return e+" "+n+"= "+r}:function(e,r){return e+" = "+e+" "+n+" "+r}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),a),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),a),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),a),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+t("x","y")+"\n}\nreturn x;\n"),numeric[n]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],t("ret[i]","x[i]"),a),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],t("ret[i]","x"),a),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)n=numeric.mathfuns2[e],delete numeric.ops2[n];for(e=0;e<numeric.mathfuns.length;++e)n=numeric.mathfuns[e],numeric.ops1[n]=n;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(a="",n=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(n)&&(a="var "+n+" = Math."+n+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+n+"(ret[i]);",a),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+n+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+n+"(x[i]);",a),numeric[e]=Function("x",'if(typeof x !== "object") return '+n+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)n=numeric.mathfuns[e],delete numeric.ops1[n];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(n=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(n[0],n[1]),numeric[e]=Function("x","s","k",n[1]+'if(typeof x !== "object") {    xi = x;\n'+n[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+n[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,n){return"object"==typeof e?"object"==typeof n?numeric.truncVV(e,n):numeric.truncVS(e,n):"object"==typeof n?numeric.truncSV(e,n):Math.round(e/n)*n},numeric.inv=function(e){var n,r,t,a,o,i,s,u=numeric.dim(e),c=Math.abs,l=u[0],m=u[1],h=numeric.clone(e),f=numeric.identity(l);for(i=0;i<m;++i){var d=-1,p=-1;for(o=i;o!==l;++o)(s=c(h[o][i]))>p&&(d=o,p=s);for(r=h[d],h[d]=h[i],h[i]=r,a=f[d],f[d]=f[i],f[i]=a,e=r[i],s=i;s!==m;++s)r[s]/=e;for(s=m-1;-1!==s;--s)a[s]/=e;for(o=l-1;-1!==o;--o)if(o!==i){for(n=h[o],t=f[o],e=n[i],s=i+1;s!==m;++s)n[s]-=r[s]*e;for(s=m-1;s>0;--s)t[s]-=a[s]*e,t[--s]-=a[s]*e;0===s&&(t[0]-=a[0]*e)}}return f},numeric.det=function(e){var n=numeric.dim(e);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: det() only works on square matrices");var r,t,a,o,i,s,u,c,l=n[0],m=1,h=numeric.clone(e);for(t=0;t<l-1;t++){for(a=t,r=t+1;r<l;r++)Math.abs(h[r][t])>Math.abs(h[a][t])&&(a=r);for(a!==t&&(u=h[a],h[a]=h[t],h[t]=u,m*=-1),o=h[t],r=t+1;r<l;r++){for(s=(i=h[r])[t]/o[t],a=t+1;a<l-1;a+=2)c=a+1,i[a]-=o[a]*s,i[c]-=o[c]*s;a!==l&&(i[a]-=o[a]*s)}if(0===o[t])return 0;m*=o[t]}return m*h[t][t]},numeric.transpose=function(e){var n,r,t,a,o,i=e.length,s=e[0].length,u=Array(s);for(r=0;r<s;r++)u[r]=Array(i);for(n=i-1;n>=1;n-=2){for(a=e[n],t=e[n-1],r=s-1;r>=1;--r)(o=u[r])[n]=a[r],o[n-1]=t[r],(o=u[--r])[n]=a[r],o[n-1]=t[r];0===r&&((o=u[0])[n]=a[0],o[n-1]=t[0])}if(0===n){for(t=e[0],r=s-1;r>=1;--r)u[r][0]=t[r],u[--r][0]=t[r];0===r&&(u[0][0]=t[0])}return u},numeric.negtranspose=function(e){var n,r,t,a,o,i=e.length,s=e[0].length,u=Array(s);for(r=0;r<s;r++)u[r]=Array(i);for(n=i-1;n>=1;n-=2){for(a=e[n],t=e[n-1],r=s-1;r>=1;--r)(o=u[r])[n]=-a[r],o[n-1]=-t[r],(o=u[--r])[n]=-a[r],o[n-1]=-t[r];0===r&&((o=u[0])[n]=-a[0],o[n-1]=-t[0])}if(0===n){for(t=e[0],r=s-1;r>=1;--r)u[r][0]=-t[r],u[--r][0]=-t[r];0===r&&(u[0][0]=-t[0])}return u},numeric._random=function e(n,r){var t,a,o=n[r],i=Array(o);if(r===n.length-1){for(a=Math.random,t=o-1;t>=1;t-=2)i[t]=a(),i[t-1]=a();return 0===t&&(i[0]=a()),i}for(t=o-1;t>=0;t--)i[t]=e(n,r+1);return i},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,n,r){if(void 0===r&&(r=Math.max(Math.round(n-e)+1,1)),r<2)return 1===r?[e]:[];var t,a=Array(r);for(t=--r;t>=0;t--)a[t]=(t*n+(r-t)*e)/r;return a},numeric.getBlock=function(e,n,r){var t=numeric.dim(e);return function e(a,o){var i,s=n[o],u=r[o]-s,c=Array(u);if(o===t.length-1){for(i=u;i>=0;i--)c[i]=a[i+s];return c}for(i=u;i>=0;i--)c[i]=e(a[i+s],o+1);return c}(e,0)},numeric.setBlock=function(e,n,r,t){var a=numeric.dim(e);return function e(t,o,i){var s,u=n[i],c=r[i]-u;if(i===a.length-1)for(s=c;s>=0;s--)t[s+u]=o[s];for(s=c;s>=0;s--)e(t[s+u],o[s],i+1)}(e,t,0),e},numeric.getRange=function(e,n,r){var t,a,o,i,s=n.length,u=r.length,c=Array(s);for(t=s-1;-1!==t;--t)for(c[t]=Array(u),o=c[t],i=e[n[t]],a=u-1;-1!==a;--a)o[a]=i[r[a]];return c},numeric.blockMatrix=function(e){var n=numeric.dim(e);if(n.length<4)return numeric.blockMatrix([e]);var r,t,a,o,i,s=n[0],u=n[1];for(r=0,t=0,a=0;a<s;++a)r+=e[a][0].length;for(o=0;o<u;++o)t+=e[0][o][0].length;var c=Array(r);for(a=0;a<r;++a)c[a]=Array(t);var l,m,h,f,d,p=0;for(a=0;a<s;++a){for(l=t,o=u-1;-1!==o;--o)for(l-=(i=e[a][o])[0].length,h=i.length-1;-1!==h;--h)for(d=i[h],m=c[p+h],f=d.length-1;-1!==f;--f)m[l+f]=d[f];p+=e[a][0].length}return c},numeric.tensor=function(e,n){if("number"==typeof e||"number"==typeof n)return numeric.mul(e,n);var r=numeric.dim(e),t=numeric.dim(n);if(1!==r.length||1!==t.length)throw new Error("numeric: tensor product is only defined for vectors");var a,o,i,s,u=r[0],c=t[0],l=Array(u);for(o=u-1;o>=0;o--){for(a=Array(c),s=e[o],i=c-1;i>=3;--i)a[i]=s*n[i],a[--i]=s*n[i],a[--i]=s*n[i],a[--i]=s*n[i];for(;i>=0;)a[i]=s*n[i],--i;l[o]=a}return l},numeric.T=function(e,n){this.x=e,this.y=n},numeric.t=function(e,n){return new numeric.T(e,n)},numeric.Tbinop=function(e,n,r,t,a){var o;if(numeric.indexOf,"string"!=typeof a)for(o in a="",numeric)numeric.hasOwnProperty(o)&&(e.indexOf(o)>=0||n.indexOf(o)>=0||r.indexOf(o)>=0||t.indexOf(o)>=0)&&o.length>1&&(a+="var "+o+" = numeric."+o+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+a+"\nif(x.y) {  if(y.y) {    return new numeric.T("+t+");\n  }\n  return new numeric.T("+r+");\n}\nif(y.y) {\n  return new numeric.T("+n+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,n=numeric.div;if(this.y){var r=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(n(this.x,r),n(numeric.neg(this.y),r))}return new T(n(1,this.x))},numeric.T.prototype.div=function(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var n=numeric.div;return this.y?new numeric.T(n(this.x,e.x),n(this.y,e.x)):new numeric.T(n(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,n=this.x,r=this.y;return r?new numeric.T(e(n),e(r)):new numeric.T(e(n))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,n=this.x,r=this.y;return r?new numeric.T(e(n),numeric.negtranspose(r)):new numeric.T(e(n))},numeric.Tunop=function(e,n,r){return"string"!=typeof r&&(r=""),Function("var x = this;\n"+r+"\nif(x.y) {  "+n+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if(void 0===e.y)return new numeric.T(numeric.inv(e.x));var n,r,t,a,o,i,s,u,c,l,m,h,f,d,p,g,M,v,y=e.x.length,x=numeric.identity(y),b=numeric.rep([y,y],0),w=numeric.clone(e.x),T=numeric.clone(e.y);for(c=0;c<y;c++){for(h=(d=w[c][c])*d+(p=T[c][c])*p,m=c,l=c+1;l<y;l++)(f=(d=w[l][c])*d+(p=T[l][c])*p)>h&&(m=l,h=f);for(m!==c&&(v=w[c],w[c]=w[m],w[m]=v,v=T[c],T[c]=T[m],T[m]=v,v=x[c],x[c]=x[m],x[m]=v,v=b[c],b[c]=b[m],b[m]=v),n=w[c],r=T[c],o=x[c],i=b[c],d=n[c],p=r[c],l=c+1;l<y;l++)g=n[l],M=r[l],n[l]=(g*d+M*p)/h,r[l]=(M*d-g*p)/h;for(l=0;l<y;l++)g=o[l],M=i[l],o[l]=(g*d+M*p)/h,i[l]=(M*d-g*p)/h;for(l=c+1;l<y;l++){for(t=w[l],a=T[l],s=x[l],u=b[l],d=t[c],p=a[c],m=c+1;m<y;m++)g=n[m],M=r[m],t[m]-=g*d-M*p,a[m]-=M*d+g*p;for(m=0;m<y;m++)g=o[m],M=i[m],s[m]-=g*d-M*p,u[m]-=M*d+g*p}}for(c=y-1;c>0;c--)for(o=x[c],i=b[c],l=c-1;l>=0;l--)for(s=x[l],u=b[l],d=w[l][c],p=T[l][c],m=y-1;m>=0;m--)g=o[m],M=i[m],s[m]-=d*g-p*M,u[m]-=d*M+p*g;return new numeric.T(x,b)},numeric.T.prototype.get=function(e){var n,r=this.x,t=this.y,a=0,o=e.length;if(t){for(;a<o;)r=r[n=e[a]],t=t[n],a++;return new numeric.T(r,t)}for(;a<o;)r=r[n=e[a]],a++;return new numeric.T(r)},numeric.T.prototype.set=function(e,n){var r,t=this.x,a=this.y,o=0,i=e.length,s=n.x,u=n.y;if(0===i)return u?this.y=u:a&&(this.y=void 0),this.x=t,this;if(u){for(a||(a=numeric.rep(numeric.dim(t),0),this.y=a);o<i-1;)t=t[r=e[o]],a=a[r],o++;return t[r=e[o]]=s,a[r]=u,this}if(a){for(;o<i-1;)t=t[r=e[o]],a=a[r],o++;return t[r=e[o]]=s,a[r]=s instanceof Array?numeric.rep(numeric.dim(s),0):0,this}for(;o<i-1;)t=t[r=e[o]],o++;return t[r=e[o]]=s,this},numeric.T.prototype.getRows=function(e,n){var r,t,a=n-e+1,o=Array(a),i=this.x,s=this.y;for(r=e;r<=n;r++)o[r-e]=i[r];if(s){for(t=Array(a),r=e;r<=n;r++)t[r-e]=s[r];return new numeric.T(o,t)}return new numeric.T(o)},numeric.T.prototype.setRows=function(e,n,r){var t,a=this.x,o=this.y,i=r.x,s=r.y;for(t=e;t<=n;t++)a[t]=i[t-e];if(s)for(o||(o=numeric.rep(numeric.dim(a),0),this.y=o),t=e;t<=n;t++)o[t]=s[t-e];else if(o)for(t=e;t<=n;t++)o[t]=numeric.rep([i[t-e].length],0);return this},numeric.T.prototype.getRow=function(e){var n=this.x,r=this.y;return r?new numeric.T(n[e],r[e]):new numeric.T(n[e])},numeric.T.prototype.setRow=function(e,n){var r=this.x,t=this.y,a=n.x,o=n.y;return r[e]=a,o?(t||(t=numeric.rep(numeric.dim(r),0),this.y=t),t[e]=o):t&&(t=numeric.rep([a.length],0)),this},numeric.T.prototype.getBlock=function(e,n){var r=this.x,t=this.y,a=numeric.getBlock;return t?new numeric.T(a(r,e,n),a(t,e,n)):new numeric.T(a(r,e,n))},numeric.T.prototype.setBlock=function(e,n,r){r instanceof numeric.T||(r=new numeric.T(r));var t=this.x,a=this.y,o=numeric.setBlock,i=r.x,s=r.y;if(s)return a||(this.y=numeric.rep(numeric.dim(this),0),a=this.y),o(t,e,n,i),o(a,e,n,s),this;o(t,e,n,i),a&&o(a,e,n,numeric.rep(numeric.dim(i),0))},numeric.T.rep=function(e,n){var r=numeric.T;n instanceof r||(n=new r(n));var t=n.x,a=n.y,o=numeric.rep;return a?new r(o(e,t),o(e,a)):new r(o(e,t))},numeric.T.diag=function(e){e instanceof numeric.T||(e=new numeric.T(e));var n=e.x,r=e.y,t=numeric.diag;return r?new numeric.T(t(n),t(r)):new numeric.T(t(n))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,n=this.x,r=this.y;return r?new e.T(e.getDiag(n),e.getDiag(r)):new e.T(e.getDiag(n))},numeric.house=function(e){var n=numeric.clone(e),r=(e[0]>=0?1:-1)*numeric.norm2(e);n[0]+=r;var t=numeric.norm2(n);if(0===t)throw new Error("eig: internal error");return numeric.div(n,t)},numeric.toUpperHessenberg=function(e){var n=numeric.dim(e);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var r,t,a,o,i,s,u,c,l,m,h=n[0],f=numeric.clone(e),d=numeric.identity(h);for(t=0;t<h-2;t++){for(o=Array(h-t-1),r=t+1;r<h;r++)o[r-t-1]=f[r][t];if(numeric.norm2(o)>0){for(i=numeric.house(o),s=numeric.getBlock(f,[t+1,t],[h-1,h-1]),u=numeric.tensor(i,numeric.dot(i,s)),r=t+1;r<h;r++)for(c=f[r],l=u[r-t-1],a=t;a<h;a++)c[a]-=2*l[a-t];for(s=numeric.getBlock(f,[0,t+1],[h-1,h-1]),u=numeric.tensor(numeric.dot(s,i),i),r=0;r<h;r++)for(c=f[r],l=u[r],a=t+1;a<h;a++)c[a]-=2*l[a-t-1];for(s=Array(h-t-1),r=t+1;r<h;r++)s[r-t-1]=d[r];for(u=numeric.tensor(i,numeric.dot(i,s)),r=t+1;r<h;r++)for(m=d[r],l=u[r-t-1],a=0;a<h;a++)m[a]-=2*l[a]}}return{H:f,Q:d}},numeric.epsilon=2220446049250313e-31,numeric.QRFrancis=function(e,n){void 0===n&&(n=1e4),e=numeric.clone(e),numeric.clone(e);var r,t,a,o,i,s,u,c,l,m,h,f,d,p,g,M,v,y,x=numeric.dim(e)[0],b=numeric.identity(x);if(x<3)return{Q:b,B:[[0,x-1]]};var w=numeric.epsilon;for(y=0;y<n;y++){for(M=0;M<x-1;M++)if(Math.abs(e[M+1][M])<w*(Math.abs(e[M][M])+Math.abs(e[M+1][M+1]))){var T=numeric.QRFrancis(numeric.getBlock(e,[0,0],[M,M]),n),A=numeric.QRFrancis(numeric.getBlock(e,[M+1,M+1],[x-1,x-1]),n);for(f=Array(M+1),g=0;g<=M;g++)f[g]=b[g];for(d=numeric.dot(T.Q,f),g=0;g<=M;g++)b[g]=d[g];for(f=Array(x-M-1),g=M+1;g<x;g++)f[g-M-1]=b[g];for(d=numeric.dot(A.Q,f),g=M+1;g<x;g++)b[g]=d[g-M-1];return{Q:b,B:T.B.concat(numeric.add(A.B,M+1))}}var _,S,I;for(a=e[x-2][x-2],o=e[x-2][x-1],i=e[x-1][x-2],c=a+(s=e[x-1][x-1]),u=a*s-o*i,l=numeric.getBlock(e,[0,0],[2,2]),c*c>=4*u?(_=.5*(c+Math.sqrt(c*c-4*u)),S=.5*(c-Math.sqrt(c*c-4*u)),l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,_+S)),numeric.diag(numeric.rep([3],_*S)))):l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,c)),numeric.diag(numeric.rep([3],u))),r=[l[0][0],l[1][0],l[2][0]],t=numeric.house(r),f=[e[0],e[1],e[2]],d=numeric.tensor(t,numeric.dot(t,f)),g=0;g<3;g++)for(h=e[g],p=d[g],v=0;v<x;v++)h[v]-=2*p[v];for(f=numeric.getBlock(e,[0,0],[x-1,2]),d=numeric.tensor(numeric.dot(f,t),t),g=0;g<x;g++)for(h=e[g],p=d[g],v=0;v<3;v++)h[v]-=2*p[v];for(f=[b[0],b[1],b[2]],d=numeric.tensor(t,numeric.dot(t,f)),g=0;g<3;g++)for(m=b[g],p=d[g],v=0;v<x;v++)m[v]-=2*p[v];for(M=0;M<x-2;M++){for(v=M;v<=M+1;v++)if(Math.abs(e[v+1][v])<w*(Math.abs(e[v][v])+Math.abs(e[v+1][v+1]))){for(T=numeric.QRFrancis(numeric.getBlock(e,[0,0],[v,v]),n),A=numeric.QRFrancis(numeric.getBlock(e,[v+1,v+1],[x-1,x-1]),n),f=Array(v+1),g=0;g<=v;g++)f[g]=b[g];for(d=numeric.dot(T.Q,f),g=0;g<=v;g++)b[g]=d[g];for(f=Array(x-v-1),g=v+1;g<x;g++)f[g-v-1]=b[g];for(d=numeric.dot(A.Q,f),g=v+1;g<x;g++)b[g]=d[g-v-1];return{Q:b,B:T.B.concat(numeric.add(A.B,v+1))}}for(I=Math.min(x-1,M+3),r=Array(I-M),g=M+1;g<=I;g++)r[g-M-1]=e[g][M];for(t=numeric.house(r),f=numeric.getBlock(e,[M+1,M],[I,x-1]),d=numeric.tensor(t,numeric.dot(t,f)),g=M+1;g<=I;g++)for(h=e[g],p=d[g-M-1],v=M;v<x;v++)h[v]-=2*p[v-M];for(f=numeric.getBlock(e,[0,M+1],[x-1,I]),d=numeric.tensor(numeric.dot(f,t),t),g=0;g<x;g++)for(h=e[g],p=d[g],v=M+1;v<=I;v++)h[v]-=2*p[v-M-1];for(f=Array(I-M),g=M+1;g<=I;g++)f[g-M-1]=b[g];for(d=numeric.tensor(t,numeric.dot(t,f)),g=M+1;g<=I;g++)for(m=b[g],p=d[g-M-1],v=0;v<x;v++)m[v]-=2*p[v]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,n){var r,t,a,o,i,s,u,c,l,m,h,f,d,p,g,M,v=numeric.toUpperHessenberg(e),y=numeric.QRFrancis(v.H,n),x=numeric.T,b=e.length,w=y.B,T=numeric.dot(y.Q,numeric.dot(v.H,numeric.transpose(y.Q))),A=new x(numeric.dot(y.Q,v.Q)),_=w.length,S=Math.sqrt;for(t=0;t<_;t++)if((r=w[t][0])===w[t][1]);else{if(o=r+1,i=T[r][r],s=T[r][o],u=T[o][r],c=T[o][o],0===s&&0===u)continue;(m=(l=-i-c)*l-4*(i*c-s*u))>=0?((g=(i-(h=l<0?-.5*(l-S(m)):-.5*(l+S(m))))*(i-h)+s*s)>(M=u*u+(c-h)*(c-h))?(d=(i-h)/(g=S(g)),p=s/g):(d=u/(M=S(M)),p=(c-h)/M),a=new x([[p,-d],[d,p]]),A.setRows(r,o,a.dot(A.getRows(r,o)))):(h=-.5*l,f=.5*S(-m),(g=(i-h)*(i-h)+s*s)>(M=u*u+(c-h)*(c-h))?(d=(i-h)/(g=S(g+f*f)),p=s/g,h=0,f/=g):(d=u/(M=S(M+f*f)),p=(c-h)/M,h=f/M,f=0),a=new x([[p,-d],[d,p]],[[h,f],[f,-h]]),A.setRows(r,o,a.dot(A.getRows(r,o))))}var I=A.dot(e).dot(A.transjugate()),E=(b=e.length,numeric.T.identity(b));for(o=0;o<b;o++)if(o>0)for(t=o-1;t>=0;t--){var N=I.get([t,t]),R=I.get([o,o]);numeric.neq(N.x,R.x)||numeric.neq(N.y,R.y)?(h=I.getRow(t).getBlock([t],[o-1]),f=E.getRow(o).getBlock([t],[o-1]),E.set([o,t],I.get([t,o]).neg().sub(h.dot(f)).div(N.sub(R)))):E.setRow(o,E.getRow(t))}for(o=0;o<b;o++)h=E.getRow(o),E.setRow(o,h.div(h.norm2()));return E=E.transpose(),E=A.transjugate().dot(E),{lambda:I.getDiag(),E}},numeric.ccsSparse=function(e){var n,r,t,a=e.length,o=[];for(r=a-1;-1!==r;--r)for(t in n=e[r]){for(t=parseInt(t);t>=o.length;)o[o.length]=0;0!==n[t]&&o[t]++}var i=o.length,s=Array(i+1);for(s[0]=0,r=0;r<i;++r)s[r+1]=s[r]+o[r];var u=Array(s[i]),c=Array(s[i]);for(r=a-1;-1!==r;--r)for(t in n=e[r])0!==n[t]&&(o[t]--,u[s[t]+o[t]]=r,c[s[t]+o[t]]=n[t]);return[s,u,c]},numeric.ccsFull=function(e){var n,r,t,a,o=e[0],i=e[1],s=e[2],u=numeric.ccsDim(e),c=u[0],l=u[1],m=numeric.rep([c,l],0);for(n=0;n<l;n++)for(t=o[n],a=o[n+1],r=t;r<a;++r)m[i[r]][n]=s[r];return m},numeric.ccsTSolve=function(e,n,r,t,a){var o,i,s,u,c,l,m,h=e[0],f=e[1],d=e[2],p=h.length-1,g=Math.max,M=0;function v(e){var n;if(0===r[e]){for(r[e]=1,n=h[e];n<h[e+1];++n)v(f[n]);a[M]=e,++M}}for(void 0===t&&(r=numeric.rep([p],0)),void 0===t&&(t=numeric.linspace(0,r.length-1)),void 0===a&&(a=[]),o=t.length-1;-1!==o;--o)v(t[o]);for(a.length=M,o=a.length-1;-1!==o;--o)r[a[o]]=0;for(o=t.length-1;-1!==o;--o)i=t[o],r[i]=n[i];for(o=a.length-1;-1!==o;--o){for(i=a[o],s=h[i],u=g(h[i+1],s),c=s;c!==u;++c)if(f[c]===i){r[i]/=d[c];break}for(m=r[i],c=s;c!==u;++c)(l=f[c])!==i&&(r[l]-=m*d[c])}return r},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,n,r,t,a,o){var i,s,u,c=0,l=a.length,m=this.k,h=this.k1,f=this.j;if(0===t[e])for(t[e]=1,f[0]=e,m[0]=s=n[e],h[0]=u=n[e+1];;)if(s>=u){if(a[l]=f[c],0===c)return;++l,s=m[--c],u=h[c]}else 0===t[i=o[r[s]]]?(t[i]=1,m[c]=s,f[++c]=i,s=n[i],h[c]=u=n[i+1]):++s},numeric.ccsLPSolve=function(e,n,r,t,a,o,i){var s,u,c,l,m,h,f,d,p,g=e[0],M=e[1],v=e[2],y=(g.length,n[0]),x=n[1],b=n[2];for(u=y[a],c=y[a+1],t.length=0,s=u;s<c;++s)i.dfs(o[x[s]],g,M,r,t,o);for(s=t.length-1;-1!==s;--s)r[t[s]]=0;for(s=u;s!==c;++s)r[l=o[x[s]]]=b[s];for(s=t.length-1;-1!==s;--s){for(m=g[l=t[s]],h=g[l+1],f=m;f<h;++f)if(o[M[f]]===l){r[l]/=v[f];break}for(p=r[l],f=m;f<h;++f)(d=o[M[f]])!==l&&(r[d]-=p*v[f])}return r},numeric.ccsLUP1=function(e,n){var r,t,a,o,i,s,u,c=e[0].length-1,l=[numeric.rep([c+1],0),[],[]],m=[numeric.rep([c+1],0),[],[]],h=l[0],f=l[1],d=l[2],p=m[0],g=m[1],M=m[2],v=numeric.rep([c],0),y=numeric.rep([c],0),x=numeric.ccsLPSolve,b=(Math.max,Math.abs),w=numeric.linspace(0,c-1),T=numeric.linspace(0,c-1),A=new numeric.ccsDFS(c);for(void 0===n&&(n=1),r=0;r<c;++r){for(x(l,e,v,y,r,T,A),o=-1,i=-1,t=y.length-1;-1!==t;--t)(a=y[t])<=r||(s=b(v[a]))>o&&(i=a,o=s);for(b(v[r])<n*o&&(t=w[r],o=w[i],w[r]=o,T[o]=r,w[i]=t,T[t]=i,o=v[r],v[r]=v[i],v[i]=o),o=h[r],i=p[r],u=v[r],f[o]=w[r],d[o]=1,++o,t=y.length-1;-1!==t;--t)s=v[a=y[t]],y[t]=0,v[a]=0,a<=r?(g[i]=a,M[i]=s,++i):(f[o]=w[a],d[o]=s/u,++o);h[r+1]=o,p[r+1]=i}for(t=f.length-1;-1!==t;--t)f[t]=T[f[t]];return{L:l,U:m,P:w,Pinv:T}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,n,r,t,a,o,i){var s,u,c,l=0,m=a.length,h=this.k,f=this.k1,d=this.j;if(0===t[e])for(t[e]=1,d[0]=e,h[0]=u=n[o[e]],f[0]=c=n[o[e]+1];;){if(isNaN(u))throw new Error("Ow!");if(u>=c){if(a[m]=o[d[l]],0===l)return;++m,u=h[--l],c=f[l]}else 0===t[s=r[u]]?(t[s]=1,h[l]=u,d[++l]=s,u=n[s=o[s]],f[l]=c=n[s+1]):++u}},numeric.ccsLPSolve0=function(e,n,r,t,a,o,i,s){var u,c,l,m,h,f,d,p,g,M=e[0],v=e[1],y=e[2],x=(M.length,n[0]),b=n[1],w=n[2];for(c=x[a],l=x[a+1],t.length=0,u=c;u<l;++u)s.dfs(b[u],M,v,r,t,o,i);for(u=t.length-1;-1!==u;--u)r[i[m=t[u]]]=0;for(u=c;u!==l;++u)r[m=b[u]]=w[u];for(u=t.length-1;-1!==u;--u){for(p=i[m=t[u]],h=M[m],f=M[m+1],d=h;d<f;++d)if(v[d]===p){r[p]/=y[d];break}for(g=r[p],d=h;d<f;++d)r[v[d]]-=g*y[d];r[p]=g}},numeric.ccsLUP0=function(e,n){var r,t,a,o,i,s,u,c=e[0].length-1,l=[numeric.rep([c+1],0),[],[]],m=[numeric.rep([c+1],0),[],[]],h=l[0],f=l[1],d=l[2],p=m[0],g=m[1],M=m[2],v=numeric.rep([c],0),y=numeric.rep([c],0),x=numeric.ccsLPSolve0,b=(Math.max,Math.abs),w=numeric.linspace(0,c-1),T=numeric.linspace(0,c-1),A=new numeric.ccsDFS0(c);for(void 0===n&&(n=1),r=0;r<c;++r){for(x(l,e,v,y,r,T,w,A),o=-1,i=-1,t=y.length-1;-1!==t;--t)(a=y[t])<=r||(s=b(v[w[a]]))>o&&(i=a,o=s);for(b(v[w[r]])<n*o&&(t=w[r],o=w[i],w[r]=o,T[o]=r,w[i]=t,T[t]=i),o=h[r],i=p[r],u=v[w[r]],f[o]=w[r],d[o]=1,++o,t=y.length-1;-1!==t;--t)s=v[w[a=y[t]]],y[t]=0,v[w[a]]=0,a<=r?(g[i]=a,M[i]=s,++i):(f[o]=w[a],d[o]=s/u,++o);h[r+1]=o,p[r+1]=i}for(t=f.length-1;-1!==t;--t)f[t]=T[f[t]];return{L:l,U:m,P:w,Pinv:T}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,n,r){var t=numeric.ccsDim(e),a=t[0],o=t[1];void 0===n?n=numeric.linspace(0,a-1):"number"==typeof n&&(n=[n]),void 0===r?r=numeric.linspace(0,o-1):"number"==typeof r&&(r=[r]);var i,s,u,c,l=n.length,m=r.length,h=numeric.rep([o],0),f=[],d=[],p=[h,f,d],g=e[0],M=e[1],v=e[2],y=numeric.rep([a],0),x=0,b=numeric.rep([a],0);for(s=0;s<m;++s){var w=g[c=r[s]],T=g[c+1];for(i=w;i<T;++i)b[u=M[i]]=1,y[u]=v[i];for(i=0;i<l;++i)b[n[i]]&&(f[x]=i,d[x]=y[n[i]],++x);for(i=w;i<T;++i)b[u=M[i]]=0;h[s+1]=x}return p},numeric.ccsDot=function(e,n){var r,t,a,o,i,s,u,c,l,m,h,f=e[0],d=e[1],p=e[2],g=n[0],M=n[1],v=n[2],y=numeric.ccsDim(e),x=numeric.ccsDim(n),b=y[0],w=(y[1],x[1]),T=numeric.rep([b],0),A=numeric.rep([b],0),_=Array(b),S=numeric.rep([w],0),I=[],E=[],N=[S,I,E];for(a=0;a!==w;++a){for(o=g[a],i=g[a+1],l=0,t=o;t<i;++t)for(m=M[t],h=v[t],s=f[m],u=f[m+1],r=s;r<u;++r)0===A[c=d[r]]&&(_[l]=c,A[c]=1,l+=1),T[c]=T[c]+p[r]*h;for(i=(o=S[a])+l,S[a+1]=i,t=l-1;-1!==t;--t)h=o+t,r=_[t],I[h]=r,E[h]=T[r],A[r]=0,T[r]=0;S[a+1]=S[a]+l}return N},numeric.ccsLUPSolve=function(e,n){var r=e.L,t=e.U,a=(e.P,n[0]),o=!1;"object"!=typeof a&&(a=(n=[[0,n.length],numeric.linspace(0,n.length-1),n])[0],o=!0);var i,s,u,c,l,m,h=n[1],f=n[2],d=r[0].length-1,p=a.length-1,g=numeric.rep([d],0),M=Array(d),v=numeric.rep([d],0),y=Array(d),x=numeric.rep([p+1],0),b=[],w=[],T=numeric.ccsTSolve,A=0;for(i=0;i<p;++i){for(l=0,u=a[i],c=a[i+1],s=u;s<c;++s)m=e.Pinv[h[s]],y[l]=m,v[m]=f[s],++l;for(y.length=l,T(r,v,g,y,M),s=y.length-1;-1!==s;--s)v[y[s]]=0;if(T(t,g,v,M,y),o)return v;for(s=M.length-1;-1!==s;--s)g[M[s]]=0;for(s=y.length-1;-1!==s;--s)m=y[s],b[A]=m,w[A]=v[m],v[m]=0,++A;x[i+1]=A}return[x,b,w]},numeric.ccsbinop=function(e,n){return void 0===n&&(n=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+n+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var n,r=e[0],t=e[1],a=e[2],o=numeric.sup(t)+1,i=r.length,s=numeric.rep([o],0),u=Array(i),c=Array(i),l=numeric.rep([o],0);for(n=0;n<i;++n)l[t[n]]++;for(n=0;n<o;++n)s[n+1]=s[n]+l[n];var m,h,f=s.slice(0);for(n=0;n<i;++n)u[m=f[h=t[n]]]=r[n],c[m]=a[n],f[h]=f[h]+1;return[s,u,c]},numeric.ccsGather=function(e){var n,r,t,a,o,i=e[0],s=e[1],u=e[2],c=i.length-1,l=s.length,m=Array(l),h=Array(l),f=Array(l);for(o=0,n=0;n<c;++n)for(t=i[n],a=i[n+1],r=t;r!==a;++r)h[o]=n,m[o]=s[r],f[o]=u[r],++o;return[m,h,f]},numeric.sdim=function e(n,r,t){if(void 0===r&&(r=[]),"object"!=typeof n)return r;var a;for(a in void 0===t&&(t=0),t in r||(r[t]=0),n.length>r[t]&&(r[t]=n.length),n)n.hasOwnProperty(a)&&e(n[a],r,t+1);return r},numeric.sclone=function e(n,r,t){void 0===r&&(r=0),void 0===t&&(t=numeric.sdim(n).length);var a,o=Array(n.length);if(r===t-1){for(a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);return o}for(a in n)n.hasOwnProperty(a)&&(o[a]=e(n[a],r+1,t));return o},numeric.sdiag=function(e){var n,r,t=e.length,a=Array(t);for(n=t-1;n>=1;n-=2)r=n-1,a[n]=[],a[n][n]=e[n],a[r]=[],a[r][r]=e[r];return 0===n&&(a[0]=[],a[0][0]=e[n]),a},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var n,r,t,a=[];for(n in e.length,e)if(e.hasOwnProperty(n))for(r in t=e[n])t.hasOwnProperty(r)&&("object"!=typeof a[r]&&(a[r]=[]),a[r][n]=t[r]);return a},numeric.sLUP=function(e,n){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,n){var r,t,a,o,i,s,u,c=e.length,l=(n.length,numeric.stranspose(n)),m=l.length,h=Array(c);for(a=c-1;a>=0;a--){for(u=[],r=e[a],i=m-1;i>=0;i--){for(o in s=0,t=l[i],r)r.hasOwnProperty(o)&&o in t&&(s+=r[o]*t[o]);s&&(u[i]=s)}h[a]=u}return h},numeric.sdotMV=function(e,n){var r,t,a,o,i=e.length,s=Array(i);for(t=i-1;t>=0;t--){for(a in o=0,r=e[t])r.hasOwnProperty(a)&&n[a]&&(o+=r[a]*n[a]);o&&(s[t]=o)}return s},numeric.sdotVM=function(e,n){var r,t,a,o,i=[];for(r in e)if(e.hasOwnProperty(r))for(t in a=n[r],o=e[r],a)a.hasOwnProperty(t)&&(i[t]||(i[t]=0),i[t]+=o*a[t]);return i},numeric.sdotVV=function(e,n){var r,t=0;for(r in e)e[r]&&n[r]&&(t+=e[r]*n[r]);return t},numeric.sdot=function(e,n){var r=numeric.sdim(e).length,t=numeric.sdim(n).length;switch(1e3*r+t){case 0:return e*n;case 1001:return numeric.sdotVV(e,n);case 2001:return numeric.sdotMV(e,n);case 1002:return numeric.sdotVM(e,n);case 2002:return numeric.sdotMM(e,n);default:throw new Error("numeric.sdot not implemented for tensors of order "+r+" and "+t)}},numeric.sscatter=function(e){var n,r,t,a,o=e[0].length,i=e.length,s=[];for(r=o-1;r>=0;--r)if(e[i-1][r]){for(a=s,t=0;t<i-2;t++)a[n=e[t][r]]||(a[n]=[]),a=a[n];a[e[t][r]]=e[t+1][r]}return s},numeric.sgather=function e(n,r,t){var a,o,i;for(o in void 0===r&&(r=[]),void 0===t&&(t=[]),a=t.length,n)if(n.hasOwnProperty(o))if(t[a]=parseInt(o),"number"==typeof(i=n[o])){if(i){if(0===r.length)for(o=a+1;o>=0;--o)r[o]=[];for(o=a;o>=0;--o)r[o].push(t[o]);r[a+1].push(i)}}else e(i,r,t);return t.length>a&&t.pop(),r},numeric.cLU=function(e){var n,r,t,a,o,i,s=e[0],u=e[1],c=e[2],l=s.length,m=0;for(n=0;n<l;n++)s[n]>m&&(m=s[n]);m++;var h,f=Array(m),d=Array(m),p=numeric.rep([m],1/0),g=numeric.rep([m],-1/0);for(t=0;t<l;t++)n=s[t],(r=u[t])<p[n]&&(p[n]=r),r>g[n]&&(g[n]=r);for(n=0;n<m-1;n++)g[n]>g[n+1]&&(g[n+1]=g[n]);for(n=m-1;n>=1;n--)p[n]<p[n-1]&&(p[n-1]=p[n]);for(n=0;n<m;n++)d[n]=numeric.rep([g[n]-p[n]+1],0),f[n]=numeric.rep([n-p[n]],0),p[n],g[n];for(t=0;t<l;t++)d[n=s[t]][u[t]-p[n]]=c[t];for(n=0;n<m-1;n++)for(a=n-p[n],y=d[n],r=n+1;p[r]<=n&&r<m;r++)if(o=n-p[r],i=g[n]-n,h=(x=d[r])[o]/y[a]){for(t=1;t<=i;t++)x[t+o]-=h*y[t+a];f[r][n-p[r]]=h}var M,v,y=[],x=[],b=[],w=[],T=[],A=[];for(l=0,M=0,n=0;n<m;n++){for(a=p[n],o=g[n],v=d[n],r=n;r<=o;r++)v[r-a]&&(y[l]=n,x[l]=r,b[l]=v[r-a],l++);for(v=f[n],r=a;r<n;r++)v[r-a]&&(w[M]=n,T[M]=r,A[M]=v[r-a],M++);w[M]=n,T[M]=n,A[M]=1,M++}return{U:[y,x,b],L:[w,T,A]}},numeric.cLUsolve=function(e,n){var r,t,a=e.L,o=e.U,i=numeric.clone(n),s=a[0],u=a[1],c=a[2],l=o[0],m=o[1],h=o[2],f=l.length,d=(s.length,i.length);for(t=0,r=0;r<d;r++){for(;u[t]<r;)i[r]-=c[t]*i[u[t]],t++;t++}for(t=f-1,r=d-1;r>=0;r--){for(;m[t]>r;)i[r]-=h[t]*i[m[t]],t--;i[r]/=h[t],t--}return i},numeric.cgrid=function(e,n){"number"==typeof e&&(e=[e,e]);var r,t,a,o=numeric.rep(e,-1);for("function"!=typeof n&&(n="L"===n?function(n,r){return n>=e[0]/2||r<e[1]/2}:function(e,n){return!0}),a=0,r=1;r<e[0]-1;r++)for(t=1;t<e[1]-1;t++)n(r,t)&&(o[r][t]=a,a++);return o},numeric.cdelsq=function(e){var n,r,t,a,o,i=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),u=s[0],c=s[1],l=[],m=[],h=[];for(n=1;n<u-1;n++)for(r=1;r<c-1;r++)if(!(e[n][r]<0)){for(t=0;t<4;t++)a=n+i[t][0],o=r+i[t][1],e[a][o]<0||(l.push(e[n][r]),m.push(e[a][o]),h.push(-1));l.push(e[n][r]),m.push(e[n][r]),h.push(4)}return[l,m,h]},numeric.cdotMV=function(e,n){var r,t,a,o=e[0],i=e[1],s=e[2],u=o.length;for(a=0,t=0;t<u;t++)o[t]>a&&(a=o[t]);for(a++,r=numeric.rep([a],0),t=0;t<u;t++)r[o[t]]+=s[t]*n[i[t]];return r},numeric.Spline=function(e,n,r,t,a){this.x=e,this.yl=n,this.yr=r,this.kl=t,this.kr=a},numeric.Spline.prototype._at=function(e,n){var r,t,a,o=this.x,i=this.yl,s=this.yr,u=this.kl,c=this.kr,l=numeric.add,m=numeric.sub,h=numeric.mul;r=m(h(u[n],o[n+1]-o[n]),m(s[n+1],i[n])),t=l(h(c[n+1],o[n]-o[n+1]),m(s[n+1],i[n]));var f=(a=(e-o[n])/(o[n+1]-o[n]))*(1-a);return l(l(l(h(1-a,i[n]),h(a,s[n+1])),h(r,f*(1-a))),h(t,f*a))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var n,r,t,a=this.x,o=a.length,i=Math.floor;for(n=0,r=o-1;r-n>1;)a[t=i((n+r)/2)]<=e?n=t:r=t;return this._at(e,n)}o=e.length;var s,u=Array(o);for(s=o-1;-1!==s;--s)u[s]=this.at(e[s]);return u},numeric.Spline.prototype.diff=function(){var e,n,r,t=this.x,a=this.yl,o=this.yr,i=this.kl,s=this.kr,u=a.length,c=i,l=s,m=Array(u),h=Array(u),f=numeric.add,d=numeric.mul,p=numeric.div,g=numeric.sub;for(e=u-1;-1!==e;--e)n=t[e+1]-t[e],r=g(o[e+1],a[e]),m[e]=p(f(d(r,6),d(i[e],-4*n),d(s[e+1],-2*n)),n*n),h[e+1]=p(f(d(r,-6),d(i[e],2*n),d(s[e+1],4*n)),n*n);return new numeric.Spline(t,c,l,m,h)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var n=[],r=this.x,t=this.yl,a=this.yr,o=this.kl,i=this.kr;"number"==typeof t[0]&&(t=[t],a=[a],o=[o],i=[i]);var s,u,c,l,m,h,f,d,p,g,M,v,y,x,b,w,T,A,_,S,I,E,N,R=t.length,D=r.length-1,O=(n=Array(R),Math.sqrt);for(s=0;s!==R;++s){for(l=t[s],m=a[s],h=o[s],f=i[s],d=[],u=0;u!==D;u++){for(u>0&&m[u]*l[u]<0&&d.push(r[u]),w=r[u+1]-r[u],r[u],M=l[u],v=m[u+1],p=h[u]/w,y=(g=f[u+1]/w)+3*M+2*p-3*v,x=3*(g+p+2*(M-v)),(b=e(p-g+3*(M-v))+12*g*M)<=0?T=(A=y/x)>r[u]&&A<r[u+1]?[r[u],A,r[u+1]]:[r[u],r[u+1]]:(A=(y-O(b))/x,_=(y+O(b))/x,T=[r[u]],A>r[u]&&A<r[u+1]&&T.push(A),_>r[u]&&_<r[u+1]&&T.push(_),T.push(r[u+1])),I=T[0],A=this._at(I,u),c=0;c<T.length-1;c++)if(E=T[c+1],_=this._at(E,u),0!==A)if(0===_||A*_>0)I=E,A=_;else{for(var z=0;!((N=(A*E-_*I)/(A-_))<=I||N>=E);)if((S=this._at(N,u))*_>0)E=N,_=S,-1===z&&(A*=.5),z=-1;else{if(!(S*A>0))break;I=N,A=S,1===z&&(_*=.5),z=1}d.push(N),I=T[c+1],A=this._at(I,u)}else d.push(I),I=E,A=_;0===_&&d.push(E)}n[s]=d}return"number"==typeof this.yl[0]?n[0]:n},numeric.spline=function(e,n,r,t){var a,o=e.length,i=[],s=[],u=[],c=numeric.sub,l=numeric.mul,m=numeric.add;for(a=o-2;a>=0;a--)s[a]=e[a+1]-e[a],u[a]=c(n[a+1],n[a]);"string"!=typeof r&&"string"!=typeof t||(r=t="periodic");var h=[[],[],[]];switch(typeof r){case"undefined":i[0]=l(3/(s[0]*s[0]),u[0]),h[0].push(0,0),h[1].push(0,1),h[2].push(2/s[0],1/s[0]);break;case"string":i[0]=m(l(3/(s[o-2]*s[o-2]),u[o-2]),l(3/(s[0]*s[0]),u[0])),h[0].push(0,0,0),h[1].push(o-2,0,1),h[2].push(1/s[o-2],2/s[o-2]+2/s[0],1/s[0]);break;default:i[0]=r,h[0].push(0),h[1].push(0),h[2].push(1)}for(a=1;a<o-1;a++)i[a]=m(l(3/(s[a-1]*s[a-1]),u[a-1]),l(3/(s[a]*s[a]),u[a])),h[0].push(a,a,a),h[1].push(a-1,a,a+1),h[2].push(1/s[a-1],2/s[a-1]+2/s[a],1/s[a]);switch(typeof t){case"undefined":i[o-1]=l(3/(s[o-2]*s[o-2]),u[o-2]),h[0].push(o-1,o-1),h[1].push(o-2,o-1),h[2].push(1/s[o-2],2/s[o-2]);break;case"string":h[1][h[1].length-1]=0;break;default:i[o-1]=t,h[0].push(o-1),h[1].push(o-1),h[2].push(1)}i="number"!=typeof i[0]?numeric.transpose(i):[i];var f=Array(i.length);if("string"==typeof r)for(a=f.length-1;-1!==a;--a)f[a]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(h)),i[a]),f[a][o-1]=f[a][0];else for(a=f.length-1;-1!==a;--a)f[a]=numeric.cLUsolve(numeric.cLU(h),i[a]);return f="number"==typeof n[0]?f[0]:numeric.transpose(f),new numeric.Spline(e,n,n,f,f)},numeric.fftpow2=function e(n,r){var t=n.length;if(1!==t){var a,o,i=Math.cos,s=Math.sin,u=Array(t/2),c=Array(t/2),l=Array(t/2),m=Array(t/2);for(o=t/2,a=t-1;-1!==a;--a)l[--o]=n[a],m[o]=r[a],--a,u[o]=n[a],c[o]=r[a];e(u,c),e(l,m),o=t/2;var h,f,d,p=-6.283185307179586/t;for(a=t-1;-1!==a;--a)-1==--o&&(o=t/2-1),f=i(h=p*a),d=s(h),n[a]=u[o]+f*l[o]-d*m[o],r[a]=c[o]+f*m[o]+d*l[o]}},numeric._ifftpow2=function e(n,r){var t=n.length;if(1!==t){var a,o,i=Math.cos,s=Math.sin,u=Array(t/2),c=Array(t/2),l=Array(t/2),m=Array(t/2);for(o=t/2,a=t-1;-1!==a;--a)l[--o]=n[a],m[o]=r[a],--a,u[o]=n[a],c[o]=r[a];e(u,c),e(l,m),o=t/2;var h,f,d,p=6.283185307179586/t;for(a=t-1;-1!==a;--a)-1==--o&&(o=t/2-1),f=i(h=p*a),d=s(h),n[a]=u[o]+f*l[o]-d*m[o],r[a]=c[o]+f*m[o]+d*l[o]}},numeric.ifftpow2=function(e,n){numeric._ifftpow2(e,n),numeric.diveq(e,e.length),numeric.diveq(n,n.length)},numeric.convpow2=function(e,n,r,t){var a,o,i,s,u;for(numeric.fftpow2(e,n),numeric.fftpow2(r,t),a=e.length-1;-1!==a;--a)o=e[a],s=n[a],i=r[a],u=t[a],e[a]=o*i-s*u,n[a]=o*u+s*i;numeric.ifftpow2(e,n)},numeric.T.prototype.fft=function(){var e,n,r=this.x,t=this.y,a=r.length,o=Math.log,i=o(2),s=Math.ceil(o(2*a-1)/i),u=Math.pow(2,s),c=numeric.rep([u],0),l=numeric.rep([u],0),m=Math.cos,h=Math.sin,f=-3.141592653589793/a,d=numeric.rep([u],0),p=numeric.rep([u],0);for(Math.floor(a/2),e=0;e<a;e++)d[e]=r[e];if(void 0!==t)for(e=0;e<a;e++)p[e]=t[e];for(c[0]=1,e=1;e<=u/2;e++)n=f*e*e,c[e]=m(n),l[e]=h(n),c[u-e]=m(n),l[u-e]=h(n);var g=new numeric.T(d,p),M=new numeric.T(c,l);return g=g.mul(M),numeric.convpow2(g.x,g.y,numeric.clone(M.x),numeric.neg(M.y)),(g=g.mul(M)).x.length=a,g.y.length=a,g},numeric.T.prototype.ifft=function(){var e,n,r=this.x,t=this.y,a=r.length,o=Math.log,i=o(2),s=Math.ceil(o(2*a-1)/i),u=Math.pow(2,s),c=numeric.rep([u],0),l=numeric.rep([u],0),m=Math.cos,h=Math.sin,f=3.141592653589793/a,d=numeric.rep([u],0),p=numeric.rep([u],0);for(Math.floor(a/2),e=0;e<a;e++)d[e]=r[e];if(void 0!==t)for(e=0;e<a;e++)p[e]=t[e];for(c[0]=1,e=1;e<=u/2;e++)n=f*e*e,c[e]=m(n),l[e]=h(n),c[u-e]=m(n),l[u-e]=h(n);var g=new numeric.T(d,p),M=new numeric.T(c,l);return g=g.mul(M),numeric.convpow2(g.x,g.y,numeric.clone(M.x),numeric.neg(M.y)),(g=g.mul(M)).x.length=a,g.y.length=a,g.div(a)},numeric.gradient=function(e,n){var r=n.length,t=e(n);if(isNaN(t))throw new Error("gradient: f(x) is a NaN!");var a,o,i,s,u,c,l,m,h,f=Math.max,d=numeric.clone(n),p=Array(r),g=(numeric.div,numeric.sub,f=Math.max,Math.abs),M=Math.min,v=0;for(a=0;a<r;a++)for(var y=f(1e-6*t,1e-8);;){if(++v>20)throw new Error("Numerical gradient fails");if(d[a]=n[a]+y,o=e(d),d[a]=n[a]-y,i=e(d),d[a]=n[a],isNaN(o)||isNaN(i))y/=16;else{if(p[a]=(o-i)/(2*y),s=n[a]-y,u=n[a],c=n[a]+y,l=(o-t)/y,m=(t-i)/y,h=f(g(p[a]),g(t),g(o),g(i),g(s),g(u),g(c),1e-8),!(M(f(g(l-p[a]),g(m-p[a]),g(l-m))/h,y/h)>.001))break;y/=16}}return p},numeric.uncmin=function(e,n,r,t,a,o,i){var s=numeric.gradient;void 0===i&&(i={}),void 0===r&&(r=1e-8),void 0===t&&(t=function(n){return s(e,n)}),void 0===a&&(a=1e3);var u,c,l=(n=numeric.clone(n)).length,m=e(n);if(isNaN(m))throw new Error("uncmin: f(x0) is a NaN!");var h=Math.max,f=numeric.norm2;r=h(r,numeric.epsilon);var d,p,g,M,v,y,x,b,w,T,A=i.Hinv||numeric.identity(l),_=numeric.dot,S=(numeric.inv,numeric.sub),I=numeric.add,E=numeric.tensor,N=numeric.div,R=numeric.mul,D=numeric.all,O=numeric.isFinite,z=numeric.neg,C=0,P="";for(p=t(n);C<a;){if("function"==typeof o&&o(C,n,m,p,A)){P="Callback returned true";break}if(!D(O(p))){P="Gradient has Infinity or NaN";break}if(!D(O(d=z(_(A,p))))){P="Search direction has Infinity or NaN";break}if((T=f(d))<r){P="Newton step smaller than tol";break}for(w=1,c=_(p,d),v=n;C<a&&!(w*T<r)&&(v=I(n,M=R(d,w)),(u=e(v))-m>=.1*w*c||isNaN(u));)w*=.5,++C;if(w*T<r){P="Line search step size smaller than tol";break}if(C===a){P="maxit reached during line search";break}b=_(y=S(g=t(v),p),M),x=_(A,y),A=S(I(A,R((b+_(y,x))/(b*b),E(M,M))),N(I(E(x,M),E(M,x)),b)),n=v,m=u,p=g,++C}return{solution:n,f:m,gradient:p,invHessian:A,iterations:C,message:P}},numeric.Dopri=function(e,n,r,t,a,o,i){this.x=e,this.y=n,this.f=r,this.ymid=t,this.iterations=a,this.events=i,this.message=o},numeric.Dopri.prototype._at=function(e,n){function r(e){return e*e}var t,a,o,i,s,u,c,l,m,h=this,f=h.x,d=h.y,p=h.f,g=h.ymid,M=(f.length,Math.floor,numeric.add),v=numeric.mul,y=numeric.sub;return t=f[n],a=f[n+1],i=d[n],s=d[n+1],o=t+.5*(a-t),u=g[n],c=y(p[n],v(i,1/(t-o)+2/(t-a))),l=y(p[n+1],v(s,1/(a-o)+2/(a-t))),M(M(M(M(v(i,(m=[r(e-a)*(e-o)/r(t-a)/(t-o),r(e-t)*r(e-a)/r(t-o)/r(a-o),r(e-t)*(e-o)/r(a-t)/(a-o),(e-t)*r(e-a)*(e-o)/r(t-a)/(t-o),(e-a)*r(e-t)*(e-o)/r(t-a)/(a-o)])[0]),v(u,m[1])),v(s,m[2])),v(c,m[3])),v(l,m[4]))},numeric.Dopri.prototype.at=function(e){var n,r,t,a=Math.floor;if("number"!=typeof e){var o=e.length,i=Array(o);for(n=o-1;-1!==n;--n)i[n]=this.at(e[n]);return i}var s=this.x;for(n=0,r=s.length-1;r-n>1;)s[t=a(.5*(n+r))]<=e?n=t:r=t;return this._at(e,n)},numeric.dopri=function(e,n,r,t,a,o,i){void 0===a&&(a=1e-6),void 0===o&&(o=1e3);var s,u,c,l,m,h,f,d,p,g,M,v,y,x=[e],b=[r],w=[t(e,r)],T=[],A=[3/40,9/40],_=[44/45,-56/15,32/9],S=[19372/6561,-25360/2187,64448/6561,-212/729],I=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],E=[35/384,0,500/1113,125/192,-2187/6784,11/84],N=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,5618549.5/235043384],R=[.2,.3,.8,8/9,1,1],D=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40],O=0,z=(n-e)/10,C=0,P=numeric.add,L=numeric.mul,j=(Math.max,Math.min),k=Math.abs,U=numeric.norminf,q=Math.pow,F=numeric.any,Y=numeric.lt,V=numeric.and,G=(numeric.sub,new numeric.Dopri(x,b,w,T,-1,""));for("function"==typeof i&&(M=i(e,r));e<n&&C<o;)if(++C,e+z>n&&(z=n-e),s=t(e+R[0]*z,P(r,L(.2*z,w[O]))),u=t(e+R[1]*z,P(P(r,L(A[0]*z,w[O])),L(A[1]*z,s))),c=t(e+R[2]*z,P(P(P(r,L(_[0]*z,w[O])),L(_[1]*z,s)),L(_[2]*z,u))),l=t(e+R[3]*z,P(P(P(P(r,L(S[0]*z,w[O])),L(S[1]*z,s)),L(S[2]*z,u)),L(S[3]*z,c))),m=t(e+R[4]*z,P(P(P(P(P(r,L(I[0]*z,w[O])),L(I[1]*z,s)),L(I[2]*z,u)),L(I[3]*z,c)),L(I[4]*z,l))),h=t(e+z,p=P(P(P(P(P(r,L(w[O],z*E[0])),L(u,z*E[2])),L(c,z*E[3])),L(l,z*E[4])),L(m,z*E[5]))),(g="number"==typeof(f=P(P(P(P(P(L(w[O],z*D[0]),L(u,z*D[2])),L(c,z*D[3])),L(l,z*D[4])),L(m,z*D[5])),L(h,z*D[6])))?k(f):U(f))>a){if(e+(z=.2*z*q(a/g,.25))===e){G.msg="Step size became too small";break}}else{if(T[O]=P(P(P(P(P(P(r,L(w[O],z*N[0])),L(u,z*N[2])),L(c,z*N[3])),L(l,z*N[4])),L(m,z*N[5])),L(h,z*N[6])),x[++O]=e+z,b[O]=p,w[O]=h,"function"==typeof i){var J,B,H=e,X=e+.5*z;if(v=i(X,T[O-1]),F(y=V(Y(M,0),Y(0,v)))||(H=X,M=v,v=i(X=e+z,p),y=V(Y(M,0),Y(0,v))),F(y)){for(var Q,W,K=0,Z=1,$=1;;){if("number"==typeof M)B=($*v*H-Z*M*X)/($*v-Z*M);else for(B=X,d=M.length-1;-1!==d;--d)M[d]<0&&v[d]>0&&(B=j(B,($*v[d]*H-Z*M[d]*X)/($*v[d]-Z*M[d])));if(B<=H||B>=X)break;W=i(B,J=G._at(B,O-1)),F(Q=V(Y(M,0),Y(0,W)))?(X=B,v=W,y=Q,$=1,-1===K?Z*=.5:Z=1,K=-1):(H=B,M=W,Z=1,1===K?$*=.5:$=1,K=1)}return p=G._at(.5*(e+B),O-1),G.f[O]=t(B,J),G.x[O]=B,G.y[O]=J,G.ymid[O-1]=p,G.events=y,G.iterations=C,G}}e+=z,r=p,M=v,z=j(.8*z*q(a/g,.25),4*z)}return G.iterations=C,G},numeric.LU=function(e,n){n=n||!1;var r,t,a,o,i,s,u,c,l,m=Math.abs,h=e.length,f=h-1,d=new Array(h);for(n||(e=numeric.clone(e)),a=0;a<h;++a){for(u=a,l=m((s=e[a])[a]),t=a+1;t<h;++t)l<(o=m(e[t][a]))&&(l=o,u=t);for(d[a]=u,u!=a&&(e[a]=e[u],e[u]=s,s=e[a]),i=s[a],r=a+1;r<h;++r)e[r][a]/=i;for(r=a+1;r<h;++r){for(c=e[r],t=a+1;t<f;++t)c[t]-=c[a]*s[t],c[++t]-=c[a]*s[t];t===f&&(c[t]-=c[a]*s[t])}}return{LU:e,P:d}},numeric.LUsolve=function(e,n){var r,t,a,o,i,s=e.LU,u=s.length,c=numeric.clone(n),l=e.P;for(r=u-1;-1!==r;--r)c[r]=n[r];for(r=0;r<u;++r)for(a=l[r],l[r]!==r&&(i=c[r],c[r]=c[a],c[a]=i),o=s[r],t=0;t<r;++t)c[r]-=c[t]*o[t];for(r=u-1;r>=0;--r){for(o=s[r],t=r+1;t<u;++t)c[r]-=c[t]*o[t];c[r]/=o[r]}return c},numeric.solve=function(e,n,r){return numeric.LUsolve(numeric.LU(e,r),n)},numeric.echelonize=function(e){var n,r,t,a,o,i,s,u,c=numeric.dim(e),l=c[0],m=c[1],h=numeric.identity(l),f=Array(l),d=Math.abs,p=numeric.diveq;for(e=numeric.clone(e),n=0;n<l;++n){for(t=0,o=e[n],i=h[n],r=1;r<m;++r)d(o[t])<d(o[r])&&(t=r);for(f[n]=t,p(i,o[t]),p(o,o[t]),r=0;r<l;++r)if(r!==n){for(u=(s=e[r])[t],a=m-1;-1!==a;--a)s[a]-=o[a]*u;for(s=h[r],a=l-1;-1!==a;--a)s[a]-=i[a]*u}}return{I:h,A:e,P:f}},numeric.__solveLP=function(e,n,r,t,a,o,i){var s,u,c,l,m=numeric.sum,h=(numeric.log,numeric.mul),f=numeric.sub,d=numeric.dot,p=numeric.div,g=numeric.add,M=e.length,v=r.length,y=!1,x=1,b=(numeric.transpose(n),numeric.svd,numeric.transpose),w=(numeric.leq,Math.sqrt),T=Math.abs,A=(numeric.muleq,numeric.norminf,numeric.any,Math.min),_=numeric.all,S=numeric.gt,I=Array(M),E=Array(v),N=(numeric.rep([v],1),numeric.solve),R=f(r,d(n,o)),D=d(e,e);for(c=0;c<a;++c){var O,z;for(O=v-1;-1!==O;--O)E[O]=p(n[O],R[O]);var C=b(E);for(O=M-1;-1!==O;--O)I[O]=m(C[O]);x=.25*T(D/d(e,I));var P=100*w(D/d(I,I));for((!isFinite(x)||x>P)&&(x=P),l=g(e,h(x,I)),u=d(C,E),O=M-1;-1!==O;--O)u[O][O]+=1;z=N(u,p(l,x),!0);var L=p(R,d(n,z)),j=1;for(O=v-1;-1!==O;--O)L[O]<0&&(j=A(j,-.999*L[O]));if(s=f(o,h(z,j)),!_(S(R=f(r,d(n,s)),0)))return{solution:o,message:"",iterations:c};if(o=s,x<t)return{solution:s,message:"",iterations:c};if(i){var k=d(e,l),U=d(n,l);for(y=!0,O=v-1;-1!==O;--O)if(k*U[O]<0){y=!1;break}}else y=!(o[M-1]>=0);if(y)return{solution:s,message:"Unbounded",iterations:c}}return{solution:o,message:"maximum iteration count exceeded",iterations:c}},numeric._solveLP=function(e,n,r,t,a){var o=e.length,i=r.length,s=(numeric.sum,numeric.log,numeric.mul,numeric.sub),u=numeric.dot,c=(numeric.div,numeric.add,numeric.rep([o],0).concat([1])),l=numeric.rep([i,1],-1),m=numeric.blockMatrix([[n,l]]),h=r,f=numeric.rep([o],0).concat(Math.max(0,numeric.sup(numeric.neg(r)))+1),d=numeric.__solveLP(c,m,h,t,a,f,!1),p=numeric.clone(d.solution);if(p.length=o,numeric.inf(s(r,u(n,p)))<0)return{solution:NaN,message:"Infeasible",iterations:d.iterations};var g=numeric.__solveLP(e,n,r,t,a-d.iterations,p,!0);return g.iterations+=d.iterations,g},numeric.solveLP=function(e,n,r,t,a,o,i){if(void 0===i&&(i=1e3),void 0===o&&(o=numeric.epsilon),void 0===t)return numeric._solveLP(e,n,r,o,i);var s,u=t.length,c=t[0].length,l=n.length,m=numeric.echelonize(t),h=numeric.rep([c],0),f=m.P,d=[];for(s=f.length-1;-1!==s;--s)h[f[s]]=1;for(s=c-1;-1!==s;--s)0===h[s]&&d.push(s);var p=numeric.getRange,g=numeric.linspace(0,u-1),M=numeric.linspace(0,l-1),v=p(t,g,d),y=p(n,M,f),x=p(n,M,d),b=numeric.dot,w=numeric.sub,T=b(y,m.I),A=w(x,b(T,v)),_=w(r,b(T,a)),S=Array(f.length),I=Array(d.length);for(s=f.length-1;-1!==s;--s)S[s]=e[f[s]];for(s=d.length-1;-1!==s;--s)I[s]=e[d[s]];var E=w(I,b(S,b(m.I,v))),N=numeric._solveLP(E,A,_,o,i),R=N.solution;if(R!=R)return N;var D=b(m.I,w(a,b(v,R))),O=Array(e.length);for(s=f.length-1;-1!==s;--s)O[f[s]]=D[s];for(s=d.length-1;-1!==s;--s)O[d[s]]=R[s];return{solution:O,message:N.message,iterations:N.iterations}},numeric.MPStoLP=function(e){e instanceof String&&e.split("\n");var n,r,t,a,o=0,i=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],s=e.length,u=0,c={},l=[],m=0,h={},f=0,d=[],p=[],g=[];function M(r){throw new Error("MPStoLP: "+r+"\nLine "+n+": "+e[n]+"\nCurrent state: "+i[o]+"\n")}for(n=0;n<s;++n){var v=(t=e[n]).match(/\S*/g),y=[];for(r=0;r<v.length;++r)""!==v[r]&&y.push(v[r]);if(0!==y.length){for(r=0;r<i.length&&t.substr(0,i[r].length)!==i[r];++r);if(r<i.length){if(o=r,1===r&&(a=y[1]),6===r)return{name:a,c:d,A:numeric.transpose(p),b:g,rows:c,vars:h}}else switch(o){case 0:case 1:M("Unexpected line");case 2:switch(y[0]){case"N":0===u?u=y[1]:M("Two or more N rows");break;case"L":c[y[1]]=m,l[m]=1,g[m]=0,++m;break;case"G":c[y[1]]=m,l[m]=-1,g[m]=0,++m;break;case"E":c[y[1]]=m,l[m]=0,g[m]=0,++m;break;default:M("Parse error "+numeric.prettyPrint(y))}break;case 3:h.hasOwnProperty(y[0])||(h[y[0]]=f,d[f]=0,p[f]=numeric.rep([m],0),++f);var x=h[y[0]];for(r=1;r<y.length;r+=2)if(y[r]!==u){var b=c[y[r]];p[x][b]=(l[b]<0?-1:1)*parseFloat(y[r+1])}else d[x]=parseFloat(y[r+1]);break;case 4:for(r=1;r<y.length;r+=2)g[c[y[r]]]=(l[c[y[r]]]<0?-1:1)*parseFloat(y[r+1]);break;case 5:break;case 6:M("Internal error")}}}M("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,n,r,t,a,o,i){function s(e){var n,t,a=this,o=e.length,i=0,s=a.i=a.j=a.m=0;for(a.S=[],a.c=[],o||(e=[o++]);i<r;)a.S[i]=i++;for(i=0;i<r;i++)s=l(s+(n=a.S[i])+e[i%o]),t=a.S[s],a.S[i]=t,a.S[s]=n;a.g=function(e){var n=a.S,t=l(a.i+1),o=n[t],i=l(a.j+o),s=n[i];n[t]=s,n[i]=o;for(var u=n[l(o+s)];--e;)t=l(t+1),s=n[i=l(i+(o=n[t]))],n[t]=s,n[i]=o,u=u*r+n[l(o+s)];return a.i=t,a.j=i,u},a.g(r)}function u(e,n,r,t,a){if(r=[],a=typeof e,n&&"object"==a)for(t in e)if(t.indexOf("S")<5)try{r.push(u(e[t],n-1))}catch(e){}return r.length?r:e+("string"!=a?"\0":"")}function c(e,n,r,t){for(e+="",r=0,t=0;t<e.length;t++)n[l(t)]=l((r^=19*n[l(t)])+e.charCodeAt(t));for(t in e="",n)e+=String.fromCharCode(n[t]);return e}function l(e){return e&r-1}n.seedrandom=function(t,l){var m,h=[];return t=c(u(l?[t,e]:arguments.length?t:[(new Date).getTime(),e,window],3),h),c((m=new s(h)).S,e),n.random=function(){for(var e=m.g(6),n=i,t=0;e<a;)e=(e+t)*r,n*=r,t=m.g(1);for(;e>=o;)e/=2,n/=2,t>>>=1;return(e+t)/n},t},i=n.pow(r,6),a=n.pow(2,a),o=2*a,c(n.random(),e)}([],numeric.seedrandom,256,0,52),function(e){function n(e){if("object"!=typeof e)return e;var r,t=[],a=e.length;for(r=0;r<a;r++)t[r+1]=n(e[r]);return t}function r(e){if("object"!=typeof e)return e;var n,t=[],a=e.length;for(n=1;n<a;n++)t[n-1]=r(e[n]);return t}e.solveQP=function(e,t,a,o,i,s){e=n(e),t=n(t),a=n(a);var u,c,l,m,h,f=[],d=[],p=[],g=[],M=[];if(i=i||0,s=s?n(s):[void 0,0],o=o?n(o):[],c=e.length-1,l=a[1].length-1,!o)for(u=1;u<=l;u+=1)o[u]=0;for(u=1;u<=l;u+=1)d[u]=0;for(m=Math.min(c,l),u=1;u<=c;u+=1)p[u]=0;for(f[1]=0,u=1;u<=2*c+m*(m+5)/2+2*l+1;u+=1)g[u]=0;for(u=1;u<=2;u+=1)M[u]=0;return function(e,n,r,t,a,o,i,s,u,c,l,m,h,f,d,p){var g,M,v,y,x,b,w,T,A,_,S,I,E,N,R,D,O,z,C,P,L,j,k,U,q,F,Y;E=Math.min(t,c),v=2*t+E*(E+5)/2+2*c+1,U=1e-60;do{q=1+.1*(U+=U),F=1+.2*U}while(q<=1||F<=1);for(g=1;g<=t;g+=1)d[g]=n[g];for(g=t+1;g<=v;g+=1)d[g]=0;for(g=1;g<=c;g+=1)m[g]=0;if(x=[],0===p[1]){if(function(e,n,r,t){var a,o,i,s,u,c;for(o=1;o<=r;o+=1){if(t[1]=o,c=0,(i=o-1)<1){if((c=e[o][o]-c)<=0)break;e[o][o]=Math.sqrt(c)}else{for(s=1;s<=i;s+=1){for(u=e[s][o],a=1;a<s;a+=1)u-=e[a][o]*e[a][s];u/=e[s][s],e[s][o]=u,c+=u*u}if((c=e[o][o]-c)<=0)break;e[o][o]=Math.sqrt(c)}t[1]=0}}(e,0,t,x),0!==x[1])return void(p[1]=2);!function(e,n,r,t){var a,o,i,s;for(o=1;o<=r;o+=1){for(s=0,a=1;a<o;a+=1)s+=e[a][o]*t[a];t[o]=(t[o]-s)/e[o][o]}for(i=1;i<=r;i+=1)for(t[o=r+1-i]=t[o]/e[o][o],s=-t[o],a=1;a<o;a+=1)t[a]=t[a]+s*e[a][o]}(e,0,t,n),function(e,n,r){var t,a,o,i,s;for(o=1;o<=r;o+=1){for(e[o][o]=1/e[o][o],s=-e[o][o],t=1;t<o;t+=1)e[t][o]=s*e[t][o];if(r<(i=o+1))break;for(a=i;a<=r;a+=1)for(s=e[o][a],e[o][a]=0,t=1;t<=o;t+=1)e[t][a]=e[t][a]+s*e[t][o]}}(e,0,t)}else{for(M=1;M<=t;M+=1)for(a[M]=0,g=1;g<=M;g+=1)a[M]=a[M]+e[g][M]*n[g];for(M=1;M<=t;M+=1)for(n[M]=0,g=M;g<=t;g+=1)n[M]=n[M]+e[M][g]*a[g]}for(o[1]=0,M=1;M<=t;M+=1)for(a[M]=n[M],o[1]=o[1]+d[M]*a[M],d[M]=0,g=M+1;g<=t;g+=1)e[g][M]=0;for(o[1]=-o[1]/2,p[1]=0,N=(_=(A=(S=(T=(w=t)+t)+E)+E+1)+E*(E+1)/2)+c,g=1;g<=c;g+=1){for(D=0,M=1;M<=t;M+=1)D+=i[M][g]*i[M][g];d[N+g]=Math.sqrt(D)}function V(){for(f[1]=f[1]+1,v=_,g=1;g<=c;g+=1){for(v+=1,D=-s[g],M=1;M<=t;M+=1)D+=i[M][g]*a[M];if(Math.abs(D)<U&&(D=0),g>l)d[v]=D;else if(d[v]=-Math.abs(D),D>0){for(M=1;M<=t;M+=1)i[M][g]=-i[M][g];s[g]=-s[g]}}for(g=1;g<=h;g+=1)d[_+m[g]]=0;for(I=0,R=0,g=1;g<=c;g+=1)d[_+g]<R*d[N+g]&&(I=g,R=d[_+g]/d[N+g]);return 0===I?999:0}function G(){for(g=1;g<=t;g+=1){for(D=0,M=1;M<=t;M+=1)D+=e[M][g]*i[M][I];d[g]=D}for(y=w,g=1;g<=t;g+=1)d[y+g]=0;for(M=h+1;M<=t;M+=1)for(g=1;g<=t;g+=1)d[y+g]=d[y+g]+e[g][M]*d[M];for(j=!0,g=h;g>=1;g-=1){for(D=d[g],y=(v=A+g*(g+3)/2)-g,M=g+1;M<=h;M+=1)D-=d[v]*d[T+M],v+=M;if(D/=d[y],d[T+g]=D,m[g]<l)break;if(D<0)break;j=!1,b=g}if(!j)for(O=d[S+b]/d[T+b],g=1;g<=h&&!(m[g]<l)&&!(d[T+g]<0);g+=1)(R=d[S+g]/d[T+g])<O&&(O=R,b=g);for(D=0,g=w+1;g<=w+t;g+=1)D+=d[g]*d[g];if(Math.abs(D)<=U){if(j)return p[1]=1,999;for(g=1;g<=h;g+=1)d[S+g]=d[S+g]-O*d[T+g];return d[S+h+1]=d[S+h+1]+O,700}for(D=0,g=1;g<=t;g+=1)D+=d[w+g]*i[g][I];for(z=-d[_+I]/D,k=!0,j||O<z&&(z=O,k=!1),g=1;g<=t;g+=1)a[g]=a[g]+z*d[w+g],Math.abs(a[g])<U&&(a[g]=0);for(o[1]=o[1]+z*D*(z/2+d[S+h+1]),g=1;g<=h;g+=1)d[S+g]=d[S+g]-z*d[T+g];if(d[S+h+1]=d[S+h+1]+z,!k){for(D=-s[I],M=1;M<=t;M+=1)D+=a[M]*i[M][I];if(I>l)d[_+I]=D;else if(d[_+I]=-Math.abs(D),D>0){for(M=1;M<=t;M+=1)i[M][I]=-i[M][I];s[I]=-s[I]}return 700}for(m[h+=1]=I,v=A+(h-1)*h/2+1,g=1;g<=h-1;g+=1)d[v]=d[g],v+=1;if(h===t)d[v]=d[t];else{for(g=t;g>=h+1&&0!==d[g]&&(C=Math.max(Math.abs(d[g-1]),Math.abs(d[g])),P=Math.min(Math.abs(d[g-1]),Math.abs(d[g])),R=d[g-1]>=0?Math.abs(C*Math.sqrt(1+P*P/(C*C))):-Math.abs(C*Math.sqrt(1+P*P/(C*C))),C=d[g-1]/R,P=d[g]/R,1!==C);g-=1)if(0===C)for(d[g-1]=P*R,M=1;M<=t;M+=1)R=e[M][g-1],e[M][g-1]=e[M][g],e[M][g]=R;else for(d[g-1]=R,L=P/(1+C),M=1;M<=t;M+=1)R=C*e[M][g-1]+P*e[M][g],e[M][g]=L*(e[M][g-1]+R)-e[M][g],e[M][g-1]=R;d[v]=d[h]}return 0}function J(){if(0===d[y=(v=A+b*(b+1)/2+1)+b])return 798;if(C=Math.max(Math.abs(d[y-1]),Math.abs(d[y])),P=Math.min(Math.abs(d[y-1]),Math.abs(d[y])),R=d[y-1]>=0?Math.abs(C*Math.sqrt(1+P*P/(C*C))):-Math.abs(C*Math.sqrt(1+P*P/(C*C))),C=d[y-1]/R,P=d[y]/R,1===C)return 798;if(0===C){for(g=b+1;g<=h;g+=1)R=d[y-1],d[y-1]=d[y],d[y]=R,y+=g;for(g=1;g<=t;g+=1)R=e[g][b],e[g][b]=e[g][b+1],e[g][b+1]=R}else{for(L=P/(1+C),g=b+1;g<=h;g+=1)R=C*d[y-1]+P*d[y],d[y]=L*(d[y-1]+R)-d[y],d[y-1]=R,y+=g;for(g=1;g<=t;g+=1)R=C*e[g][b]+P*e[g][b+1],e[g][b+1]=L*(e[g][b]+R)-e[g][b+1],e[g][b]=R}return 0}function B(){for(y=v-b,g=1;g<=b;g+=1)d[y]=d[v],v+=1,y+=1;return d[S+b]=d[S+b+1],m[b]=m[b+1],(b+=1)<h?797:0}function H(){return d[S+h]=d[S+h+1],d[S+h+1]=0,m[h]=0,h-=1,f[2]=f[2]+1,0}for(h=0,f[1]=0,f[2]=0,Y=0;;){if(999===(Y=V()))return;for(;0!==(Y=G());){if(999===Y)return;if(700===Y)if(b===h)H();else{for(;J(),797===(Y=B()););H()}}}}(e,t,0,c,p,f,a,o,0,l,i,d,0,M,g,s),h="",1===s[1]&&(h="constraints are inconsistent, no solution!"),2===s[1]&&(h="matrix D in quadratic function is not positive definite!"),{solution:r(p),value:r(f),unconstrained_solution:r(t),iterations:r(M),iact:r(d),message:h}}}(numeric),numeric.svd=function(e){var n,r=numeric.epsilon,t=1e-64/r,a=0,o=0,i=0,s=0,u=0,c=numeric.clone(e),l=c.length,m=c[0].length;if(l<m)throw"Need more rows than columns";var h=new Array(m),f=new Array(m);for(o=0;o<m;o++)h[o]=f[o]=0;var d=numeric.rep([m,m],0);function p(e,n){return(e=Math.abs(e))>(n=Math.abs(n))?e*Math.sqrt(1+n*n/e/e):0==n?e:n*Math.sqrt(1+e*e/n/n)}var g=0,M=0,v=0,y=0,x=0,b=0,w=0;for(o=0;o<m;o++){for(h[o]=M,w=0,u=o+1,i=o;i<l;i++)w+=c[i][o]*c[i][o];if(w<=t)M=0;else for(g=c[o][o],M=Math.sqrt(w),g>=0&&(M=-M),v=g*M-w,c[o][o]=g-M,i=u;i<m;i++){for(w=0,s=o;s<l;s++)w+=c[s][o]*c[s][i];for(g=w/v,s=o;s<l;s++)c[s][i]+=g*c[s][o]}for(f[o]=M,w=0,i=u;i<m;i++)w+=c[o][i]*c[o][i];if(w<=t)M=0;else{for(g=c[o][o+1],M=Math.sqrt(w),g>=0&&(M=-M),v=g*M-w,c[o][o+1]=g-M,i=u;i<m;i++)h[i]=c[o][i]/v;for(i=u;i<l;i++){for(w=0,s=u;s<m;s++)w+=c[i][s]*c[o][s];for(s=u;s<m;s++)c[i][s]+=w*h[s]}}(x=Math.abs(f[o])+Math.abs(h[o]))>y&&(y=x)}for(o=m-1;-1!=o;o+=-1){if(0!=M){for(v=M*c[o][o+1],i=u;i<m;i++)d[i][o]=c[o][i]/v;for(i=u;i<m;i++){for(w=0,s=u;s<m;s++)w+=c[o][s]*d[s][i];for(s=u;s<m;s++)d[s][i]+=w*d[s][o]}}for(i=u;i<m;i++)d[o][i]=0,d[i][o]=0;d[o][o]=1,M=h[o],u=o}for(o=m-1;-1!=o;o+=-1){for(u=o+1,M=f[o],i=u;i<m;i++)c[o][i]=0;if(0!=M){for(v=c[o][o]*M,i=u;i<m;i++){for(w=0,s=u;s<l;s++)w+=c[s][o]*c[s][i];for(g=w/v,s=o;s<l;s++)c[s][i]+=g*c[s][o]}for(i=o;i<l;i++)c[i][o]=c[i][o]/M}else for(i=o;i<l;i++)c[i][o]=0;c[o][o]+=1}for(r*=y,s=m-1;-1!=s;s+=-1)for(var T=0;T<50;T++){var A=!1;for(u=s;-1!=u;u+=-1){if(Math.abs(h[u])<=r){A=!0;break}if(Math.abs(f[u-1])<=r)break}if(!A){a=0,w=1;var _=u-1;for(o=u;o<s+1&&(g=w*h[o],h[o]=a*h[o],!(Math.abs(g)<=r));o++)for(v=p(g,M=f[o]),f[o]=v,a=M/v,w=-g/v,i=0;i<l;i++)x=c[i][_],b=c[i][o],c[i][_]=x*a+b*w,c[i][o]=-x*w+b*a}if(b=f[s],u==s){if(b<0)for(f[s]=-b,i=0;i<m;i++)d[i][s]=-d[i][s];break}if(T>=49)throw"Error: no convergence.";for(y=f[u],M=p(g=(((x=f[s-1])-b)*(x+b)+((M=h[s-1])-(v=h[s]))*(M+v))/(2*v*x),1),g=g<0?((y-b)*(y+b)+v*(x/(g-M)-v))/y:((y-b)*(y+b)+v*(x/(g+M)-v))/y,a=1,w=1,o=u+1;o<s+1;o++){for(M=h[o],x=f[o],v=w*M,M*=a,b=p(g,v),h[o-1]=b,g=y*(a=g/b)+M*(w=v/b),M=-y*w+M*a,v=x*w,x*=a,i=0;i<m;i++)y=d[i][o-1],b=d[i][o],d[i][o-1]=y*a+b*w,d[i][o]=-y*w+b*a;for(b=p(g,v),f[o-1]=b,g=(a=g/b)*M+(w=v/b)*x,y=-w*M+a*x,i=0;i<l;i++)x=c[i][o-1],b=c[i][o],c[i][o-1]=x*a+b*w,c[i][o]=-x*w+b*a}h[u]=0,h[s]=g,f[s]=y}for(o=0;o<f.length;o++)f[o]<r&&(f[o]=0);for(o=0;o<m;o++)for(i=o-1;i>=0;i--)if(f[i]<f[o]){for(a=f[i],f[i]=f[o],f[o]=a,s=0;s<c.length;s++)n=c[s][o],c[s][o]=c[s][i],c[s][i]=n;for(s=0;s<d.length;s++)n=d[s][o],d[s][o]=d[s][i],d[s][i]=n;o=i}return{U:c,S:f,V:d}}},991:function(e){e.exports=(()=>{"use strict";var e={636:(e,n,r)=>{r.r(n),r.d(n,{DetailedSat:()=>R,Sat:()=>E,Sensor:()=>z,Sgp4:()=>f,SpaceObjectType:()=>a,Star:()=>P,Tle:()=>T,Transforms:()=>d,Utils:()=>x});var t={};r.r(t),r.d(t,{SpaceObjectType:()=>a});var a,o=Math.PI,i=2*o,s=o/180,u=2/3,c=15e-13,l=360/i,m=864e5,h=1.15741e-8,f=function(){function e(){}return e.dpper=function(e,n){var r=e.e3,t=e.ee2,a=e.peo,s=e.pgho,u=e.pho,c=e.PInco,l=e.plo,m=e.se2,h=e.se3,f=e.sgh2,d=e.sgh3,p=e.sgh4,g=e.sh2,M=e.sh3,v=e.si2,y=e.si3,x=e.sl2,b=e.sl3,w=e.sl4,T=e.t,A=e.xgh2,_=e.xgh3,S=e.xgh4,I=e.xh2,E=e.xh3,N=e.xi2,R=e.xi3,D=e.xl2,O=e.xl3,z=e.xl4,C=e.zmol,P=e.zmos,L=n.ep,j=n.inclp,k=n.nodep,U=n.argpp,q=n.mp,F=n.opsmode,Y=void 0===F?"i":F,V=n.init,G=P+119459e-10*T;"y"===V&&(G=P);var J=G+.0335*Math.sin(G),B=Math.sin(J),H=.5*B*B-.25,X=-.5*B*Math.cos(J),Q=m*H+h*X,W=v*H+y*X,K=x*H+b*X+w*B,Z=f*H+d*X+p*B,$=g*H+M*X;G=C+.00015835218*T,"y"===V&&(G=C),J=G+.1098*Math.sin(G);var ee=Q+(t*(H=.5*(B=Math.sin(J))*B-.25)+r*(X=-.5*B*Math.cos(J))),ne=W+(N*H+R*X),re=K+(D*H+O*X+z*B),te=Z+(A*H+_*X+S*B),ae=$+(I*H+E*X);if("n"===V){re-=l,te-=s,ae-=u,j+=ne-=c,L+=ee-=a;var oe=Math.sin(j),ie=Math.cos(j);if(j>=.2)U+=te-=ie*(ae/=oe),k+=ae,q+=re;else{var se=Math.sin(k),ue=Math.cos(k),ce=oe*se,le=oe*ue;ce+=ae*ue+ne*ie*se,le+=-ae*se+ne*ie*ue,(k%=i)<0&&"a"===Y&&(k+=i);var me=q+U+ie*k;me+=re+te-ne*k*oe;var he=k;(k=Math.atan2(ce,le))<0&&"a"===Y&&(k+=i),Math.abs(he-k)>o&&(k<he?k+=i:k-=i),U=me-(q+=re)-ie*k}}return{ep:L,inclp:j,nodep:k,argpp:U,mp:q}},e.dscom=function(e){var n,r,t,a,o,i,s,u,c,l,m,h,f,d,p,g,M,v,y,x,b,w,T,A,_,S,I,E,N,R,D,O,z,C,P,L,j,k,U=e.epoch,q=e.ep,F=e.argpp,Y=e.tc,V=e.inclp,G=e.nodep,J=e.np,B=.01675,H=.0549,X=2*Math.PI,Q=J,W=q,K=Math.sin(G),Z=Math.cos(G),$=Math.sin(F),ee=Math.cos(F),ne=Math.sin(V),re=Math.cos(V),te=W*W,ae=1-te,oe=Math.sqrt(ae),ie=U+18261.5+Y/1440,se=(4.523602-.00092422029*ie)%X,ue=Math.sin(se),ce=Math.cos(se),le=.91375164-.03568096*ce,me=Math.sqrt(1-le*le),he=.089683511*ue/me,fe=Math.sqrt(1-he*he),de=5.8351514+.001944368*ie,pe=.39785416*ue/me,ge=fe*ce+.91744867*he*ue;pe=Math.atan2(pe,ge),pe+=de-se;for(var Me=Math.cos(pe),ve=Math.sin(pe),ye=.1945905,xe=-.98088458,be=.91744867,we=.39785416,Te=Z,Ae=K,_e=29864797e-13,Se=1/Q,Ie=1;Ie<=2;Ie++){var Ee=ye*Te+xe*be*Ae,Ne=-xe*Te+ye*be*Ae,Re=-ye*Ae+xe*be*Te,De=xe*we,Oe=xe*Ae+ye*be*Te,ze=ye*we,Ce=re*Re+ne*De,Pe=re*Oe+ne*ze,Le=-ne*Re+re*De,je=-ne*Oe+re*ze,ke=Ee*ee+Ce*$,Ue=Ne*ee+Pe*$,qe=-Ee*$+Ce*ee,Fe=-Ne*$+Pe*ee,Ye=Le*$,Ve=je*$,Ge=Le*ee,Je=je*ee;E=-6*Ee*Le+te*(-24*ke*Ge-6*qe*Ye),N=-6*(Ee*je+Ne*Le)+te*(-24*(Ue*Ge+ke*Je)+-6*(qe*Ve+Fe*Ye)),R=-6*Ne*je+te*(-24*Ue*Je-6*Fe*Ve),O=6*Ce*Le+te*(24*ke*Ye-6*qe*Ge),z=6*(Pe*Le+Ce*je)+te*(24*(Ue*Ye+ke*Ve)-6*(Fe*Ge+qe*Je)),C=6*Pe*je+te*(24*Ue*Ve-6*Fe*Je),I=(I=3*(Ee*Ee+Ce*Ce)+(L=12*ke*ke-3*qe*qe)*te)+I+ae*L,D=(D=6*(Ee*Ne+Ce*Pe)+(j=24*ke*Ue-6*qe*Fe)*te)+D+ae*j,P=(P=3*(Ne*Ne+Pe*Pe)+(k=12*Ue*Ue-3*Fe*Fe)*te)+P+ae*k,r=-.5*(t=_e*Se)/oe,n=-15*W*(a=t*oe),o=ke*qe+Ue*Fe,i=Ue*qe+ke*Fe,s=Ue*Fe-ke*qe,1===Ie&&(u=n,c=r,l=t,m=a,h=o,f=i,d=s,p=I,y=D,T=P,g=E,M=N,v=R,x=O,b=z,w=C,A=L,_=j,S=k,ye=Me,xe=ve,be=le,we=me,Te=fe*Z+he*K,Ae=K*fe-Z*he,_e=4.7968065e-7)}return{snodm:K,cnodm:Z,sinim:ne,cosim:re,sinomm:$,cosomm:ee,day:ie,e3:2*n*s,ee2:2*n*i,em:W,emsq:te,gam:de,peo:0,pgho:0,pho:0,PInco:0,plo:0,rtemsq:oe,se2:2*u*f,se3:2*u*d,sgh2:2*m*_,sgh3:2*m*(S-A),sgh4:-18*m*B,sh2:-2*c*b,sh3:-2*c*(w-x),si2:2*c*M,si3:2*c*(v-g),sl2:-2*l*y,sl3:-2*l*(T-p),sl4:-2*l*(-21-9*te)*B,s1:n,s2:r,s3:t,s4:a,s5:o,s6:i,s7:s,ss1:u,ss2:c,ss3:l,ss4:m,ss5:h,ss6:f,ss7:d,sz1:p,sz2:y,sz3:T,sz11:g,sz12:M,sz13:v,sz21:x,sz22:b,sz23:w,sz31:A,sz32:_,sz33:S,xgh2:2*a*j,xgh3:2*a*(k-L),xgh4:-18*a*H,xh2:-2*r*z,xh3:-2*r*(C-O),xi2:2*r*N,xi3:2*r*(R-E),xl2:-2*t*D,xl3:-2*t*(P-I),xl4:-2*t*(-21-9*te)*H,nm:Q,z1:I,z2:D,z3:P,z11:E,z12:N,z13:R,z21:O,z22:z,z23:C,z31:L,z32:j,z33:k,zmol:(.2299715*ie-de+4.7199672)%X,zmos:(6.2565837+.017201977*ie)%X}},e.dsinit=function(e){var n=e.xke,r=e.cosim,t=e.argpo,a=e.s1,s=e.s2,u=e.s3,c=e.s4,l=e.s5,m=e.sinim,h=e.ss1,f=e.ss2,d=e.ss3,p=e.ss4,g=e.ss5,M=e.sz1,v=e.sz3,y=e.sz11,x=e.sz13,b=e.sz21,w=e.sz23,T=e.sz31,A=e.sz33,_=e.t,S=e.tc,I=e.gsto,E=e.mo,N=e.mdot,R=e.no,D=e.nodeo,O=e.nodedot,z=e.xPIdot,C=e.z1,P=e.z3,L=e.z11,j=e.z13,k=e.z21,U=e.z23,q=e.z31,F=e.z33,Y=e.ecco,V=e.eccsq,G=e.emsq,J=e.em,B=e.argpm,H=e.inclm,X=e.mm,Q=e.nm,W=e.nodem,K=e.irez,Z=e.atime,$=e.d2201,ee=e.d2211,ne=e.d3210,re=e.d3222,te=e.d4410,ae=e.d4422,oe=e.d5220,ie=e.d5232,se=e.d5421,ue=e.d5433,ce=e.dedt,le=e.didt,me=e.dmdt,he=e.dnodt,fe=e.domdt,de=e.del1,pe=e.del2,ge=e.del3,Me=e.xfact,ve=e.xlamo,ye=e.xli,xe=e.xni,be=.0043752690880113,we=.00015835218,Te=119459e-10;K=0,Q<.0052359877&&Q>.0034906585&&(K=1),Q>=.00826&&Q<=.00924&&J>=.5&&(K=2);var Ae=-Te*f*(b+w);(H<.052359877||H>o-.052359877)&&(Ae=0),0!==m&&(Ae/=m);var _e=-we*s*(k+U);(H<.052359877||H>o-.052359877)&&(_e=0),fe=p*Te*(T+A-6)-r*Ae+c*we*(q+F-6),he=Ae,0!==m&&(fe-=r/m*_e,he+=_e/m);var Se=(I+S*be)%i;if(J+=(ce=h*Te*g+a*we*l)*_,H+=(le=f*Te*(y+x)+s*we*(L+j))*_,B+=fe*_,W+=he*_,X+=(me=-Te*d*(M+v-14-6*G)-we*u*(C+P-14-6*G))*_,0!==K){var Ie=Math.pow(Q/n,2/3);if(2===K){var Ee=r*r,Ne=J,Re=G,De=(J=Y)*(G=V),Oe=void 0,ze=void 0,Ce=void 0,Pe=void 0,Le=void 0,je=void 0,ke=void 0,Ue=void 0,qe=void 0;J<=.65?(Oe=3.616-13.247*J+16.29*G,ze=117.39*J-19.302-228.419*G+156.591*De,Ce=109.7927*J-18.9068-214.6334*G+146.5816*De,Pe=242.694*J-41.122-471.094*G+313.953*De,Le=841.88*J-146.407-1629.014*G+1083.435*De,je=3017.977*J-532.114-5740.032*G+3708.276*De):(Oe=331.819*J-72.099-508.738*G+266.724*De,ze=1582.851*J-346.844-2415.925*G+1246.113*De,Ce=1554.908*J-342.585-2366.899*G+1215.972*De,Pe=4758.686*J-1052.797-7193.992*G+3651.957*De,Le=16178.11*J-3581.69-24462.77*G+12422.52*De,je=J>.715?29936.92*J-5149.66-54087.36*G+31324.56*De:1464.74-4664.75*J+3763.64*G),J<.7?(qe=4988.61*J-919.2277-9064.77*G+5542.21*De,ke=4568.6173*J-822.71072-8491.4146*G+5337.524*De,Ue=4690.25*J-853.666-8624.77*G+5341.4*De):(qe=161616.52*J-37995.78-229838.2*G+109377.94*De,ke=218913.95*J-51752.104-309468.16*G+146349.42*De,Ue=170470.89*J-40023.88-242699.48*G+115605.82*De);var Fe=m*m,Ye=Q*Q*3*(Ie*Ie),Ve=17891679e-13*Ye;$=Ve*(Ge=.75*(1+2*r+Ee))*(-.306-.44*(J-.64)),ee=Ve*(1.5*Fe)*Oe,ne=(Ve=3.7393792e-7*(Ye*=Ie))*(1.875*m*(1-2*r-3*Ee))*ze,re=Ve*(-1.875*m*(1+2*r-3*Ee))*Ce,te=(Ve=2*(Ye*=Ie)*7.3636953e-9)*(35*Fe*Ge)*Pe,ae=Ve*(39.375*Fe*Fe)*Le,oe=(Ve=1.1428639e-7*(Ye*=Ie))*(9.84375*m*(Fe*(1-2*r-5*Ee)+.33333333*(4*r-2+6*Ee)))*je,ie=Ve*(m*(4.92187512*Fe*(-2-4*r+10*Ee)+6.56250012*(1+2*r-3*Ee)))*Ue,se=(Ve=2*Ye*2.1765803e-9)*(29.53125*m*(2-8*r+Ee*(8*r-12+10*Ee)))*ke,ue=Ve*(29.53125*m*(-2-8*r+Ee*(12+8*r-10*Ee)))*qe,ve=(E+D+D-(Se+Se))%i,Me=N+me+2*(O+he-be)-R,J=Ne,G=Re}if(1===K){var Ge,Je=1+r;pe=2*(de=3*Q*Q*Ie*Ie)*(Ge=.75*(1+r)*(1+r))*(1+G*(.8125*G-2.5))*17891679e-13,ge=3*de*(Je*=1.875*Je*Je)*(1+G*(6.60937*G-6))*2.2123015e-7*Ie,de=de*(.9375*m*m*(1+3*r)-.75*(1+r))*(ze=1+2*G)*21460748e-13*Ie,ve=(E+D+t-Se)%i,Me=N+z+me+fe+he-(R+be)}ye=ve,xe=R,Z=0,Q=R+0}return{em:J,argpm:B,inclm:H,mm:X,nm:Q,nodem:W,irez:K,atime:Z,d2201:$,d2211:ee,d3210:ne,d3222:re,d4410:te,d4422:ae,d5220:oe,d5232:ie,d5421:se,d5433:ue,dedt:ce,didt:le,dmdt:me,dndt:0,dnodt:he,domdt:fe,del1:de,del2:pe,del3:ge,xfact:Me,xlamo:ve,xli:ye,xni:xe}},e.dspace=function(e,n,r,t,a,o,s,u,c,l,m,h,f,d,p,g,M,v,y,x,b,w,T,A,_,S,I,E,N,R,D,O,z,C,P,L){var j=.13130908,k=2.8843198,U=.37448087,q=5.7686396,F=.95240898,Y=1.8014998,V=1.050833,G=4.4108898,J=259200,B=0,H=(A+.0043752690880113*T)%i;if(N+=h*w,D+=g*w,R+=y*w,P+=v*w,z+=M*w,0!==e){var X;(0===E||w*E<=0||Math.abs(w)<Math.abs(E))&&(E=0,C=I,O=S),X=w>0?720:-720;for(var Q=void 0,W=void 0,K=void 0,Z=void 0,$=void 0,ee=void 0,ne=void 0,re=381;381===re;)2!==e?(ee=f*Math.sin(O-j)+d*Math.sin(2*(O-k))+p*Math.sin(3*(O-U)),Z=C+_,$=f*Math.cos(O-j)+2*d*Math.cos(2*(O-k))+3*p*Math.cos(3*(O-U)),$*=Z):(K=(ne=x+b*E)+ne,W=O+O,ee=n*Math.sin(K+O-q)+r*Math.sin(O-q)+t*Math.sin(ne+O-F)+a*Math.sin(-ne+O-F)+o*Math.sin(K+W-Y)+s*Math.sin(W-Y)+u*Math.sin(ne+O-V)+c*Math.sin(-ne+O-V)+l*Math.sin(ne+W-G)+m*Math.sin(-ne+W-G),Z=C+_,$=n*Math.cos(K+O-q)+r*Math.cos(O-q)+t*Math.cos(ne+O-F)+a*Math.cos(-ne+O-F)+u*Math.cos(ne+O-V)+c*Math.cos(-ne+O-V)+2*(o*Math.cos(K+W-Y)+s*Math.cos(W-Y)+l*Math.cos(ne+W-G)+m*Math.cos(-ne+W-G)),$*=Z),Math.abs(w-E)>=720?re=381:(Q=w-E,re=0),381===re&&(O+=Z*X+ee*J,C+=ee*X+$*J,E+=X);L=C+ee*Q+$*Q*Q*.5;var te=O+Z*Q+ee*Q*Q*.5;1!==e?(z=te-2*P+2*H,B=L-I):(z=te-P-R+H,B=L-I),L=I+B}return[N,R,D,z,P,L]},e.initl=function(n){var r=n.opsmode,t=n.ecco,a=n.epoch,o=n.inclo,i=n.xke,s=n.j2,u=n.no,c=2*Math.PI,l=2/3,m=t*t,h=1-m,f=Math.sqrt(h),d=Math.cos(o),p=d*d,g=Math.pow(i/u,l),M=.75*s*(3*p-1)/(f*h),v=M/(g*g),y=g*(1-v*v-v*(1/3+134*v*v/81));u/=1+(v=M/(y*y));var x,b=Math.pow(i/u,l),w=Math.sin(o),T=b*h,A=1-5*p,_=-A-p-p,S=1/b,I=T*T,E=b*(1-t);if("a"===r){var N=a-7305,R=Math.floor(N+1e-8),D=.017202791694070362;(x=(1.7321343856509375+D*R+(D+c)*(N-R)+N*N*5075514194322695e-30)%c)<0&&(x+=c)}else x=e.gstime(a+2433281.5);return{no:u,method:"n",ainv:S,ao:b,con41:_,con42:A,cosio:d,cosio2:p,eccsq:m,omeosq:h,posq:I,rp:E,rteosq:f,sinio:w,gsto:x}},e.sgp4init=function(n,r){var t=r.whichconst,a=void 0===t?"wgs72":t,o=r.opsmode,s=void 0===o?"i":o,l=r.satn,m=void 0===l?n.satnum:l,h=r.epoch,f=r.xbstar,d=r.xecco,p=r.xargpo,g=r.xinclo,M=r.xndot,v=r.xnddot,y=r.xmo,x=r.xno,b=r.xnodeo;n.isimp=0,n.method="n",n.aycof=0,n.con41=0,n.cc1=0,n.cc4=0,n.cc5=0,n.d2=0,n.d3=0,n.d4=0,n.delmo=0,n.eta=0,n.argpdot=0,n.omgcof=0,n.sinmao=0,n.t=0,n.t2cof=0,n.t3cof=0,n.t4cof=0,n.t5cof=0,n.x1mth2=0,n.x7thm1=0,n.mdot=0,n.nodedot=0,n.xlcof=0,n.xmcof=0,n.nodecf=0,n.irez=0,n.d2201=0,n.d2211=0,n.d3210=0,n.d3222=0,n.d4410=0,n.d4422=0,n.d5220=0,n.d5232=0,n.d5421=0,n.d5433=0,n.dedt=0,n.del1=0,n.del2=0,n.del3=0,n.didt=0,n.dmdt=0,n.dnodt=0,n.domdt=0,n.e3=0,n.ee2=0,n.peo=0,n.pgho=0,n.pho=0,n.PInco=0,n.plo=0,n.se2=0,n.se3=0,n.sgh2=0,n.sgh3=0,n.sgh4=0,n.sh2=0,n.sh3=0,n.si2=0,n.si3=0,n.sl2=0,n.sl3=0,n.sl4=0,n.gsto=0,n.xfact=0,n.xgh2=0,n.xgh3=0,n.xgh4=0,n.xh2=0,n.xh3=0,n.xi2=0,n.xi3=0,n.xl2=0,n.xl3=0,n.xl4=0,n.xlamo=0,n.zmol=0,n.zmos=0,n.atime=0,n.xli=0,n.xni=0;var w=e.getgravconst(a);n.tumin=w.tumin,n.mus=w.mus,n.radiusearthkm=w.radiusearthkm,n.xke=w.xke,n.j2=w.j2,n.j3=w.j3,n.j4=w.j4,n.j3oj2=w.j3oj2;var T=w.j2,A=w.j4,_=w.xke,S=w.j3oj2;n.error=0,n.operationmode=s;var I=m.split("")[0].toLowerCase();isNaN(parseInt(I))?n.satnum=parseInt(I.charCodeAt(0)-96+9+n.satnum.slice(1,5)).toString():n.satnum=m,n.bstar=f,n.ndot=M,n.nddot=v,n.ecco=d,n.argpo=p,n.inclo=g,n.mo=y,n.no=x,n.nodeo=b;var E=78/n.radiusearthkm+1,N=42/n.radiusearthkm,R=N*N*N*N;n.init="y",n.t=0;var D={ecco:n.ecco,epoch:h,inclo:n.inclo,no:n.no,method:n.method,opsmode:n.operationmode,xke:n.xke,j2:n.j2},O=e.initl(D),z=O.ao,C=O.con42,P=O.cosio,L=O.cosio2,j=O.eccsq,k=O.omeosq,U=O.posq,q=O.rp,F=O.rteosq,Y=O.sinio;if(n.no=O.no,n.con41=O.con41,n.gsto=O.gsto,n.a=Math.pow(n.no*n.tumin,-2/3),n.alta=n.a*(1+n.ecco)-1,n.altp=n.a*(1-n.ecco)-1,n.error=0,k>=0||n.no>=0){n.isimp=0,q<220/n.radiusearthkm+1&&(n.isimp=1);var V=E,G=R,J=(q-1)*n.radiusearthkm;if(J<156){V=J-78,J<98&&(V=20);var B=(120-V)/n.radiusearthkm;G=B*B*B*B,V=V/n.radiusearthkm+1}var H=1/U,X=1/(z-V);n.eta=z*n.ecco*X;var Q=n.eta*n.eta,W=n.ecco*n.eta,K=Math.abs(1-Q),Z=G*Math.pow(X,4),$=Z/Math.pow(K,3.5),ee=$*n.no*(z*(1+1.5*Q+W*(4+Q))+.375*T*X/K*n.con41*(8+3*Q*(8+Q)));n.cc1=n.bstar*ee;var ne=0;n.ecco>1e-4&&(ne=-2*Z*X*S*n.no*Y/n.ecco),n.x1mth2=1-L,n.cc4=2*n.no*$*z*k*(n.eta*(2+.5*Q)+n.ecco*(.5+2*Q)-T*X/(z*K)*(-3*n.con41*(1-2*W+Q*(1.5-.5*W))+.75*n.x1mth2*(2*Q-W*(1+Q))*Math.cos(2*n.argpo))),n.cc5=2*$*z*k*(1+2.75*(Q+W)+W*Q);var re=L*L,te=1.5*T*H*n.no,ae=.5*te*T*H,oe=-.46875*A*H*H*n.no;n.mdot=n.no+.5*te*F*n.con41+.0625*ae*F*(13-78*L+137*re),n.argpdot=-.5*te*C+.0625*ae*(7-114*L+395*re)+oe*(3-36*L+49*re);var ie=-te*P;n.nodedot=ie+(.5*ae*(4-19*L)+2*oe*(3-7*L))*P;var se=n.argpdot+n.nodedot;n.omgcof=n.bstar*ne*Math.cos(n.argpo),n.xmcof=0,n.ecco>1e-4&&(n.xmcof=-u*Z*n.bstar/W),n.nodecf=3.5*k*ie*n.cc1,n.t2cof=1.5*n.cc1,Math.abs(P+1)>15e-13?n.xlcof=-.25*S*Y*(3+5*P)/(1+P):n.xlcof=-.25*S*Y*(3+5*P)/c,n.aycof=-.5*S*Y;var ue=1+n.eta*Math.cos(n.mo);if(n.delmo=ue*ue*ue,n.sinmao=Math.sin(n.mo),n.x7thm1=7*L-1,i/n.no>=225){n.method="d",n.isimp=1;var ce=n.inclo,le={epoch:h,ep:n.ecco,argpp:n.argpo,tc:0,inclp:n.inclo,nodep:n.nodeo,np:n.no,e3:n.e3,ee2:n.ee2,peo:n.peo,pgho:n.pgho,pho:n.pho,PInco:n.PInco,plo:n.plo,se2:n.se2,se3:n.se3,sgh2:n.sgh2,sgh3:n.sgh3,sgh4:n.sgh4,sh2:n.sh2,sh3:n.sh3,si2:n.si2,si3:n.si3,sl2:n.sl2,sl3:n.sl3,sl4:n.sl4,xgh2:n.xgh2,xgh3:n.xgh3,xgh4:n.xgh4,xh2:n.xh2,xh3:n.xh3,xi2:n.xi2,xi3:n.xi3,xl2:n.xl2,xl3:n.xl3,xl4:n.xl4,zmol:n.zmol,zmos:n.zmos},me=e.dscom(le);n.e3=me.e3,n.ee2=me.ee2,n.peo=me.peo,n.pgho=me.pgho,n.pho=me.pho,n.PInco=me.PInco,n.plo=me.plo,n.se2=me.se2,n.se3=me.se3,n.sgh2=me.sgh2,n.sgh3=me.sgh3,n.sgh4=me.sgh4,n.sh2=me.sh2,n.sh3=me.sh3,n.si2=me.si2,n.si3=me.si3,n.sl2=me.sl2,n.sl3=me.sl3,n.sl4=me.sl4;var he=me.sinim,fe=me.cosim,de=me.em,pe=me.emsq,ge=me.s1,Me=me.s2,ve=me.s3,ye=me.s4,xe=me.s5,be=me.ss1,we=me.ss2,Te=me.ss3,Ae=me.ss4,_e=me.ss5,Se=me.sz1,Ie=me.sz3,Ee=me.sz11,Ne=me.sz13,Re=me.sz21,De=me.sz23,Oe=me.sz31,ze=me.sz33;n.xgh2=me.xgh2,n.xgh3=me.xgh3,n.xgh4=me.xgh4,n.xh2=me.xh2,n.xh3=me.xh3,n.xi2=me.xi2,n.xi3=me.xi3,n.xl2=me.xl2,n.xl3=me.xl3,n.xl4=me.xl4,n.zmol=me.zmol,n.zmos=me.zmos;var Ce=me.nm,Pe=me.z1,Le=me.z3,je=me.z11,ke=me.z13,Ue=me.z21,qe=me.z23,Fe=me.z31,Ye=me.z33,Ve={inclo:ce,init:n.init,ep:n.ecco,inclp:n.inclo,nodep:n.nodeo,argpp:n.argpo,mp:n.mo,opsmode:n.operationmode},Ge=e.dpper(n,Ve);n.ecco=Ge.ep,n.inclo=Ge.inclp,n.nodeo=Ge.nodep,n.argpo=Ge.argpp,n.mo=Ge.mp;var Je={xke:_,cosim:fe,emsq:pe,argpo:n.argpo,s1:ge,s2:Me,s3:ve,s4:ye,s5:xe,sinim:he,ss1:be,ss2:we,ss3:Te,ss4:Ae,ss5:_e,sz1:Se,sz3:Ie,sz11:Ee,sz13:Ne,sz21:Re,sz23:De,sz31:Oe,sz33:ze,t:n.t,tc:0,gsto:n.gsto,mo:n.mo,mdot:n.mdot,no:n.no,nodeo:n.nodeo,nodedot:n.nodedot,xPIdot:se,z1:Pe,z3:Le,z11:je,z13:ke,z21:Ue,z23:qe,z31:Fe,z33:Ye,ecco:n.ecco,eccsq:j,em:de,argpm:0,inclm:ce,mm:0,nm:Ce,nodem:0,irez:n.irez,atime:n.atime,d2201:n.d2201,d2211:n.d2211,d3210:n.d3210,d3222:n.d3222,d4410:n.d4410,d4422:n.d4422,d5220:n.d5220,d5232:n.d5232,d5421:n.d5421,d5433:n.d5433,dedt:n.dedt,didt:n.didt,dmdt:n.dmdt,dnodt:n.dnodt,domdt:n.domdt,del1:n.del1,del2:n.del2,del3:n.del3,xfact:n.xfact,xlamo:n.xlamo,xli:n.xli,xni:n.xni},Be=e.dsinit(Je);n.irez=Be.irez,n.atime=Be.atime,n.d2201=Be.d2201,n.d2211=Be.d2211,n.d3210=Be.d3210,n.d3222=Be.d3222,n.d4410=Be.d4410,n.d4422=Be.d4422,n.d5220=Be.d5220,n.d5232=Be.d5232,n.d5421=Be.d5421,n.d5433=Be.d5433,n.dedt=Be.dedt,n.didt=Be.didt,n.dmdt=Be.dmdt,n.dnodt=Be.dnodt,n.domdt=Be.domdt,n.del1=Be.del1,n.del2=Be.del2,n.del3=Be.del3,n.xfact=Be.xfact,n.xlamo=Be.xlamo,n.xli=Be.xli,n.xni=Be.xni}if(1!==n.isimp){var He=n.cc1*n.cc1;n.d2=4*z*X*He;var Xe=n.d2*X*n.cc1/3;n.d3=(17*z+V)*Xe,n.d4=.5*Xe*z*X*(221*z+31*V)*n.cc1,n.t3cof=n.d2+2*He,n.t4cof=.25*(3*n.d3+n.cc1*(12*n.d2+10*He)),n.t5cof=.2*(3*n.d4+12*n.cc1*n.d3+6*n.d2*n.d2+15*He*(2*n.d2+He))}}e.propagate(n,0),n.init="n"},e.propagate=function(n,r){var t=n.xke,a=n.j2,s=n.j3oj2,l=n.radiusearthkm*n.xke/60;n.t=r,n.error=0;var m=n.mo+n.mdot*n.t,h=n.argpo+n.argpdot*n.t,f=n.nodeo+n.nodedot*n.t,d=h,p=m,g=n.t*n.t,M=f+n.nodecf*g,v=1-n.cc1*n.t,y=n.bstar*n.cc4*n.t,x=n.t2cof*g;if(1!==n.isimp){var b=n.omgcof*n.t,w=1+n.eta*Math.cos(m),T=b+n.xmcof*(w*w*w-n.delmo);p=m+T,d=h-T;var A=g*n.t,_=A*n.t;v=v-n.d2*g-n.d3*A-n.d4*_,y+=n.bstar*n.cc5*(Math.sin(p)-n.sinmao),x=x+n.t3cof*A+_*(n.t4cof+n.t*n.t5cof)}var S=n.no,I=n.ecco,E=n.inclo;if("d"===n.method){var N=n.t,R=e.dspace(n.irez,n.d2201,n.d2211,n.d3210,n.d3222,n.d4410,n.d4422,n.d5220,n.d5232,n.d5421,n.d5433,n.dedt,n.del1,n.del2,n.del3,n.didt,n.dmdt,n.dnodt,n.domdt,n.argpo,n.argpdot,n.t,N,n.gsto,n.xfact,n.xlamo,n.no,n.atime,I,d,E,n.xli,p,n.xni,M,S);I=R[0],d=R[1],E=R[2],p=R[3],M=R[4],S=R[5]}if(S<=0)return n.error=2,{position:!1,velocity:!1};var D=Math.pow(t/S,u)*v*v;if(S=t/Math.pow(D,1.5),(I-=y)>=1||I<-.001)return n.error=1,{position:!1,velocity:!1};I<1e-6&&(I=1e-6);var O=(p+=n.no*x)+d+M,z=I,C=E,P=d%=i,L=M%=i,j=p=((O%=i)-d-M)%i,k=Math.sin(E),U=Math.cos(E);if("d"===n.method){var q={inclo:n.inclo,init:"n",ep:z,inclp:C,nodep:L,argpp:P,mp:j,opsmode:n.operationmode},F=e.dpper(n,q);if(z=F.ep,L=F.nodep,P=F.argpp,j=F.mp,(C=F.inclp)<0&&(C=-C,L+=o,P-=o),z<0||z>1)return n.error=3,{position:!1,velocity:!1}}"d"===n.method&&(k=Math.sin(C),U=Math.cos(C),n.aycof=-.5*s*k,Math.abs(U+1)>15e-13?n.xlcof=-.25*s*k*(3+5*U)/(1+U):n.xlcof=-.25*s*k*(3+5*U)/c);for(var Y,V,G=z*Math.cos(P),J=1/(D*(1-z*z)),B=z*Math.sin(P)+J*n.aycof,H=(j+P+L+J*n.xlcof*G-L)%i,X=H,Q=9999.9,W=1;Math.abs(Q)>=1e-12&&W<=10;)V=Math.sin(X),Q=(H-B*(Y=Math.cos(X))+G*V-X)/(Q=1-Y*G-V*B),Math.abs(Q)>=.95&&(Q=Q>0?.95:-.95),X+=Q,W+=1;var K=G*Y+B*V,Z=G*V-B*Y,$=G*G+B*B,ee=D*(1-$);if(ee<0)return n.error=4,{position:!1,velocity:!1};var ne=D*(1-K),re=Math.sqrt(D)*Z/ne,te=Math.sqrt(ee)/ne,ae=Math.sqrt(1-$),oe=D/ne*(V-B-G*(J=Z/(1+ae))),ie=D/ne*(Y-G+B*J),se=Math.atan2(oe,ie),ue=(ie+ie)*oe,ce=1-2*oe*oe,le=.5*a*(J=1/ee),me=le*J;if("d"===n.method){var he=U*U;n.con41=3*he-1,n.x1mth2=1-he,n.x7thm1=7*he-1}var fe=ne*(1-1.5*me*ae*n.con41)+.5*le*n.x1mth2*ce;if(fe<1)return n.error=6,{position:!1,velocity:!1};se-=.25*me*n.x7thm1*ue;var de=L+1.5*me*U*ue,pe=C+1.5*me*U*k*ce,ge=re-S*le*n.x1mth2*ue/t,Me=te+S*le*(n.x1mth2*ce+1.5*n.con41)/t,ve=Math.sin(se),ye=Math.cos(se),xe=Math.sin(de),be=Math.cos(de),we=Math.sin(pe),Te=Math.cos(pe),Ae=-xe*Te,_e=be*Te,Se=Ae*ve+be*ye,Ie=_e*ve+xe*ye,Ee=we*ve,Ne=Ae*ye-be*ve,Re=_e*ye-xe*ve,De=we*ye;return{position:{x:fe*Se*n.radiusearthkm,y:fe*Ie*n.radiusearthkm,z:fe*Ee*n.radiusearthkm},velocity:{x:(ge*Se+Me*Ne)*l,y:(ge*Ie+Me*Re)*l,z:(ge*Ee+Me*De)*l}}},e.getgravconst=function(e){var n,r,t,a,o,i,s,u;switch(e){case"wgs72old":o=398600.79964,i=6378.135,s=1/(u=.0743669161),a=-165597e-11,t=(r=-253881e-11)/(n=.001082616);break;case"wgs72":o=398600.8,i=6378.135,s=1/(u=60/Math.sqrt(i*i*i/o)),a=-165597e-11,t=(r=-253881e-11)/(n=.001082616);break;case"wgs84":o=398600.5,i=6378.137,s=1/(u=60/Math.sqrt(i*i*i/o)),a=-161098761e-14,t=(r=-253215306e-14)/(n=.00108262998905);break;default:throw new Error("unknown gravity option ".concat(e))}return{tumin:s,mus:o,radiusearthkm:i,xke:u,j2:n,j3:r,j4:a,j3oj2:t}},e.createSatrec=function(n,r,t,a){void 0===t&&(t="wgs72"),void 0===a&&(a="i");var i,u={a:null,am:null,alta:null,altp:null,argpdot:null,argpo:null,aycof:null,bstar:null,cc1:null,cc4:null,cc5:null,con41:null,d2:null,d3:null,d4:null,d5232:null,d5421:null,d5433:null,dedt:null,delmo:null,del1:null,ecco:null,em:null,epochdays:null,epochyr:null,error:null,eta:null,gsto:null,im:null,inclo:null,init:null,isimp:null,jdsatepoch:null,mdot:null,method:null,mo:null,mm:null,nddot:null,ndot:null,no:null,nodecf:null,nodedot:null,nodeo:null,om:null,Om:null,omgcof:null,operationmode:null,satnum:null,sinmao:null,t:null,t2cof:null,t3cof:null,t4cof:null,t5cof:null,x1mth2:null,x7thm1:null,xlcof:null,xmcof:null,xfact:null,xlamo:null,xli:null,xgh4:null,xgh3:null,xh2:null,xi2:null,xi3:null,xl2:null,xl3:null,xl4:null,zmol:null,zmos:null,dmdt:null,dnodt:null,domdt:null,e3:null,ee2:null,peo:null,pgho:null,pho:null,PInco:null,plo:null,se2:null,se3:null,sgh2:null,sgh3:null,sgh4:null,sh2:null,sh3:null,si2:null,si3:null,sl2:null,sl3:null,sl4:null,xgh2:null,xh3:null,tumin:null,radiusearthkm:null,irez:null,d3210:null,d3222:null,d4410:null,d4422:null,d5220:null,del2:null,del3:null,didt:null,atime:null,j2:null,j3:null,j4:null,mus:null,xke:null,j3oj2:null,xni:null,d2201:null,d2211:null,nm:null},c=1440/(2*o);u.error=0,u.satnum=n.substring(2,7),u.epochyr=parseInt(n.substring(18,20)),u.epochdays=parseFloat(n.substring(20,32)),u.ndot=parseFloat(n.substring(33,43)),u.nddot=parseFloat("".concat(n.substring(44,45),".").concat(n.substring(45,50),"E").concat(n.substring(50,52))),u.bstar=parseFloat("".concat(n.substring(53,54),".").concat(n.substring(54,59),"E").concat(n.substring(59,61))),u.inclo=parseFloat(r.substring(8,16)),u.nodeo=parseFloat(r.substring(17,25)),u.ecco=parseFloat(".".concat(r.substring(26,33))),u.argpo=parseFloat(r.substring(34,42)),u.mo=parseFloat(r.substring(43,51)),u.no=parseFloat(r.substring(52,63)),u.no/=c,u.inclo*=s,u.nodeo*=s,u.argpo*=s,u.mo*=s,i=u.epochyr<57?u.epochyr+2e3:u.epochyr+1900;var l=e.days2mdhms(i,u.epochdays),m=l.mon,h=l.day,f=l.hr,d=l.min,p=l.sec,g=e.jday(i,m,h,f,d,p);return u.jdsatepoch=g.jd+g.jdFrac,e.sgp4init(u,{whichconst:t,opsmode:a,satn:u.satnum,epoch:u.jdsatepoch-2433281.5,xbstar:u.bstar,xecco:u.ecco,xargpo:u.argpo,xinclo:u.inclo,xndot:u.ndot,xnddot:u.nddot,xmo:u.mo,xno:u.no,xnodeo:u.nodeo}),u},e.gstime=function(e){var n=(e-2451545)/36525,r=-62e-7*n*n*n+.093104*n*n+3164400184.812866*n+67310.54841;return(r=r*s/240%i)<0&&(r+=i),r},e.sgn=function(e){return e<0?-1:1},e.mag=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},e.cross=function(e,n){var r=[0,0,0];return r[0]=e[1]*n[2]-e[2]*n[1],r[1]=e[2]*n[0]-e[0]*n[2],r[2]=e[0]*n[1]-e[1]*n[0],r},e.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},e.angle=function(n,r){var t=e.mag(n),a=e.mag(r);if(t*a>1e-8*1e-8){var o=e.dot(n,r)/(t*a);return Math.abs(o)>1&&(o=Number(e.sgn(o))),Math.acos(o)}return 999999.1},e.asinh=function(e){return Math.log(e+Math.sqrt(e*e+1))},e.newtonnu=function(n,r){var t=999999.9,a=999999.9,i=1e-8;if(Math.abs(n)<i)a=r,t=r;else if(n<1-i){var s=Math.sqrt(1-n*n)*Math.sin(r)/(1+n*Math.cos(r)),u=(n+Math.cos(r))/(1+n*Math.cos(r));a=(t=Math.atan2(s,u))-n*Math.sin(t)}else n>1+i?n>1&&Math.abs(r)+1e-5<o-Math.acos(1/n)&&(s=Math.sqrt(n*n-1)*Math.sin(r)/(1+n*Math.cos(r)),t=e.asinh(s),a=n*e.sinh(t)-t):Math.abs(r)<168*o/180&&(a=(t=Math.tan(.5*r))+t*t*t/3);return n<1&&((a%=2*o)<0&&(a+=2*o),t%=2*o),{e0:t,m:a}},e.sinh=function(e){return(Math.exp(e)-Math.exp(-e))/2},e.rv2coe=function(n,r,t){var a,s,u,c,l,m,h,f,d,p,g,M,v,y,x,b,w,T=[0,0,0],A=[0,0,0],_=.5*o,S=1e-8,I=999999.1,E=e.mag(n),N=e.mag(r),R=e.cross(n,r),D=e.mag(R);if(D>S){T[0]=-R[1],T[1]=R[0],T[2]=0,v=e.mag(T);var O=N*N-t/E;for(M=e.dot(n,r),b=0;b<=2;b++)A[b]=(O*n[b]-M*r[b])/t;if(u=e.mag(A),x=N*N*.5-t/E,s=Math.abs(x)>S?-t/(2*x):999999.9,a=D*D/t,y=R[2]/D,c=Math.acos(y),w=1,u<S?w=c<S||Math.abs(c-o)<S?2:3:(c<S||Math.abs(c-o)<S)&&(w=4),v>S){var z=T[0]/v;Math.abs(z)>1&&(z=e.sgn(z)),l=Math.acos(z),T[1]<0&&(l=i-l)}else l=I;1===w?(m=e.angle(T,A),A[2]<0&&(m=i-m)):m=I,1===w||4===w?(h=e.angle(A,n),M<0&&(h=i-h)):h=I,3===w?(d=e.angle(T,n),n[2]<0&&(d=i-d),f=d):d=I,u>S&&4===w?(z=A[0]/u,Math.abs(z)>1&&(z=e.sgn(z)),g=Math.acos(z),A[1]<0&&(g=i-g),c>_&&(g=i-g)):g=I,E>S&&2===w?(z=n[0]/E,Math.abs(z)>1&&(z=e.sgn(z)),p=Math.acos(z),n[1]<0&&(p=i-p),c>_&&(p=i-p),f=p):p=I,1!==w&&4!==w||(f=e.newtonnu(u,h).m)}else a=I,s=I,u=I,c=I,l=I,m=I,h=I,f=I,d=I,p=I,g=I;return{p:a,a:s,ecc:u,incl:c,omega:l,argp:m,nu:h,m:f,arglat:d,truelon:p,lonper:g}},e.jday=function(e,n,r,t,a,o,i){void 0===n&&(n=0),void 0===r&&(r=0),void 0===t&&(t=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===i&&(i=0),e instanceof Date&&(n=e.getUTCMonth()+1,r=e.getUTCDate(),t=e.getUTCHours(),a=e.getUTCMinutes(),o=e.getUTCSeconds(),i=e.getUTCMilliseconds(),e=e.getUTCFullYear());var s=367*e-Math.floor(7*(e+Math.floor((n+9)/12))*.25)+Math.floor(275*n/9)+r+1721013.5,u=(i/1e3+o+60*a+3600*t)/86400;if(Math.abs(u)>1){var c=Math.floor(u);s+=c,u-=c}return{jd:s,jdFrac:u}},e.days2mdhms=function(e,n){for(var r=[31,e%4==0?29:28,31,30,31,30,31,31,30,31,30,31],t=Math.floor(n),a=1,o=0;t>o+r[a-1]&&a<12;)o+=r[a-1],a+=1;var i=a,s=t-o,u=24*(n-t),c=Math.floor(u);u=60*(u-c);var l=Math.floor(u);return{mon:i,day:s,hr:c,min:l,sec:60*(u-l)}},e.invjday=function(n,r){var t,a;Math.abs(r)>=1&&(n+=Math.floor(r),r-=Math.floor(r));var o=n-Math.floor(n)-.5;Math.abs(o)>1e-8&&(n-=o,r+=o);var i=n-2415019.5,s=i/365.25,u=1900+Math.floor(s);t=Math.floor(.25*(u-1901)),(a=Math.floor(i-(365*(u-1900)+t)))+r<1&&(u-=1,t=Math.floor(.25*(u-1901)),a=Math.floor(i-(365*(u-1900)+t)));var c=e.days2mdhms(u,a+r);return{year:u,mon:c.mon,day:c.day,hr:c.hr,min:c.min,sec:c.sec}},e}(),d=function(){function e(){}return e.getDegLat=function(n){if(n<-o/2||n>o/2)throw new RangeError("Latitude radians must be in range [-PI/2; PI/2].");return e.rad2deg(n)},e.getDegLon=function(n){if(n<-o||n>o)throw new RangeError("Longitude radians must be in range [-PI; PI].");return e.rad2deg(n)},e.getRadLat=function(n){if(n<-90||n>90)throw new RangeError("Latitude degrees must be in range [-90; 90].");return e.deg2rad(n)},e.getRadLon=function(n){if(n<-180||n>180)throw new RangeError("Longitude degrees must be in range [-180; 180].");return e.deg2rad(n)},e.rad2deg=function(e){return 180*e/o},e.deg2rad=function(e){return e*o/180},e.ecf2eci=function(e,n){return{x:e.x*Math.cos(n)-e.y*Math.sin(n),y:e.x*Math.sin(n)+e.y*Math.cos(n),z:e.z}},e.ecf2rae=function(n,r){var t=e.lla2sez(n,r);return e.sez2rae(t)},e.eci2lla=function(e,n){for(var r=6378.137,t=Math.sqrt(e.x*e.x+e.y*e.y),a=(r-6356.7523142)/r,s=2*a-a*a,u=Math.atan2(e.y,e.x)-n;u<-o;)u+=i;for(;u>o;)u-=i;for(var c,l=0,m=Math.atan2(e.z,Math.sqrt(e.x*e.x+e.y*e.y));l<20;)c=1/Math.sqrt(1-s*(Math.sin(m)*Math.sin(m))),m=Math.atan2(e.z+r*c*s*Math.sin(m),t),l+=1;return{lon:u,lat:m,alt:t/Math.cos(m)-r*c}},e.eci2ecf=function(e,n){return{x:e.x*Math.cos(n)+e.y*Math.sin(n),y:e.x*-Math.sin(n)+e.y*Math.cos(n),z:e.z}},e.lla2ecf=function(e){var n=e.lon,r=e.lat,t=e.alt,a=6378.137,o=(a-6356.7523142)/a,i=2*o-o*o,s=a/Math.sqrt(1-i*(Math.sin(r)*Math.sin(r)));return{x:(s+t)*Math.cos(r)*Math.cos(n),y:(s+t)*Math.cos(r)*Math.sin(n),z:(s*(1-i)+t)*Math.sin(r)}},e.lla2sez=function(n,r){var t=n.lon,a=n.lat,o=e.lla2ecf(n),i=r.x-o.x,s=r.y-o.y,u=r.z-o.z;return{s:Math.sin(a)*Math.cos(t)*i+Math.sin(a)*Math.sin(t)*s-Math.cos(a)*u,e:-Math.sin(t)*i+Math.cos(t)*s,z:Math.cos(a)*Math.cos(t)*i+Math.cos(a)*Math.sin(t)*s+Math.sin(a)*u}},e.rae2sez=function(e){return{s:-e.rng*Math.cos(e.el)*Math.cos(e.az),e:e.rng*Math.cos(e.el)*Math.sin(e.az),z:e.rng*Math.sin(e.el)}},e.rae2ecf=function(n,r){var t=e.lla2ecf(r),a=e.rae2sez(n),o=Math.sin(r.lat),i=Math.sin(r.lon),s=Math.cos(r.lat),u=Math.cos(r.lon);return{x:o*u*a.s+-i*a.e+s*u*a.z+t.x,y:o*i*a.s+u*a.e+s*i*a.z+t.y,z:-s*a.s+o*a.z+t.z}},e.sez2rae=function(e){var n=Math.sqrt(e.s*e.s+e.e*e.e+e.z*e.z),r=Math.asin(e.z/n);return{rng:n,az:Math.atan2(-e.e,e.s)+o,el:r}},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PAYLOAD=1]="PAYLOAD",e[e.ROCKET_BODY=2]="ROCKET_BODY",e[e.DEBRIS=3]="DEBRIS",e[e.SPECIAL=4]="SPECIAL",e[e.RADAR_MEASUREMENT=5]="RADAR_MEASUREMENT",e[e.RADAR_TRACK=6]="RADAR_TRACK",e[e.RADAR_OBJECT=7]="RADAR_OBJECT",e[e.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",e[e.STAR=9]="STAR",e[e.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",e[e.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",e[e.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",e[e.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",e[e.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",e[e.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",e[e.LAUNCH_SITE=16]="LAUNCH_SITE",e[e.LAUNCH_POSITION=17]="LAUNCH_POSITION",e[e.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",e[e.CONTROL_FACILITY=19]="CONTROL_FACILITY",e[e.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",e[e.OPTICAL=21]="OPTICAL",e[e.MECHANICAL=22]="MECHANICAL",e[e.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",e[e.OBSERVER=24]="OBSERVER",e[e.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",e[e.COUNTRY=26]="COUNTRY",e[e.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",e[e.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER"}(a||(a={}));var p,g,M=2*Math.PI,v=function(){function e(){}return e.julianCycle=function(n,r){var t=r/M;return Math.round(n-e.J0-t)},e.observerAngle=function(e){return-2.076*Math.sqrt(e)/60},e.solarMeanAnomaly=function(e){return s*(357.5291+.98560028*e)},e.julian2date=function(n){return new Date((n-e.J1970)*m)},e.date2jSince2000=function(n){return n.getTime()/m+e.J1970-e.J2000},e.rightAscension=function(n,r){return Math.atan2(Math.sin(n)*Math.cos(e.e)-Math.tan(r)*Math.sin(e.e),Math.cos(n))},e.declination=function(n,r){return Math.asin(Math.sin(r)*Math.cos(e.e)+Math.cos(r)*Math.sin(e.e)*Math.sin(n))},e.azimuth=function(e,n,r){return Math.PI+Math.atan2(Math.sin(e),Math.cos(e)*Math.sin(n)-Math.tan(r)*Math.cos(n))},e.elevation=function(e,n,r){return Math.asin(Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos(e))},e.siderealTime=function(e,n){return s*(280.16+360.9856235*e)-n},e.astroRefraction=function(e){return e<0&&(e=0),2967e-7/Math.tan(e+.00312536/(e+.08901179))},e.eclipticLongitude=function(e){return e+s*(1.9148*Math.sin(e)+.02*Math.sin(2*e)+3e-4*Math.sin(3*e))+102.9372*s+Math.PI},e.eclipticLatitude=function(e){var n=M/360,r=e-.00569-.00478*Math.sin(n*e);return M*(r+3e-4*Math.sin(2*n*r))},e.julianCyle=function(n,r){return Math.round(n-e.J0-r/(2*M/2))},e.approxTransit=function(n,r,t){return e.J0+(n+r)/M+t},e.solarTransitJulian=function(n,r,t){return e.J2000+n+.0053*Math.sin(r)-.0069*Math.sin(2*t)},e.hourAngle=function(e,n,r){return Math.acos((Math.sin(e)-Math.sin(n)*Math.sin(r))/(Math.cos(n)*Math.cos(r)))},e.getSetJulian=function(n,r,t,a,o,i,s){var u=e.hourAngle(n,t,a),c=e.approxTransit(u,r,o);return e.solarTransitJulian(c,i,s)},e.getSetJ=function(n,r,t,a,o,i,s){var u=e.hourAngle(n,t,a),c=e.approxTransit(u,r,o);return e.solarTransitJulian(c,i,s)},e.getTimes=function(n,r,t,a,o){if(void 0===a&&(a=0),void 0===o&&(o=!1),isNaN(r))throw new Error("latitude missing");if(isNaN(t))throw new Error("longitude missing");var i=new Date(n);o?i.setUTCHours(12,0,0,0):i.setHours(12,0,0,0);var u,c=0,l=[],m=0,h=0,f=0,d=e.calculateJnoon(t,r,a,i),p=d.Jnoon,g=d.dh,M=d.lw,v=d.phi,y=d.dec,x=d.n,b=d.M,w=d.L,T={solarNoon:e.julian2date(p),nadir:e.julian2date(p+.5)};for(c=0,u=e.times.length;c<u;c+=1)m=((l=e.times[c])[0]+g)*s,f=p-((h=e.getSetJ(m,M,v,y,x,b,w))-p),T[l[1]]=e.julian2date(f),T[l[2]]=e.julian2date(h);return T},e.calculateJnoon=function(n,r,t,a){var o=s*-n,i=s*r,u=e.observerAngle(t),c=e.date2jSince2000(a),l=e.julianCycle(c,o),m=e.approxTransit(0,o,l),h=e.solarMeanAnomaly(m),f=e.eclipticLongitude(h),d=e.declination(f,0);return{Jnoon:e.solarTransitJulian(m,h,f),dh:u,lw:o,phi:i,dec:d,n:l,M:h,L:f}},e.getSunTimeByAzimuth=function(n,r,t,a,o){if(void 0===o&&(o=!1),isNaN(a))throw new Error("azimuth missing");if(isNaN(r))throw new Error("latitude missing");if(isNaN(t))throw new Error("longitude missing");o&&(a*=s);var i=new Date(n),u=s*-t,c=s*r,l=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0).getTime(),h=m;for(l+=h;h>200;){var f=e.date2jSince2000(new Date(l)),d=e.getSunRaDec(f),p=e.siderealTime(f,u)-d.ra;h/=2,e.getAzimuth(p,c,d.dec)<a?l+=h:l-=h}return new Date(Math.floor(l))},e.getAzimuth=function(e,n,r){return Math.atan2(Math.sin(e),Math.cos(e)*Math.sin(n)-Math.tan(r)*Math.cos(n))+Math.PI},e.getSolarTime=function(e,n,r){var t=new Date;t.setUTCFullYear(e.getUTCFullYear(),0,1),t.setUTCHours(0,0,0,0);var a=e.getTime()-t.getTime(),o=360/365*(Math.floor(a/m)-81)*s,i=9.87*Math.sin(2*o)-7.53*Math.cos(o)-1.5*Math.sin(o)+4*(r-15*n);return new Date(e.getTime()+60*i*1e3)},e.getStarAzEl=function(n,r,t,a,o){var i=-t*s,u=r*s,c=e.date2jSince2000(n),l=e.siderealTime(c,i)-a,m=e.elevation(l,u,o);return{az:e.azimuth(l,u,o),el:m+=e.astroRefraction(m)}},e.getSunAzEl=function(n,r,t){var a=-t*s,o=r*s,i=e.date2jSince2000(n),u=e.getSunRaDec(i),c=e.siderealTime(i,a)-u.ra;return{az:e.azimuth(c,o,u.dec),el:e.elevation(c,o,u.dec)}},e.getSunRaDec=function(n){var r=e.solarMeanAnomaly(n),t=e.eclipticLongitude(r);return{dec:e.declination(t,0),ra:e.rightAscension(t,0)}},e.J1970=2440587.5,e.J2000=2451545,e.J0=9e-4,e.e=23.4397*s,e.times=[[6,"goldenHourDawnEnd","goldenHourDuskStart"],[-.3,"sunriseEnd","sunsetStart"],[-.833,"sunriseStart","sunsetEnd"],[-1,"goldenHourDawnStart","goldenHourDuskEnd"],[-4,"blueHourDawnEnd","blueHourDuskStart"],[-6,"civilDawn","civilDusk"],[-8,"blueHourDawnStart","blueHourDuskEnd"],[-12,"nauticalDawn","nauticalDusk"],[-15,"amateurDawn","amateurDusk"],[-18,"astronomicalDawn","astronomicalDusk"]],e}(),y=function(){function e(){}return e.moonCoords=function(e){var n=s*(134.963+13.064993*e),r=s*(93.272+13.22935*e),t=s*(218.316+13.176396*e)+6.289*s*Math.sin(n),a=5.128*s*Math.sin(r),o=385001-20905*Math.cos(n);return{ra:v.rightAscension(t,a),dec:v.declination(t,a),dist:o}},e.hoursLater=function(e,n){return new Date(e.getTime()+n*m/24)},e.getMoonPosition=function(n,r,t){var a=s*-t,o=s*r,i=v.date2jSince2000(n),u=e.moonCoords(i),c=v.siderealTime(i,a)-u.ra,l=v.elevation(c,o,u.dec),m=Math.atan2(Math.sin(c),Math.tan(o)*Math.cos(u.dec)-Math.sin(u.dec)*Math.cos(c));return l+=v.astroRefraction(l),{az:v.azimuth(c,o,u.dec),el:l,rng:u.dist,parallacticAngle:m}},e.getMoonIllumination=function(n){var r=n instanceof Date?n.getTime():n,t=2551442778,a=v.date2jSince2000(new Date(r)),o=v.getSunRaDec(a),i=e.moonCoords(a),s=149598e3,u=Math.acos(Math.sin(o.dec)*Math.sin(i.dec)+Math.cos(o.dec)*Math.cos(i.dec)*Math.cos(o.ra-i.ra)),c=Math.atan2(s*Math.sin(u),i.dist-s*Math.cos(u)),l=Math.atan2(Math.cos(o.dec)*Math.sin(o.ra-i.ra),Math.sin(o.dec)*Math.cos(i.dec)-Math.cos(o.dec)*Math.sin(i.dec)*Math.cos(o.ra-i.ra)),m=.5+.5*c*(l<0?-1:1)/Math.PI,h=(r-94717884e4)%t;h<0&&(h+=t);var f=t-h+r,d=1275721389-h+r;d<r&&(d+=t);var p=637860694.5-h+r;p<r&&(p+=t);var g,M=1913582083.5-h+r;M<r&&(M+=t);for(var y,x=Math.min(f,p,d,M),b=0;b<e.moonCycles.length;b++){var w=e.moonCycles[b];if(m>=w.from&&m<=w.to){y=w;break}}return g=x===f?"newMoon":x===p?"firstQuarter":x===d?"fullMoon":"thirdQuarter",{fraction:(1+Math.cos(c))/2,phase:y,phaseValue:m,angle:l,next:{value:x,date:new Date(x).toISOString(),type:g,newMoon:{value:f,date:new Date(f).toISOString()},fullMoon:{value:d,date:new Date(d).toISOString()},firstQuarter:{value:p,date:new Date(p).toISOString()},thirdQuarter:{value:M,date:new Date(M).toISOString()}}}},e.getMoonTimes=function(n,r,t,a){void 0===a&&(a=!1);var o=new Date(n);a?o.setUTCHours(0,0,0,0):o.setHours(0,0,0,0);var i=e.calculateRiseSetTimes(o,r,t),s=i.rise,u=i.set,c=i.ye,l={rise:null,set:null,ye:null,alwaysUp:null,alwaysDown:null,highest:null};return l.rise=s?new Date(e.hoursLater(n,s)):NaN,l.set=u?new Date(e.hoursLater(n,u)):NaN,s||u?s&&u?(l.alwaysUp=!1,l.alwaysDown=!1,l.highest=new Date(e.hoursLater(n,Math.min(s,u)+Math.abs(u-s)/2))):(l.alwaysUp=!1,l.alwaysDown=!1):c>0?(l.alwaysUp=!0,l.alwaysDown=!1):(l.alwaysUp=!1,l.alwaysDown=!0),l},e.calculateRiseSetTimes=function(n,r,t){for(var a=.133*s,o=e.getMoonPosition(n,r,t).el-a,i=0,u=0,c=0,l=0,m=0,h=0,f=0,d=0,p=0,g=0,M=0,v=0,y=0,x=1;x<=24&&(i=e.getMoonPosition(e.hoursLater(n,x),r,t).el-a,d=((m=(o+(u=e.getMoonPosition(e.hoursLater(n,x+1),r,t).el-a))/2-i)*(f=-(h=(u-o)/2)/(2*m))+h)*f+i,g=0,(p=h*h-4*m*i)>=0&&(M=f-(y=Math.sqrt(p)/(2*Math.abs(m))),v=f+y,Math.abs(M)<=1&&g++,Math.abs(v)<=1&&g++,M<-1&&(M=v)),1===g?o<0?c=x+M:l=x+M:2===g&&(c=x+(d<0?v:M),l=x+(d<0?M:v)),!c||!l);x+=2)o=u;return{rise:c,set:l,ye:d}},e.moonCycles=[{from:0,to:.033863193308711,id:"newMoon",emoji:"🌚",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"},{from:.033863193308711,to:.216136806691289,id:"waxingCrescentMoon",emoji:"🌒",code:":waxing_crescent_moon:",name:"Waxing Crescent",weight:6.3825,css:"wi-moon-wax-cres"},{from:.216136806691289,to:.283863193308711,id:"firstQuarterMoon",emoji:"🌓",code:":first_quarter_moon:",name:"First Quarter",weight:1,css:"wi-moon-first-quart"},{from:.283863193308711,to:.466136806691289,id:"waxingGibbousMoon",emoji:"🌔",code:":waxing_gibbous_moon:",name:"Waxing Gibbous",weight:6.3825,css:"wi-moon-wax-gibb"},{from:.466136806691289,to:.533863193308711,id:"fullMoon",emoji:"🌝",code:":full_moon_with_face:",name:"Full Moon",weight:1,css:"wi-moon-full"},{from:.533863193308711,to:.716136806691289,id:"waningGibbousMoon",emoji:"🌖",code:":waning_gibbous_moon:",name:"Waning Gibbous",weight:6.3825,css:"wi-moon-wan-gibb"},{from:.716136806691289,to:.783863193308711,id:"thirdQuarterMoon",emoji:"🌗",code:":last_quarter_moon:",name:"third Quarter",weight:1,css:"wi-moon-third-quart"},{from:.783863193308711,to:.966136806691289,id:"waningCrescentMoon",emoji:"🌘",code:":waning_crescent_moon:",name:"Waning Crescent",weight:6.3825,css:"wi-moon-wan-cres"},{from:.966136806691289,to:1,id:"newMoon",emoji:"🌚",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"}],e}(),x=function(){function e(){}return e.distance=function(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)+Math.pow(e.z-n.z,2))},e.dopplerFactor=function(n,r,t){var a=7292115e-11,o={x:r.x-n.x,y:r.y-n.y,z:r.z-n.z},i=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)+Math.pow(o.z,2)),s=t.x+a*n.y,u=t.y-a*n.x,c=t.z,l=(o.x*s+o.y*u+o.z*c)/i;return 1+l/299792.458*e.sign(l)},e.createVec=function(e,n,r){for(var t=[],a=e;a<=n;a+=r)t.push(a);return t},e.getDayOfYear=function(n){var r=(n=n||new Date).getMonth(),t=n.getUTCDate(),a=[0,31,59,90,120,151,181,212,243,273,304,334][r]+t;return r>1&&e.isLeapYear(n)&&a++,a},e.isLeapYear=function(e){var n=e.getUTCFullYear();return 0==(3&n)&&(n%100!=0||n%400==0)},e.roundToNDecimalPlaces=function(e,n){return Math.round(e*Math.pow(10,n))/Math.pow(10,n)},e.Types=t,e.sign=function(e){return e>=0?1:-1},e.jday=function(e,n,r,t,a,o){if(!e){var i=new Date,s=new Date(i.getUTCFullYear(),0,0),u=i.getDate()-s.getDate();return Math.floor(u/h)}return 367*e-Math.floor(7*(e+Math.floor((n+9)/12))*.25)+Math.floor(275*n/9)+r+1721013.5+((o/60+a)/60+t)/24},e.SunMath=v,e.MoonMath=y,e}(),b=function(e,n){this.start=e-1,this.stop=n,this.length=this.stop-this.start},w=function(){return w=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},w.apply(this,arguments)},T=function(){function e(){}return e.parseTle=function(n,r){var t=e.parseLine1(n),a=e.parseLine2(r);if(t.satNum!==a.satNum)throw new Error("Satellite numbers do not match");if(t.satNumRaw!==a.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==t.lineNumber1)throw new Error("First line number must be 1");if(2!==a.lineNumber2)throw new Error("Second line number must be 2");return{satNum:t.satNum,intlDes:t.intlDes,epochYear:t.epochYear,epochDay:t.epochDay,meanMoDev1:t.meanMoDev1,meanMoDev2:t.meanMoDev2,bstar:t.bstar,inclination:a.inclination,raan:a.raan,eccentricity:a.eccentricity,argOfPerigee:a.argOfPerigee,meanAnomaly:a.meanAnomaly,meanMotion:a.meanMotion}},e.parseTleFull=function(n,r){var t=e.parseLine1(n),a=e.parseLine2(r);if(t.satNum!==a.satNum)throw new Error("Satellite numbers do not match");if(t.satNumRaw!==a.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==t.lineNumber1)throw new Error("First line number must be 1");if(2!==a.lineNumber2)throw new Error("Second line number must be 2");return w(w({},t),a)},e.parseLine1=function(n){return{lineNumber1:e.getLineNumber(n),satNum:e.getSatNum(n),satNumRaw:e.getRawSatNum(n),classification:e.getClassification(n),intlDes:e.getIntlDes(n),intlDesYear:e.getIntlDesYear(n),intlDesLaunchNum:e.getIntlDesLaunchNum(n),intlDesLaunchPiece:e.getIntlDesLaunchPiece(n),epochYear:e.getEpochYear(n),epochYearFull:e.getEpochYearFull(n),epochDay:e.getEpochDay(n),meanMoDev1:e.getMeanMoDev1(n),meanMoDev2:e.getMeanMoDev2(n),bstar:e.getBstar(n),ephemerisType:e.getEphemerisType(n),elsetNum:e.getElsetNum(n),checksum1:e.getChecksum(n)}},e.parseLine2=function(n){return{lineNumber2:e.getLineNumber(n),satNum:e.getSatNum(n),satNumRaw:e.getRawSatNum(n),inclination:e.getInclination(n),raan:e.getRaan(n),eccentricity:e.getEccentricity(n),argOfPerigee:e.getArgOfPerigee(n),meanAnomaly:e.getMeanAnomaly(n),meanMotion:e.getMeanMotion(n),revNum:e.getRevNum(n),checksum2:e.getChecksum(n)}},e.getLineNumber=function(n){var r=parseInt(n.substring(e.lineNumber.start,e.lineNumber.stop));if(1!==r&&2!==r)throw new Error("Invalid line number");return r},e.getSatNum=function(n){var r=n.substring(e.satNum.start,e.satNum.stop),t=r.split("")[0].toLowerCase();return isNaN(parseInt(t))?parseInt(t.charCodeAt(0)-96+9+r.slice(1,5)):parseInt(r)},e.getRawSatNum=function(n){return n.substring(e.satNum.start,e.satNum.stop)},e.getClassification=function(n){return n.substring(e.classification.start,e.classification.stop)},e.getIntlDes=function(n){return n.substring(e.intlDes.start,e.intlDes.stop).trim()},e.getIntlDesYear=function(n){return parseInt(n.substring(e.intlDesYear.start,e.intlDesYear.stop))},e.getIntlDesLaunchNum=function(n){return parseInt(n.substring(e.intlDesLaunchNum.start,e.intlDesLaunchNum.stop))},e.getIntlDesLaunchPiece=function(n){return n.substring(e.intlDesLaunchPiece.start,e.intlDesLaunchPiece.stop).trim()},e.getEpochYear=function(n){var r=parseInt(n.substring(e.epochYear.start,e.epochYear.stop));if(r<0||r>99)throw new Error("Invalid epoch year");return r},e.getEpochYearFull=function(n){var r=parseInt(n.substring(e.epochYear.start,e.epochYear.stop));if(r<0||r>99)throw new Error("Invalid epoch year");return r<57?r+2e3:r+1900},e.getEpochDay=function(n){var r=parseFloat(n.substring(e.epochDay.start,e.epochDay.stop));if(r<1||r>365.99999999)throw new Error("Invalid epoch day");return x.roundToNDecimalPlaces(r,8)},e.getMeanMoDev1=function(n){var r=parseFloat(n.substring(e.meanMoDev1.start,e.meanMoDev1.stop));if(isNaN(r))throw new Error("Invalid first derivative of mean motion.");return x.roundToNDecimalPlaces(r,8)},e.getMeanMoDev2=function(n){var r=parseFloat(n.substring(e.meanMoDev2.start,e.meanMoDev2.stop));if(isNaN(r))throw new Error("Invalid second derivative of mean motion.");return r},e.getBstar=function(n){var r=e.bstar.start+1,t=e.bstar.start+6,a=e.bstar.stop-1,o=n.substring(e.bstar.start,r),i=parseFloat("0.".concat(n.substring(r,t))),s=n.substring(t,a),u=parseInt(n.substring(a,e.bstar.stop));if("-"===s)u*=-1;else if("+"!==s)throw new Error("Invalid BSTAR symbol: ".concat(o));if(i*=Math.pow(10,u),"-"===o)i*=-1;else if("+"!==o&&" "!==o)throw new Error("Invalid BSTAR symbol: ".concat(o));return x.roundToNDecimalPlaces(i,14)},e.getEphemerisType=function(n){return parseInt(n.substring(e.ephemerisType.start,e.ephemerisType.stop))},e.getElsetNum=function(n){return parseInt(n.substring(e.elsetNum.start,e.elsetNum.stop))},e.getChecksum=function(n){return parseInt(n.substring(e.checksum.start,e.checksum.stop))},e.getInclination=function(n){var r=parseFloat(n.substring(e.inclination.start,e.inclination.stop));if(r<0||r>180)throw new Error("Invalid inclination: ".concat(r));return x.roundToNDecimalPlaces(r,4)},e.getRaan=function(n){var r=parseFloat(n.substring(e.raan.start,e.raan.stop));if(!(r>=0&&r<=360))throw new Error("Invalid RAAN: ".concat(r));return x.roundToNDecimalPlaces(r,4)},e.getEccentricity=function(n){var r=parseFloat("0.".concat(n.substring(e.eccentricity.start,e.eccentricity.stop)));if(!(r>=0&&r<=1))throw new Error("Invalid eccentricity: ".concat(r));return x.roundToNDecimalPlaces(r,7)},e.getArgOfPerigee=function(n){var r=parseFloat(n.substring(e.argPerigee.start,e.argPerigee.stop));if(!(r>=0&&r<=360))throw new Error("Invalid argument of perigee: ".concat(r));return x.roundToNDecimalPlaces(r,4)},e.getMeanAnomaly=function(n){var r=parseFloat(n.substring(e.meanAnom.start,e.meanAnom.stop));if(!(r>=0&&r<=360))throw new Error("Invalid mean anomaly: ".concat(r));return x.roundToNDecimalPlaces(r,4)},e.getMeanMotion=function(n){var r=parseFloat(n.substring(e.meanMo.start,e.meanMo.stop));if(!(r>=0&&r<=17))throw new Error("Invalid mean motion: ".concat(r));return x.roundToNDecimalPlaces(r,8)},e.getRevNum=function(n){return parseInt(n.substring(e.revNum.start,e.revNum.stop))},e.lineNumber=new b(1,1),e.satNum=new b(3,7),e.classification=new b(8,8),e.intlDes=new b(10,17),e.intlDesYear=new b(10,11),e.intlDesLaunchNum=new b(12,14),e.intlDesLaunchPiece=new b(15,17),e.epochYear=new b(19,20),e.epochDay=new b(21,32),e.meanMoDev1=new b(34,43),e.meanMoDev2=new b(45,52),e.bstar=new b(54,61),e.ephemerisType=new b(63,63),e.elsetNum=new b(65,68),e.checksum=new b(69,69),e.inclination=new b(9,16),e.raan=new b(18,25),e.eccentricity=new b(27,33),e.argPerigee=new b(35,42),e.meanAnom=new b(44,51),e.meanMo=new b(53,63),e.revNum=new b(64,68),e}(),A=function(){function e(e){this.type=e.type||a.UNKNOWN,this.name=e.name||"Unknown",this.position=e.position||{x:0,y:0,z:0},this.time=e.time||new Date}return e.prototype.getName=function(){return this.name},e.prototype.getType=function(){return this.type},e.prototype.getTypeString=function(){switch(this.type){case a.UNKNOWN:return"Unknown";case a.PAYLOAD:return"Payload";case a.ROCKET_BODY:return"Rocket Body";case a.DEBRIS:return"Debris";case a.SPECIAL:return"Special";case a.RADAR_MEASUREMENT:return"Radar Measurement";case a.RADAR_TRACK:return"Radar Track";case a.RADAR_OBJECT:return"Radar Object";case a.BALLISTIC_MISSILE:return"Ballistic Missile";case a.STAR:return"Star";case a.INTERGOVERNMENTAL_ORGANIZATION:return"Intergovernmental Organization";case a.SUBORBITAL_PAYLOAD_OPERATOR:return"Suborbital Payload Operator";case a.PAYLOAD_OWNER:return"Payload Owner";case a.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER:return"Meteorological Rocket Launch Agency or Manufacturer";case a.PAYLOAD_MANUFACTURER:return"Payload Manufacturer";case a.LAUNCH_AGENCY:return"Launch Agency";case a.LAUNCH_SITE:return"Launch Site";case a.LAUNCH_POSITION:return"Launch Position";case a.LAUNCH_FACILITY:return"Launch Facility";case a.CONTROL_FACILITY:return"Control Facility";case a.GROUND_SENSOR_STATION:return"Ground Sensor Station";case a.OPTICAL:return"Optical";case a.MECHANICAL:return"Mechanical";case a.PHASED_ARRAY_RADAR:return"Phased Array Radar";case a.OBSERVER:return"Observer";case a.BISTATIC_RADIO_TELESCOPE:return"Bistatic Radio Telescope";case a.COUNTRY:return"Country";case a.LAUNCH_VEHICLE_MANUFACTURER:return"Launch Vehicle Manufacturer";case a.ENGINE_MANUFACTURER:return"Engine Manufacturer";default:return"Unknown"}},e}(),_=(p=function(e,n){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},p(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}p(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),S=function(e){function n(n){var r=e.call(this,n)||this;return n.rcs&&(r.rcs=n.rcs),n.vmag&&(r.vmag=n.vmag),r}return _(n,e),n.prototype.getRcs=function(){return this.rcs},n.prototype.getVmag=function(){return this.vmag},n}(A),I=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},e(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=n}e(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),E=function(e){function n(n,r){var t=e.call(this,n)||this,a=T.parseTle(n.tle1,n.tle2);return t.satNum=a.satNum,t.intlDes=a.intlDes,t.epochYear=a.epochYear,t.epochDay=a.epochDay,t.meanMoDev1=a.meanMoDev1,t.meanMoDev2=a.meanMoDev2,t.bstar=a.bstar,t.inclination=a.inclination,t.raan=a.raan,t.eccentricity=a.eccentricity,t.argOfPerigee=a.argOfPerigee,t.meanAnomaly=a.meanAnomaly,t.meanMotion=a.meanMotion,t.period=1440/t.meanMotion,t.satrec=f.createSatrec(n.tle1,n.tle2),t.options=r,t}return I(n,e),n.prototype.propagateTo=function(e){var r=n.calculateTimeVariables(e,this.satrec).m,t=f.propagate(this.satrec,r).position||{x:0,y:0,z:0};return this.position=t,this.time=e,this},n.prototype.getStateVec=function(e){void 0===e&&(e=this.time);var r=n.calculateTimeVariables(e,this.satrec).m;return f.propagate(this.satrec,r)},n.prototype.getEci=function(e){void 0===e&&(e=this.time);var r=n.calculateTimeVariables(e,this.satrec).m;return f.propagate(this.satrec,r).position||{x:0,y:0,z:0}},n.prototype.getEcf=function(e){void 0===e&&(e=this.time);var r=n.calculateTimeVariables(e,this.satrec),t=r.m,a=r.gmst,o=f.propagate(this.satrec,t).position||{x:0,y:0,z:0};return d.eci2ecf(o,a)},n.prototype.getLla=function(e){void 0===e&&(e=this.time);var r=n.calculateTimeVariables(e,this.satrec),t=r.m,a=r.gmst,o=f.propagate(this.satrec,t).position||{x:0,y:0,z:0};return d.eci2lla(o,a)},n.prototype.getRae=function(e,r){void 0===r&&(r=this.time);var t=n.calculateTimeVariables(r,this.satrec),a=t.m,o=t.gmst,i=f.propagate(this.satrec,a).position||{x:0,y:0,z:0},s=d.eci2ecf(i,o);return d.ecf2rae({lat:e.lat,lon:e.lon,alt:e.alt},s)},n.calculateTimeVariables=function(e,n){var r=x.jday(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())+e.getUTCMilliseconds()*h;return{gmst:f.gstime(r),m:n?1440*(r-n.jdsatepoch):null,j:r}},n.checkSatrec=function(e){return!(isNaN(e.a)||isNaN(e.am)||isNaN(e.alta)||isNaN(e.em)||isNaN(e.mo)||isNaN(e.ecco)||isNaN(e.no))},n}(S),N=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},e(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=n}e(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),R=function(e){function n(n,r,t){var a=e.call(this,n,r)||this;return a.setLaunchDetails(t.launchDetails),a.setSpaceCraftDetails(t.spaceCraftDetails),a.setOperationsDetails(t.operationsDetails),a}return N(n,e),n.prototype.setLaunchDetails=function(e){e.launchDate&&(this.launchDate=e.launchDate),e.launchMass&&(this.launchMass=e.launchMass),e.launchSite&&(this.launchSite=e.launchSite),e.launchVehicle&&(this.launchVehicle=e.launchVehicle)},n.prototype.getLaunchDetails=function(){return{launchDate:this.launchDate,launchMass:this.launchMass,launchSite:this.launchSite,launchVehicle:this.launchVehicle}},n.prototype.setSpaceCraftDetails=function(e){e.lifetime&&(this.lifetime=e.lifetime),e.maneuver&&(this.maneuver=e.maneuver),e.manufacturer&&(this.manufacturer=e.manufacturer),e.motor&&(this.motor=e.motor),e.power&&(this.power=e.power),e.payload&&(this.payload=e.payload),e.purpose&&(this.purpose=e.purpose),e.shape&&(this.shape=e.shape),e.span&&(this.span=e.span),e.configuration&&(this.configuration=e.configuration),e.equipment&&(this.equipment=e.equipment),e.dryMass&&(this.dryMass=e.dryMass)},n.prototype.getSpaceCraftDetails=function(){return{lifetime:this.lifetime,maneuver:this.maneuver,manufacturer:this.manufacturer,motor:this.motor,power:this.power,payload:this.payload,purpose:this.purpose,shape:this.shape,span:this.span,configuration:this.configuration,equipment:this.equipment,dryMass:this.dryMass}},n.prototype.setOperationsDetails=function(e){e.user&&(this.user=e.user),e.mission&&(this.mission=e.mission),e.owner&&(this.owner=e.owner),e.country&&(this.country=e.country)},n.prototype.getOperationsDetails=function(){return{user:this.user,mission:this.mission,owner:this.owner,country:this.country}},n}(E),D=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},e(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=n}e(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}();!function(e){e[e.OUT_OF_VIEW=-1]="OUT_OF_VIEW",e[e.ENTER=0]="ENTER",e[e.IN_VIEW=1]="IN_VIEW",e[e.EXIT=2]="EXIT"}(g||(g={}));var O=2*Math.PI,z=function(e){function n(n){var r=this;if(n.type)switch(n.type){case a.OPTICAL:case a.MECHANICAL:case a.PHASED_ARRAY_RADAR:case a.OBSERVER:case a.BISTATIC_RADIO_TELESCOPE:break;default:throw new Error("Invalid sensor type")}return(r=e.call(this,n)||this).validateInputData(n),r}return D(n,e),n.prototype.validateInputData=function(e){this.validateLla(e),this.validateFov(e)},n.prototype.validateFov=function(e){if(e.minAz>=0&&e.minAz<=360)this.minAz=e.minAz;else{if(void 0!==e.minAz)throw new Error("Invalid minimum azimuth - must be between 0 and 360");this.minAz=0}if(e.maxAz>=0&&e.maxAz<=360)this.maxAz=e.maxAz;else{if(void 0!==e.maxAz)throw new Error("Invalid maximum azimuth - must be between 0 and 360");this.maxAz=360}if(e.minEl>=0&&e.minEl<=90)this.minEl=e.minEl;else{if(void 0!==e.minEl)throw new Error("Invalid minimum elevation - must be between 0 and 90");this.minEl=0}if(e.maxEl>=0&&e.maxEl<=180)this.maxEl=e.maxEl;else{if(void 0!==e.maxEl)throw new Error("Invalid maximum elevation - must be between 0 and 180");this.maxEl=90}if(e.minRng>=0)this.minRng=e.minRng;else{if(void 0!==e.minRng)throw new Error("Invalid minimum range - must be greater than 0");this.minRng=0}if(e.maxRng>=0)this.maxRng=e.maxRng;else{if(void 0!==e.maxRng)throw new Error("Invalid maximum range - must be greater than 0");this.maxRng=5e4}},n.prototype.validateLla=function(e){if(!(e.lat>=-90&&e.lat<=90))throw new Error("Invalid latitude");if(this.lat=e.lat,!(e.lon>=-180&&e.lon<=180))throw new Error("Invalid longitude");if(this.lon=e.lon,!(e.alt>=0))throw new Error("Invalid altitude");this.alt=e.alt},n.prototype.setTime=function(e){return this.time=e,this},n.prototype.getRae=function(e,n){return void 0===n&&(n=this.time),e.getRae(this,n)},n.prototype.isRaeInFov=function(e){if(e.el*l<this.minEl||e.el*l>this.maxEl)return!1;if(e.rng<this.minRng||e.rng>this.maxRng)return!1;if(this.minAz*l>this.maxAz){if(e.az*l<this.minAz&&e.az*l>this.maxAz)return!1}else if(e.az*l<this.minAz||e.az*l>this.maxAz)return!1;return!0},n.prototype.isSatInFov=function(e,n){return void 0===n&&(n=this.time),this.isRaeInFov(this.getRae(e,n))},n.prototype.calculatePasses=function(e,r,t){void 0===t&&(t=this.time);for(var a=!1,o=0,i=[],s=t.getTime(),u=0;u<e;u++){var c=new Date(s+1e3*u),l=this.getRae(r,c);l.az*=360/O,l.el*=360/O;var m=this.isRaeInFov(l);if(0===u){var h=this.getRae(r,new Date(Date.now()-1e3));a=this.isRaeInFov(h)}var f=n.getPassType(m,a);if(o=Math.max(o,l.el),f===g.ENTER||f===g.EXIT){var d={type:f,time:c,az:l.az,el:l.el,rng:l.rng};f===g.EXIT&&(d.maxElPass=o),i.push(d),o=0}a=m}return i},n.getPassType=function(e,n){var r=g.OUT_OF_VIEW;return e&&!n?r=g.ENTER:!e&&n?r=g.EXIT:e&&n&&(r=g.IN_VIEW),r},n}(A),C=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},e(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=n}e(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),P=function(e){function n(n){var r=this;if(n.type&&n.type!==a.STAR)throw new Error("Invalid object type");return n.type=a.STAR,(r=e.call(this,n)||this).ra=n.ra,r.dec=n.dec,n.pname&&(r.pname=n.pname),n.bf&&(r.bf=n.bf),n.h&&(r.h=n.h),r}return C(n,e),n.prototype.getEci=function(e,r){void 0===e&&(e={lat:180,lon:0,alt:0}),void 0===r&&(r=this.time);var t=this.getRae(e,r),a=n.calculateTimeVariables(r).gmst;return d.ecf2eci(d.rae2ecf(t,{lat:0,lon:0,alt:0}),a)},n.prototype.getRae=function(e,n){void 0===e&&(e={lat:180,lon:0,alt:0}),void 0===n&&(n=this.time);var r=x.SunMath.getStarAzEl(n,e.lat*s,e.lon*s,this.ra,this.dec);return{az:r.az,el:r.el,rng:25e4}},n.calculateTimeVariables=function(e){var n=x.jday(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())+e.getUTCMilliseconds()*h;return{gmst:f.gstime(n),j:n}},n}(S)}},n={};function r(t){if(n[t])return n[t].exports;var a=n[t]={exports:{}};return e[t](a,a.exports,r),a.exports}return r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(636)})()}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(n,{a:n}),n},__webpack_require__.d=(e,n)=>{for(var r in n)__webpack_require__.o(n,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var __webpack_exports__={};(()=>{"use strict";var e,n=__webpack_require__(32),r=__webpack_require__.n(n),t=__webpack_require__(991);!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PAYLOAD=1]="PAYLOAD",e[e.ROCKET_BODY=2]="ROCKET_BODY",e[e.DEBRIS=3]="DEBRIS",e[e.SPECIAL=4]="SPECIAL",e[e.RADAR_MEASUREMENT=5]="RADAR_MEASUREMENT",e[e.RADAR_TRACK=6]="RADAR_TRACK",e[e.RADAR_OBJECT=7]="RADAR_OBJECT",e[e.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",e[e.STAR=9]="STAR",e[e.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",e[e.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",e[e.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",e[e.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",e[e.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",e[e.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",e[e.LAUNCH_SITE=16]="LAUNCH_SITE",e[e.LAUNCH_POSITION=17]="LAUNCH_POSITION",e[e.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",e[e.CONTROL_FACILITY=19]="CONTROL_FACILITY",e[e.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",e[e.OPTICAL=21]="OPTICAL",e[e.MECHANICAL=22]="MECHANICAL",e[e.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",e[e.OBSERVER=24]="OBSERVER",e[e.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",e[e.COUNTRY=26]="COUNTRY",e[e.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",e[e.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER",e[e.NOTIONAL=29]="NOTIONAL"}(e||(e={}));const a=Math.PI,o=2*Math.PI,i=o/360,s=360/o,u=1.15741e-8,c=6371,l={lat:null,lon:0,alt:0},m={JMod:2400000.5,J2000:2451545,J1900:2415020,B1900:2415020.3135,B1950:2433282.4235,JulianYear:365.25,JulianCentury:36525,BesselianYear:365.2421988,AU:149597870,EclCoord:function(e,n,r){if(isNaN(e)||isNaN(n))throw Error("Invalid EclCoord object: ("+e+", "+n+")");this.lat=e,this.lng=n,void 0!==r&&(this.h=r)}};m.EclCoord.prototype={toWgs84String:function(){return m.Math.formatNum(180*this.lat/Math.PI)+", "+m.Math.formatNum(180*-this.lng/Math.PI)}},m.EclCoordfromWgs84=function(e,n,r){return new m.EclCoord(e*Math.PI/180,-n*Math.PI/180,r)},m.EqCoord=function(e,n){if(isNaN(e)||isNaN(n))throw Error("Invalid EqCoord object: ("+e+", "+n+")");this.ra=e,this.dec=n},m.EqCoord.prototype={toString:function(){return"ra:"+m.Math.formatNum(180*this.ra/Math.PI)+", dec:"+m.Math.formatNum(180*this.dec/Math.PI)}},m.HzCoord=function(e,n){if(isNaN(e)||isNaN(n))throw Error("Invalid HzCoord object: ("+e+", "+n+")");this.az=e,this.alt=n},m.HzCoord.prototype={toString:function(){return"azi:"+m.Math.formatNum(180*this.az/Math.PI)+", alt:"+m.Math.formatNum(180*this.alt/Math.PI)}},m.Coord={dmsToDeg:function(e,n,r,t){return t=(60*(60*n+r)+t)/3600,e?-t:t},calcAngle:function(e,n,r,t){return m.Coord.dmsToDeg(e,n,r,t)*Math.PI/180},calcRA:function(e,n,r){return m.Coord.dmsToDeg(!1,e,n,r)%24*15*Math.PI/180},secondsToHMSStr:function(e){var n=Math.floor(e/86400);e=m.Math.pMod(e,86400);var r=Math.floor(e/3600)%24,t=Math.floor(e/60)%60;return(0!==n?n+"d ":"")+(10>r?"0":"")+r+":"+(10>t?"0":"")+t+":"+(10>(e=Math.floor(e%60))?"0":"")+e},secondsToHMStr:function(e){var n=Math.floor(e/86400);e=m.Math.pMod(e,86400);var r=Math.floor(e/3600)%24;return(0!==n?n+"d ":"")+(10>r?"0":"")+r+":"+(10>(e=Math.floor(e/60)%60)?"0":"")+e},eqToEcl:function(e,n){var r=Math.sin(e.ra),t=Math.sin(e.dec),a=Math.cos(e.dec),o=Math.sin(n);return n=Math.cos(n),new m.EclCoord(Math.atan2(r*n+t/a*o,Math.cos(e.ra)),Math.asin(t*n-a*o*r))},eclToEq:function(e,n){var r=Math.sin(e.lat),t=Math.sin(e.lng),a=Math.cos(e.lng),o=Math.sin(n);n=Math.cos(n);let i=Math.atan2(r*n-t/a*o,Math.cos(e.lat));return 0>i&&(i+=2*Math.PI),new m.EqCoord(i,Math.asin(t*n+a*o*r))},eqToHz:function(e,n,r){r=r-n.lng-e.ra;var t=Math.cos(r),a=Math.sin(n.lat);n=Math.cos(n.lat);var o=Math.sin(e.dec);return e=Math.cos(e.dec),new m.HzCoord(Math.atan2(Math.sin(r),t*a-o/e*n),Math.asin(a*o+n*e*t))}},m.DeltaT={jdToJde:function(e,n){return n||(n=m.DeltaT.estimate(e)),e+n/86400},jdeToJd:function(e,n){return n||(n=m.DeltaT.estimate(e)),e-n/86400},decimalYear:function(e){return(e=m.JulianDay.jdToCalendar(e)).y+(e.m-.5)/12},estimate:function(e){var n=m.DeltaT.decimalYear(e);return e=Math.pow,-500>n?32*e((n-1820)/100,2)-20:500>n?10583.6-1014.41*(n/=100)+33.78311*e(n,2)-5.952053*e(n,3)-.1798452*e(n,4)+.022174192*e(n,5)+.0090316521*e(n,6):1600>n?1574.2-556.01*(n=(n-1e3)/100)+71.23472*e(n,2)+.319781*e(n,3)-.8503463*e(n,4)-.005050998*e(n,5)+.0083572073*e(n,6):1700>n?120-.9808*(n-=1600)-.01532*e(n,2)+e(n,3)/7129:1800>n?8.83+.1603*(n-=1700)-.0059285*e(n,2)+13336e-8*e(n,3)-e(n,4)/1174e3:1860>n?13.72-.332447*(n-=1800)+.0068612*e(n,2)+.0041116*e(n,3)-37436e-8*e(n,4)+121272e-10*e(n,5)-1.699e-7*e(n,6)+8.75e-10*e(n,7):1900>n?7.62+.5737*(n-=1860)-.251754*e(n,2)+.01680668*e(n,3)-.0004473624*e(n,4)+e(n,5)/233174:1920>n?1.494119*(n-=1900)-2.79-.0598939*e(n,2)+.0061966*e(n,3)-197e-6*e(n,4):1941>n?21.2+.84493*(n-=1920)-.0761*e(n,2)+.0020936*e(n,3):1961>n?29.07+.407*(n-=1950)-e(n,2)/233+e(n,3)/2547:1986>n?45.45+1.067*(n-=1975)-e(n,2)/260-e(n,3)/718:2005>n?63.86+.3345*(n-=2e3)-.060374*e(n,2)+.0017275*e(n,3)+651814e-9*e(n,4)+2373599e-11*e(n,5):2050>n?62.92+.32217*(n-=2e3)+.005589*e(n,2):2150>n?32*e((n-1820)/100,2)-20-.5628*(2150-n):32*e((n-1820)/100,2)-20}},m.Globe={Er:6378.14,Fl:1/298.257,parallaxConstants:function(e,n){n||(n=0);var r=1-m.Globe.Fl;return n=.001*n/m.Globe.Er,{rhoslat:Math.sin(Math.atan(r*Math.tan(e)))*r+n*Math.sin(e),rhoclat:Math.cos(Math.atan(r*Math.tan(e)))+n*Math.cos(e)}}},m.Interp={newLen3:function(e,n,r){if(3!=r.length)throw"Error not 3";if(n==e)throw"Error no x range";var t=r[1]-r[0],a=r[2]-r[1];return{x1:e,x3:n,y:r,a:t,b:a,c:a-t,abSum:t+a,xSum:n+e,xDiff:n-e}},interpolateX:function(e,n){return m.Interp.interpolateN(e,(2*n-e.xSum)/e.xDiff)},interpolateN:function(e,n){return e.y[1]+.5*n*(e.abSum+n*e.c)}},m.JulianDay=function(e,n){e instanceof Date&&(e=m.JulianDay.dateToJD(e)),this.jd=e,this.deltaT=n||m.DeltaT.estimate(this.jd),this.jde=m.DeltaT.jdToJde(this.jd,this.deltaT)},m.JulianDay.prototype={toCalendar:function(){return m.JulianDay.jdToCalendar(this.jd)},toDate:function(){return m.JulianDay.jdToDate(this.jd)},jdJ2000Century:function(){return(this.jd-m.J2000)/m.JulianCentury},jdeJ2000Century:function(){return(this.jde-m.J2000)/m.JulianCentury},startOfDay:function(){return new m.JulianDay(Math.floor(this.jde-.5)+.5,this.deltaT)}},m.JulianDay.gregorianTimeStart=Date.UTC(1582,9,4),m.JulianDay.jdFromGregorian=function(e,n,r){return new m.JulianDay(m.JulianDay.jdFromGregorian(e,n,r))},m.JulianDay.jdFromJulian=function(e,n,r){return new m.JulianDay(m.JulianDay.calendarJulianToJD(e,n,r))},m.JulianDay.jdFromJDE=function(e){var n=m.DeltaT.estimate(e);return e=m.DeltaT.jdeToJd(e,n),new m.JulianDay(e,n)},m.JulianDay.dateToJD=function(e){var n=e.getUTCDate()+m.JulianDay.secondsFromHMS(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())/86400;return e.getTime()<m.JulianDay.gregorianTimeStart?m.JulianDay.calendarJulianToJD(e.getUTCFullYear(),e.getUTCMonth()+1,n):m.JulianDay.calendarGregorianToJD(e.getUTCFullYear(),e.getUTCMonth()+1,n)},m.JulianDay.calendarGregorianToJD=function(e,n,r){1!=n&&2!=n||(e--,n+=12);var t=Math.floor(e/100);return Math.floor(36525*(e+4716)/100)+Math.floor(306*(n+1)/10)+(2-t+Math.floor(t/4))+r-1524.5},m.JulianDay.calendarJulianToJD=function(e,n,r){return 1!=n&&2!=n||(e--,n+=12),Math.floor(36525*(e+4716)/100)+Math.floor(306*(n+1)/10)+r-1524.5},m.JulianDay.secondsFromHMS=function(e,n,r){return 3600*e+60*n+r},m.JulianDay.jdToDate=function(e){var n=m.JulianDay.jdToCalendar(e);return e=m.Math.modF(e+.5)[1],e=Math.round(86400*e),new Date(Date.UTC(n.y,n.m-1,Math.floor(n.d),Math.floor(e/3600)%24,Math.floor(e/60)%60,Math.floor(e%60)))},m.JulianDay.jdToCalendar=function(e){var n=(e=m.Math.modF(e+.5))[0],r=n;2299151<=n&&(r=n+1+(r=Math.floor((100*n-186721625)/3652425))-Math.floor(r/4));var t=r+1524;n=Math.floor((100*t-12210)/36525);var a=Math.floor(36525*n/100);return r=Math.floor(1e4*(t-a)/306001),e=t-a-Math.floor(306001*r/1e4)+e[1],{y:1==(r=14==r||15==r?r-13:r-1)||2==r?Math.floor(n)-4715:Math.floor(n)-4716,m:r,d:e}},m.JulianDay.leapYearGregorian=function(e){return 0==e%4&&0!=e%100||0==e%400},m.JulianDay.dayOfYear=function(e,n,r,t){return e=2,t&&e--,m.JulianDay._wholeMonths(n,e)+r},m.JulianDay._wholeMonths=function(e,n){return Math.round(275*e/9-(e+9)/12*n-30)},m.Math={pMod:function(e,n){return 0>(e%=n)&&(e+=n),e},modF:function(e){return 0>e?(e=-e,[-Math.floor(e),-e%1]):[Math.floor(e),e%1]},horner:function(e,n){var r=n.length-1;if(0>=r)throw"empty array not supported";for(var t=n[r];0<r;)t=t*e+n[--r];return t},formatNum:function(e,n){return n=Math.pow(10,4|n),Math.round(e*n)/n}},m.Moon={parallax:function(e){return Math.asin(6378.14/e)},apparentEquatorial:function(e){var n=m.Moon.geocentricPosition(e),r=m.Nutation.nutation(e);return e=m.Nutation.meanObliquityLaskar(e)+r.deltaobliquity,{eq:m.Coord.eclToEq(new m.EclCoord(n.lng+r.deltalng,n.lat),e),delta:n.delta}},apparentTopocentric:function(e,n,r){var t=m.Moon.apparentEquatorial(e),a=m.Globe.parallaxConstants(n.lat,n.h),o=m.Moon.parallax(t.delta);return r||(r=m.Sidereal.apparentInRa(e)),{eq:m.Parallax.topocentric(t.eq,o,a.rhoslat,a.rhoclat,n.lng,r),delta:t.delta}},topocentricPosition:function(e,n,r){var t=m.Sidereal.apparentInRa(e);e=m.Moon.apparentTopocentric(e,n,t);var a=m.Coord.eqToHz(e.eq,n,t);return!0===r&&(a.alt+=m.Refraction.bennett2(a.alt)),n=m.Moon.parallacticAngle(n.lat,t-(n.lng+e.eq.ra),e.eq.dec),{hz:a,eq:e.eq,delta:e.delta,q:n}},approxTransit:function(e,n){return e=e.startOfDay(),m.Rise.approxTransit(n,m.Sidereal.apparent0UT(e),m.Moon.apparentTopocentric(e,n).eq)},approxTimes:function(e,n){e=e.startOfDay();var r=m.Moon.apparentTopocentric(e,n),t=m.Moon.parallax(r.delta);return t=m.Rise.stdh0Lunar(t),e=m.Sidereal.apparent0UT(e),m.Rise.approxTimes(n,t,e,r.eq)},times:function(e,n){e=e.startOfDay();var r=m.Moon.apparentTopocentric(new m.JulianDay(e.jd-1,e.deltaT),n),t=m.Moon.apparentTopocentric(e,n),a=m.Moon.apparentTopocentric(new m.JulianDay(e.jd+1,e.deltaT),n),o=m.Moon.parallax(t.delta);o=m.Rise.stdh0Lunar(o);var i=m.Sidereal.apparent0UT(e);return m.Rise.times(n,e.deltaT,o,i,[r.eq,t.eq,a.eq])},parallacticAngle:function(e,n,r){return Math.atan2(Math.sin(n),Math.tan(e)*Math.cos(r)-Math.sin(r)*Math.cos(n))},geocentricPosition:function(e){var n=Math.PI/180,r=e.jdeJ2000Century();e=m.Math.pMod(m.Math.horner(r,[218.3164477*n,481267.88123421*n,-.0015786*n,n/538841,-n/65194e3]),2*Math.PI);var t=m.Math.pMod(m.Math.horner(r,[297.8501921*n,445267.1114034*n,-.0018819*n,n/545868,-n/113065e3]),2*Math.PI),a=m.Math.pMod(m.Math.horner(r,[357.5291092*n,35999.0502909*n,-1535e-7*n,n/2449e4]),2*Math.PI),o=m.Math.pMod(m.Math.horner(r,[134.9633964*n,477198.8675055*n,.0087414*n,n/69699,-n/14712e3]),2*Math.PI),i=m.Math.pMod(m.Math.horner(r,[93.272095*n,483202.0175233*n,-.0036539*n,-n/3526e3,n/86331e4]),2*Math.PI),s=119.75*n+131.849*n*r,u=53.09*n+479264.29*n*r,c=313.45*n+481266.484*n*r,l=(r=m.Math.horner(r,[1,-.002516,-74e-7]))*r;u=3958*Math.sin(s)+1962*Math.sin(e-i)+318*Math.sin(u);var h=0;for(s=-2235*Math.sin(e)+382*Math.sin(c)+175*Math.sin(s-i)+175*Math.sin(s+i)+127*Math.sin(e-o)-115*Math.sin(e+o),c=0;c<m.Moon.ta.length;c++){var f=m.Moon.ta[c],d=t*f[0]+a*f[1]+o*f[2]+i*f[3],p=Math.sin(d);switch(d=Math.cos(d),f[1]){case 0:u+=f[4]*p,h+=f[5]*d;break;case 1:case-1:u+=f[4]*p*r,h+=f[5]*d*r;break;case 2:case-2:u+=f[4]*p*l,h+=f[5]*d*l;break;default:throw"error"}}for(c=0;c<m.Moon.tb.length;c++)switch(f=m.Moon.tb[c],p=Math.sin(t*f[0]+a*f[1]+o*f[2]+i*f[3]),f[1]){case 0:s+=f[4]*p;break;case 1:case-1:s+=f[4]*p*r;break;case 2:case-2:s+=f[4]*p*l;break;default:throw"error"}return{lng:m.Math.pMod(e,2*Math.PI)+1e-6*u*n,lat:1e-6*s*n,delta:385000.56+.001*h}},ta:[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],tb:[[0,0,0,1,5128122],[0,0,1,1,280602],[0,0,1,-1,277693],[2,0,0,-1,173237],[2,0,-1,1,55413],[2,0,-1,-1,46271],[2,0,0,1,32573],[0,0,2,1,17198],[2,0,1,-1,9266],[0,0,2,-1,8822],[2,-1,0,-1,8216],[2,0,-2,-1,4324],[2,0,1,1,4200],[2,1,0,-1,-3359],[2,-1,-1,1,2463],[2,-1,0,1,2211],[2,-1,-1,-1,2065],[0,1,-1,-1,-1870],[4,0,-1,-1,1828],[0,1,0,1,-1794],[0,0,0,3,-1749],[0,1,-1,1,-1565],[1,0,0,1,-1491],[0,1,1,1,-1475],[0,1,1,-1,-1410],[0,1,0,-1,-1344],[1,0,0,-1,-1335],[0,0,3,1,1107],[4,0,0,-1,1021],[4,0,-1,1,833],[0,0,1,-3,777],[4,0,-2,1,671],[2,0,0,-3,607],[2,0,2,-1,596],[2,-1,1,-1,491],[2,0,-2,1,-451],[0,0,3,-1,439],[2,0,2,1,422],[2,0,-3,-1,421],[2,1,-1,1,-366],[2,1,0,1,-351],[4,0,0,1,331],[2,-1,1,1,315],[2,-2,0,-1,302],[0,0,1,3,-283],[2,1,1,-1,-229],[1,1,0,-1,223],[1,1,0,1,223],[0,1,-2,-1,-220],[2,1,-1,-1,-220],[1,0,1,1,-185],[2,-1,-2,-1,181],[0,1,2,1,-177],[4,0,-2,-1,176],[4,-1,-1,-1,166],[1,0,1,-1,-164],[4,0,1,-1,132],[1,0,-1,-1,-119],[4,-1,0,-1,115],[2,-2,0,1,107]]},m.MoonIllum={phaseAngleEq:function(e,n,r,t){return e=m.MoonIllum._coselong(e,r),Math.atan2(t*Math.sin(Math.acos(e)),n-t*e)},phaseAngleEq2:function(e,n){return Math.acos(-m.MoonIllum._coselong(e,n))},illuminated:function(e){return(1+Math.cos(e))/2},positionAngle:function(e,n){var r=Math.cos(n.dec);return Math.atan2(r*Math.sin(n.ra-e.ra),Math.sin(n.dec)*Math.cos(e.dec)-r*Math.sin(e.dec)*Math.cos(n.ra-e.ra))},_coselong:function(e,n){return Math.sin(n.dec)*Math.sin(e.dec)+Math.cos(n.dec)*Math.cos(e.dec)*Math.cos(n.ra-e.ra)}},m.Nutation={nutation:function(e){e=e.jdeJ2000Century();for(var n=m.Math.horner(e,[297.85036,445267.11148,-.0019142,1/189474])*Math.PI/180,r=m.Math.horner(e,[357.52772,35999.05034,-1603e-7,-1/3e5])*Math.PI/180,t=m.Math.horner(e,[134.96298,477198.867398,.0086972,1/5620])*Math.PI/180,a=m.Math.horner(e,[93.27191,483202.017538,-.0036825,1/327270])*Math.PI/180,o=m.Math.horner(e,[125.04452,-1934.136261,.0020708,1/45e4])*Math.PI/180,i=0,s=0,u=m.Nutation.table22A.length-1;0<=u;u--){var c=m.Nutation.table22A[u],l=c[0]*n+c[1]*r+c[2]*t+c[3]*a+c[4]*o,h=Math.cos(l);i+=Math.sin(l)*(c[5]+c[6]*e),s+=h*(c[7]+c[8]*e)}return{deltalng:1e-4/3600*i*(Math.PI/180),deltaobliquity:1e-4/3600*s*(Math.PI/180)}},nutationInRA:function(e){var n=m.Nutation.meanObliquityLaskar(e);return(e=m.Nutation.nutation(e)).deltalng*Math.cos(n+e.deltaobliquity)},trueObliquity:function(e){return m.Nutation.meanObliquityLaskar(e)+(e=m.Nutation.nutation(e)).deltaobliquity},meanObliquity:function(e){return m.Math.horner(e.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-46.815/3600*(Math.PI/180),-59e-5/3600*(Math.PI/180),.001813/3600*(Math.PI/180)])},meanObliquityLaskar:function(e){return m.Math.horner(.01*e.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-4680.93/3600*(Math.PI/180),-1.55/3600*(Math.PI/180),1999.25/3600*(Math.PI/180),-51.38/3600*(Math.PI/180),-249.67/3600*(Math.PI/180),-39.05/3600*(Math.PI/180),7.12/3600*(Math.PI/180),27.87/3600*(Math.PI/180),5.79/3600*(Math.PI/180),2.45/3600*(Math.PI/180)])},table22A:[[0,0,0,0,1,-171996,-174.2,92025,8.9],[-2,0,0,2,2,-13187,-1.6,5736,-3.1],[0,0,0,2,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[0,0,1,0,0,712,.1,-7,0],[-2,1,0,2,2,-517,1.2,224,-.6],[0,0,0,2,1,-386,-.4,200,0],[0,0,1,2,2,-301,0,129,-.1],[-2,-1,0,2,2,217,-.5,-95,.3],[-2,0,1,0,0,-158,0,0,0],[-2,0,0,2,1,129,.1,-70,0],[0,0,-1,2,2,123,0,-53,0],[2,0,0,0,0,63,0,0,0],[0,0,1,0,1,63,.1,-33,0],[2,0,-1,2,2,-59,0,26,0],[0,0,-1,0,1,-58,-.1,32,0],[0,0,1,2,1,-51,0,27,0],[-2,0,2,0,0,48,0,0,0],[0,0,-2,2,1,46,0,-24,0],[2,0,0,2,2,-38,0,16,0],[0,0,2,2,2,-31,0,13,0],[0,0,2,0,0,29,0,0,0],[-2,0,1,2,2,29,0,-12,0],[0,0,0,2,0,26,0,0,0],[-2,0,0,2,0,-22,0,0,0],[0,0,-1,2,1,21,0,-10,0],[0,2,0,0,0,17,-.1,0,0],[2,0,-1,0,1,16,0,-8,0],[-2,2,0,2,2,-16,.1,7,0],[0,1,0,0,1,-15,0,9,0],[-2,0,1,0,1,-13,0,7,0],[0,-1,0,0,1,-12,0,6,0],[0,0,2,-2,0,11,0,0,0],[2,0,-1,2,1,-10,0,5,0],[2,0,1,2,2,-8,0,3,0],[0,1,0,2,2,7,0,-3,0],[-2,1,1,0,0,-7,0,0,0],[0,-1,0,2,2,-7,0,3,0],[2,0,0,2,1,-7,0,3,0],[2,0,1,0,0,6,0,0,0],[-2,0,2,2,2,6,0,-3,0],[-2,0,1,2,1,6,0,-3,0],[2,0,-2,0,1,-6,0,3,0],[2,0,0,0,1,-6,0,3,0],[0,-1,1,0,0,5,0,0,0],[-2,-1,0,2,1,-5,0,3,0],[-2,0,0,0,1,-5,0,3,0],[0,0,2,2,1,-5,0,3,0],[-2,0,2,0,1,4,0,0,0],[-2,1,0,2,1,4,0,0,0],[0,0,1,-2,0,4,0,0,0],[-1,0,1,0,0,-4,0,0,0],[-2,1,0,0,0,-4,0,0,0],[1,0,0,0,0,-4,0,0,0],[0,0,1,2,0,3,0,0,0],[0,0,-2,2,2,-3,0,0,0],[-1,-1,1,0,0,-3,0,0,0],[0,1,1,0,0,-3,0,0,0],[0,-1,1,2,2,-3,0,0,0],[2,-1,-1,2,2,-3,0,0,0],[0,0,3,2,2,-3,0,0,0],[2,-1,0,2,2,-3,0,0,0]]},m.Parallax={earthsunParallax:8.794/60/60*Math.PI/180,horizontal:function(e){return 8.794/60/60*Math.PI/180/e},topocentric:function(e,n,r,t,a,o){a=m.Math.pMod(o-a-e.ra,2*Math.PI),n=Math.sin(n),o=Math.cos(a);var i=Math.cos(e.dec);return a=Math.atan2(-t*n*Math.sin(a),i-t*n*o),new m.EqCoord(e.ra+a,Math.atan2((Math.sin(e.dec)-r*n)*Math.cos(a),i-t*n*o))},topocentric2:function(e,n,r,t,a,o){return a=m.Math.pMod(o-a-e.ra,2*Math.PI),o=Math.cos(e.dec),new m.EqCoord(e.ra+-n*t*Math.sin(a)/o,e.dec+-n*(r*o-t*Math.cos(a)*Math.sin(e.dec)))}},m.Refraction={bennett:function(e){0>e&&(e=0);var n=Math.PI/180;return n/60/Math.tan(e+7.31*n*n/(e+4.4*n))},bennett2:function(e){var n=Math.PI/180,r=60/n,t=.06/r;return r=14.7*r*n,n*=13,(e=m.Refraction.bennett(e))-t*Math.sin(r*e+n)},saemundsson:function(e){var n=Math.PI/180;return 1.02*n/60/Math.tan(e+10.3*n*n/(e+5.11*n))}},m.Rise={meanRefraction:.5667*Math.PI/180,stdh0Stellar:-.5667*Math.PI/180,stdh0Solar:-.8333*Math.PI/180,stdh0LunarMean:.125*Math.PI/180,stdh0Lunar:function(e){return.7275*e-m.Rise.meanRefraction},circumpolar:function(e,n,r){return-1>(e=(Math.sin(n)-Math.sin(e)*Math.sin(r))/(Math.cos(e)*Math.cos(r)))||1<e?null:e},approxTransit:function(e,n,r){return 43200*(r.ra+e.lng)/Math.PI-n},approxTimes:function(e,n,r,t){return(n=m.Rise.circumpolar(e.lat,n,t.dec))?(n=43200*Math.acos(n)/Math.PI,e=43200*(t.ra+e.lng)/Math.PI-r,{transit:m.Math.pMod(e,86400),transitd:Math.floor(e/86400),rise:m.Math.pMod(e-n,86400),rised:Math.floor((e-n)/86400),set:m.Math.pMod(e+n,86400),setd:Math.floor((e+n)/86400)}):null},times:function(e,n,r,t,a){function o(a){var o=m.Math.pMod(t+360.985647*a/360,86400),i=a+n,c=m.Interp.interpolateX(s,i);return i=m.Interp.interpolateX(u,i),o=o*Math.PI/43200-(e.lng+c),c=Math.cos(i),m.Math.pMod(a+(l*Math.sin(i)+h*c*Math.cos(o)-r)/(c*h*Math.sin(o))*43200/Math.PI,86400)}var i=m.Rise.approxTimes(e,r,t,a[1]);if(!i)return null;var s=m.Interp.newLen3(-86400,86400,[a[0].ra,a[1].ra,a[2].ra]),u=m.Interp.newLen3(-86400,86400,[a[0].dec,a[1].dec,a[2].dec]);a=t+360.985647*i.transit/360;var c=m.Interp.interpolateX(s,i.transit+n);i.transit=m.Math.pMod(i.transit-(a-43200*(e.lng+c)/Math.PI),86400);var l=Math.sin(e.lat),h=Math.cos(e.lat);return i.rise=o(i.rise),i.set=o(i.set),i}},m.Sidereal={iau82:[24110.54841,8640184.812866,.093104,62e-7],jdToCFrac:function(e){return e=m.Math.modF(e.jd+.5),[new m.JulianDay(e[0]-.5).jdJ2000Century(),e[1]]},mean:function(e){return m.Math.pMod(m.Sidereal._mean(e),86400)},_mean:function(e){return(e=m.Sidereal._mean0UT(e)).s+86636.55536784*e.f},_meanInRA:function(e){return(e=m.Sidereal._mean0UT(e)).s*Math.PI/43200+2.0054758187*e.f*Math.PI},mean0UT:function(e){return e=m.Sidereal._mean0UT(e),m.Math.pMod(e.s,86400)},_mean0UT:function(e){return e=m.Sidereal.jdToCFrac(e),{s:m.Math.horner(e[0],m.Sidereal.iau82),f:e[1]}},apparentInRa:function(e){var n=m.Sidereal._meanInRA(e);return e=m.Nutation.nutationInRA(e),m.Math.pMod(n+e,2*Math.PI)},apparent:function(e){var n=m.Sidereal._mean(e);return e=648e3*m.Nutation.nutationInRA(e)/Math.PI/15,m.Math.pMod(n+e,86400)},apparentLocal:function(e,n){return e=m.Sidereal.apparent(e),m.Math.pMod(e-43200*n/Math.PI,86400)},apparent0UT:function(e){var n=m.Math.modF(e.jd+.5);return e=m.Math.modF(e.jde+.5),n=m.Math.horner((n[0]-.5-m.J2000)/36525,m.Sidereal.iau82)+86636.55536784*n[1],e=648e3*m.Nutation.nutationInRA(new m.JulianDay(e[0]))/Math.PI/15,m.Math.pMod(n+e,86400)}},m.Solar={earthsunDelta:149597870,apparentEquatorial:function(e){var n=e.jdJ2000Century(),r=m.Solar.node(n);return n=m.Solar.apparentLongitude(n,r),e=m.Nutation.meanObliquityLaskar(e)+.00256*Math.PI/180*Math.cos(r),r=Math.sin(n),new m.EqCoord(Math.atan2(Math.cos(e)*r,Math.cos(n)),Math.asin(Math.sin(e)*r))},apparentTopocentric:function(e,n,r){var t=m.Solar.apparentEquatorial(e),a=m.Globe.parallaxConstants(n.lat,n.h);return r||(r=m.Sidereal.apparentInRa(e)),m.Parallax.topocentric2(t,m.Parallax.earthsunParallax,a.rhoslat,a.rhoclat,n.lng,r)},topocentricPosition:function(e,n,r){var t=m.Sidereal.apparentInRa(e);return e=m.Solar.apparentTopocentric(e,n,t),n=m.Coord.eqToHz(e,n,t),!0===r&&(n.alt+=m.Refraction.bennett2(n.alt)),{hz:n,eq:e}},approxTransit:function(e,n){return e=e.startOfDay(),m.Rise.approxTransit(n,m.Sidereal.apparent0UT(e),m.Solar.apparentTopocentric(e,n))},approxTimes:function(e,n){var r=e.startOfDay();e=m.Solar.apparentTopocentric(r,n);var t=m.Rise.stdh0Solar;return r=m.Sidereal.apparent0UT(r),m.Rise.approxTimes(n,t,r,e)},times:function(e,n){e=e.startOfDay();var r=m.Solar.apparentTopocentric(new m.JulianDay(e.jd-1,e.deltaT),n),t=m.Solar.apparentTopocentric(e,n),a=m.Solar.apparentTopocentric(new m.JulianDay(e.jd+1,e.deltaT),n),o=m.Rise.stdh0Solar,i=m.Sidereal.apparent0UT(e);return m.Rise.times(n,e.deltaT,o,i,[r,t,a])},meanAnomaly:function(e){return m.Math.horner(e,[357.52911,35999.05029,-1537e-7])*Math.PI/180},trueLongitude:function(e){var n=m.Math.horner(e,[280.46646,36000.76983,3032e-7])*Math.PI/180,r=m.Solar.meanAnomaly(e);return e=(m.Math.horner(e,[1.914602,-.004817,-14e-6])*Math.sin(r)+(.019993-101e-6*e)*Math.sin(2*r)+289e-6*Math.sin(3*r))*Math.PI/180,{s:m.Math.pMod(n+e,2*Math.PI),v:m.Math.pMod(r+e,2*Math.PI)}},apparentLongitude:function(e,n){return n||(n=m.Solar.node(e)),m.Solar.trueLongitude(e).s-.00569*Math.PI/180-.00478*Math.PI/180*Math.sin(n)},node:function(e){return(125.04-1934.136*e)*Math.PI/180}},m.Solistice={march:function(e){return 1e3>e?m.Solistice._eq(e,m.Solistice.mc0):m.Solistice._eq(e-2e3,m.Solistice.mc2)},june:function(e){return 1e3>e?m.Solistice._eq(e,m.Solistice.jc0):m.Solistice._eq(e-2e3,m.Solistice.jc2)},september:function(e){return 1e3>e?m.Solistice._eq(e,m.Solistice.sc0):m.Solistice._eq(e-2e3,m.Solistice.sc2)},december:function(e){return 1e3>e?m.Solistice._eq(e,m.Solistice.dc0):m.Solistice._eq(e-2e3,m.Solistice.dc2)},_eq:function(e,n){n=((e=m.Math.horner(.001*e,n))-m.J2000)/m.JulianCentury;var r=35999.373*Math.PI/180*n-2.47*Math.PI/180;r=1+.0334*Math.cos(r)+7e-4*Math.cos(2*r);for(var t=0,a=this.terms.length-1;0<=a;a--){var o=this.terms[a];t+=o[0]*Math.cos((o[1]+o[2]*n)*Math.PI/180)}return e+1e-5*t/r},mc0:[1721139.29189,365242.1374,.06134,.00111,-71e-5],jc0:[1721233.25401,365241.72562,-.05232,.00907,25e-5],sc0:[1721325.70455,365242.49558,-.11677,-.00297,74e-5],dc0:[1721414.39987,365242.88257,-.00769,-.00933,-6e-5],mc2:[2451623.80984,365242.37404,.05169,-.00411,-57e-5],jc2:[2451716.56767,365241.62603,.00325,.00888,-3e-4],sc2:[2451810.21715,365242.01767,-.11575,.00337,78e-5],dc2:[2451900.05952,365242.74049,-.06223,-.00823,32e-5],terms:[[485,324.96,1934.136],[203,337.23,32964.467],[199,342.08,20.186],[182,27.85,445267.112],[156,73.14,45036.886],[136,171.52,22518.443],[77,222.54,65928.934],[74,296.72,3034.906],[70,243.58,9037.513],[58,119.81,33718.147],[52,297.17,150.678],[50,21.02,2281.226],[45,247.54,29929.562],[44,325.15,31555.956],[29,60.93,4443.417],[18,155.12,67555.328],[17,288.79,4562.452],[16,198.04,62894.029],[14,199.76,31436.921],[12,95.39,14577.848],[12,287.11,31931.756],[12,320.81,34777.259],[9,227.73,1222.114],[8,15.45,16859.074]]};const h=(e,n,r,t,a,o)=>{if(e)return 367*e-Math.floor(7*(e+Math.floor((n+9)/12))*.25)+Math.floor(275*n/9)+r+1721013.5+((o/60+a)/60+t)/24;{const e=new Date,n=new Date(e.getUTCFullYear(),0,0),r=e.getDate()-n.getDate();return Math.floor(r/u)}},f=(e,n,r,a,o,s)=>{const u={lat:a,lon:o,alt:s},c=t.Transforms.lla2ecf(u),l=Math.sin(a),m=Math.sin(o),h=Math.cos(a),f=Math.cos(o),d=i*e,p=i*n,g=-r*Math.cos(p)*Math.cos(d),M=r*Math.cos(p)*Math.sin(d),v=r*Math.sin(p);return{x:l*f*g+-m*M+h*f*v+c.x,y:l*m*g+f*M+h*m*v+c.y,z:-h*g+l*v+c.z}},d=(e,n)=>{const r=e.az*s,t=e.el*s,a=e.rng;if(n.obsminaz>n.obsmaxaz){if((r>=n.obsminaz||r<=n.obsmaxaz)&&t>=n.obsminel&&t<=n.obsmaxel&&a<=n.obsmaxrange&&a>=n.obsminrange||(r>=n.obsminaz2||r<=n.obsmaxaz2)&&t>=n.obsminel2&&t<=n.obsmaxel2&&a<=n.obsmaxrange2&&a>=n.obsminrange2)return 1}else if(r>=n.obsminaz&&r<=n.obsmaxaz&&t>=n.obsminel&&t<=n.obsmaxel&&a<=n.obsmaxrange&&a>=n.obsminrange||r>=n.obsminaz2&&r<=n.obsmaxaz2&&t>=n.obsminel2&&t<=n.obsmaxel2&&a<=n.obsmaxrange2&&a>=n.obsminrange2)return 1;return 0},p=(e,n,r)=>({lon:n,lat:e,alt:r}),g=(e,n)=>e.el*s>0&&90-e.el*s<n,M=(n,r)=>n.length>1&&r.type===e.OPTICAL||n.length>1&&r.type===e.OBSERVER||n.length>1&&r.type===e.MECHANICAL,v=(e,n,r)=>(e[3*n]=r.x,e[3*n+1]=r.y,e[3*n+2]=r.z,e),y=(e,n)=>(e[3*n]=0,e[3*n+1]=0,e[3*n+2]=0,e),x=(e,n)=>(e[3*n]=0,e[3*n+1]=0,e[3*n+2]=0,e);var b;const w=t.Utils.SunMath,T=new Float32Array(0),A=new Int8Array(0);let _,S=[],I=T,E=T,N=A,R=A,D=[0],O=[-1],z=!1,C=1e3,P=1,L=!1,j=1,k=Date.now(),U=0,q=1,F=90,Y=!1,V=!1,G=!1,J=!1,B=!1,H=!1,X=!1,Q=!1,W=!1,K=!1,Z=0,$=[],ee={observerGd:{lat:null,lon:0,alt:0},alt:null,country:"",lat:null,lon:null,name:"",obsmaxaz:0,obsmaxel:0,obsmaxrange:0,obsminaz:0,obsminel:0,obsminrange:0,shortName:"",staticNum:0,sun:"",volume:!1,zoom:""};const ne="undefined"!=typeof process&&(null===(b=null===process||void 0===process?void 0:process.release)||void 0===b?void 0:b.name);try{onmessage=e=>re(e)}catch(e){if(!process)throw e}const re=e=>{let n,r,a,s=[];switch(e.data.typ){case"offset":return U=e.data.staticOffset,k=e.data.dynamicOffsetEpoch,q=e.data.propRate,z=!0,void(j=1);case"satdata":for(n=JSON.parse(e.data.dat),_=n.length,r=0;r<_;){const e={lowAlt:null,inclination:null,eccentricity:null,raan:null,argPe:null,meanMotion:null,semiMajorAxis:null,semiMinorAxis:null,apogee:null,perigee:null,period:null};a=null,n[r].static||n[r].missile||n[r].isRadarData?(a=n[r],delete a.id,s.push(e),S.push(a),r++):(a=t.Sgp4.createSatrec(n[r].TLE1,n[r].TLE2),e.lowAlt=a.isimp,e.inclination=a.inclo,e.eccentricity=a.ecco,e.raan=a.nodeo,e.argPe=a.argpo,e.meanMotion=60*a.no*24/o,e.semiMajorAxis=Math.pow(8681663.653/e.meanMotion,2/3),e.semiMinorAxis=e.semiMajorAxis*Math.sqrt(1-Math.pow(e.eccentricity,2)),e.apogee=e.semiMajorAxis*(1+e.eccentricity)-c,a.apogee=e.apogee,e.perigee=e.semiMajorAxis*(1-e.eccentricity)-c,e.period=1440/e.meanMotion,s.push(e),delete a.id,S.push(a),r++)}I=new Float32Array(3*_),E=new Float32Array(3*_);try{postMessage({extraData:JSON.stringify(s)})}catch(e){if(!process)throw e}break;case"satEdit":a=t.Sgp4.createSatrec(e.data.TLE1,e.data.TLE2),S[e.data.id]=Object.assign(Object.assign({},S[e.data.id]),a),S[e.data.id].skip=!1,s=[];const u={lowAlt:null,inclination:null,eccentricity:null,raan:null,argPe:null,meanMotion:null,semiMajorAxis:null,semiMinorAxis:null,apogee:null,perigee:null,period:null,TLE1:null,TLE2:null};if(u.inclination=a.inclo,u.eccentricity=a.ecco,u.raan=a.nodeo,u.argPe=a.argpo,u.meanMotion=60*a.no*24/o,u.semiMajorAxis=Math.pow(8681663.653/u.meanMotion,2/3),u.semiMinorAxis=u.semiMajorAxis*Math.sqrt(1-Math.pow(u.eccentricity,2)),u.apogee=u.semiMajorAxis*(1+u.eccentricity)-c,S[e.data.id].apogee=u.apogee,u.perigee=u.semiMajorAxis*(1-u.eccentricity)-c,u.period=1440/u.meanMotion,u.TLE1=e.data.TLE1,u.TLE2=e.data.TLE2,s.push(u),ne)return;postMessage({extraUpdate:!0,extraData:JSON.stringify(s),satId:e.data.id}),z=!0;break;case"newMissile":S[e.data.id]=e.data;break;case"satelliteSelected":O=e.data.satelliteSelected,-1===O[0]&&(B=!0,W||(W=!0));break;case"sensor":e.data.multiSensor?(H=!0,$=e.data.sensor,ee=e.data.sensor,P=2,K||(K=!0)):e.data.sensor&&(ee=e.data.sensor[0],e.data.setlatlong&&(e.data.resetObserverGd?(P=1,ee.observerGd=l,$=[],K||(K=!0)):(P=2,ee.observerGd={lon:e.data.sensor[0].lon*i,lat:e.data.sensor[0].lat*i,alt:parseFloat(e.data.sensor[0].alt)},K||(K=!0))),H=!1);break;case"isShowSatOverfly":F=e.data.selectedSatFOV?e.data.selectedSatFOV:F,"enable"===e.data.isShowSatOverfly&&(J=!0),"reset"===e.data.isShowSatOverfly&&(B=!0,J=!1,W||(W=!0));break;default:e.data.isSunlightView&&(X=e.data.isSunlightView),e.data.isSlowCPUModeEnabled&&(C=2e3),e.data.isLowPerf&&(Q=!0),e.data.fieldOfViewSetLength&&(Z=e.data.fieldOfViewSetLength),"enable"===e.data.isShowFOVBubble&&(Y=!0),"reset"===e.data.isShowFOVBubble&&(G=!0,Y=!1,W||(W=!0)),"enable"===e.data.isShowSurvFence&&(V=!0,W||(W=!0)),"disable"===e.data.isShowSurvFence&&(V=!1,W||(W=!0))}L||"satdata"!==e.data.typ||(_=-1,te(),L=!0)},te=n=>{var r;S=n||S;const{now:o,j:i,gmst:c,gmstNext:d,isSunExclusion:p,sunEci:g}=((n,r,o,i,c,d)=>{const p=((e,n,r)=>{const t=new Date,a=t.getTime()-e;return t.setTime(e+n+a*r),t})(n,r,o),g=h(p.getUTCFullYear(),p.getUTCMonth()+1,p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds())+p.getUTCMilliseconds()*u,M=t.Sgp4.gstime(g);let v=!1,y={x:0,y:0,z:0};i&&!c&&([v,y]=((n,r,o,i)=>{const u=new m.JulianDay(r),c=m.EclCoordfromWgs84(0,0,0),h=m.EclCoordfromWgs84(n.observerGd.lat*s,n.observerGd.lon*s,n.observerGd.alt),d=m.Solar.topocentricPosition(u,c,!1),p=m.Solar.topocentricPosition(u,h,!1),g=d.hz.az*s+180,M=d.hz.alt*s%360,v=p.hz.alt*s%360,y=new m.JulianDay(m.JulianDay.dateToJD(i)).jdJ2000Century();let x=180*m.Solar.meanAnomaly(y)/a;x%=360;const b=149597870700*(1.00014-.01671*Math.cos(x)-14e-5*Math.cos(2*x))/1e3,w=t.Transforms.ecf2eci(f(g,M,b,0,0,0),o);return n.observerGd!==l&&(n.type===e.OPTICAL||n.type===e.OBSERVER)&&v>-6?[!0,w]:[!1,w]})(d,g,M,p));const x=h(p.getUTCFullYear(),p.getUTCMonth()+1,p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds()+1)+p.getUTCMilliseconds()*u;return{now:p,j:g,gmst:M,gmstNext:t.Sgp4.gstime(x),isSunExclusion:v,sunEci:y}})(k,U,q,X,H,ee);_=me()?S.length-1-Z:S.length-1,null!==(null===(r=ee.observerGd)||void 0===r?void 0:r.lat)?N&&N!==A||(N=new Int8Array(S.length)):N=A,X?R&&R!==A||(R=new Int8Array(S.length)):R=A,ae(o,i,c,d,p,g),G&&(G=!1,_-=Z),z||de(),z=!1,setTimeout((()=>{te()}),C*P/j)},ae=(n,r,t,a,o,i)=>{let s=-1;for(;s<_&&!z;){s++;let u=!1;if(S[s].satnum?u=!le(s,t,i,r,o):S[s].isRadarData?u=!oe(s):S[s].static&&!S[s].marker&&S[s].type===e.STAR?(se(s,n),x(E,s)):S[s].static&&!S[s].marker?(ce(s,t),x(E,s)):S[s].missile?u=!ue(s,n,a,t):S[s].marker&&(Y||G)?s=fe(s,t):S[s].marker&&(J||B)&&(s=ie(s,t)),!u&&(B=!1,S[s].marker)){he(s);break}}},oe=e=>!S[e].skip&&(S[e].skip=!0,y(I,e),x(E,e),!0),ie=(e,n)=>{if(B&&!0===S[e].active)return e;let r,a,o,u,c,l,m,h,f,d,M,y,b;for(let w=0;w<O.length+1;w++){if(w===O.length){D.push(e);break}if(-1!==O[w]){if(!J)continue;for(c={x:I[3*O[w]],y:I[3*O[w]+1],z:I[3*O[w]+2]},l=t.Transforms.ecf2eci(c,n),m=t.Transforms.eci2lla(l,n),h=m.alt,f=p(m.lat,m.lon,1),M=1,h<2500&&F<=60&&(M=.5),(h>7e3||F>=90)&&(M=2),O.length>1&&(M=2),d=-60;d<60;d+=M)if(a=Math.max(Math.min(Math.round(m.lat*s)+d,90),-90)*i,!(a>90))for(b=h<2500&&F<=60?.5:h>7e3||F>=90?2:1,O.length>1&&(b=2),y=0;y<181;y+=b){if(o=m.lon+y*i,f=p(a,o,15),r=t.Transforms.ecf2rae(f,c),g(r,F)){if(u=t.Transforms.lla2ecf(f),e===_)continue;S[e].active=!0,I=v(I,e,u),x(E,e),e++}if(0!==y&&180!==y){if(o=m.lon-y*i,f=p(a,o,15),r=t.Transforms.ecf2rae(f,c),g(r,F)){if(u=t.Transforms.lla2ecf(f),e===_)continue;S[e].active=!0,I=v(I,e,u),x(E,e),e++}if(90===a||-90===a)break}}}}return e},se=(e,n)=>{const r=w.getStarAzEl(n,0,188,S[e].ra,S[e].dec),t=f(r.az*s,r.el*s,25e4,0,0,0);I[3*e]=t.x,I[3*e+1]=t.y,I[3*e+2]=t.z},ue=(e,n,r,a)=>{if(!S[e].active)return I[3*e]=0,I[3*e+1]=0,I[3*e+2]=0,!1;let o,s,u,c;const l=S[e].altList.length;let m;for(let r=0;r<l;r++)if(1*S[e].startTime+1e3*r>=n.getTime()){m=r;break}S[e].lastTime=S[e].lastTime>=0?S[e].lastTime:0,o=Math.cos(S[e].latList[S[e].lastTime+1]*i),s=Math.sin(S[e].latList[S[e].lastTime+1]*i),u=Math.cos(S[e].lonList[S[e].lastTime+1]*i+r),c=Math.sin(S[e].lonList[S[e].lastTime+1]*i+r),0===S[e].lastTime?x(E,e):0===E[3*e]&&0===E[3*e+1]&&0===E[3*e+2]?(E[3*e]=(6371+S[e].altList[S[e].lastTime+1])*o*u-I[3*e],E[3*e+1]=(6371+S[e].altList[S[e].lastTime+1])*o*c-I[3*e+1],E[3*e+2]=(6371+S[e].altList[S[e].lastTime+1])*s-I[3*e+2]):(E[3*e]+=(6371+S[e].altList[S[e].lastTime+1])*o*u-I[3*e],E[3*e+1]+=(6371+S[e].altList[S[e].lastTime+1])*o*c-I[3*e+1],E[3*e+2]+=(6371+S[e].altList[S[e].lastTime+1])*s-I[3*e+2],E[3*e]*=.5,E[3*e+1]*=.5,E[3*e+2]*=.5),o=Math.cos(S[e].latList[m]*i),s=Math.sin(S[e].latList[m]*i),u=Math.cos(S[e].lonList[m]*i+a),c=Math.sin(S[e].lonList[m]*i+a),I[3*e]=(6371+S[e].altList[m])*o*u,I[3*e+1]=(6371+S[e].altList[m])*o*c,I[3*e+2]=(6371+S[e].altList[m])*s,S[e].lastTime=m;const h=I[3*e],f=I[3*e+1],p=I[3*e+2],g=t.Transforms.eci2ecf({x:h,y:f,z:p},a);t.Transforms.eci2lla({x:h,y:f,z:p},a).alt<=150&&!1===S[e].missile&&(S[e].skip=!0);const M=t.Transforms.ecf2rae(ee.observerGd,g);return N[e]=d(M,ee),!0},ce=(e,n)=>{const r=Math.cos(S[e].lat*i),t=Math.sin(S[e].lat*i),a=Math.cos(S[e].lon*i+n),o=Math.sin(S[e].lon*i+n);I[3*e]=(6372+S[e].alt)*r*a,I[3*e+1]=(6372+S[e].alt)*r*o,I[3*e+2]=(6372+S[e].alt)*t},le=(n,u,l,m,h)=>{var f,p;let g,M,v,y,x;if(S[n].skip)return!1;const b=1440*(m-S[n].jdsatepoch),w=t.Sgp4.propagate(S[n],b);try{if(I[3*n]=w.position.x,I[3*n+1]=w.position.y,I[3*n+2]=w.position.z,E[3*n]=w.velocity.x,E[3*n+1]=w.velocity.y,E[3*n+2]=w.velocity.z,S[n].isimp||b/1440>20){const e=6378.137,r=6356.7523142,t=Math.sqrt(w.position.x*w.position.x+w.position.y*w.position.y),i=(e-r)/e,s=2*i-i*i;let c=Math.atan2(w.position.y,w.position.x)-u;for(;c<-a;)c+=o;for(;c>a;)c-=o;const l=20;let m,h=0,f=Math.atan2(w.position.z,Math.sqrt(w.position.x*w.position.x+w.position.y*w.position.y));for(;h<l;)m=1/Math.sqrt(1-s*(Math.sin(f)*Math.sin(f))),f=Math.atan2(w.position.z+e*m*s*Math.sin(f),t),h+=1;if(t/Math.cos(f)-e*m>S[n].apogee+1e3)throw new Error("Impossible orbit")}if(S[n].apogee<350&&Math.sqrt(w.velocity.x*w.velocity.x+w.velocity.y*w.velocity.y)<5.5)throw new Error("Impossible orbit");null===(null===(f=ee.observerGd)||void 0===f?void 0:f.lat)||H||(x=t.Transforms.ecf2rae(ee.observerGd,t.Transforms.eci2ecf(w.position,u)))}catch(e){S[n].skip=!0,I[3*n]=0,I[3*n+1]=0,I[3*n+2]=0,E[3*n]=0,E[3*n+1]=0,E[3*n+2]=0,y=0,x=0}if(X&&(R[n]=2,g=Math.asin(c/Math.sqrt(Math.pow(-I[3*n],2)+Math.pow(-I[3*n+1],2)+Math.pow(-I[3*n+2],2)))*s,M=Math.asin(695700/Math.sqrt(Math.pow(-I[3*n]+l.x,2)+Math.pow(-I[3*n+1]+l.y,2)+Math.pow(-I[3*n+2]+l.z,2)))*s,v=Math.acos(r().dot([-I[3*n],-I[3*n+1],-I[3*n+2]],[-I[3*n]+l.x,-I[3*n+1]+l.y,-I[3*n+2]+l.z])/(Math.sqrt(Math.pow(-I[3*n],2)+Math.pow(-I[3*n+1],2)+Math.pow(-I[3*n+2],2))*Math.sqrt(Math.pow(-I[3*n]+l.x,2)+Math.pow(-I[3*n+1]+l.y,2)+Math.pow(-I[3*n+2]+l.z,2))))*s,g>M&&v<g-M&&(R[n]=0),Math.abs(g-M)<v&&v<g+M&&(R[n]=1),M>g&&(R[n]=1),v<M-g&&(R[n]=1)),null!==(null===(p=ee.observerGd)||void 0===p?void 0:p.lat)&&!h)if(N[n]=0,H){for(let r=0;r<$.length;r++)if(ee.type!==e.OPTICAL||0!==R[n]){if(N[n])break;ee=$[r],ee.observerGd={lon:ee.lon*i,lat:ee.lat*i,alt:1*ee.alt};try{y=t.Transforms.eci2ecf(w.position,u),x=t.Transforms.ecf2rae(ee.observerGd,y)}catch(e){continue}N[n]=d(x,ee)}}else ee.type===e.OPTICAL&&0===R[n]||(N[n]=d(x,ee));return!0},me=()=>!B&&!J&&!G&&!Y||Q,he=e=>{for(;e<_;e++){if(!S[e].active){_-=Z;break}y(I,e),x(E,e),S[e].active=!1}},fe=(e,n)=>{var r;let a,o,s,u,c,m;H||null===(null===(r=ee.observerGd)||void 0===r?void 0:r.lat)||($[0]=ee,$.length=1),D=[];for(let r=0;r<$.length+1&&(D.push(e),r!==$.length);r++)if(ee=$[r],ee.observerGd=p(ee.lat*i,ee.lon*i,ee.alt),y(I,e),x(E,e),!G&&Y&&ee.observerGd!==l&&!M($,ee)){if(c=Math.abs(ee.obsmaxaz-ee.obsminaz)<30?.5:3,m=ee.obsmaxrange-ee.obsminrange<720?125:30,!V)if(0!==ee.obsminaz&&360!==ee.obsmaxaz){for(s=Math.max(ee.obsminrange,100);s<Math.min(ee.obsmaxrange,6e4);s+=Math.min(ee.obsmaxrange,6e4)/m)for(a=ee.obsminaz,o=ee.obsminel;o<ee.obsmaxel;o+=c){u=t.Transforms.ecf2eci(f(a,o,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n);try{S[e].active=!0,I=v(I,e,u),x(E,e),e++}catch(e){}}for(s=Math.max(ee.obsminrange,100);s<Math.min(ee.obsmaxrange,6e4);s+=Math.min(ee.obsmaxrange,6e4)/m)for(a=ee.obsmaxaz,o=ee.obsminel;o<ee.obsmaxel;o+=c){u=t.Transforms.ecf2eci(f(a,o,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n);try{S[e].active=!0}catch(e){}I=v(I,e,u),x(E,e),e++}if(void 0!==ee.obsminaz2){for(s=Math.max(ee.obsminrange,100);s<Math.min(ee.obsmaxrange,6e4);s+=Math.min(ee.obsmaxrange,6e4)/m)for(a=ee.obsminaz2,o=ee.obsminel2;o<ee.obsmaxel2;o+=c)u=t.Transforms.ecf2eci(f(a,o,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),S[e].active=!0,I=v(I,e,u),x(E,e),e++;for(s=Math.max(ee.obsminrange,100);s<Math.min(ee.obsmaxrange,6e4);s+=Math.min(ee.obsmaxrange,6e4)/m)for(a=ee.obsmaxaz2,o=ee.obsminel2;o<ee.obsmaxel2;o+=c)u=t.Transforms.ecf2eci(f(a,o,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),S[e].active=!0,I=v(I,e,u),x(E,e),e++}}else for(s=Math.max(ee.obsminrange,100);s<Math.min(ee.obsmaxrange,6e4);s+=Math.min(ee.obsmaxrange,6e4)/m)for(o=ee.obsmaxel,a=ee.obsminaz;a<ee.obsmaxaz;a+=c){u=t.Transforms.ecf2eci(f(a,o,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n);try{S[e].active=!0}catch(e){}I=v(I,e,u),x(E,e),e++}if(ee.obsmaxel-ee.obsminel<20)for(s=Math.max(ee.obsminrange,100);s<Math.min(ee.obsmaxrange,6e4);s+=Math.min(ee.obsmaxrange,6e4)/m)for(a=0;a<Math.max(360,ee.obsmaxaz);a+=c){if(ee.obsminaz>ee.obsmaxaz){if(!(a>=ee.obsminaz||a<=ee.obsmaxaz))continue}else if(!(a>=ee.obsminaz&&a<=ee.obsmaxaz))continue;if(u=t.Transforms.ecf2eci(f(a,ee.obsmaxel,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e===_)break;S[e].active=!0,I=v(I,e,u),x(E,e),e++}if(void 0!==ee.obsminaz2)for(c=2,s=Math.max(ee.obsminrange2,100);s<Math.min(ee.obsmaxrange2,6e4);s+=Math.min(ee.obsmaxrange2,6e4)/m)for(a=0;a<360;a+=1*c){if(ee.obsminaz2>ee.obsmaxaz2){if(!(a>=ee.obsminaz2||a<=ee.obsmaxaz2))continue}else if(!(a>=ee.obsminaz2&&a<=ee.obsmaxaz2))continue;if(u=t.Transforms.ecf2eci(f(a,ee.obsminel2,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e===_)break;S[e].active=!0,I=v(I,e,u),x(E,e),e++}if(!V){for(s=Math.min(ee.obsmaxrange,6e4),a=0;a<Math.max(360,ee.obsmaxaz);a+=c){if(ee.obsminaz>ee.obsmaxaz){if(!(a>=ee.obsminaz||a<=ee.obsmaxaz))continue}else if(!(a>=ee.obsminaz&&a<=ee.obsmaxaz))continue;for(o=ee.obsminel;o<ee.obsmaxel&&(u=t.Transforms.ecf2eci(f(a,o,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e!==_);o+=c)S[e].active=!0,I=v(I,e,u),x(E,e),e++}if(void 0!==ee.obsminaz2)for(s=Math.min(ee.obsmaxrange2,6e4),a=0;a<Math.max(360,ee.obsmaxaz2);a+=c){if(ee.obsminaz2>ee.obsmaxaz2){if(!(a>=ee.obsminaz2||a<=ee.obsmaxaz2))continue}else if(!(a>=ee.obsminaz2&&a<=ee.obsmaxaz2))continue;for(o=ee.obsminel2;o<ee.obsmaxel2&&(u=t.Transforms.ecf2eci(f(a,o,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e!==_);o+=c)S[e].active=!0,I=v(I,e,u),x(E,e),e++}}for(c=.25,s=ee.obsmaxrange,a=0;a<Math.max(360,ee.obsmaxaz);a+=c){if(ee.obsminaz>ee.obsmaxaz){if(!(a>=ee.obsminaz||a<=ee.obsmaxaz))continue}else if(!(a>=ee.obsminaz&&a<=ee.obsmaxaz))continue;if(u=t.Transforms.ecf2eci(f(a,ee.obsminel,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e===_)break;S[e].active=!0,I=v(I,e,u),x(E,e),e++}for(s=ee.obsminrange,a=0;a<Math.max(360,ee.obsmaxaz);a+=c){if(ee.obsminaz>ee.obsmaxaz){if(!(a>=ee.obsminaz||a<=ee.obsmaxaz))continue}else if(!(a>=ee.obsminaz&&a<=ee.obsmaxaz))continue;if(u=t.Transforms.ecf2eci(f(a,ee.obsminel,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e===_)break;S[e].active=!0,I=v(I,e,u),x(E,e),e++}if(ee.obsmaxrange-ee.obsminrange<720)for(s=Math.max(ee.obsminrange,100);s<Math.min(ee.obsmaxrange,6e4);s+=Math.min(ee.obsmaxrange,6e4)/m)for(a=0;a<Math.max(360,ee.obsmaxaz);a+=c){if(ee.obsminaz>ee.obsmaxaz){if(!(a>=ee.obsminaz||a<=ee.obsmaxaz))continue}else if(!(a>=ee.obsminaz&&a<=ee.obsmaxaz))continue;if(u=t.Transforms.ecf2eci(f(a,ee.obsminel,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e===_)break;S[e].active=!0,I=v(I,e,u),x(E,e),e++}if(ee.obsminaz!==ee.obsmaxaz&&ee.obsminaz!==ee.obsmaxaz-360){for(c=(ee.obsmaxrange-ee.obsminrange)/5555,a=ee.obsmaxaz;a===ee.obsmaxaz;a+=1)for(s=ee.obsminrange;s<ee.obsmaxrange&&(u=t.Transforms.ecf2eci(f(a,ee.obsminel,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e!==_);s+=c)S[e].active=!0,I=v(I,e,u),x(E,e),e++;for(a=ee.obsminaz;a===ee.obsminaz;a+=1)for(s=ee.obsminrange;s<ee.obsmaxrange&&(u=t.Transforms.ecf2eci(f(a,ee.obsminel,s,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e!==_);s+=c)S[e].active=!0,I=v(I,e,u),x(E,e),e++}}return e},de=()=>{var e;const n={satPos:I};null!==(null===(e=ee.observerGd)||void 0===e?void 0:e.lat)?n.satInView=N:n.satInView=A,n.satInSun=X?R:A,D.length>=1?n.sensorMarkerArray=D:n.sensorMarkerArray=[];try{postMessage(n),postMessage({satVel:E})}catch(e){if(!process)throw e}}})()})();
/*! For license information please see positionCruncher.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={32:(__unused_webpack_module,exports,__webpack_require__)=>{var numeric=exports;void 0!==__webpack_require__.g&&(__webpack_require__.g.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(r,e){var n,t,i;for(void 0===e&&(e=15),t=.5,n=new Date;;){for(i=t*=2;i>3;i-=4)r(),r(),r(),r();for(;i>0;)r(),i--;if(new Date-n>e)break}for(i=t;i>3;i-=4)r(),r(),r(),r();for(;i>0;)r(),i--;return 1e3*(3*t-1)/(new Date-n)},numeric._myIndexOf=function(r){var e,n=this.length;for(e=0;e<n;++e)if(this[e]===r)return e;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(r){function e(r){if(0===r)return"0";if(isNaN(r))return"NaN";if(r<0)return"-"+e(-r);if(isFinite(r)){var n=Math.floor(Math.log(r)/Math.log(10)),t=r/Math.pow(10,n),i=t.toPrecision(numeric.precision);return 10===parseFloat(i)&&(n++,i=(t=1).toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+n.toString()}return"Infinity"}var n=[];return function r(t){var i;if(void 0===t)return n.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof t)return n.push('"'+t+'"'),!1;if("boolean"==typeof t)return n.push(t.toString()),!1;if("number"==typeof t){var o=e(t),a=t.toPrecision(numeric.precision),s=parseFloat(t.toString()).toString(),c=[o,a,s,parseFloat(a).toString(),parseFloat(s).toString()];for(i=1;i<c.length;i++)c[i].length<o.length&&(o=c[i]);return n.push(Array(numeric.precision+8-o.length).join(" ")+o),!1}if(null===t)return n.push("null"),!1;if("function"==typeof t){n.push(t.toString());var u=!1;for(i in t)t.hasOwnProperty(i)&&(u?n.push(",\n"):n.push("\n{"),u=!0,n.push(i),n.push(": \n"),r(t[i]));return u&&n.push("}\n"),!0}if(t instanceof Array){if(t.length>numeric.largeArray)return n.push("...Large Array..."),!0;for(u=!1,n.push("["),i=0;i<t.length;i++)i>0&&(n.push(","),u&&n.push("\n ")),u=r(t[i]);return n.push("]"),!0}for(i in n.push("{"),u=!1,t)t.hasOwnProperty(i)&&(u&&n.push(",\n"),u=!0,n.push(i),n.push(": \n"),r(t[i]));return n.push("}"),!0}(r),n.join("")},numeric.parseDate=function(r){return function r(e){if("string"==typeof e)return Date.parse(e.replace(/-/g,"/"));if(!(e instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,t=[];for(n=0;n<e.length;n++)t[n]=r(e[n]);return t}(r)},numeric.parseFloat=function(r){return function r(e){if("string"==typeof e)return parseFloat(e);if(!(e instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,t=[];for(n=0;n<e.length;n++)t[n]=r(e[n]);return t}(r)},numeric.parseCSV=function(r){var e,n,t,i=r.split("\n"),o=[],a=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,c=0;for(n=0;n<i.length;n++){var u,h=(i[n]+",").match(a);if(h.length>0){for(o[c]=[],e=0;e<h.length;e++)u=(t=h[e]).substr(0,t.length-1),s.test(u)?o[c][e]=parseFloat(u):o[c][e]=u;c++}}return o},numeric.toCSV=function(r){var e,n,t,i,o,a=numeric.dim(r);for(t=a[0],a[1],o=[],e=0;e<t;e++){for(i=[],n=0;n<t;n++)i[n]=r[e][n].toString();o[e]=i.join(", ")}return o.join("\n")+"\n"},numeric.getURL=function(r){var e=new XMLHttpRequest;return e.open("GET",r,!1),e.send(),e},numeric.imageURL=function(r){function e(r,e,n){void 0===e&&(e=0),void 0===n&&(n=r.length);var t,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=-1;for(r.length,t=e;t<n;t++)o=o>>>8^i[255&(o^r[t])];return-1^o}var n,t,i,o,a,s,c,u,h,m,l=r[0].length,f=r[0][0].length,d=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,f>>24&255,f>>16&255,f>>8&255,255&f,l>>24&255,l>>16&255,l>>8&255,255&l,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(m=e(d,12,29),d[29]=m>>24&255,d[30]=m>>16&255,d[31]=m>>8&255,d[32]=255&m,n=1,t=0,c=0;c<l;c++){for(c<l-1?d.push(0):d.push(1),a=3*f+1+(0===c)&255,s=3*f+1+(0===c)>>8&255,d.push(a),d.push(s),d.push(255&~a),d.push(255&~s),0===c&&d.push(0),u=0;u<f;u++)for(i=0;i<3;i++)t=(t+(n=(n+(a=(a=r[i][c][u])>255?255:a<0?0:Math.round(a)))%65521))%65521,d.push(a);d.push(0)}return h=(t<<16)+n,d.push(h>>24&255),d.push(h>>16&255),d.push(h>>8&255),d.push(255&h),o=d.length-41,d[33]=o>>24&255,d[34]=o>>16&255,d[35]=o>>8&255,d[36]=255&o,m=e(d,37),d.push(m>>24&255),d.push(m>>16&255),d.push(m>>8&255),d.push(255&m),d.push(0),d.push(0),d.push(0),d.push(0),d.push(73),d.push(69),d.push(78),d.push(68),d.push(174),d.push(66),d.push(96),d.push(130),"data:image/png;base64,"+function(r){var e,n,t,i,o,a,s,c=r.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="";for(e=0;e<c;e+=3)o=((3&(n=r[e]))<<4)+((t=r[e+1])>>4),a=((15&t)<<2)+((i=r[e+2])>>6),s=63&i,e+1>=c?a=s=64:e+2>=c&&(s=64),h+=u.charAt(n>>2)+u.charAt(o)+u.charAt(a)+u.charAt(s);return h}(d)},numeric._dim=function(r){for(var e=[];"object"==typeof r;)e.push(r.length),r=r[0];return e},numeric.dim=function(r){var e;return"object"==typeof r?"object"==typeof(e=r[0])?"object"==typeof e[0]?numeric._dim(r):[r.length,e.length]:[r.length]:[]},numeric.mapreduce=function(r,e){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+e+';\nif(typeof x === "number") { var xi = x; '+r+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+r+";\n    xi = x[i-1];\n    "+r+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+r+"\n}\nreturn accum;")},numeric.mapreduce2=function(r,e){return Function("x","var n = x.length;\nvar i,xi;\n"+e+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+r+";\n}\nreturn accum;")},numeric.same=function r(e,n){var t,i;if(!(e instanceof Array&&n instanceof Array))return!1;if((i=e.length)!==n.length)return!1;for(t=0;t<i;t++)if(e[t]!==n[t]){if("object"!=typeof e[t])return!1;if(!r(e[t],n[t]))return!1}return!0},numeric.rep=function(r,e,n){void 0===n&&(n=0);var t,i=r[n],o=Array(i);if(n===r.length-1){for(t=i-2;t>=0;t-=2)o[t+1]=e,o[t]=e;return-1===t&&(o[0]=e),o}for(t=i-1;t>=0;t--)o[t]=numeric.rep(r,e,n+1);return o},numeric.dotMMsmall=function(r,e){var n,t,i,o,a,s,c,u,h,m,l;for(o=r.length,a=e.length,s=e[0].length,c=Array(o),n=o-1;n>=0;n--){for(u=Array(s),h=r[n],i=s-1;i>=0;i--){for(m=h[a-1]*e[a-1][i],t=a-2;t>=1;t-=2)l=t-1,m+=h[t]*e[t][i]+h[l]*e[l][i];0===t&&(m+=h[0]*e[0][i]),u[i]=m}c[n]=u}return c},numeric._getCol=function(r,e,n){var t;for(t=r.length-1;t>0;--t)n[t]=r[t][e],n[--t]=r[t][e];0===t&&(n[0]=r[0][e])},numeric.dotMMbig=function(r,e){var n,t,i,o=numeric._getCol,a=e.length,s=Array(a),c=r.length,u=e[0].length,h=new Array(c),m=numeric.dotVV;for(--a,t=--c;-1!==t;--t)h[t]=Array(u);for(t=--u;-1!==t;--t)for(o(e,t,s),i=c;-1!==i;--i)n=r[i],h[i][t]=m(n,s);return h},numeric.dotMV=function(r,e){var n,t=r.length,i=(e.length,Array(t)),o=numeric.dotVV;for(n=t-1;n>=0;n--)i[n]=o(r[n],e);return i},numeric.dotVM=function(r,e){var n,t,i,o,a,s,c;for(i=r.length,o=e[0].length,a=Array(o),t=o-1;t>=0;t--){for(s=r[i-1]*e[i-1][t],n=i-2;n>=1;n-=2)c=n-1,s+=r[n]*e[n][t]+r[c]*e[c][t];0===n&&(s+=r[0]*e[0][t]),a[t]=s}return a},numeric.dotVV=function(r,e){var n,t,i=r.length,o=r[i-1]*e[i-1];for(n=i-2;n>=1;n-=2)t=n-1,o+=r[n]*e[n]+r[t]*e[t];return 0===n&&(o+=r[0]*e[0]),o},numeric.dot=function(r,e){var n=numeric.dim;switch(1e3*n(r).length+n(e).length){case 2002:return e.length<10?numeric.dotMMsmall(r,e):numeric.dotMMbig(r,e);case 2001:return numeric.dotMV(r,e);case 1002:return numeric.dotVM(r,e);case 1001:return numeric.dotVV(r,e);case 1e3:return numeric.mulVS(r,e);case 1:return numeric.mulSV(r,e);case 0:return r*e;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(r){var e,n,t,i,o=r.length,a=Array(o);for(e=o-1;e>=0;e--){for(i=Array(o),n=e+2,t=o-1;t>=n;t-=2)i[t]=0,i[t-1]=0;for(t>e&&(i[t]=0),i[e]=r[e],t=e-1;t>=1;t-=2)i[t]=0,i[t-1]=0;0===t&&(i[0]=0),a[e]=i}return a},numeric.getDiag=function(r){var e,n=Math.min(r.length,r[0].length),t=Array(n);for(e=n-1;e>=1;--e)t[e]=r[e][e],t[--e]=r[e][e];return 0===e&&(t[0]=r[0][0]),t},numeric.identity=function(r){return numeric.diag(numeric.rep([r],1))},numeric.pointwise=function(r,e,n){void 0===n&&(n="");var t,i,o=[],a=/\[i\]$/,s="",c=!1;for(t=0;t<r.length;t++)a.test(r[t])?s=i=r[t].substring(0,r[t].length-3):i=r[t],"ret"===i&&(c=!0),o.push(i);return o[r.length]="_s",o[r.length+1]="_k",o[r.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(c?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+r.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+e+"\n}\nreturn ret;",Function.apply(null,o)},numeric.pointwise2=function(r,e,n){void 0===n&&(n="");var t,i,o=[],a=/\[i\]$/,s="",c=!1;for(t=0;t<r.length;t++)a.test(r[t])?s=i=r[t].substring(0,r[t].length-3):i=r[t],"ret"===i&&(c=!0),o.push(i);return o[r.length]="var _n = "+s+".length;\nvar i"+(c?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+e+"\n}\nreturn ret;",Function.apply(null,o)},numeric._biforeach=function r(e,n,t,i,o){var a;if(i!==t.length-1)for(a=t[i]-1;a>=0;a--)r("object"==typeof e?e[a]:e,"object"==typeof n?n[a]:n,t,i+1,o);else o(e,n)},numeric._biforeach2=function r(e,n,t,i,o){if(i===t.length-1)return o(e,n);var a,s=t[i],c=Array(s);for(a=s-1;a>=0;--a)c[a]=r("object"==typeof e?e[a]:e,"object"==typeof n?n[a]:n,t,i+1,o);return c},numeric._foreach=function r(e,n,t,i){var o;if(t!==n.length-1)for(o=n[t]-1;o>=0;o--)r(e[o],n,t+1,i);else i(e)},numeric._foreach2=function r(e,n,t,i){if(t===n.length-1)return i(e);var o,a=n[t],s=Array(a);for(o=a-1;o>=0;o--)s[o]=r(e[o],n,t+1,i);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var r,e;for(r=0;r<numeric.mathfuns2.length;++r)e=numeric.mathfuns2[r],numeric.ops2[e]=e;for(r in numeric.ops2)if(numeric.ops2.hasOwnProperty(r)){e=numeric.ops2[r];var n,t,i="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,r)?(i="var "+e+" = Math."+e+";\n",n=function(r,n,t){return r+" = "+e+"("+n+","+t+")"},t=function(r,n){return r+" = "+e+"("+r+","+n+")"}):(n=function(r,n,t){return r+" = "+n+" "+e+" "+t},t=numeric.opseq.hasOwnProperty(r+"eq")?function(r,n){return r+" "+e+"= "+n}:function(r,n){return r+" = "+r+" "+e+" "+n}),numeric[r+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),i),numeric[r+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),i),numeric[r+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),i),numeric[r]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+r+"VV, VS = numeric."+r+"VS, SV = numeric."+r+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+t("x","y")+"\n}\nreturn x;\n"),numeric[e]=numeric[r],numeric[r+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],t("ret[i]","x[i]"),i),numeric[r+"eqS"]=numeric.pointwise2(["ret[i]","x"],t("ret[i]","x"),i),numeric[r+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+r+"eqV, S = numeric."+r+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(r=0;r<numeric.mathfuns2.length;++r)e=numeric.mathfuns2[r],delete numeric.ops2[e];for(r=0;r<numeric.mathfuns.length;++r)e=numeric.mathfuns[r],numeric.ops1[e]=e;for(r in numeric.ops1)numeric.ops1.hasOwnProperty(r)&&(i="",e=numeric.ops1[r],-1!==numeric.myIndexOf.call(numeric.mathfuns,r)&&Math.hasOwnProperty(e)&&(i="var "+e+" = Math."+e+";\n"),numeric[r+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+e+"(ret[i]);",i),numeric[r+"eq"]=Function("x",'if(typeof x !== "object") return '+e+"x\nvar i;\nvar V = numeric."+r+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[r+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+e+"(x[i]);",i),numeric[r]=Function("x",'if(typeof x !== "object") return '+e+"(x)\nvar i;\nvar V = numeric."+r+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(r=0;r<numeric.mathfuns.length;++r)e=numeric.mathfuns[r],delete numeric.ops1[e];for(r in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(r)&&(e=numeric.mapreducers[r],numeric[r+"V"]=numeric.mapreduce2(e[0],e[1]),numeric[r]=Function("x","s","k",e[1]+'if(typeof x !== "object") {    xi = x;\n'+e[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+r+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+e[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(r,e){return"object"==typeof r?"object"==typeof e?numeric.truncVV(r,e):numeric.truncVS(r,e):"object"==typeof e?numeric.truncSV(r,e):Math.round(r/e)*e},numeric.inv=function(r){var e,n,t,i,o,a,s,c=numeric.dim(r),u=Math.abs,h=c[0],m=c[1],l=numeric.clone(r),f=numeric.identity(h);for(a=0;a<m;++a){var d=-1,p=-1;for(o=a;o!==h;++o)(s=u(l[o][a]))>p&&(d=o,p=s);for(n=l[d],l[d]=l[a],l[a]=n,i=f[d],f[d]=f[a],f[a]=i,r=n[a],s=a;s!==m;++s)n[s]/=r;for(s=m-1;-1!==s;--s)i[s]/=r;for(o=h-1;-1!==o;--o)if(o!==a){for(e=l[o],t=f[o],r=e[a],s=a+1;s!==m;++s)e[s]-=n[s]*r;for(s=m-1;s>0;--s)t[s]-=i[s]*r,t[--s]-=i[s]*r;0===s&&(t[0]-=i[0]*r)}}return f},numeric.det=function(r){var e=numeric.dim(r);if(2!==e.length||e[0]!==e[1])throw new Error("numeric: det() only works on square matrices");var n,t,i,o,a,s,c,u,h=e[0],m=1,l=numeric.clone(r);for(t=0;t<h-1;t++){for(i=t,n=t+1;n<h;n++)Math.abs(l[n][t])>Math.abs(l[i][t])&&(i=n);for(i!==t&&(c=l[i],l[i]=l[t],l[t]=c,m*=-1),o=l[t],n=t+1;n<h;n++){for(s=(a=l[n])[t]/o[t],i=t+1;i<h-1;i+=2)u=i+1,a[i]-=o[i]*s,a[u]-=o[u]*s;i!==h&&(a[i]-=o[i]*s)}if(0===o[t])return 0;m*=o[t]}return m*l[t][t]},numeric.transpose=function(r){var e,n,t,i,o,a=r.length,s=r[0].length,c=Array(s);for(n=0;n<s;n++)c[n]=Array(a);for(e=a-1;e>=1;e-=2){for(i=r[e],t=r[e-1],n=s-1;n>=1;--n)(o=c[n])[e]=i[n],o[e-1]=t[n],(o=c[--n])[e]=i[n],o[e-1]=t[n];0===n&&((o=c[0])[e]=i[0],o[e-1]=t[0])}if(0===e){for(t=r[0],n=s-1;n>=1;--n)c[n][0]=t[n],c[--n][0]=t[n];0===n&&(c[0][0]=t[0])}return c},numeric.negtranspose=function(r){var e,n,t,i,o,a=r.length,s=r[0].length,c=Array(s);for(n=0;n<s;n++)c[n]=Array(a);for(e=a-1;e>=1;e-=2){for(i=r[e],t=r[e-1],n=s-1;n>=1;--n)(o=c[n])[e]=-i[n],o[e-1]=-t[n],(o=c[--n])[e]=-i[n],o[e-1]=-t[n];0===n&&((o=c[0])[e]=-i[0],o[e-1]=-t[0])}if(0===e){for(t=r[0],n=s-1;n>=1;--n)c[n][0]=-t[n],c[--n][0]=-t[n];0===n&&(c[0][0]=-t[0])}return c},numeric._random=function r(e,n){var t,i,o=e[n],a=Array(o);if(n===e.length-1){for(i=Math.random,t=o-1;t>=1;t-=2)a[t]=i(),a[t-1]=i();return 0===t&&(a[0]=i()),a}for(t=o-1;t>=0;t--)a[t]=r(e,n+1);return a},numeric.random=function(r){return numeric._random(r,0)},numeric.norm2=function(r){return Math.sqrt(numeric.norm2Squared(r))},numeric.linspace=function(r,e,n){if(void 0===n&&(n=Math.max(Math.round(e-r)+1,1)),n<2)return 1===n?[r]:[];var t,i=Array(n);for(t=--n;t>=0;t--)i[t]=(t*e+(n-t)*r)/n;return i},numeric.getBlock=function(r,e,n){var t=numeric.dim(r);return function r(i,o){var a,s=e[o],c=n[o]-s,u=Array(c);if(o===t.length-1){for(a=c;a>=0;a--)u[a]=i[a+s];return u}for(a=c;a>=0;a--)u[a]=r(i[a+s],o+1);return u}(r,0)},numeric.setBlock=function(r,e,n,t){var i=numeric.dim(r);return function r(t,o,a){var s,c=e[a],u=n[a]-c;if(a===i.length-1)for(s=u;s>=0;s--)t[s+c]=o[s];for(s=u;s>=0;s--)r(t[s+c],o[s],a+1)}(r,t,0),r},numeric.getRange=function(r,e,n){var t,i,o,a,s=e.length,c=n.length,u=Array(s);for(t=s-1;-1!==t;--t)for(u[t]=Array(c),o=u[t],a=r[e[t]],i=c-1;-1!==i;--i)o[i]=a[n[i]];return u},numeric.blockMatrix=function(r){var e=numeric.dim(r);if(e.length<4)return numeric.blockMatrix([r]);var n,t,i,o,a,s=e[0],c=e[1];for(n=0,t=0,i=0;i<s;++i)n+=r[i][0].length;for(o=0;o<c;++o)t+=r[0][o][0].length;var u=Array(n);for(i=0;i<n;++i)u[i]=Array(t);var h,m,l,f,d,p=0;for(i=0;i<s;++i){for(h=t,o=c-1;-1!==o;--o)for(h-=(a=r[i][o])[0].length,l=a.length-1;-1!==l;--l)for(d=a[l],m=u[p+l],f=d.length-1;-1!==f;--f)m[h+f]=d[f];p+=r[i][0].length}return u},numeric.tensor=function(r,e){if("number"==typeof r||"number"==typeof e)return numeric.mul(r,e);var n=numeric.dim(r),t=numeric.dim(e);if(1!==n.length||1!==t.length)throw new Error("numeric: tensor product is only defined for vectors");var i,o,a,s,c=n[0],u=t[0],h=Array(c);for(o=c-1;o>=0;o--){for(i=Array(u),s=r[o],a=u-1;a>=3;--a)i[a]=s*e[a],i[--a]=s*e[a],i[--a]=s*e[a],i[--a]=s*e[a];for(;a>=0;)i[a]=s*e[a],--a;h[o]=i}return h},numeric.T=function(r,e){this.x=r,this.y=e},numeric.t=function(r,e){return new numeric.T(r,e)},numeric.Tbinop=function(r,e,n,t,i){var o;if(numeric.indexOf,"string"!=typeof i)for(o in i="",numeric)numeric.hasOwnProperty(o)&&(r.indexOf(o)>=0||e.indexOf(o)>=0||n.indexOf(o)>=0||t.indexOf(o)>=0)&&o.length>1&&(i+="var "+o+" = numeric."+o+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+i+"\nif(x.y) {  if(y.y) {    return new numeric.T("+t+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+e+");\n}\nreturn new numeric.T("+r+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var r=numeric.mul,e=numeric.div;if(this.y){var n=numeric.add(r(this.x,this.x),r(this.y,this.y));return new numeric.T(e(this.x,n),e(numeric.neg(this.y),n))}return new T(e(1,this.x))},numeric.T.prototype.div=function(r){if(r instanceof numeric.T||(r=new numeric.T(r)),r.y)return this.mul(r.reciprocal());var e=numeric.div;return this.y?new numeric.T(e(this.x,r.x),e(this.y,r.x)):new numeric.T(e(this.x,r.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var r=numeric.transpose,e=this.x,n=this.y;return n?new numeric.T(r(e),r(n)):new numeric.T(r(e))},numeric.T.prototype.transjugate=function(){var r=numeric.transpose,e=this.x,n=this.y;return n?new numeric.T(r(e),numeric.negtranspose(n)):new numeric.T(r(e))},numeric.Tunop=function(r,e,n){return"string"!=typeof n&&(n=""),Function("var x = this;\n"+n+"\nif(x.y) {  "+e+";\n}\n"+r+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var r=this;if(void 0===r.y)return new numeric.T(numeric.inv(r.x));var e,n,t,i,o,a,s,c,u,h,m,l,f,d,p,M,g,x,y=r.x.length,v=numeric.identity(y),b=numeric.rep([y,y],0),T=numeric.clone(r.x),w=numeric.clone(r.y);for(u=0;u<y;u++){for(l=(d=T[u][u])*d+(p=w[u][u])*p,m=u,h=u+1;h<y;h++)(f=(d=T[h][u])*d+(p=w[h][u])*p)>l&&(m=h,l=f);for(m!==u&&(x=T[u],T[u]=T[m],T[m]=x,x=w[u],w[u]=w[m],w[m]=x,x=v[u],v[u]=v[m],v[m]=x,x=b[u],b[u]=b[m],b[m]=x),e=T[u],n=w[u],o=v[u],a=b[u],d=e[u],p=n[u],h=u+1;h<y;h++)M=e[h],g=n[h],e[h]=(M*d+g*p)/l,n[h]=(g*d-M*p)/l;for(h=0;h<y;h++)M=o[h],g=a[h],o[h]=(M*d+g*p)/l,a[h]=(g*d-M*p)/l;for(h=u+1;h<y;h++){for(t=T[h],i=w[h],s=v[h],c=b[h],d=t[u],p=i[u],m=u+1;m<y;m++)M=e[m],g=n[m],t[m]-=M*d-g*p,i[m]-=g*d+M*p;for(m=0;m<y;m++)M=o[m],g=a[m],s[m]-=M*d-g*p,c[m]-=g*d+M*p}}for(u=y-1;u>0;u--)for(o=v[u],a=b[u],h=u-1;h>=0;h--)for(s=v[h],c=b[h],d=T[h][u],p=w[h][u],m=y-1;m>=0;m--)M=o[m],g=a[m],s[m]-=d*M-p*g,c[m]-=d*g+p*M;return new numeric.T(v,b)},numeric.T.prototype.get=function(r){var e,n=this.x,t=this.y,i=0,o=r.length;if(t){for(;i<o;)n=n[e=r[i]],t=t[e],i++;return new numeric.T(n,t)}for(;i<o;)n=n[e=r[i]],i++;return new numeric.T(n)},numeric.T.prototype.set=function(r,e){var n,t=this.x,i=this.y,o=0,a=r.length,s=e.x,c=e.y;if(0===a)return c?this.y=c:i&&(this.y=void 0),this.x=t,this;if(c){for(i||(i=numeric.rep(numeric.dim(t),0),this.y=i);o<a-1;)t=t[n=r[o]],i=i[n],o++;return t[n=r[o]]=s,i[n]=c,this}if(i){for(;o<a-1;)t=t[n=r[o]],i=i[n],o++;return t[n=r[o]]=s,i[n]=s instanceof Array?numeric.rep(numeric.dim(s),0):0,this}for(;o<a-1;)t=t[n=r[o]],o++;return t[n=r[o]]=s,this},numeric.T.prototype.getRows=function(r,e){var n,t,i=e-r+1,o=Array(i),a=this.x,s=this.y;for(n=r;n<=e;n++)o[n-r]=a[n];if(s){for(t=Array(i),n=r;n<=e;n++)t[n-r]=s[n];return new numeric.T(o,t)}return new numeric.T(o)},numeric.T.prototype.setRows=function(r,e,n){var t,i=this.x,o=this.y,a=n.x,s=n.y;for(t=r;t<=e;t++)i[t]=a[t-r];if(s)for(o||(o=numeric.rep(numeric.dim(i),0),this.y=o),t=r;t<=e;t++)o[t]=s[t-r];else if(o)for(t=r;t<=e;t++)o[t]=numeric.rep([a[t-r].length],0);return this},numeric.T.prototype.getRow=function(r){var e=this.x,n=this.y;return n?new numeric.T(e[r],n[r]):new numeric.T(e[r])},numeric.T.prototype.setRow=function(r,e){var n=this.x,t=this.y,i=e.x,o=e.y;return n[r]=i,o?(t||(t=numeric.rep(numeric.dim(n),0),this.y=t),t[r]=o):t&&(t=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(r,e){var n=this.x,t=this.y,i=numeric.getBlock;return t?new numeric.T(i(n,r,e),i(t,r,e)):new numeric.T(i(n,r,e))},numeric.T.prototype.setBlock=function(r,e,n){n instanceof numeric.T||(n=new numeric.T(n));var t=this.x,i=this.y,o=numeric.setBlock,a=n.x,s=n.y;if(s)return i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),o(t,r,e,a),o(i,r,e,s),this;o(t,r,e,a),i&&o(i,r,e,numeric.rep(numeric.dim(a),0))},numeric.T.rep=function(r,e){var n=numeric.T;e instanceof n||(e=new n(e));var t=e.x,i=e.y,o=numeric.rep;return i?new n(o(r,t),o(r,i)):new n(o(r,t))},numeric.T.diag=function(r){r instanceof numeric.T||(r=new numeric.T(r));var e=r.x,n=r.y,t=numeric.diag;return n?new numeric.T(t(e),t(n)):new numeric.T(t(e))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(r){return new numeric.T(numeric.identity(r))},numeric.T.prototype.getDiag=function(){var r=numeric,e=this.x,n=this.y;return n?new r.T(r.getDiag(e),r.getDiag(n)):new r.T(r.getDiag(e))},numeric.house=function(r){var e=numeric.clone(r),n=(r[0]>=0?1:-1)*numeric.norm2(r);e[0]+=n;var t=numeric.norm2(e);if(0===t)throw new Error("eig: internal error");return numeric.div(e,t)},numeric.toUpperHessenberg=function(r){var e=numeric.dim(r);if(2!==e.length||e[0]!==e[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,t,i,o,a,s,c,u,h,m,l=e[0],f=numeric.clone(r),d=numeric.identity(l);for(t=0;t<l-2;t++){for(o=Array(l-t-1),n=t+1;n<l;n++)o[n-t-1]=f[n][t];if(numeric.norm2(o)>0){for(a=numeric.house(o),s=numeric.getBlock(f,[t+1,t],[l-1,l-1]),c=numeric.tensor(a,numeric.dot(a,s)),n=t+1;n<l;n++)for(u=f[n],h=c[n-t-1],i=t;i<l;i++)u[i]-=2*h[i-t];for(s=numeric.getBlock(f,[0,t+1],[l-1,l-1]),c=numeric.tensor(numeric.dot(s,a),a),n=0;n<l;n++)for(u=f[n],h=c[n],i=t+1;i<l;i++)u[i]-=2*h[i-t-1];for(s=Array(l-t-1),n=t+1;n<l;n++)s[n-t-1]=d[n];for(c=numeric.tensor(a,numeric.dot(a,s)),n=t+1;n<l;n++)for(m=d[n],h=c[n-t-1],i=0;i<l;i++)m[i]-=2*h[i]}}return{H:f,Q:d}},numeric.epsilon=2220446049250313e-31,numeric.QRFrancis=function(r,e){void 0===e&&(e=1e4),r=numeric.clone(r),numeric.clone(r);var n,t,i,o,a,s,c,u,h,m,l,f,d,p,M,g,x,y,v=numeric.dim(r)[0],b=numeric.identity(v);if(v<3)return{Q:b,B:[[0,v-1]]};var T=numeric.epsilon;for(y=0;y<e;y++){for(g=0;g<v-1;g++)if(Math.abs(r[g+1][g])<T*(Math.abs(r[g][g])+Math.abs(r[g+1][g+1]))){var w=numeric.QRFrancis(numeric.getBlock(r,[0,0],[g,g]),e),A=numeric.QRFrancis(numeric.getBlock(r,[g+1,g+1],[v-1,v-1]),e);for(f=Array(g+1),M=0;M<=g;M++)f[M]=b[M];for(d=numeric.dot(w.Q,f),M=0;M<=g;M++)b[M]=d[M];for(f=Array(v-g-1),M=g+1;M<v;M++)f[M-g-1]=b[M];for(d=numeric.dot(A.Q,f),M=g+1;M<v;M++)b[M]=d[M-g-1];return{Q:b,B:w.B.concat(numeric.add(A.B,g+1))}}var _,z,S;for(i=r[v-2][v-2],o=r[v-2][v-1],a=r[v-1][v-2],u=i+(s=r[v-1][v-1]),c=i*s-o*a,h=numeric.getBlock(r,[0,0],[2,2]),u*u>=4*c?(_=.5*(u+Math.sqrt(u*u-4*c)),z=.5*(u-Math.sqrt(u*u-4*c)),h=numeric.add(numeric.sub(numeric.dot(h,h),numeric.mul(h,_+z)),numeric.diag(numeric.rep([3],_*z)))):h=numeric.add(numeric.sub(numeric.dot(h,h),numeric.mul(h,u)),numeric.diag(numeric.rep([3],c))),n=[h[0][0],h[1][0],h[2][0]],t=numeric.house(n),f=[r[0],r[1],r[2]],d=numeric.tensor(t,numeric.dot(t,f)),M=0;M<3;M++)for(l=r[M],p=d[M],x=0;x<v;x++)l[x]-=2*p[x];for(f=numeric.getBlock(r,[0,0],[v-1,2]),d=numeric.tensor(numeric.dot(f,t),t),M=0;M<v;M++)for(l=r[M],p=d[M],x=0;x<3;x++)l[x]-=2*p[x];for(f=[b[0],b[1],b[2]],d=numeric.tensor(t,numeric.dot(t,f)),M=0;M<3;M++)for(m=b[M],p=d[M],x=0;x<v;x++)m[x]-=2*p[x];for(g=0;g<v-2;g++){for(x=g;x<=g+1;x++)if(Math.abs(r[x+1][x])<T*(Math.abs(r[x][x])+Math.abs(r[x+1][x+1]))){for(w=numeric.QRFrancis(numeric.getBlock(r,[0,0],[x,x]),e),A=numeric.QRFrancis(numeric.getBlock(r,[x+1,x+1],[v-1,v-1]),e),f=Array(x+1),M=0;M<=x;M++)f[M]=b[M];for(d=numeric.dot(w.Q,f),M=0;M<=x;M++)b[M]=d[M];for(f=Array(v-x-1),M=x+1;M<v;M++)f[M-x-1]=b[M];for(d=numeric.dot(A.Q,f),M=x+1;M<v;M++)b[M]=d[M-x-1];return{Q:b,B:w.B.concat(numeric.add(A.B,x+1))}}for(S=Math.min(v-1,g+3),n=Array(S-g),M=g+1;M<=S;M++)n[M-g-1]=r[M][g];for(t=numeric.house(n),f=numeric.getBlock(r,[g+1,g],[S,v-1]),d=numeric.tensor(t,numeric.dot(t,f)),M=g+1;M<=S;M++)for(l=r[M],p=d[M-g-1],x=g;x<v;x++)l[x]-=2*p[x-g];for(f=numeric.getBlock(r,[0,g+1],[v-1,S]),d=numeric.tensor(numeric.dot(f,t),t),M=0;M<v;M++)for(l=r[M],p=d[M],x=g+1;x<=S;x++)l[x]-=2*p[x-g-1];for(f=Array(S-g),M=g+1;M<=S;M++)f[M-g-1]=b[M];for(d=numeric.tensor(t,numeric.dot(t,f)),M=g+1;M<=S;M++)for(m=b[M],p=d[M-g-1],x=0;x<v;x++)m[x]-=2*p[x]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(r,e){var n,t,i,o,a,s,c,u,h,m,l,f,d,p,M,g,x=numeric.toUpperHessenberg(r),y=numeric.QRFrancis(x.H,e),v=numeric.T,b=r.length,T=y.B,w=numeric.dot(y.Q,numeric.dot(x.H,numeric.transpose(y.Q))),A=new v(numeric.dot(y.Q,x.Q)),_=T.length,z=Math.sqrt;for(t=0;t<_;t++)if((n=T[t][0])===T[t][1]);else{if(o=n+1,a=w[n][n],s=w[n][o],c=w[o][n],u=w[o][o],0===s&&0===c)continue;(m=(h=-a-u)*h-4*(a*u-s*c))>=0?((M=(a-(l=h<0?-.5*(h-z(m)):-.5*(h+z(m))))*(a-l)+s*s)>(g=c*c+(u-l)*(u-l))?(d=(a-l)/(M=z(M)),p=s/M):(d=c/(g=z(g)),p=(u-l)/g),i=new v([[p,-d],[d,p]]),A.setRows(n,o,i.dot(A.getRows(n,o)))):(l=-.5*h,f=.5*z(-m),(M=(a-l)*(a-l)+s*s)>(g=c*c+(u-l)*(u-l))?(d=(a-l)/(M=z(M+f*f)),p=s/M,l=0,f/=M):(d=c/(g=z(g+f*f)),p=(u-l)/g,l=f/g,f=0),i=new v([[p,-d],[d,p]],[[l,f],[f,-l]]),A.setRows(n,o,i.dot(A.getRows(n,o))))}var S=A.dot(r).dot(A.transjugate()),I=(b=r.length,numeric.T.identity(b));for(o=0;o<b;o++)if(o>0)for(t=o-1;t>=0;t--){var P=S.get([t,t]),k=S.get([o,o]);numeric.neq(P.x,k.x)||numeric.neq(P.y,k.y)?(l=S.getRow(t).getBlock([t],[o-1]),f=I.getRow(o).getBlock([t],[o-1]),I.set([o,t],S.get([t,o]).neg().sub(l.dot(f)).div(P.sub(k)))):I.setRow(o,I.getRow(t))}for(o=0;o<b;o++)l=I.getRow(o),I.setRow(o,l.div(l.norm2()));return I=I.transpose(),I=A.transjugate().dot(I),{lambda:S.getDiag(),E:I}},numeric.ccsSparse=function(r){var e,n,t,i=r.length,o=[];for(n=i-1;-1!==n;--n)for(t in e=r[n]){for(t=parseInt(t);t>=o.length;)o[o.length]=0;0!==e[t]&&o[t]++}var a=o.length,s=Array(a+1);for(s[0]=0,n=0;n<a;++n)s[n+1]=s[n]+o[n];var c=Array(s[a]),u=Array(s[a]);for(n=i-1;-1!==n;--n)for(t in e=r[n])0!==e[t]&&(o[t]--,c[s[t]+o[t]]=n,u[s[t]+o[t]]=e[t]);return[s,c,u]},numeric.ccsFull=function(r){var e,n,t,i,o=r[0],a=r[1],s=r[2],c=numeric.ccsDim(r),u=c[0],h=c[1],m=numeric.rep([u,h],0);for(e=0;e<h;e++)for(t=o[e],i=o[e+1],n=t;n<i;++n)m[a[n]][e]=s[n];return m},numeric.ccsTSolve=function(r,e,n,t,i){var o,a,s,c,u,h,m,l=r[0],f=r[1],d=r[2],p=l.length-1,M=Math.max,g=0;function x(r){var e;if(0===n[r]){for(n[r]=1,e=l[r];e<l[r+1];++e)x(f[e]);i[g]=r,++g}}for(void 0===t&&(n=numeric.rep([p],0)),void 0===t&&(t=numeric.linspace(0,n.length-1)),void 0===i&&(i=[]),o=t.length-1;-1!==o;--o)x(t[o]);for(i.length=g,o=i.length-1;-1!==o;--o)n[i[o]]=0;for(o=t.length-1;-1!==o;--o)a=t[o],n[a]=e[a];for(o=i.length-1;-1!==o;--o){for(a=i[o],s=l[a],c=M(l[a+1],s),u=s;u!==c;++u)if(f[u]===a){n[a]/=d[u];break}for(m=n[a],u=s;u!==c;++u)(h=f[u])!==a&&(n[h]-=m*d[u])}return n},numeric.ccsDFS=function(r){this.k=Array(r),this.k1=Array(r),this.j=Array(r)},numeric.ccsDFS.prototype.dfs=function(r,e,n,t,i,o){var a,s,c,u=0,h=i.length,m=this.k,l=this.k1,f=this.j;if(0===t[r])for(t[r]=1,f[0]=r,m[0]=s=e[r],l[0]=c=e[r+1];;)if(s>=c){if(i[h]=f[u],0===u)return;++h,s=m[--u],c=l[u]}else 0===t[a=o[n[s]]]?(t[a]=1,m[u]=s,f[++u]=a,s=e[a],l[u]=c=e[a+1]):++s},numeric.ccsLPSolve=function(r,e,n,t,i,o,a){var s,c,u,h,m,l,f,d,p,M=r[0],g=r[1],x=r[2],y=(M.length,e[0]),v=e[1],b=e[2];for(c=y[i],u=y[i+1],t.length=0,s=c;s<u;++s)a.dfs(o[v[s]],M,g,n,t,o);for(s=t.length-1;-1!==s;--s)n[t[s]]=0;for(s=c;s!==u;++s)n[h=o[v[s]]]=b[s];for(s=t.length-1;-1!==s;--s){for(m=M[h=t[s]],l=M[h+1],f=m;f<l;++f)if(o[g[f]]===h){n[h]/=x[f];break}for(p=n[h],f=m;f<l;++f)(d=o[g[f]])!==h&&(n[d]-=p*x[f])}return n},numeric.ccsLUP1=function(r,e){var n,t,i,o,a,s,c,u=r[0].length-1,h=[numeric.rep([u+1],0),[],[]],m=[numeric.rep([u+1],0),[],[]],l=h[0],f=h[1],d=h[2],p=m[0],M=m[1],g=m[2],x=numeric.rep([u],0),y=numeric.rep([u],0),v=numeric.ccsLPSolve,b=(Math.max,Math.abs),T=numeric.linspace(0,u-1),w=numeric.linspace(0,u-1),A=new numeric.ccsDFS(u);for(void 0===e&&(e=1),n=0;n<u;++n){for(v(h,r,x,y,n,w,A),o=-1,a=-1,t=y.length-1;-1!==t;--t)(i=y[t])<=n||(s=b(x[i]))>o&&(a=i,o=s);for(b(x[n])<e*o&&(t=T[n],o=T[a],T[n]=o,w[o]=n,T[a]=t,w[t]=a,o=x[n],x[n]=x[a],x[a]=o),o=l[n],a=p[n],c=x[n],f[o]=T[n],d[o]=1,++o,t=y.length-1;-1!==t;--t)s=x[i=y[t]],y[t]=0,x[i]=0,i<=n?(M[a]=i,g[a]=s,++a):(f[o]=T[i],d[o]=s/c,++o);l[n+1]=o,p[n+1]=a}for(t=f.length-1;-1!==t;--t)f[t]=w[f[t]];return{L:h,U:m,P:T,Pinv:w}},numeric.ccsDFS0=function(r){this.k=Array(r),this.k1=Array(r),this.j=Array(r)},numeric.ccsDFS0.prototype.dfs=function(r,e,n,t,i,o,a){var s,c,u,h=0,m=i.length,l=this.k,f=this.k1,d=this.j;if(0===t[r])for(t[r]=1,d[0]=r,l[0]=c=e[o[r]],f[0]=u=e[o[r]+1];;){if(isNaN(c))throw new Error("Ow!");if(c>=u){if(i[m]=o[d[h]],0===h)return;++m,c=l[--h],u=f[h]}else 0===t[s=n[c]]?(t[s]=1,l[h]=c,d[++h]=s,c=e[s=o[s]],f[h]=u=e[s+1]):++c}},numeric.ccsLPSolve0=function(r,e,n,t,i,o,a,s){var c,u,h,m,l,f,d,p,M,g=r[0],x=r[1],y=r[2],v=(g.length,e[0]),b=e[1],T=e[2];for(u=v[i],h=v[i+1],t.length=0,c=u;c<h;++c)s.dfs(b[c],g,x,n,t,o,a);for(c=t.length-1;-1!==c;--c)n[a[m=t[c]]]=0;for(c=u;c!==h;++c)n[m=b[c]]=T[c];for(c=t.length-1;-1!==c;--c){for(p=a[m=t[c]],l=g[m],f=g[m+1],d=l;d<f;++d)if(x[d]===p){n[p]/=y[d];break}for(M=n[p],d=l;d<f;++d)n[x[d]]-=M*y[d];n[p]=M}},numeric.ccsLUP0=function(r,e){var n,t,i,o,a,s,c,u=r[0].length-1,h=[numeric.rep([u+1],0),[],[]],m=[numeric.rep([u+1],0),[],[]],l=h[0],f=h[1],d=h[2],p=m[0],M=m[1],g=m[2],x=numeric.rep([u],0),y=numeric.rep([u],0),v=numeric.ccsLPSolve0,b=(Math.max,Math.abs),T=numeric.linspace(0,u-1),w=numeric.linspace(0,u-1),A=new numeric.ccsDFS0(u);for(void 0===e&&(e=1),n=0;n<u;++n){for(v(h,r,x,y,n,w,T,A),o=-1,a=-1,t=y.length-1;-1!==t;--t)(i=y[t])<=n||(s=b(x[T[i]]))>o&&(a=i,o=s);for(b(x[T[n]])<e*o&&(t=T[n],o=T[a],T[n]=o,w[o]=n,T[a]=t,w[t]=a),o=l[n],a=p[n],c=x[T[n]],f[o]=T[n],d[o]=1,++o,t=y.length-1;-1!==t;--t)s=x[T[i=y[t]]],y[t]=0,x[T[i]]=0,i<=n?(M[a]=i,g[a]=s,++a):(f[o]=T[i],d[o]=s/c,++o);l[n+1]=o,p[n+1]=a}for(t=f.length-1;-1!==t;--t)f[t]=w[f[t]];return{L:h,U:m,P:T,Pinv:w}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(r){return[numeric.sup(r[1])+1,r[0].length-1]},numeric.ccsGetBlock=function(r,e,n){var t=numeric.ccsDim(r),i=t[0],o=t[1];void 0===e?e=numeric.linspace(0,i-1):"number"==typeof e&&(e=[e]),void 0===n?n=numeric.linspace(0,o-1):"number"==typeof n&&(n=[n]);var a,s,c,u,h=e.length,m=n.length,l=numeric.rep([o],0),f=[],d=[],p=[l,f,d],M=r[0],g=r[1],x=r[2],y=numeric.rep([i],0),v=0,b=numeric.rep([i],0);for(s=0;s<m;++s){var T=M[u=n[s]],w=M[u+1];for(a=T;a<w;++a)b[c=g[a]]=1,y[c]=x[a];for(a=0;a<h;++a)b[e[a]]&&(f[v]=a,d[v]=y[e[a]],++v);for(a=T;a<w;++a)b[c=g[a]]=0;l[s+1]=v}return p},numeric.ccsDot=function(r,e){var n,t,i,o,a,s,c,u,h,m,l,f=r[0],d=r[1],p=r[2],M=e[0],g=e[1],x=e[2],y=numeric.ccsDim(r),v=numeric.ccsDim(e),b=y[0],T=(y[1],v[1]),w=numeric.rep([b],0),A=numeric.rep([b],0),_=Array(b),z=numeric.rep([T],0),S=[],I=[],P=[z,S,I];for(i=0;i!==T;++i){for(o=M[i],a=M[i+1],h=0,t=o;t<a;++t)for(m=g[t],l=x[t],s=f[m],c=f[m+1],n=s;n<c;++n)0===A[u=d[n]]&&(_[h]=u,A[u]=1,h+=1),w[u]=w[u]+p[n]*l;for(a=(o=z[i])+h,z[i+1]=a,t=h-1;-1!==t;--t)l=o+t,n=_[t],S[l]=n,I[l]=w[n],A[n]=0,w[n]=0;z[i+1]=z[i]+h}return P},numeric.ccsLUPSolve=function(r,e){var n=r.L,t=r.U,i=(r.P,e[0]),o=!1;"object"!=typeof i&&(i=(e=[[0,e.length],numeric.linspace(0,e.length-1),e])[0],o=!0);var a,s,c,u,h,m,l=e[1],f=e[2],d=n[0].length-1,p=i.length-1,M=numeric.rep([d],0),g=Array(d),x=numeric.rep([d],0),y=Array(d),v=numeric.rep([p+1],0),b=[],T=[],w=numeric.ccsTSolve,A=0;for(a=0;a<p;++a){for(h=0,c=i[a],u=i[a+1],s=c;s<u;++s)m=r.Pinv[l[s]],y[h]=m,x[m]=f[s],++h;for(y.length=h,w(n,x,M,y,g),s=y.length-1;-1!==s;--s)x[y[s]]=0;if(w(t,M,x,g,y),o)return x;for(s=g.length-1;-1!==s;--s)M[g[s]]=0;for(s=y.length-1;-1!==s;--s)m=y[s],b[A]=m,T[A]=x[m],x[m]=0,++A;v[a+1]=A}return[v,b,T]},numeric.ccsbinop=function(r,e){return void 0===e&&(e=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+e+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+r+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(r){var e,n=r[0],t=r[1],i=r[2],o=numeric.sup(t)+1,a=n.length,s=numeric.rep([o],0),c=Array(a),u=Array(a),h=numeric.rep([o],0);for(e=0;e<a;++e)h[t[e]]++;for(e=0;e<o;++e)s[e+1]=s[e]+h[e];var m,l,f=s.slice(0);for(e=0;e<a;++e)c[m=f[l=t[e]]]=n[e],u[m]=i[e],f[l]=f[l]+1;return[s,c,u]},numeric.ccsGather=function(r){var e,n,t,i,o,a=r[0],s=r[1],c=r[2],u=a.length-1,h=s.length,m=Array(h),l=Array(h),f=Array(h);for(o=0,e=0;e<u;++e)for(t=a[e],i=a[e+1],n=t;n!==i;++n)l[o]=e,m[o]=s[n],f[o]=c[n],++o;return[m,l,f]},numeric.sdim=function r(e,n,t){if(void 0===n&&(n=[]),"object"!=typeof e)return n;var i;for(i in void 0===t&&(t=0),t in n||(n[t]=0),e.length>n[t]&&(n[t]=e.length),e)e.hasOwnProperty(i)&&r(e[i],n,t+1);return n},numeric.sclone=function r(e,n,t){void 0===n&&(n=0),void 0===t&&(t=numeric.sdim(e).length);var i,o=Array(e.length);if(n===t-1){for(i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);return o}for(i in e)e.hasOwnProperty(i)&&(o[i]=r(e[i],n+1,t));return o},numeric.sdiag=function(r){var e,n,t=r.length,i=Array(t);for(e=t-1;e>=1;e-=2)n=e-1,i[e]=[],i[e][e]=r[e],i[n]=[],i[n][n]=r[n];return 0===e&&(i[0]=[],i[0][0]=r[e]),i},numeric.sidentity=function(r){return numeric.sdiag(numeric.rep([r],1))},numeric.stranspose=function(r){var e,n,t,i=[];for(e in r.length,r)if(r.hasOwnProperty(e))for(n in t=r[e])t.hasOwnProperty(n)&&("object"!=typeof i[n]&&(i[n]=[]),i[n][e]=t[n]);return i},numeric.sLUP=function(r,e){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(r,e){var n,t,i,o,a,s,c,u=r.length,h=(e.length,numeric.stranspose(e)),m=h.length,l=Array(u);for(i=u-1;i>=0;i--){for(c=[],n=r[i],a=m-1;a>=0;a--){for(o in s=0,t=h[a],n)n.hasOwnProperty(o)&&o in t&&(s+=n[o]*t[o]);s&&(c[a]=s)}l[i]=c}return l},numeric.sdotMV=function(r,e){var n,t,i,o,a=r.length,s=Array(a);for(t=a-1;t>=0;t--){for(i in o=0,n=r[t])n.hasOwnProperty(i)&&e[i]&&(o+=n[i]*e[i]);o&&(s[t]=o)}return s},numeric.sdotVM=function(r,e){var n,t,i,o,a=[];for(n in r)if(r.hasOwnProperty(n))for(t in i=e[n],o=r[n],i)i.hasOwnProperty(t)&&(a[t]||(a[t]=0),a[t]+=o*i[t]);return a},numeric.sdotVV=function(r,e){var n,t=0;for(n in r)r[n]&&e[n]&&(t+=r[n]*e[n]);return t},numeric.sdot=function(r,e){var n=numeric.sdim(r).length,t=numeric.sdim(e).length;switch(1e3*n+t){case 0:return r*e;case 1001:return numeric.sdotVV(r,e);case 2001:return numeric.sdotMV(r,e);case 1002:return numeric.sdotVM(r,e);case 2002:return numeric.sdotMM(r,e);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+t)}},numeric.sscatter=function(r){var e,n,t,i,o=r[0].length,a=r.length,s=[];for(n=o-1;n>=0;--n)if(r[a-1][n]){for(i=s,t=0;t<a-2;t++)i[e=r[t][n]]||(i[e]=[]),i=i[e];i[r[t][n]]=r[t+1][n]}return s},numeric.sgather=function r(e,n,t){var i,o,a;for(o in void 0===n&&(n=[]),void 0===t&&(t=[]),i=t.length,e)if(e.hasOwnProperty(o))if(t[i]=parseInt(o),"number"==typeof(a=e[o])){if(a){if(0===n.length)for(o=i+1;o>=0;--o)n[o]=[];for(o=i;o>=0;--o)n[o].push(t[o]);n[i+1].push(a)}}else r(a,n,t);return t.length>i&&t.pop(),n},numeric.cLU=function(r){var e,n,t,i,o,a,s=r[0],c=r[1],u=r[2],h=s.length,m=0;for(e=0;e<h;e++)s[e]>m&&(m=s[e]);m++;var l,f=Array(m),d=Array(m),p=numeric.rep([m],1/0),M=numeric.rep([m],-1/0);for(t=0;t<h;t++)e=s[t],(n=c[t])<p[e]&&(p[e]=n),n>M[e]&&(M[e]=n);for(e=0;e<m-1;e++)M[e]>M[e+1]&&(M[e+1]=M[e]);for(e=m-1;e>=1;e--)p[e]<p[e-1]&&(p[e-1]=p[e]);for(e=0;e<m;e++)d[e]=numeric.rep([M[e]-p[e]+1],0),f[e]=numeric.rep([e-p[e]],0),p[e],M[e];for(t=0;t<h;t++)d[e=s[t]][c[t]-p[e]]=u[t];for(e=0;e<m-1;e++)for(i=e-p[e],y=d[e],n=e+1;p[n]<=e&&n<m;n++)if(o=e-p[n],a=M[e]-e,l=(v=d[n])[o]/y[i]){for(t=1;t<=a;t++)v[t+o]-=l*y[t+i];f[n][e-p[n]]=l}var g,x,y=[],v=[],b=[],T=[],w=[],A=[];for(h=0,g=0,e=0;e<m;e++){for(i=p[e],o=M[e],x=d[e],n=e;n<=o;n++)x[n-i]&&(y[h]=e,v[h]=n,b[h]=x[n-i],h++);for(x=f[e],n=i;n<e;n++)x[n-i]&&(T[g]=e,w[g]=n,A[g]=x[n-i],g++);T[g]=e,w[g]=e,A[g]=1,g++}return{U:[y,v,b],L:[T,w,A]}},numeric.cLUsolve=function(r,e){var n,t,i=r.L,o=r.U,a=numeric.clone(e),s=i[0],c=i[1],u=i[2],h=o[0],m=o[1],l=o[2],f=h.length,d=(s.length,a.length);for(t=0,n=0;n<d;n++){for(;c[t]<n;)a[n]-=u[t]*a[c[t]],t++;t++}for(t=f-1,n=d-1;n>=0;n--){for(;m[t]>n;)a[n]-=l[t]*a[m[t]],t--;a[n]/=l[t],t--}return a},numeric.cgrid=function(r,e){"number"==typeof r&&(r=[r,r]);var n,t,i,o=numeric.rep(r,-1);for("function"!=typeof e&&(e="L"===e?function(e,n){return e>=r[0]/2||n<r[1]/2}:function(r,e){return!0}),i=0,n=1;n<r[0]-1;n++)for(t=1;t<r[1]-1;t++)e(n,t)&&(o[n][t]=i,i++);return o},numeric.cdelsq=function(r){var e,n,t,i,o,a=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(r),c=s[0],u=s[1],h=[],m=[],l=[];for(e=1;e<c-1;e++)for(n=1;n<u-1;n++)if(!(r[e][n]<0)){for(t=0;t<4;t++)i=e+a[t][0],o=n+a[t][1],r[i][o]<0||(h.push(r[e][n]),m.push(r[i][o]),l.push(-1));h.push(r[e][n]),m.push(r[e][n]),l.push(4)}return[h,m,l]},numeric.cdotMV=function(r,e){var n,t,i,o=r[0],a=r[1],s=r[2],c=o.length;for(i=0,t=0;t<c;t++)o[t]>i&&(i=o[t]);for(i++,n=numeric.rep([i],0),t=0;t<c;t++)n[o[t]]+=s[t]*e[a[t]];return n},numeric.Spline=function(r,e,n,t,i){this.x=r,this.yl=e,this.yr=n,this.kl=t,this.kr=i},numeric.Spline.prototype._at=function(r,e){var n,t,i,o=this.x,a=this.yl,s=this.yr,c=this.kl,u=this.kr,h=numeric.add,m=numeric.sub,l=numeric.mul;n=m(l(c[e],o[e+1]-o[e]),m(s[e+1],a[e])),t=h(l(u[e+1],o[e]-o[e+1]),m(s[e+1],a[e]));var f=(i=(r-o[e])/(o[e+1]-o[e]))*(1-i);return h(h(h(l(1-i,a[e]),l(i,s[e+1])),l(n,f*(1-i))),l(t,f*i))},numeric.Spline.prototype.at=function(r){if("number"==typeof r){var e,n,t,i=this.x,o=i.length,a=Math.floor;for(e=0,n=o-1;n-e>1;)i[t=a((e+n)/2)]<=r?e=t:n=t;return this._at(r,e)}o=r.length;var s,c=Array(o);for(s=o-1;-1!==s;--s)c[s]=this.at(r[s]);return c},numeric.Spline.prototype.diff=function(){var r,e,n,t=this.x,i=this.yl,o=this.yr,a=this.kl,s=this.kr,c=i.length,u=a,h=s,m=Array(c),l=Array(c),f=numeric.add,d=numeric.mul,p=numeric.div,M=numeric.sub;for(r=c-1;-1!==r;--r)e=t[r+1]-t[r],n=M(o[r+1],i[r]),m[r]=p(f(d(n,6),d(a[r],-4*e),d(s[r+1],-2*e)),e*e),l[r+1]=p(f(d(n,-6),d(a[r],2*e),d(s[r+1],4*e)),e*e);return new numeric.Spline(t,u,h,m,l)},numeric.Spline.prototype.roots=function(){function r(r){return r*r}var e=[],n=this.x,t=this.yl,i=this.yr,o=this.kl,a=this.kr;"number"==typeof t[0]&&(t=[t],i=[i],o=[o],a=[a]);var s,c,u,h,m,l,f,d,p,M,g,x,y,v,b,T,w,A,_,z,S,I,P,k=t.length,j=n.length-1,D=(e=Array(k),Math.sqrt);for(s=0;s!==k;++s){for(h=t[s],m=i[s],l=o[s],f=a[s],d=[],c=0;c!==j;c++){for(c>0&&m[c]*h[c]<0&&d.push(n[c]),T=n[c+1]-n[c],n[c],g=h[c],x=m[c+1],p=l[c]/T,y=(M=f[c+1]/T)+3*g+2*p-3*x,v=3*(M+p+2*(g-x)),(b=r(p-M+3*(g-x))+12*M*g)<=0?w=(A=y/v)>n[c]&&A<n[c+1]?[n[c],A,n[c+1]]:[n[c],n[c+1]]:(A=(y-D(b))/v,_=(y+D(b))/v,w=[n[c]],A>n[c]&&A<n[c+1]&&w.push(A),_>n[c]&&_<n[c+1]&&w.push(_),w.push(n[c+1])),S=w[0],A=this._at(S,c),u=0;u<w.length-1;u++)if(I=w[u+1],_=this._at(I,c),0!==A)if(0===_||A*_>0)S=I,A=_;else{for(var C=0;!((P=(A*I-_*S)/(A-_))<=S||P>=I);)if((z=this._at(P,c))*_>0)I=P,_=z,-1===C&&(A*=.5),C=-1;else{if(!(z*A>0))break;S=P,A=z,1===C&&(_*=.5),C=1}d.push(P),S=w[u+1],A=this._at(S,c)}else d.push(S),S=I,A=_;0===_&&d.push(I)}e[s]=d}return"number"==typeof this.yl[0]?e[0]:e},numeric.spline=function(r,e,n,t){var i,o=r.length,a=[],s=[],c=[],u=numeric.sub,h=numeric.mul,m=numeric.add;for(i=o-2;i>=0;i--)s[i]=r[i+1]-r[i],c[i]=u(e[i+1],e[i]);"string"!=typeof n&&"string"!=typeof t||(n=t="periodic");var l=[[],[],[]];switch(typeof n){case"undefined":a[0]=h(3/(s[0]*s[0]),c[0]),l[0].push(0,0),l[1].push(0,1),l[2].push(2/s[0],1/s[0]);break;case"string":a[0]=m(h(3/(s[o-2]*s[o-2]),c[o-2]),h(3/(s[0]*s[0]),c[0])),l[0].push(0,0,0),l[1].push(o-2,0,1),l[2].push(1/s[o-2],2/s[o-2]+2/s[0],1/s[0]);break;default:a[0]=n,l[0].push(0),l[1].push(0),l[2].push(1)}for(i=1;i<o-1;i++)a[i]=m(h(3/(s[i-1]*s[i-1]),c[i-1]),h(3/(s[i]*s[i]),c[i])),l[0].push(i,i,i),l[1].push(i-1,i,i+1),l[2].push(1/s[i-1],2/s[i-1]+2/s[i],1/s[i]);switch(typeof t){case"undefined":a[o-1]=h(3/(s[o-2]*s[o-2]),c[o-2]),l[0].push(o-1,o-1),l[1].push(o-2,o-1),l[2].push(1/s[o-2],2/s[o-2]);break;case"string":l[1][l[1].length-1]=0;break;default:a[o-1]=t,l[0].push(o-1),l[1].push(o-1),l[2].push(1)}a="number"!=typeof a[0]?numeric.transpose(a):[a];var f=Array(a.length);if("string"==typeof n)for(i=f.length-1;-1!==i;--i)f[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(l)),a[i]),f[i][o-1]=f[i][0];else for(i=f.length-1;-1!==i;--i)f[i]=numeric.cLUsolve(numeric.cLU(l),a[i]);return f="number"==typeof e[0]?f[0]:numeric.transpose(f),new numeric.Spline(r,e,e,f,f)},numeric.fftpow2=function r(e,n){var t=e.length;if(1!==t){var i,o,a=Math.cos,s=Math.sin,c=Array(t/2),u=Array(t/2),h=Array(t/2),m=Array(t/2);for(o=t/2,i=t-1;-1!==i;--i)h[--o]=e[i],m[o]=n[i],--i,c[o]=e[i],u[o]=n[i];r(c,u),r(h,m),o=t/2;var l,f,d,p=-6.283185307179586/t;for(i=t-1;-1!==i;--i)-1==--o&&(o=t/2-1),f=a(l=p*i),d=s(l),e[i]=c[o]+f*h[o]-d*m[o],n[i]=u[o]+f*m[o]+d*h[o]}},numeric._ifftpow2=function r(e,n){var t=e.length;if(1!==t){var i,o,a=Math.cos,s=Math.sin,c=Array(t/2),u=Array(t/2),h=Array(t/2),m=Array(t/2);for(o=t/2,i=t-1;-1!==i;--i)h[--o]=e[i],m[o]=n[i],--i,c[o]=e[i],u[o]=n[i];r(c,u),r(h,m),o=t/2;var l,f,d,p=6.283185307179586/t;for(i=t-1;-1!==i;--i)-1==--o&&(o=t/2-1),f=a(l=p*i),d=s(l),e[i]=c[o]+f*h[o]-d*m[o],n[i]=u[o]+f*m[o]+d*h[o]}},numeric.ifftpow2=function(r,e){numeric._ifftpow2(r,e),numeric.diveq(r,r.length),numeric.diveq(e,e.length)},numeric.convpow2=function(r,e,n,t){var i,o,a,s,c;for(numeric.fftpow2(r,e),numeric.fftpow2(n,t),i=r.length-1;-1!==i;--i)o=r[i],s=e[i],a=n[i],c=t[i],r[i]=o*a-s*c,e[i]=o*c+s*a;numeric.ifftpow2(r,e)},numeric.T.prototype.fft=function(){var r,e,n=this.x,t=this.y,i=n.length,o=Math.log,a=o(2),s=Math.ceil(o(2*i-1)/a),c=Math.pow(2,s),u=numeric.rep([c],0),h=numeric.rep([c],0),m=Math.cos,l=Math.sin,f=-3.141592653589793/i,d=numeric.rep([c],0),p=numeric.rep([c],0);for(Math.floor(i/2),r=0;r<i;r++)d[r]=n[r];if(void 0!==t)for(r=0;r<i;r++)p[r]=t[r];for(u[0]=1,r=1;r<=c/2;r++)e=f*r*r,u[r]=m(e),h[r]=l(e),u[c-r]=m(e),h[c-r]=l(e);var M=new numeric.T(d,p),g=new numeric.T(u,h);return M=M.mul(g),numeric.convpow2(M.x,M.y,numeric.clone(g.x),numeric.neg(g.y)),(M=M.mul(g)).x.length=i,M.y.length=i,M},numeric.T.prototype.ifft=function(){var r,e,n=this.x,t=this.y,i=n.length,o=Math.log,a=o(2),s=Math.ceil(o(2*i-1)/a),c=Math.pow(2,s),u=numeric.rep([c],0),h=numeric.rep([c],0),m=Math.cos,l=Math.sin,f=3.141592653589793/i,d=numeric.rep([c],0),p=numeric.rep([c],0);for(Math.floor(i/2),r=0;r<i;r++)d[r]=n[r];if(void 0!==t)for(r=0;r<i;r++)p[r]=t[r];for(u[0]=1,r=1;r<=c/2;r++)e=f*r*r,u[r]=m(e),h[r]=l(e),u[c-r]=m(e),h[c-r]=l(e);var M=new numeric.T(d,p),g=new numeric.T(u,h);return M=M.mul(g),numeric.convpow2(M.x,M.y,numeric.clone(g.x),numeric.neg(g.y)),(M=M.mul(g)).x.length=i,M.y.length=i,M.div(i)},numeric.gradient=function(r,e){var n=e.length,t=r(e);if(isNaN(t))throw new Error("gradient: f(x) is a NaN!");var i,o,a,s,c,u,h,m,l,f=Math.max,d=numeric.clone(e),p=Array(n),M=(numeric.div,numeric.sub,f=Math.max,Math.abs),g=Math.min,x=0;for(i=0;i<n;i++)for(var y=f(1e-6*t,1e-8);;){if(++x>20)throw new Error("Numerical gradient fails");if(d[i]=e[i]+y,o=r(d),d[i]=e[i]-y,a=r(d),d[i]=e[i],isNaN(o)||isNaN(a))y/=16;else{if(p[i]=(o-a)/(2*y),s=e[i]-y,c=e[i],u=e[i]+y,h=(o-t)/y,m=(t-a)/y,l=f(M(p[i]),M(t),M(o),M(a),M(s),M(c),M(u),1e-8),!(g(f(M(h-p[i]),M(m-p[i]),M(h-m))/l,y/l)>.001))break;y/=16}}return p},numeric.uncmin=function(r,e,n,t,i,o,a){var s=numeric.gradient;void 0===a&&(a={}),void 0===n&&(n=1e-8),void 0===t&&(t=function(e){return s(r,e)}),void 0===i&&(i=1e3);var c,u,h=(e=numeric.clone(e)).length,m=r(e);if(isNaN(m))throw new Error("uncmin: f(x0) is a NaN!");var l=Math.max,f=numeric.norm2;n=l(n,numeric.epsilon);var d,p,M,g,x,y,v,b,T,w,A=a.Hinv||numeric.identity(h),_=numeric.dot,z=(numeric.inv,numeric.sub),S=numeric.add,I=numeric.tensor,P=numeric.div,k=numeric.mul,j=numeric.all,D=numeric.isFinite,C=numeric.neg,q=0,L="";for(p=t(e);q<i;){if("function"==typeof o&&o(q,e,m,p,A)){L="Callback returned true";break}if(!j(D(p))){L="Gradient has Infinity or NaN";break}if(!j(D(d=C(_(A,p))))){L="Search direction has Infinity or NaN";break}if((w=f(d))<n){L="Newton step smaller than tol";break}for(T=1,u=_(p,d),x=e;q<i&&!(T*w<n)&&(x=S(e,g=k(d,T)),(c=r(x))-m>=.1*T*u||isNaN(c));)T*=.5,++q;if(T*w<n){L="Line search step size smaller than tol";break}if(q===i){L="maxit reached during line search";break}b=_(y=z(M=t(x),p),g),v=_(A,y),A=z(S(A,k((b+_(y,v))/(b*b),I(g,g))),P(S(I(v,g),I(g,v)),b)),e=x,m=c,p=M,++q}return{solution:e,f:m,gradient:p,invHessian:A,iterations:q,message:L}},numeric.Dopri=function(r,e,n,t,i,o,a){this.x=r,this.y=e,this.f=n,this.ymid=t,this.iterations=i,this.events=a,this.message=o},numeric.Dopri.prototype._at=function(r,e){function n(r){return r*r}var t,i,o,a,s,c,u,h,m,l=this,f=l.x,d=l.y,p=l.f,M=l.ymid,g=(f.length,Math.floor,numeric.add),x=numeric.mul,y=numeric.sub;return t=f[e],i=f[e+1],a=d[e],s=d[e+1],o=t+.5*(i-t),c=M[e],u=y(p[e],x(a,1/(t-o)+2/(t-i))),h=y(p[e+1],x(s,1/(i-o)+2/(i-t))),g(g(g(g(x(a,(m=[n(r-i)*(r-o)/n(t-i)/(t-o),n(r-t)*n(r-i)/n(t-o)/n(i-o),n(r-t)*(r-o)/n(i-t)/(i-o),(r-t)*n(r-i)*(r-o)/n(t-i)/(t-o),(r-i)*n(r-t)*(r-o)/n(t-i)/(i-o)])[0]),x(c,m[1])),x(s,m[2])),x(u,m[3])),x(h,m[4]))},numeric.Dopri.prototype.at=function(r){var e,n,t,i=Math.floor;if("number"!=typeof r){var o=r.length,a=Array(o);for(e=o-1;-1!==e;--e)a[e]=this.at(r[e]);return a}var s=this.x;for(e=0,n=s.length-1;n-e>1;)s[t=i(.5*(e+n))]<=r?e=t:n=t;return this._at(r,e)},numeric.dopri=function(r,e,n,t,i,o,a){void 0===i&&(i=1e-6),void 0===o&&(o=1e3);var s,c,u,h,m,l,f,d,p,M,g,x,y,v=[r],b=[n],T=[t(r,n)],w=[],A=[3/40,9/40],_=[44/45,-56/15,32/9],z=[19372/6561,-25360/2187,64448/6561,-212/729],S=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],I=[35/384,0,500/1113,125/192,-2187/6784,11/84],P=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,5618549.5/235043384],k=[.2,.3,.8,8/9,1,1],j=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40],D=0,C=(e-r)/10,q=0,L=numeric.add,E=numeric.mul,N=(Math.max,Math.min),R=Math.abs,O=numeric.norminf,U=Math.pow,J=numeric.any,F=numeric.lt,G=numeric.and,V=(numeric.sub,new numeric.Dopri(v,b,T,w,-1,""));for("function"==typeof a&&(g=a(r,n));r<e&&q<o;)if(++q,r+C>e&&(C=e-r),s=t(r+k[0]*C,L(n,E(.2*C,T[D]))),c=t(r+k[1]*C,L(L(n,E(A[0]*C,T[D])),E(A[1]*C,s))),u=t(r+k[2]*C,L(L(L(n,E(_[0]*C,T[D])),E(_[1]*C,s)),E(_[2]*C,c))),h=t(r+k[3]*C,L(L(L(L(n,E(z[0]*C,T[D])),E(z[1]*C,s)),E(z[2]*C,c)),E(z[3]*C,u))),m=t(r+k[4]*C,L(L(L(L(L(n,E(S[0]*C,T[D])),E(S[1]*C,s)),E(S[2]*C,c)),E(S[3]*C,u)),E(S[4]*C,h))),l=t(r+C,p=L(L(L(L(L(n,E(T[D],C*I[0])),E(c,C*I[2])),E(u,C*I[3])),E(h,C*I[4])),E(m,C*I[5]))),(M="number"==typeof(f=L(L(L(L(L(E(T[D],C*j[0]),E(c,C*j[2])),E(u,C*j[3])),E(h,C*j[4])),E(m,C*j[5])),E(l,C*j[6])))?R(f):O(f))>i){if(r+(C=.2*C*U(i/M,.25))===r){V.msg="Step size became too small";break}}else{if(w[D]=L(L(L(L(L(L(n,E(T[D],C*P[0])),E(c,C*P[2])),E(u,C*P[3])),E(h,C*P[4])),E(m,C*P[5])),E(l,C*P[6])),v[++D]=r+C,b[D]=p,T[D]=l,"function"==typeof a){var Y,B,H=r,X=r+.5*C;if(x=a(X,w[D-1]),J(y=G(F(g,0),F(0,x)))||(H=X,g=x,x=a(X=r+C,p),y=G(F(g,0),F(0,x))),J(y)){for(var Q,Z,W=0,K=1,$=1;;){if("number"==typeof g)B=($*x*H-K*g*X)/($*x-K*g);else for(B=X,d=g.length-1;-1!==d;--d)g[d]<0&&x[d]>0&&(B=N(B,($*x[d]*H-K*g[d]*X)/($*x[d]-K*g[d])));if(B<=H||B>=X)break;Z=a(B,Y=V._at(B,D-1)),J(Q=G(F(g,0),F(0,Z)))?(X=B,x=Z,y=Q,$=1,-1===W?K*=.5:K=1,W=-1):(H=B,g=Z,K=1,1===W?$*=.5:$=1,W=1)}return p=V._at(.5*(r+B),D-1),V.f[D]=t(B,Y),V.x[D]=B,V.y[D]=Y,V.ymid[D-1]=p,V.events=y,V.iterations=q,V}}r+=C,n=p,g=x,C=N(.8*C*U(i/M,.25),4*C)}return V.iterations=q,V},numeric.LU=function(r,e){e=e||!1;var n,t,i,o,a,s,c,u,h,m=Math.abs,l=r.length,f=l-1,d=new Array(l);for(e||(r=numeric.clone(r)),i=0;i<l;++i){for(c=i,h=m((s=r[i])[i]),t=i+1;t<l;++t)h<(o=m(r[t][i]))&&(h=o,c=t);for(d[i]=c,c!=i&&(r[i]=r[c],r[c]=s,s=r[i]),a=s[i],n=i+1;n<l;++n)r[n][i]/=a;for(n=i+1;n<l;++n){for(u=r[n],t=i+1;t<f;++t)u[t]-=u[i]*s[t],u[++t]-=u[i]*s[t];t===f&&(u[t]-=u[i]*s[t])}}return{LU:r,P:d}},numeric.LUsolve=function(r,e){var n,t,i,o,a,s=r.LU,c=s.length,u=numeric.clone(e),h=r.P;for(n=c-1;-1!==n;--n)u[n]=e[n];for(n=0;n<c;++n)for(i=h[n],h[n]!==n&&(a=u[n],u[n]=u[i],u[i]=a),o=s[n],t=0;t<n;++t)u[n]-=u[t]*o[t];for(n=c-1;n>=0;--n){for(o=s[n],t=n+1;t<c;++t)u[n]-=u[t]*o[t];u[n]/=o[n]}return u},numeric.solve=function(r,e,n){return numeric.LUsolve(numeric.LU(r,n),e)},numeric.echelonize=function(r){var e,n,t,i,o,a,s,c,u=numeric.dim(r),h=u[0],m=u[1],l=numeric.identity(h),f=Array(h),d=Math.abs,p=numeric.diveq;for(r=numeric.clone(r),e=0;e<h;++e){for(t=0,o=r[e],a=l[e],n=1;n<m;++n)d(o[t])<d(o[n])&&(t=n);for(f[e]=t,p(a,o[t]),p(o,o[t]),n=0;n<h;++n)if(n!==e){for(c=(s=r[n])[t],i=m-1;-1!==i;--i)s[i]-=o[i]*c;for(s=l[n],i=h-1;-1!==i;--i)s[i]-=a[i]*c}}return{I:l,A:r,P:f}},numeric.__solveLP=function(r,e,n,t,i,o,a){var s,c,u,h,m=numeric.sum,l=(numeric.log,numeric.mul),f=numeric.sub,d=numeric.dot,p=numeric.div,M=numeric.add,g=r.length,x=n.length,y=!1,v=1,b=(numeric.transpose(e),numeric.svd,numeric.transpose),T=(numeric.leq,Math.sqrt),w=Math.abs,A=(numeric.muleq,numeric.norminf,numeric.any,Math.min),_=numeric.all,z=numeric.gt,S=Array(g),I=Array(x),P=(numeric.rep([x],1),numeric.solve),k=f(n,d(e,o)),j=d(r,r);for(u=0;u<i;++u){var D,C;for(D=x-1;-1!==D;--D)I[D]=p(e[D],k[D]);var q=b(I);for(D=g-1;-1!==D;--D)S[D]=m(q[D]);v=.25*w(j/d(r,S));var L=100*T(j/d(S,S));for((!isFinite(v)||v>L)&&(v=L),h=M(r,l(v,S)),c=d(q,I),D=g-1;-1!==D;--D)c[D][D]+=1;C=P(c,p(h,v),!0);var E=p(k,d(e,C)),N=1;for(D=x-1;-1!==D;--D)E[D]<0&&(N=A(N,-.999*E[D]));if(s=f(o,l(C,N)),!_(z(k=f(n,d(e,s)),0)))return{solution:o,message:"",iterations:u};if(o=s,v<t)return{solution:s,message:"",iterations:u};if(a){var R=d(r,h),O=d(e,h);for(y=!0,D=x-1;-1!==D;--D)if(R*O[D]<0){y=!1;break}}else y=!(o[g-1]>=0);if(y)return{solution:s,message:"Unbounded",iterations:u}}return{solution:o,message:"maximum iteration count exceeded",iterations:u}},numeric._solveLP=function(r,e,n,t,i){var o=r.length,a=n.length,s=(numeric.sum,numeric.log,numeric.mul,numeric.sub),c=numeric.dot,u=(numeric.div,numeric.add,numeric.rep([o],0).concat([1])),h=numeric.rep([a,1],-1),m=numeric.blockMatrix([[e,h]]),l=n,f=numeric.rep([o],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),d=numeric.__solveLP(u,m,l,t,i,f,!1),p=numeric.clone(d.solution);if(p.length=o,numeric.inf(s(n,c(e,p)))<0)return{solution:NaN,message:"Infeasible",iterations:d.iterations};var M=numeric.__solveLP(r,e,n,t,i-d.iterations,p,!0);return M.iterations+=d.iterations,M},numeric.solveLP=function(r,e,n,t,i,o,a){if(void 0===a&&(a=1e3),void 0===o&&(o=numeric.epsilon),void 0===t)return numeric._solveLP(r,e,n,o,a);var s,c=t.length,u=t[0].length,h=e.length,m=numeric.echelonize(t),l=numeric.rep([u],0),f=m.P,d=[];for(s=f.length-1;-1!==s;--s)l[f[s]]=1;for(s=u-1;-1!==s;--s)0===l[s]&&d.push(s);var p=numeric.getRange,M=numeric.linspace(0,c-1),g=numeric.linspace(0,h-1),x=p(t,M,d),y=p(e,g,f),v=p(e,g,d),b=numeric.dot,T=numeric.sub,w=b(y,m.I),A=T(v,b(w,x)),_=T(n,b(w,i)),z=Array(f.length),S=Array(d.length);for(s=f.length-1;-1!==s;--s)z[s]=r[f[s]];for(s=d.length-1;-1!==s;--s)S[s]=r[d[s]];var I=T(S,b(z,b(m.I,x))),P=numeric._solveLP(I,A,_,o,a),k=P.solution;if(k!=k)return P;var j=b(m.I,T(i,b(x,k))),D=Array(r.length);for(s=f.length-1;-1!==s;--s)D[f[s]]=j[s];for(s=d.length-1;-1!==s;--s)D[d[s]]=k[s];return{solution:D,message:P.message,iterations:P.iterations}},numeric.MPStoLP=function(r){r instanceof String&&r.split("\n");var e,n,t,i,o=0,a=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],s=r.length,c=0,u={},h=[],m=0,l={},f=0,d=[],p=[],M=[];function g(n){throw new Error("MPStoLP: "+n+"\nLine "+e+": "+r[e]+"\nCurrent state: "+a[o]+"\n")}for(e=0;e<s;++e){var x=(t=r[e]).match(/\S*/g),y=[];for(n=0;n<x.length;++n)""!==x[n]&&y.push(x[n]);if(0!==y.length){for(n=0;n<a.length&&t.substr(0,a[n].length)!==a[n];++n);if(n<a.length){if(o=n,1===n&&(i=y[1]),6===n)return{name:i,c:d,A:numeric.transpose(p),b:M,rows:u,vars:l}}else switch(o){case 0:case 1:g("Unexpected line");case 2:switch(y[0]){case"N":0===c?c=y[1]:g("Two or more N rows");break;case"L":u[y[1]]=m,h[m]=1,M[m]=0,++m;break;case"G":u[y[1]]=m,h[m]=-1,M[m]=0,++m;break;case"E":u[y[1]]=m,h[m]=0,M[m]=0,++m;break;default:g("Parse error "+numeric.prettyPrint(y))}break;case 3:l.hasOwnProperty(y[0])||(l[y[0]]=f,d[f]=0,p[f]=numeric.rep([m],0),++f);var v=l[y[0]];for(n=1;n<y.length;n+=2)if(y[n]!==c){var b=u[y[n]];p[v][b]=(h[b]<0?-1:1)*parseFloat(y[n+1])}else d[v]=parseFloat(y[n+1]);break;case 4:for(n=1;n<y.length;n+=2)M[u[y[n]]]=(h[u[y[n]]]<0?-1:1)*parseFloat(y[n+1]);break;case 5:break;case 6:g("Internal error")}}}g("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(r,e,n,t,i,o,a){function s(r){var e,t,i=this,o=r.length,a=0,s=i.i=i.j=i.m=0;for(i.S=[],i.c=[],o||(r=[o++]);a<n;)i.S[a]=a++;for(a=0;a<n;a++)s=h(s+(e=i.S[a])+r[a%o]),t=i.S[s],i.S[a]=t,i.S[s]=e;i.g=function(r){var e=i.S,t=h(i.i+1),o=e[t],a=h(i.j+o),s=e[a];e[t]=s,e[a]=o;for(var c=e[h(o+s)];--r;)t=h(t+1),s=e[a=h(a+(o=e[t]))],e[t]=s,e[a]=o,c=c*n+e[h(o+s)];return i.i=t,i.j=a,c},i.g(n)}function c(r,e,n,t,i){if(n=[],i=typeof r,e&&"object"==i)for(t in r)if(t.indexOf("S")<5)try{n.push(c(r[t],e-1))}catch(r){}return n.length?n:r+("string"!=i?"\0":"")}function u(r,e,n,t){for(r+="",n=0,t=0;t<r.length;t++)e[h(t)]=h((n^=19*e[h(t)])+r.charCodeAt(t));for(t in r="",e)r+=String.fromCharCode(e[t]);return r}function h(r){return 255&r}e.seedrandom=function(t,h){var m,l=[];return t=u(c(h?[t,r]:arguments.length?t:[(new Date).getTime(),r,window],3),l),u((m=new s(l)).S,r),e.random=function(){for(var r=m.g(6),e=a,t=0;r<i;)r=(r+t)*n,e*=n,t=m.g(1);for(;r>=o;)r/=2,e/=2,t>>>=1;return(r+t)/e},t},a=e.pow(n,6),i=e.pow(2,i),o=2*i,u(e.random(),r)}([],numeric.seedrandom,256,0,52),function(r){function e(r){if("object"!=typeof r)return r;var n,t=[],i=r.length;for(n=0;n<i;n++)t[n+1]=e(r[n]);return t}function n(r){if("object"!=typeof r)return r;var e,t=[],i=r.length;for(e=1;e<i;e++)t[e-1]=n(r[e]);return t}r.solveQP=function(r,t,i,o,a,s){r=e(r),t=e(t),i=e(i);var c,u,h,m,l,f=[],d=[],p=[],M=[],g=[];if(a=a||0,s=s?e(s):[void 0,0],o=o?e(o):[],u=r.length-1,h=i[1].length-1,!o)for(c=1;c<=h;c+=1)o[c]=0;for(c=1;c<=h;c+=1)d[c]=0;for(m=Math.min(u,h),c=1;c<=u;c+=1)p[c]=0;for(f[1]=0,c=1;c<=2*u+m*(m+5)/2+2*h+1;c+=1)M[c]=0;for(c=1;c<=2;c+=1)g[c]=0;return function(r,e,n,t,i,o,a,s,c,u,h,m,l,f,d,p){var M,g,x,y,v,b,T,w,A,_,z,S,I,P,k,j,D,C,q,L,E,N,R,O,U,J,F;I=Math.min(t,u),x=2*t+I*(I+5)/2+2*u+1,O=1e-60;do{U=1+.1*(O+=O),J=1+.2*O}while(U<=1||J<=1);for(M=1;M<=t;M+=1)d[M]=e[M];for(M=t+1;M<=x;M+=1)d[M]=0;for(M=1;M<=u;M+=1)m[M]=0;if(v=[],0===p[1]){if(function(r,e,n,t){var i,o,a,s,c,u;for(o=1;o<=n;o+=1){if(t[1]=o,u=0,(a=o-1)<1){if((u=r[o][o]-u)<=0)break;r[o][o]=Math.sqrt(u)}else{for(s=1;s<=a;s+=1){for(c=r[s][o],i=1;i<s;i+=1)c-=r[i][o]*r[i][s];c/=r[s][s],r[s][o]=c,u+=c*c}if((u=r[o][o]-u)<=0)break;r[o][o]=Math.sqrt(u)}t[1]=0}}(r,0,t,v),0!==v[1])return void(p[1]=2);!function(r,e,n,t){var i,o,a,s;for(o=1;o<=n;o+=1){for(s=0,i=1;i<o;i+=1)s+=r[i][o]*t[i];t[o]=(t[o]-s)/r[o][o]}for(a=1;a<=n;a+=1)for(t[o=n+1-a]=t[o]/r[o][o],s=-t[o],i=1;i<o;i+=1)t[i]=t[i]+s*r[i][o]}(r,0,t,e),function(r,e,n){var t,i,o,a,s;for(o=1;o<=n;o+=1){for(r[o][o]=1/r[o][o],s=-r[o][o],t=1;t<o;t+=1)r[t][o]=s*r[t][o];if(n<(a=o+1))break;for(i=a;i<=n;i+=1)for(s=r[o][i],r[o][i]=0,t=1;t<=o;t+=1)r[t][i]=r[t][i]+s*r[t][o]}}(r,0,t)}else{for(g=1;g<=t;g+=1)for(i[g]=0,M=1;M<=g;M+=1)i[g]=i[g]+r[M][g]*e[M];for(g=1;g<=t;g+=1)for(e[g]=0,M=g;M<=t;M+=1)e[g]=e[g]+r[g][M]*i[M]}for(o[1]=0,g=1;g<=t;g+=1)for(i[g]=e[g],o[1]=o[1]+d[g]*i[g],d[g]=0,M=g+1;M<=t;M+=1)r[M][g]=0;for(o[1]=-o[1]/2,p[1]=0,P=(_=(A=(z=(w=(T=t)+t)+I)+I+1)+I*(I+1)/2)+u,M=1;M<=u;M+=1){for(j=0,g=1;g<=t;g+=1)j+=a[g][M]*a[g][M];d[P+M]=Math.sqrt(j)}function G(){for(f[1]=f[1]+1,x=_,M=1;M<=u;M+=1){for(x+=1,j=-s[M],g=1;g<=t;g+=1)j+=a[g][M]*i[g];if(Math.abs(j)<O&&(j=0),M>h)d[x]=j;else if(d[x]=-Math.abs(j),j>0){for(g=1;g<=t;g+=1)a[g][M]=-a[g][M];s[M]=-s[M]}}for(M=1;M<=l;M+=1)d[_+m[M]]=0;for(S=0,k=0,M=1;M<=u;M+=1)d[_+M]<k*d[P+M]&&(S=M,k=d[_+M]/d[P+M]);return 0===S?999:0}function V(){for(M=1;M<=t;M+=1){for(j=0,g=1;g<=t;g+=1)j+=r[g][M]*a[g][S];d[M]=j}for(y=T,M=1;M<=t;M+=1)d[y+M]=0;for(g=l+1;g<=t;g+=1)for(M=1;M<=t;M+=1)d[y+M]=d[y+M]+r[M][g]*d[g];for(N=!0,M=l;M>=1;M-=1){for(j=d[M],y=(x=A+M*(M+3)/2)-M,g=M+1;g<=l;g+=1)j-=d[x]*d[w+g],x+=g;if(j/=d[y],d[w+M]=j,m[M]<h)break;if(j<0)break;N=!1,b=M}if(!N)for(D=d[z+b]/d[w+b],M=1;M<=l&&!(m[M]<h)&&!(d[w+M]<0);M+=1)(k=d[z+M]/d[w+M])<D&&(D=k,b=M);for(j=0,M=T+1;M<=T+t;M+=1)j+=d[M]*d[M];if(Math.abs(j)<=O){if(N)return p[1]=1,999;for(M=1;M<=l;M+=1)d[z+M]=d[z+M]-D*d[w+M];return d[z+l+1]=d[z+l+1]+D,700}for(j=0,M=1;M<=t;M+=1)j+=d[T+M]*a[M][S];for(C=-d[_+S]/j,R=!0,N||D<C&&(C=D,R=!1),M=1;M<=t;M+=1)i[M]=i[M]+C*d[T+M],Math.abs(i[M])<O&&(i[M]=0);for(o[1]=o[1]+C*j*(C/2+d[z+l+1]),M=1;M<=l;M+=1)d[z+M]=d[z+M]-C*d[w+M];if(d[z+l+1]=d[z+l+1]+C,!R){for(j=-s[S],g=1;g<=t;g+=1)j+=i[g]*a[g][S];if(S>h)d[_+S]=j;else if(d[_+S]=-Math.abs(j),j>0){for(g=1;g<=t;g+=1)a[g][S]=-a[g][S];s[S]=-s[S]}return 700}for(m[l+=1]=S,x=A+(l-1)*l/2+1,M=1;M<=l-1;M+=1)d[x]=d[M],x+=1;if(l===t)d[x]=d[t];else{for(M=t;M>=l+1&&0!==d[M]&&(q=Math.max(Math.abs(d[M-1]),Math.abs(d[M])),L=Math.min(Math.abs(d[M-1]),Math.abs(d[M])),k=d[M-1]>=0?Math.abs(q*Math.sqrt(1+L*L/(q*q))):-Math.abs(q*Math.sqrt(1+L*L/(q*q))),q=d[M-1]/k,L=d[M]/k,1!==q);M-=1)if(0===q)for(d[M-1]=L*k,g=1;g<=t;g+=1)k=r[g][M-1],r[g][M-1]=r[g][M],r[g][M]=k;else for(d[M-1]=k,E=L/(1+q),g=1;g<=t;g+=1)k=q*r[g][M-1]+L*r[g][M],r[g][M]=E*(r[g][M-1]+k)-r[g][M],r[g][M-1]=k;d[x]=d[l]}return 0}function Y(){if(0===d[y=(x=A+b*(b+1)/2+1)+b])return 798;if(q=Math.max(Math.abs(d[y-1]),Math.abs(d[y])),L=Math.min(Math.abs(d[y-1]),Math.abs(d[y])),k=d[y-1]>=0?Math.abs(q*Math.sqrt(1+L*L/(q*q))):-Math.abs(q*Math.sqrt(1+L*L/(q*q))),q=d[y-1]/k,L=d[y]/k,1===q)return 798;if(0===q){for(M=b+1;M<=l;M+=1)k=d[y-1],d[y-1]=d[y],d[y]=k,y+=M;for(M=1;M<=t;M+=1)k=r[M][b],r[M][b]=r[M][b+1],r[M][b+1]=k}else{for(E=L/(1+q),M=b+1;M<=l;M+=1)k=q*d[y-1]+L*d[y],d[y]=E*(d[y-1]+k)-d[y],d[y-1]=k,y+=M;for(M=1;M<=t;M+=1)k=q*r[M][b]+L*r[M][b+1],r[M][b+1]=E*(r[M][b]+k)-r[M][b+1],r[M][b]=k}return 0}function B(){for(y=x-b,M=1;M<=b;M+=1)d[y]=d[x],x+=1,y+=1;return d[z+b]=d[z+b+1],m[b]=m[b+1],(b+=1)<l?797:0}function H(){return d[z+l]=d[z+l+1],d[z+l+1]=0,m[l]=0,l-=1,f[2]=f[2]+1,0}for(l=0,f[1]=0,f[2]=0,F=0;;){if(999===(F=G()))return;for(;0!==(F=V());){if(999===F)return;if(700===F)if(b===l)H();else{for(;Y(),797===(F=B()););H()}}}}(r,t,0,u,p,f,i,o,0,h,a,d,0,g,M,s),l="",1===s[1]&&(l="constraints are inconsistent, no solution!"),2===s[1]&&(l="matrix D in quadratic function is not positive definite!"),{solution:n(p),value:n(f),unconstrained_solution:n(t),iterations:n(g),iact:n(d),message:l}}}(numeric),numeric.svd=function(r){var e,n=numeric.epsilon,t=1e-64/n,i=0,o=0,a=0,s=0,c=0,u=numeric.clone(r),h=u.length,m=u[0].length;if(h<m)throw"Need more rows than columns";var l=new Array(m),f=new Array(m);for(o=0;o<m;o++)l[o]=f[o]=0;var d=numeric.rep([m,m],0);function p(r,e){return(r=Math.abs(r))>(e=Math.abs(e))?r*Math.sqrt(1+e*e/r/r):0==e?r:e*Math.sqrt(1+r*r/e/e)}var M=0,g=0,x=0,y=0,v=0,b=0,T=0;for(o=0;o<m;o++){for(l[o]=g,T=0,c=o+1,a=o;a<h;a++)T+=u[a][o]*u[a][o];if(T<=t)g=0;else for(M=u[o][o],g=Math.sqrt(T),M>=0&&(g=-g),x=M*g-T,u[o][o]=M-g,a=c;a<m;a++){for(T=0,s=o;s<h;s++)T+=u[s][o]*u[s][a];for(M=T/x,s=o;s<h;s++)u[s][a]+=M*u[s][o]}for(f[o]=g,T=0,a=c;a<m;a++)T+=u[o][a]*u[o][a];if(T<=t)g=0;else{for(M=u[o][o+1],g=Math.sqrt(T),M>=0&&(g=-g),x=M*g-T,u[o][o+1]=M-g,a=c;a<m;a++)l[a]=u[o][a]/x;for(a=c;a<h;a++){for(T=0,s=c;s<m;s++)T+=u[a][s]*u[o][s];for(s=c;s<m;s++)u[a][s]+=T*l[s]}}(v=Math.abs(f[o])+Math.abs(l[o]))>y&&(y=v)}for(o=m-1;-1!=o;o+=-1){if(0!=g){for(x=g*u[o][o+1],a=c;a<m;a++)d[a][o]=u[o][a]/x;for(a=c;a<m;a++){for(T=0,s=c;s<m;s++)T+=u[o][s]*d[s][a];for(s=c;s<m;s++)d[s][a]+=T*d[s][o]}}for(a=c;a<m;a++)d[o][a]=0,d[a][o]=0;d[o][o]=1,g=l[o],c=o}for(o=m-1;-1!=o;o+=-1){for(c=o+1,g=f[o],a=c;a<m;a++)u[o][a]=0;if(0!=g){for(x=u[o][o]*g,a=c;a<m;a++){for(T=0,s=c;s<h;s++)T+=u[s][o]*u[s][a];for(M=T/x,s=o;s<h;s++)u[s][a]+=M*u[s][o]}for(a=o;a<h;a++)u[a][o]=u[a][o]/g}else for(a=o;a<h;a++)u[a][o]=0;u[o][o]+=1}for(n*=y,s=m-1;-1!=s;s+=-1)for(var w=0;w<50;w++){var A=!1;for(c=s;-1!=c;c+=-1){if(Math.abs(l[c])<=n){A=!0;break}if(Math.abs(f[c-1])<=n)break}if(!A){i=0,T=1;var _=c-1;for(o=c;o<s+1&&(M=T*l[o],l[o]=i*l[o],!(Math.abs(M)<=n));o++)for(x=p(M,g=f[o]),f[o]=x,i=g/x,T=-M/x,a=0;a<h;a++)v=u[a][_],b=u[a][o],u[a][_]=v*i+b*T,u[a][o]=-v*T+b*i}if(b=f[s],c==s){if(b<0)for(f[s]=-b,a=0;a<m;a++)d[a][s]=-d[a][s];break}if(w>=49)throw"Error: no convergence.";for(y=f[c],g=p(M=(((v=f[s-1])-b)*(v+b)+((g=l[s-1])-(x=l[s]))*(g+x))/(2*x*v),1),M=M<0?((y-b)*(y+b)+x*(v/(M-g)-x))/y:((y-b)*(y+b)+x*(v/(M+g)-x))/y,i=1,T=1,o=c+1;o<s+1;o++){for(g=l[o],v=f[o],x=T*g,g*=i,b=p(M,x),l[o-1]=b,M=y*(i=M/b)+g*(T=x/b),g=-y*T+g*i,x=v*T,v*=i,a=0;a<m;a++)y=d[a][o-1],b=d[a][o],d[a][o-1]=y*i+b*T,d[a][o]=-y*T+b*i;for(b=p(M,x),f[o-1]=b,M=(i=M/b)*g+(T=x/b)*v,y=-T*g+i*v,a=0;a<h;a++)v=u[a][o-1],b=u[a][o],u[a][o-1]=v*i+b*T,u[a][o]=-v*T+b*i}l[c]=0,l[s]=M,f[s]=y}for(o=0;o<f.length;o++)f[o]<n&&(f[o]=0);for(o=0;o<m;o++)for(a=o-1;a>=0;a--)if(f[a]<f[o]){for(i=f[a],f[a]=f[o],f[o]=i,s=0;s<u.length;s++)e=u[s][o],u[s][o]=u[s][a],u[s][a]=e;for(s=0;s<d.length;s++)e=d[s][o],d[s][o]=d[s][a],d[s][a]=e;o=a}return{U:u,S:f,V:d}}}},__webpack_module_cache__={};function __webpack_require__(r){var e=__webpack_module_cache__[r];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(r,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),__webpack_require__.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var __webpack_exports__={};(()=>{const r=Math.PI,e=2*Math.PI,n=e/360,t=360/e,i=1.15741e-8,o=6371;var a,s={MILLISECONDS_IN_A_DAY:864e5,J1970:2440588,J2000:2451545,J0:9e-4,lw:null,phi:null,d:null,H:null,h:null,times:[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]],toJulian:r=>r.valueOf()/s.MILLISECONDS_IN_A_DAY-.5+s.J1970,fromJulian:r=>new Date((r+.5-s.J1970)*s.MILLISECONDS_IN_A_DAY),toDays:r=>s.toJulian(r)-s.J2000,e:e/360*23.4397,rightAscension:(r,e)=>Math.atan2(Math.sin(r)*Math.cos(s.e)-Math.tan(e)*Math.sin(s.e),Math.cos(r)),declination:(r,e)=>Math.asin(Math.sin(e)*Math.cos(s.e)+Math.cos(e)*Math.sin(s.e)*Math.sin(r)),azimuth:(r,e,n)=>Math.atan2(Math.sin(r),Math.cos(r)*Math.sin(e)-Math.tan(n)*Math.cos(e)),altitude:(r,e,n)=>Math.asin(Math.sin(e)*Math.sin(n)+Math.cos(e)*Math.cos(n)*Math.cos(r)),siderealTime:(r,n)=>e/360*(280.16+360.9856235*r)-n,astroRefraction:r=>(r<0&&(r=0),2967e-7/Math.tan(r+.00312536/(r+.08901179))),solarMeanAnomaly:r=>e/360*(357.5291+.98560028*r),eclipticLongitude:r=>r+e/360*(1.9148*Math.sin(r)+.02*Math.sin(2*r)+3e-4*Math.sin(3*r))+e/360*102.9372+e/2,sunCoords:r=>{var e=s.solarMeanAnomaly(r),n=s.eclipticLongitude(e);return{dec:s.declination(n,0),ra:s.rightAscension(n,0)}},julianCycle:(r,n)=>Math.round(r-s.J0-n/(2*e/2)),approxTransit:(r,n,t)=>s.J0+(r+n)/(2*e/2)+t,solarTransitJ:(r,e,n)=>s.J2000+r+.0053*Math.sin(e)-.0069*Math.sin(2*n),hourAngle:(r,e,n)=>Math.acos((Math.sin(r)-Math.sin(e)*Math.sin(n))/(Math.cos(e)*Math.cos(n))),getSetJ:(r,e,n,t,i,o,a)=>{var c=s.hourAngle(r,n,t),u=s.approxTransit(c,e,i);return s.solarTransitJ(u,o,a)},moonCoords:r=>{var n=e/360*(134.963+13.064993*r),t=e/360*(93.272+13.22935*r),i=e/360*(218.316+13.176396*r)+e/360*6.289*Math.sin(n),o=e/360*5.128*Math.sin(t),a=385001-20905*Math.cos(n);return{ra:s.rightAscension(i,o),dec:s.declination(i,o),dist:a}},hoursLater:(r,e)=>new Date(r.valueOf()+e*s.MILLISECONDS_IN_A_DAY/24),getStarPosition:(r,e,t,i)=>(s.lw=n*-t,s.phi=n*e,s.d=s.toDays(r),s.H=s.siderealTime(s.d,s.lw)-i.ra/12*Math.PI,s.h=s.altitude(s.H,s.phi,i.dec/180*Math.PI),s.h+=s.astroRefraction(s.h),{azimuth:s.azimuth(s.H,s.phi,i.dec/180*Math.PI),altitude:s.h,vmag:i.vmag,name:i.name,dist:i.dist}),getSunPosition:(r,n,t)=>{var i=e/360*-t,o=e/360*n,a=s.toDays(r),c=s.sunCoords(a),u=s.siderealTime(a,i)-c.ra;return{azimuth:s.azimuth(u,o,c.dec),altitude:s.altitude(u,o,c.dec)}},addTime:(r,e,n)=>{s.times.push([r,e,n])},getTimes:(r,n,t)=>{var i,o,a,c,u,h=e/360*-t,m=e/360*n,l=s.toDays(r),f=s.julianCycle(l,h),d=s.approxTransit(0,h,f),p=s.solarMeanAnomaly(d),M=s.eclipticLongitude(p),g=s.declination(M,0),x=s.solarTransitJ(d,p,M),y={solarNoon:s.fromJulian(x),nadir:s.fromJulian(x-.5)};for(i=0,o=s.times.length;i<o;i+=1)a=s.times[i],u=x-((c=s.getSetJ(a[0]*e/360,h,m,g,f,p,M))-x),y[a[1]]=s.fromJulian(u),y[a[2]]=s.fromJulian(c);return y},getMoonPosition:(r,n,t)=>{var i=e/360*-t,o=e/360*n,a=s.toDays(r),c=s.moonCoords(a),u=s.siderealTime(a,i)-c.ra,h=s.altitude(u,o,c.dec),m=Math.atan2(Math.sin(u),Math.tan(o)*Math.cos(c.dec)-Math.sin(c.dec)*Math.cos(u));return h+=s.astroRefraction(h),{azimuth:s.azimuth(u,o,c.dec),altitude:h,distance:c.dist,parallacticAngle:m}},getMoonIllumination:r=>{var n=s.toDays(r||new Date),t=s.sunCoords(n),i=s.moonCoords(n),o=149598e3,a=Math.acos(Math.sin(t.dec)*Math.sin(i.dec)+Math.cos(t.dec)*Math.cos(i.dec)*Math.cos(t.ra-i.ra)),c=Math.atan2(o*Math.sin(a),i.dist-o*Math.cos(a)),u=Math.atan2(Math.cos(t.dec)*Math.sin(t.ra-i.ra),Math.sin(t.dec)*Math.cos(i.dec)-Math.cos(t.dec)*Math.sin(i.dec)*Math.cos(t.ra-i.ra));return{fraction:(1+Math.cos(c))/2,phase:.5+.5*c*(u<0?-1:1)/e/2,angle:u}},getMoonTimes:(r,n,t,i)=>{var o=new Date(r);i?o.setUTCHours(0,0,0,0):o.setHours(0,0,0,0);for(var a,c,u,h,m,l,f,d,p,M,g,x,y,v=.133*e/360,b=s.getMoonPosition(o,n,t).altitude-v,T=1;T<=24&&(a=s.getMoonPosition(s.hoursLater(o,T),n,t).altitude-v,d=((m=(b+(c=s.getMoonPosition(s.hoursLater(o,T+1),n,t).altitude-v))/2-a)*(f=-(l=(c-b)/2)/(2*m))+l)*f+a,M=0,(p=l*l-4*m*a)>=0&&(g=f-(y=Math.sqrt(p)/(2*Math.abs(m))),x=f+y,Math.abs(g)<=1&&M++,Math.abs(x)<=1&&M++,g<-1&&(g=x)),1===M?b<0?u=T+g:h=T+g:2===M&&(u=T+(d<0?x:g),h=T+(d<0?g:x)),!u||!h);T+=2)b=c;var w={};return u&&(w.rise=s.hoursLater(o,u)),h&&(w.set=s.hoursLater(o,h)),u||h||(w[d>0?"alwaysUp":"alwaysDown"]=!0),w}},c=__webpack_require__(32),u=__webpack_require__.n(c),h=Math.PI,m=2*h,l=h/180,f=6378.137,d=60/Math.sqrt(650944.0944816993),p=f*d/60,M=1/d,g=.00108262998905,x=-253215306e-14/g,y=2/3;function v(r,e,n,t,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return 367*r-Math.floor(7*(r+Math.floor((e+9)/12))*.25)+Math.floor(275*e/9)+n+1721013.5+((a/6e4+o/60+i)/60+t)/24}function b(r,e,n,t,i,o,a){if(r instanceof Date){var s=r;return v(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds())}return v(r,e,n,t,i,o,a)}function T(r,e){var n,t,i,o,a,s,c,u,l,f,d,p,M,g,x,y,v,b,T=r.e3,w=r.ee2,A=r.peo,_=r.pgho,z=r.pho,S=r.pinco,I=r.plo,P=r.se2,k=r.se3,j=r.sgh2,D=r.sgh3,C=r.sgh4,q=r.sh2,L=r.sh3,E=r.si2,N=r.si3,R=r.sl2,O=r.sl3,U=r.sl4,J=r.t,F=r.xgh2,G=r.xgh3,V=r.xgh4,Y=r.xh2,B=r.xh3,H=r.xi2,X=r.xi3,Q=r.xl2,Z=r.xl3,W=r.xl4,K=r.zmol,$=r.zmos,rr=e.init,er=e.opsmode,nr=e.ep,tr=e.inclp,ir=e.nodep,or=e.argpp,ar=e.mp;b=$+119459e-10*J,"y"===rr&&(b=$),v=b+.0335*Math.sin(b);var sr=P*(c=.5*(g=Math.sin(v))*g-.25)+k*(u=-.5*g*Math.cos(v)),cr=E*c+N*u,ur=R*c+O*u+U*g,hr=j*c+D*u+C*g,mr=q*c+L*u;return b=K+.00015835218*J,"y"===rr&&(b=K),v=b+.1098*Math.sin(b),l=sr+(w*(c=.5*(g=Math.sin(v))*g-.25)+T*(u=-.5*g*Math.cos(v))),p=cr+(H*c+X*u),M=ur+(Q*c+Z*u+W*g),f=hr+(F*c+G*u+V*g),d=mr+(Y*c+B*u),"n"===rr&&(M-=I,f-=_,d-=z,tr+=p-=S,nr+=l-=A,o=Math.sin(tr),i=Math.cos(tr),tr>=.2?(or+=f-=i*(d/=o),ir+=d,ar+=M):(n=o*(s=Math.sin(ir)),t=o*(a=Math.cos(ir)),n+=d*a+p*i*s,t+=-d*s+p*i*a,(ir%=m)<0&&"a"===er&&(ir+=m),x=ar+or+i*ir,x+=M+f-p*ir*o,y=ir,(ir=Math.atan2(n,t))<0&&"a"===er&&(ir+=m),Math.abs(y-ir)>h&&(ir<y?ir+=m:ir-=m),or=x-(ar+=M)-i*ir)),{ep:nr,inclp:tr,nodep:ir,argpp:or,mp:ar}}function w(r){var e=(r-2451545)/36525,n=-62e-7*e*e*e+.093104*e*e+3164400184.812866*e+67310.54841;return(n=n*l/240%m)<0&&(n+=m),n}function A(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?w(b.apply(void 0,arguments)):w.apply(void 0,arguments)}function _(r,e){var n,t,i,o,a,s,c,u,l,M,v,b,w,A,_,z,S,I,P,k,j,D,C,q,L,E;r.t=e,r.error=0;var N=r.mo+r.mdot*r.t,R=r.argpo+r.argpdot*r.t,O=r.nodeo+r.nodedot*r.t;u=R,k=N;var U=r.t*r.t;if(D=O+r.nodecf*U,z=1-r.cc1*r.t,S=r.bstar*r.cc4*r.t,I=r.t2cof*U,1!==r.isimp){s=r.omgcof*r.t;var J=1+r.eta*Math.cos(N);k=N+(_=s+r.xmcof*(J*J*J-r.delmo)),u=R-_,b=(v=U*r.t)*r.t,z=z-r.d2*U-r.d3*v-r.d4*b,S+=r.bstar*r.cc5*(Math.sin(k)-r.sinmao),I=I+r.t3cof*v+b*(r.t4cof+r.t*r.t5cof)}j=r.no;var F=r.ecco;if(P=r.inclo,"d"===r.method){w=r.t;var G=function(r){var e,n,t,i,o,a,s,c,u=r.irez,h=r.d2201,l=r.d2211,f=r.d3210,d=r.d3222,p=r.d4410,M=r.d4422,g=r.d5220,x=r.d5232,y=r.d5421,v=r.d5433,b=r.del1,T=r.del2,w=r.del3,A=r.argpo,_=r.argpdot,z=r.t,S=r.xfact,I=r.xlamo,P=r.no,k=r.atime,j=r.em,D=r.argpm,C=r.inclm,q=r.xli,L=r.mm,E=r.xni,N=r.nodem,R=r.nm,O=.13130908,U=2.8843198,J=.37448087,F=5.7686396,G=.95240898,V=1.8014998,Y=1.050833,B=4.4108898,H=259200,X=0,Q=0,Z=(r.gsto+.0043752690880113*r.tc)%m;if(j+=r.dedt*z,C+=r.didt*z,D+=r.domdt*z,N+=r.dnodt*z,L+=r.dmdt*z,0!==u){(0===k||z*k<=0||Math.abs(z)<Math.abs(k))&&(k=0,E=P,q=I),e=z>0?720:-720;for(var W=381;381===W;)2!==u?(s=b*Math.sin(q-O)+T*Math.sin(2*(q-U))+w*Math.sin(3*(q-J)),o=E+S,a=b*Math.cos(q-O)+2*T*Math.cos(2*(q-U))+3*w*Math.cos(3*(q-J)),a*=o):(t=(c=A+_*k)+c,n=q+q,s=h*Math.sin(t+q-F)+l*Math.sin(q-F)+f*Math.sin(c+q-G)+d*Math.sin(-c+q-G)+p*Math.sin(t+n-V)+M*Math.sin(n-V)+g*Math.sin(c+q-Y)+x*Math.sin(-c+q-Y)+y*Math.sin(c+n-B)+v*Math.sin(-c+n-B),o=E+S,a=h*Math.cos(t+q-F)+l*Math.cos(q-F)+f*Math.cos(c+q-G)+d*Math.cos(-c+q-G)+g*Math.cos(c+q-Y)+x*Math.cos(-c+q-Y)+2*p*Math.cos(t+n-V)+M*Math.cos(n-V)+y*Math.cos(c+n-B)+v*Math.cos(-c+n-B),a*=o),Math.abs(z-k)>=720?W=381:(Q=z-k,W=0),381===W&&(q+=o*e+s*H,E+=s*e+a*H,k+=e);R=E+s*Q+a*Q*Q*.5,i=q+o*Q+s*Q*Q*.5,1!==u?(L=i-2*N+2*Z,X=R-P):(L=i-N-D+Z,X=R-P),R=P+X}return{atime:k,em:j,argpm:D,inclm:C,xli:q,mm:L,xni:E,nodem:N,dndt:X,nm:R}}({irez:r.irez,d2201:r.d2201,d2211:r.d2211,d3210:r.d3210,d3222:r.d3222,d4410:r.d4410,d4422:r.d4422,d5220:r.d5220,d5232:r.d5232,d5421:r.d5421,d5433:r.d5433,dedt:r.dedt,del1:r.del1,del2:r.del2,del3:r.del3,didt:r.didt,dmdt:r.dmdt,dnodt:r.dnodt,domdt:r.domdt,argpo:r.argpo,argpdot:r.argpdot,t:r.t,tc:w,gsto:r.gsto,xfact:r.xfact,xlamo:r.xlamo,no:r.no,atime:r.atime,em:F,argpm:u,inclm:P,xli:r.xli,mm:k,xni:r.xni,nodem:D,nm:j});F=G.em,u=G.argpm,P=G.inclm,k=G.mm,D=G.nodem,j=G.nm}if(j<=0)return r.error=2,[!1,!1];var V=Math.pow(d/j,y)*z*z;if(j=d/Math.pow(V,1.5),(F-=S)>=1||F<-.001)return r.error=1,[!1,!1];F<1e-6&&(F=1e-6),q=(k+=r.no*I)+u+D;var Y=F;if(C=P,l=u%=m,E=D%=m,L=k=((q%=m)-u-D)%m,o=Math.sin(P),i=Math.cos(P),"d"===r.method){var B=T(r,{inclo:r.inclo,init:"n",ep:Y,inclp:C,nodep:E,argpp:l,mp:L,opsmode:r.operationmode});if(Y=B.ep,E=B.nodep,l=B.argpp,L=B.mp,(C=B.inclp)<0&&(C=-C,E+=h,l-=h),Y<0||Y>1)return r.error=3,[!1,!1]}"d"===r.method&&(o=Math.sin(C),i=Math.cos(C),r.aycof=-.5*x*o,Math.abs(i+1)>15e-13?r.xlcof=-.25*x*o*(3+5*i)/(1+i):r.xlcof=-.25*x*o*(3+5*i)/15e-13);var H=Y*Math.cos(l);_=1/(V*(1-Y*Y));var X=Y*Math.sin(l)+_*r.aycof,Q=(L+l+E+_*r.xlcof*H-E)%m;c=Q,A=9999.9;for(var Z=1;Math.abs(A)>=1e-12&&Z<=10;)t=Math.sin(c),A=(Q-X*(n=Math.cos(c))+H*t-c)/(A=1-n*H-t*X),Math.abs(A)>=.95&&(A=A>0?.95:-.95),c+=A,Z+=1;var W=H*n+X*t,K=H*t-X*n,$=H*H+X*X,rr=V*(1-$);if(rr<0)return r.error=4,[!1,!1];var er=V*(1-W),nr=Math.sqrt(V)*K/er,tr=Math.sqrt(rr)/er,ir=Math.sqrt(1-$),or=V/er*(t-X-H*(_=K/(1+ir))),ar=V/er*(n-H+X*_);M=Math.atan2(or,ar);var sr=(ar+ar)*or,cr=1-2*or*or,ur=.5*g*(_=1/rr),hr=ur*_;"d"===r.method&&(a=i*i,r.con41=3*a-1,r.x1mth2=1-a,r.x7thm1=7*a-1);var mr=er*(1-1.5*hr*ir*r.con41)+.5*ur*r.x1mth2*cr;if(mr<1)return r.error=6,{position:!1,velocity:!1};M-=.25*hr*r.x7thm1*sr;var lr=E+1.5*hr*i*sr,fr=C+1.5*hr*i*o*cr,dr=nr-j*ur*r.x1mth2*sr/d,pr=tr+j*ur*(r.x1mth2*cr+1.5*r.con41)/d,Mr=Math.sin(M),gr=Math.cos(M),xr=Math.sin(lr),yr=Math.cos(lr),vr=Math.sin(fr),br=Math.cos(fr),Tr=-xr*br,wr=yr*br,Ar=Tr*Mr+yr*gr,_r=wr*Mr+xr*gr,zr=vr*Mr;return{position:{x:mr*Ar*f,y:mr*_r*f,z:mr*zr*f},velocity:{x:(dr*Ar+pr*(Tr*gr-yr*Mr))*p,y:(dr*_r+pr*(wr*gr-xr*Mr))*p,z:(dr*zr+pr*(vr*gr))*p}}}function z(r,e){var n,t=1440/(2*h),i={error:0};i.satnum=r.substring(2,7),i.epochyr=parseInt(r.substring(18,20),10),i.epochdays=parseFloat(r.substring(20,32)),i.ndot=parseFloat(r.substring(33,43)),i.nddot=parseFloat(".".concat(parseInt(r.substring(44,50),10),"E").concat(r.substring(50,52))),i.bstar=parseFloat("".concat(r.substring(53,54),".").concat(parseInt(r.substring(54,59),10),"E").concat(r.substring(59,61))),i.inclo=parseFloat(e.substring(8,16)),i.nodeo=parseFloat(e.substring(17,25)),i.ecco=parseFloat(".".concat(e.substring(26,33))),i.argpo=parseFloat(e.substring(34,42)),i.mo=parseFloat(e.substring(43,51)),i.no=parseFloat(e.substring(52,63)),i.no/=t,i.a=Math.pow(i.no*M,-2/3),i.ndot/=1440*t,i.nddot/=1440*t*1440,i.inclo*=l,i.nodeo*=l,i.argpo*=l,i.mo*=l,i.alta=i.a*(1+i.ecco)-1,i.altp=i.a*(1-i.ecco)-1;var o=function(r,e){for(var n=[31,r%4==0?29:28,31,30,31,30,31,31,30,31,30,31],t=Math.floor(e),i=1,o=0;t>o+n[i-1]&&i<12;)o+=n[i-1],i+=1;var a=i,s=t-o,c=24*(e-t),u=Math.floor(c);c=60*(c-u);var h=Math.floor(c);return{mon:a,day:s,hr:u,minute:h,sec:60*(c-h)}}(n=i.epochyr<57?i.epochyr+2e3:i.epochyr+1900,i.epochdays),a=o.mon,s=o.day,c=o.hr,u=o.minute,p=o.sec;return i.jdsatepoch=b(n,a,s,c,u,p),function(r,e){var n,t,i,o,a,s,c,u,l,p,M,v,b,w,z,S,I,P,k,j,D,C,q,L,E,N,R,O,U,J,F,G,V,Y,B,H,X,Q,Z,W,K,$,rr,er,nr,tr,ir,or,ar,sr,cr,ur,hr=e.opsmode,mr=e.satn,lr=e.epoch,fr=e.xbstar,dr=e.xecco,pr=e.xargpo,Mr=e.xinclo,gr=e.xmo,xr=e.xno,yr=e.xnodeo;r.isimp=0,r.method="n",r.aycof=0,r.con41=0,r.cc1=0,r.cc4=0,r.cc5=0,r.d2=0,r.d3=0,r.d4=0,r.delmo=0,r.eta=0,r.argpdot=0,r.omgcof=0,r.sinmao=0,r.t=0,r.t2cof=0,r.t3cof=0,r.t4cof=0,r.t5cof=0,r.x1mth2=0,r.x7thm1=0,r.mdot=0,r.nodedot=0,r.xlcof=0,r.xmcof=0,r.nodecf=0,r.irez=0,r.d2201=0,r.d2211=0,r.d3210=0,r.d3222=0,r.d4410=0,r.d4422=0,r.d5220=0,r.d5232=0,r.d5421=0,r.d5433=0,r.dedt=0,r.del1=0,r.del2=0,r.del3=0,r.didt=0,r.dmdt=0,r.dnodt=0,r.domdt=0,r.e3=0,r.ee2=0,r.peo=0,r.pgho=0,r.pho=0,r.pinco=0,r.plo=0,r.se2=0,r.se3=0,r.sgh2=0,r.sgh3=0,r.sgh4=0,r.sh2=0,r.sh3=0,r.si2=0,r.si3=0,r.sl2=0,r.sl3=0,r.sl4=0,r.gsto=0,r.xfact=0,r.xgh2=0,r.xgh3=0,r.xgh4=0,r.xh2=0,r.xh3=0,r.xi2=0,r.xi3=0,r.xl2=0,r.xl3=0,r.xl4=0,r.xlamo=0,r.zmol=0,r.zmos=0,r.atime=0,r.xli=0,r.xni=0,r.bstar=fr,r.ecco=dr,r.argpo=pr,r.inclo=Mr,r.mo=gr,r.no=xr,r.nodeo=yr,r.operationmode=hr,r.init="y",r.t=0;var vr=function(r){var e=r.ecco,n=r.epoch,t=r.inclo,i=r.opsmode,o=r.no,a=e*e,s=1-a,c=Math.sqrt(s),u=Math.cos(t),h=u*u,l=Math.pow(d/o,y),f=.75*g*(3*h-1)/(c*s),p=f/(l*l),M=l*(1-p*p-p*(1/3+134*p*p/81));o/=1+(p=f/(M*M));var x,v=Math.pow(d/o,y),b=Math.sin(t),T=v*s,w=1-5*h,_=-w-h-h,z=1/v,S=T*T,I=v*(1-e);if("a"===i){var P=n-7305,k=Math.floor(P+1e-8),j=.017202791694070362;(x=(1.7321343856509375+j*k+(j+m)*(P-k)+P*P*5075514194322695e-30)%m)<0&&(x+=m)}else x=A(n+2433281.5);return{no:o,method:"n",ainv:z,ao:v,con41:_,con42:w,cosio:u,cosio2:h,eccsq:a,omeosq:s,posq:S,rp:I,rteosq:c,sinio:b,gsto:x}}({satn:mr,ecco:r.ecco,epoch:lr,inclo:r.inclo,no:r.no,method:r.method,opsmode:r.operationmode}),br=vr.ao,Tr=vr.con42,wr=vr.cosio,Ar=vr.cosio2,_r=vr.eccsq,zr=vr.omeosq,Sr=vr.posq,Ir=vr.rp,Pr=vr.rteosq,kr=vr.sinio;if(r.no=vr.no,r.con41=vr.con41,r.gsto=vr.gsto,r.error=0,zr>=0||r.no>=0){if(r.isimp=0,Ir<220/f+1&&(r.isimp=1),L=1.0122292763545218,P=1.8802768006108976e-9,(z=(Ir-1)*f)<156){L=z-78,z<98&&(L=20);var jr=(120-L)/f;P=jr*jr*jr*jr,L=L/f+1}S=1/Sr,$=1/(br-L),r.eta=br*r.ecco*$,v=r.eta*r.eta,M=r.ecco*r.eta,I=Math.abs(1-v),o=(c=(s=P*Math.pow($,4))/Math.pow(I,3.5))*r.no*(br*(1+1.5*v+M*(4+v))+.375*g*$/I*r.con41*(8+3*v*(8+v))),r.cc1=r.bstar*o,a=0,r.ecco>1e-4&&(a=-2*s*$*x*r.no*kr/r.ecco),r.x1mth2=1-Ar,r.cc4=2*r.no*c*br*zr*(r.eta*(2+.5*v)+r.ecco*(.5+2*v)-g*$/(br*I)*(-3*r.con41*(1-2*M+v*(1.5-.5*M))+.75*r.x1mth2*(2*v-M*(1+v))*Math.cos(2*r.argpo))),r.cc5=2*c*br*zr*(1+2.75*(v+M)+M*v),u=Ar*Ar,W=.5*(Z=1.5*g*S*r.no)*g*S,K=7.551504421875001e-7*S*S*r.no,r.mdot=r.no+.5*Z*Pr*r.con41+.0625*W*Pr*(13-78*Ar+137*u),r.argpdot=-.5*Z*Tr+.0625*W*(7-114*Ar+395*u)+K*(3-36*Ar+49*u),er=-Z*wr,r.nodedot=er+(.5*W*(4-19*Ar)+2*K*(3-7*Ar))*wr,rr=r.argpdot+r.nodedot,r.omgcof=r.bstar*a*Math.cos(r.argpo),r.xmcof=0,r.ecco>1e-4&&(r.xmcof=-y*s*r.bstar/M),r.nodecf=3.5*zr*er*r.cc1,r.t2cof=1.5*r.cc1,Math.abs(wr+1)>15e-13?r.xlcof=-.25*x*kr*(3+5*wr)/(1+wr):r.xlcof=-.25*x*kr*(3+5*wr)/15e-13,r.aycof=-.5*x*kr;var Dr=1+r.eta*Math.cos(r.mo);if(r.delmo=Dr*Dr*Dr,r.sinmao=Math.sin(r.mo),r.x7thm1=7*Ar-1,2*h/r.no>=225){r.method="d",r.isimp=1,b=r.inclo;var Cr=function(r){var e,n,t,i,o,a,s,c,u,h,l,f,d,p,M,g,x,y,v,b,T,w,A,_,z,S,I,P,k,j,D,C,q,L,E,N,R,O,U,J,F,G,V,Y,B,H,X,Q,Z,W,K,$,rr,er,nr,tr,ir,or,ar,sr,cr,ur,hr,mr=r.epoch,lr=r.argpp,fr=r.tc,dr=r.inclp,pr=r.nodep,Mr=.01675,gr=.0549,xr=r.np,yr=r.ep,vr=Math.sin(pr),br=Math.cos(pr),Tr=Math.sin(lr),wr=Math.cos(lr),Ar=Math.sin(dr),_r=Math.cos(dr),zr=yr*yr,Sr=1-zr,Ir=Math.sqrt(Sr),Pr=mr+18261.5+fr/1440,kr=(4.523602-.00092422029*Pr)%m,jr=Math.sin(kr),Dr=Math.cos(kr),Cr=.91375164-.03568096*Dr,qr=Math.sqrt(1-Cr*Cr),Lr=.089683511*jr/qr,Er=Math.sqrt(1-Lr*Lr),Nr=5.8351514+.001944368*Pr,Rr=.39785416*jr/qr,Or=Er*Dr+.91744867*Lr*jr;Rr=Math.atan2(Rr,Or),Rr+=Nr-kr;var Ur=Math.cos(Rr),Jr=Math.sin(Rr);b=.1945905,T=-.98088458,_=.91744867,z=.39785416,w=br,A=vr,l=29864797e-13;for(var Fr=1/xr,Gr=0;Gr<2;)nr=-6*(e=b*w+T*_*A)*(o=-Ar*(s=-b*A+T*_*w)+_r*(c=T*z))+zr*(-24*(f=e*wr+(n=_r*s+Ar*c)*Tr)*(y=o*wr)-6*(p=-e*Tr+n*wr)*(g=o*Tr)),tr=-6*(e*(a=-Ar*(u=T*A+b*_*w)+_r*(h=b*z))+(t=-T*w+b*_*A)*o)+zr*(-24*((d=t*wr+(i=_r*u+Ar*h)*Tr)*y+f*(v=a*wr))+-6*(p*(x=a*Tr)+(M=-t*Tr+i*wr)*g)),ir=-6*t*a+zr*(-24*d*v-6*M*x),or=6*n*o+zr*(24*f*g-6*p*y),ar=6*(i*o+n*a)+zr*(24*(d*g+f*x)-6*(M*y+p*v)),sr=6*i*a+zr*(24*d*x-6*M*v),$=($=3*(e*e+n*n)+(cr=12*f*f-3*p*p)*zr)+$+Sr*cr,rr=(rr=6*(e*t+n*i)+(ur=24*f*d-6*p*M)*zr)+rr+Sr*ur,er=(er=3*(t*t+i*i)+(hr=12*d*d-3*M*M)*zr)+er+Sr*hr,H=-.5*(X=l*Fr)/Ir,B=-15*yr*(Q=X*Ir),Z=f*p+d*M,W=d*p+f*M,K=d*M-f*p,1===(Gr+=1)&&(S=B,I=H,P=X,k=Q,j=Z,D=W,C=K,q=$,L=rr,E=er,N=nr,R=tr,O=ir,U=or,J=ar,F=sr,G=cr,V=ur,Y=hr,b=Ur,T=Jr,_=Cr,z=qr,w=Er*br+Lr*vr,A=vr*Er-br*Lr,l=4.7968065e-7);return{snodm:vr,cnodm:br,sinim:Ar,cosim:_r,sinomm:Tr,cosomm:wr,day:Pr,e3:2*B*K,ee2:2*B*W,em:yr,emsq:zr,gam:Nr,peo:0,pgho:0,pho:0,pinco:0,plo:0,rtemsq:Ir,se2:2*S*D,se3:2*S*C,sgh2:2*k*V,sgh3:2*k*(Y-G),sgh4:-18*k*Mr,sh2:-2*I*J,sh3:-2*I*(F-U),si2:2*I*R,si3:2*I*(O-N),sl2:-2*P*L,sl3:-2*P*(E-q),sl4:-2*P*(-21-9*zr)*Mr,s1:B,s2:H,s3:X,s4:Q,s5:Z,s6:W,s7:K,ss1:S,ss2:I,ss3:P,ss4:k,ss5:j,ss6:D,ss7:C,sz1:q,sz2:L,sz3:E,sz11:N,sz12:R,sz13:O,sz21:U,sz22:J,sz23:F,sz31:G,sz32:V,sz33:Y,xgh2:2*Q*ur,xgh3:2*Q*(hr-cr),xgh4:-18*Q*gr,xh2:-2*H*ar,xh3:-2*H*(sr-or),xi2:2*H*tr,xi3:2*H*(ir-nr),xl2:-2*X*rr,xl3:-2*X*(er-$),xl4:-2*X*(-21-9*zr)*gr,nm:xr,z1:$,z2:rr,z3:er,z11:nr,z12:tr,z13:ir,z21:or,z22:ar,z23:sr,z31:cr,z32:ur,z33:hr,zmol:(.2299715*Pr-Nr+4.7199672)%m,zmos:(6.2565837+.017201977*Pr)%m}}({epoch:lr,ep:r.ecco,argpp:r.argpo,tc:0,inclp:r.inclo,nodep:r.nodeo,np:r.no,e3:r.e3,ee2:r.ee2,peo:r.peo,pgho:r.pgho,pho:r.pho,pinco:r.pinco,plo:r.plo,se2:r.se2,se3:r.se3,sgh2:r.sgh2,sgh3:r.sgh3,sgh4:r.sgh4,sh2:r.sh2,sh3:r.sh3,si2:r.si2,si3:r.si3,sl2:r.sl2,sl3:r.sl3,sl4:r.sl4,xgh2:r.xgh2,xgh3:r.xgh3,xgh4:r.xgh4,xh2:r.xh2,xh3:r.xh3,xi2:r.xi2,xi3:r.xi3,xl2:r.xl2,xl3:r.xl3,xl4:r.xl4,zmol:r.zmol,zmos:r.zmos});r.e3=Cr.e3,r.ee2=Cr.ee2,r.peo=Cr.peo,r.pgho=Cr.pgho,r.pho=Cr.pho,r.pinco=Cr.pinco,r.plo=Cr.plo,r.se2=Cr.se2,r.se3=Cr.se3,r.sgh2=Cr.sgh2,r.sgh3=Cr.sgh3,r.sgh4=Cr.sgh4,r.sh2=Cr.sh2,r.sh3=Cr.sh3,r.si2=Cr.si2,r.si3=Cr.si3,r.sl2=Cr.sl2,r.sl3=Cr.sl3,r.sl4=Cr.sl4,t=Cr.sinim,n=Cr.cosim,l=Cr.em,p=Cr.emsq,k=Cr.s1,j=Cr.s2,D=Cr.s3,C=Cr.s4,q=Cr.s5,E=Cr.ss1,N=Cr.ss2,R=Cr.ss3,O=Cr.ss4,U=Cr.ss5,J=Cr.sz1,F=Cr.sz3,G=Cr.sz11,V=Cr.sz13,Y=Cr.sz21,B=Cr.sz23,H=Cr.sz31,X=Cr.sz33,r.xgh2=Cr.xgh2,r.xgh3=Cr.xgh3,r.xgh4=Cr.xgh4,r.xh2=Cr.xh2,r.xh3=Cr.xh3,r.xi2=Cr.xi2,r.xi3=Cr.xi3,r.xl2=Cr.xl2,r.xl3=Cr.xl3,r.xl4=Cr.xl4,r.zmol=Cr.zmol,r.zmos=Cr.zmos,w=Cr.nm,nr=Cr.z1,tr=Cr.z3,ir=Cr.z11,or=Cr.z13,ar=Cr.z21,sr=Cr.z23,cr=Cr.z31,ur=Cr.z33;var qr=T(r,{inclo:b,init:r.init,ep:r.ecco,inclp:r.inclo,nodep:r.nodeo,argpp:r.argpo,mp:r.mo,opsmode:r.operationmode});r.ecco=qr.ep,r.inclo=qr.inclp,r.nodeo=qr.nodep,r.argpo=qr.argpp,r.mo=qr.mp;var Lr=function(r){var e,n,t,i,o,a,s,c,u,l,f,p,M,g,x,v,b,T,w,A,_=r.cosim,z=r.argpo,S=r.s2,I=r.sinim,P=r.ss2,k=r.t,j=r.mo,D=r.mdot,C=r.no,q=r.nodeo,L=r.nodedot,E=r.xpidot,N=r.ecco,R=r.eccsq,O=r.emsq,U=r.em,J=r.argpm,F=r.inclm,G=r.mm,V=r.nm,Y=r.nodem,B=r.irez,H=r.atime,X=r.d2201,Q=r.d2211,Z=r.d3210,W=r.d3222,K=r.d4410,$=r.d4422,rr=r.d5220,er=r.d5232,nr=r.d5421,tr=r.d5433,ir=r.dnodt,or=r.domdt,ar=r.del1,sr=r.del2,cr=r.del3,ur=r.xfact,hr=r.xlamo,mr=r.xli,lr=r.xni,fr=.0043752690880113,dr=.00015835218,pr=119459e-10;B=0,V<.0052359877&&V>.0034906585&&(B=1),V>=.00826&&V<=.00924&&U>=.5&&(B=2);var Mr=-pr*P*(r.sz21+r.sz23);(F<.052359877||F>h-.052359877)&&(Mr=0),0!==I&&(Mr/=I);var gr=-dr*S*(r.z21+r.z23);(F<.052359877||F>h-.052359877)&&(gr=0),or=r.ss4*pr*(r.sz31+r.sz33-6)-_*Mr+r.s4*dr*(r.z31+r.z33-6),ir=Mr,0!==I&&(or-=_/I*gr,ir+=gr/I);var xr=(r.gsto+r.tc*fr)%m;if(U+=(T=r.ss1*pr*r.ss5+r.s1*dr*r.s5)*k,F+=(w=P*pr*(r.sz11+r.sz13)+S*dr*(r.z11+r.z13))*k,J+=or*k,Y+=ir*k,G+=(A=-pr*r.ss3*(r.sz1+r.sz3-14-6*O)-dr*r.s3*(r.z1+r.z3-14-6*O))*k,0!==B){if(x=Math.pow(V/d,y),2===B){var yr=U,vr=O;b=(U=N)*(O=R),U<=.65?(t=3.616-13.247*U+16.29*O,i=117.39*U-19.302-228.419*O+156.591*b,o=109.7927*U-18.9068-214.6334*O+146.5816*b,a=242.694*U-41.122-471.094*O+313.953*b,s=841.88*U-146.407-1629.014*O+1083.435*b,c=3017.977*U-532.114-5740.032*O+3708.276*b):(t=331.819*U-72.099-508.738*O+266.724*b,i=1582.851*U-346.844-2415.925*O+1246.113*b,o=1554.908*U-342.585-2366.899*O+1215.972*b,a=4758.686*U-1052.797-7193.992*O+3651.957*b,s=16178.11*U-3581.69-24462.77*O+12422.52*b,c=U>.715?29936.92*U-5149.66-54087.36*O+31324.56*b:1464.74-4664.75*U+3763.64*O),U<.7?(f=4988.61*U-919.2277-9064.77*O+5542.21*b,u=4568.6173*U-822.71072-8491.4146*O+5337.524*b,l=4690.25*U-853.666-8624.77*O+5341.4*b):(f=161616.52*U-37995.78-229838.2*O+109377.94*b,u=218913.95*U-51752.104-309468.16*O+146349.42*b,l=170470.89*U-40023.88-242699.48*O+115605.82*b),X=(M=17891679e-13*(g=V*V*3*(x*x)))*(e=.75*(1+2*_+(v=_*_)))*(-.306-.44*(U-.64)),Q=M*(1.5*(p=I*I))*t,Z=(M=3.7393792e-7*(g*=x))*(1.875*I*(1-2*_-3*v))*i,W=M*(-1.875*I*(1+2*_-3*v))*o,K=(M=2*(g*=x)*7.3636953e-9)*(35*p*e)*a,$=M*(39.375*p*p)*s,rr=(M=1.1428639e-7*(g*=x))*(9.84375*I*(p*(1-2*_-5*v)+.33333333*(4*_-2+6*v)))*c,er=M*(I*(4.92187512*p*(-2-4*_+10*v)+6.56250012*(1+2*_-3*v)))*l,nr=(M=2*g*2.1765803e-9)*(29.53125*I*(2-8*_+v*(8*_-12+10*v)))*u,tr=M*(29.53125*I*(-2-8*_+v*(12+8*_-10*v)))*f,hr=(j+q+q-(xr+xr))%m,ur=D+A+2*(L+ir-fr)-C,U=yr,O=vr}1===B&&(n=1+_,sr=2*(ar=3*V*V*x*x)*(e=.75*(1+_)*(1+_))*(1+O*(.8125*O-2.5))*17891679e-13,cr=3*ar*(n*=1.875*n*n)*(1+O*(6.60937*O-6))*2.2123015e-7*x,ar=ar*(.9375*I*I*(1+3*_)-.75*(1+_))*(i=1+2*O)*21460748e-13*x,hr=(j+q+z-xr)%m,ur=D+E+A+or+ir-(C+fr)),mr=hr,lr=C,H=0,V=C+0}return{em:U,argpm:J,inclm:F,mm:G,nm:V,nodem:Y,irez:B,atime:H,d2201:X,d2211:Q,d3210:Z,d3222:W,d4410:K,d4422:$,d5220:rr,d5232:er,d5421:nr,d5433:tr,dedt:T,didt:w,dmdt:A,dndt:0,dnodt:ir,domdt:or,del1:ar,del2:sr,del3:cr,xfact:ur,xlamo:hr,xli:mr,xni:lr}}({cosim:n,emsq:p,argpo:r.argpo,s1:k,s2:j,s3:D,s4:C,s5:q,sinim:t,ss1:E,ss2:N,ss3:R,ss4:O,ss5:U,sz1:J,sz3:F,sz11:G,sz13:V,sz21:Y,sz23:B,sz31:H,sz33:X,t:r.t,tc:0,gsto:r.gsto,mo:r.mo,mdot:r.mdot,no:r.no,nodeo:r.nodeo,nodedot:r.nodedot,xpidot:rr,z1:nr,z3:tr,z11:ir,z13:or,z21:ar,z23:sr,z31:cr,z33:ur,ecco:r.ecco,eccsq:_r,em:l,argpm:0,inclm:b,mm:0,nm:w,nodem:0,irez:r.irez,atime:r.atime,d2201:r.d2201,d2211:r.d2211,d3210:r.d3210,d3222:r.d3222,d4410:r.d4410,d4422:r.d4422,d5220:r.d5220,d5232:r.d5232,d5421:r.d5421,d5433:r.d5433,dedt:r.dedt,didt:r.didt,dmdt:r.dmdt,dnodt:r.dnodt,domdt:r.domdt,del1:r.del1,del2:r.del2,del3:r.del3,xfact:r.xfact,xlamo:r.xlamo,xli:r.xli,xni:r.xni});r.irez=Lr.irez,r.atime=Lr.atime,r.d2201=Lr.d2201,r.d2211=Lr.d2211,r.d3210=Lr.d3210,r.d3222=Lr.d3222,r.d4410=Lr.d4410,r.d4422=Lr.d4422,r.d5220=Lr.d5220,r.d5232=Lr.d5232,r.d5421=Lr.d5421,r.d5433=Lr.d5433,r.dedt=Lr.dedt,r.didt=Lr.didt,r.dmdt=Lr.dmdt,r.dnodt=Lr.dnodt,r.domdt=Lr.domdt,r.del1=Lr.del1,r.del2=Lr.del2,r.del3=Lr.del3,r.xfact=Lr.xfact,r.xlamo=Lr.xlamo,r.xli=Lr.xli,r.xni=Lr.xni}1!==r.isimp&&(i=r.cc1*r.cc1,r.d2=4*br*$*i,Q=r.d2*$*r.cc1/3,r.d3=(17*br+L)*Q,r.d4=.5*Q*br*$*(221*br+31*L)*r.cc1,r.t3cof=r.d2+2*i,r.t4cof=.25*(3*r.d3+r.cc1*(12*r.d2+10*i)),r.t5cof=.2*(3*r.d4+12*r.cc1*r.d3+6*r.d2*r.d2+15*i*(2*r.d2+i)))}_(r,0),r.init="n"}(i,{opsmode:"i",satn:i.satnum,epoch:i.jdsatepoch-2433281.5,xbstar:i.bstar,xecco:i.ecco,xargpo:i.argpo,xinclo:i.inclo,xmo:i.mo,xno:i.no,xnodeo:i.nodeo}),i}function S(r){var e=r.longitude,n=r.latitude,t=r.height,i=6378.137,o=(i-6356.7523142)/i,a=2*o-o*o,s=i/Math.sqrt(1-a*(Math.sin(n)*Math.sin(n)));return{x:(s+t)*Math.cos(n)*Math.cos(e),y:(s+t)*Math.cos(n)*Math.sin(e),z:(s*(1-a)+t)*Math.sin(n)}}function I(r,e){for(var n=6378.137,t=Math.sqrt(r.x*r.x+r.y*r.y),i=(n-6356.7523142)/n,o=2*i-i*i,a=Math.atan2(r.y,r.x)-e;a<-h;)a+=m;for(;a>h;)a-=m;for(var s,c=0,u=Math.atan2(r.z,Math.sqrt(r.x*r.x+r.y*r.y));c<20;)s=1/Math.sqrt(1-o*(Math.sin(u)*Math.sin(u))),u=Math.atan2(r.z+n*s*o*Math.sin(u),t),c+=1;return{longitude:a,latitude:u,height:t/Math.cos(u)-n*s}}function P(r,e){return{x:r.x*Math.cos(e)-r.y*Math.sin(e),y:r.x*Math.sin(e)+r.y*Math.cos(e),z:r.z}}function k(r,e){return{x:r.x*Math.cos(e)+r.y*Math.sin(e),y:r.x*-Math.sin(e)+r.y*Math.cos(e),z:r.z}}function j(r,e){var n,t,i,o,a,s,c=function(r,e){var n=r.longitude,t=r.latitude,i=S(r),o=e.x-i.x,a=e.y-i.y,s=e.z-i.z;return{topS:Math.sin(t)*Math.cos(n)*o+Math.sin(t)*Math.sin(n)*a-Math.cos(t)*s,topE:-Math.sin(n)*o+Math.cos(n)*a,topZ:Math.cos(t)*Math.cos(n)*o+Math.cos(t)*Math.sin(n)*a+Math.sin(t)*s}}(r,e);return t=(n=c).topS,i=n.topE,o=n.topZ,a=Math.sqrt(t*t+i*i+o*o),s=Math.asin(o/a),{azimuth:Math.atan2(-i,t)+h,elevation:s,rangeSat:a}}!function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.PAYLOAD=1]="PAYLOAD",r[r.ROCKET_BODY=2]="ROCKET_BODY",r[r.DEBRIS=3]="DEBRIS",r[r.SPECIAL=4]="SPECIAL",r[r.RADAR_MEASUREMENT=5]="RADAR_MEASUREMENT",r[r.RADAR_TRACK=6]="RADAR_TRACK",r[r.RADAR_OBJECT=7]="RADAR_OBJECT",r[r.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",r[r.STAR=9]="STAR",r[r.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",r[r.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",r[r.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",r[r.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",r[r.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",r[r.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",r[r.LAUNCH_SITE=16]="LAUNCH_SITE",r[r.LAUNCH_POSITION=17]="LAUNCH_POSITION",r[r.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",r[r.CONTROL_FACILITY=19]="CONTROL_FACILITY",r[r.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",r[r.OPTICAL=21]="OPTICAL",r[r.MECHANICAL=22]="MECHANICAL",r[r.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",r[r.OBSERVER=24]="OBSERVER",r[r.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",r[r.COUNTRY=26]="COUNTRY",r[r.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",r[r.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER"}(a||(a={}));const D={latitude:null,longitude:0,height:0},C={JMod:2400000.5,J2000:2451545,J1900:2415020,B1900:2415020.3135,B1950:2433282.4235,JulianYear:365.25,JulianCentury:36525,BesselianYear:365.2421988,AU:149597870,EclCoord:function(r,e,n){if(isNaN(r)||isNaN(e))throw Error("Invalid EclCoord object: ("+r+", "+e+")");this.lat=r,this.lng=e,void 0!==n&&(this.h=n)}};C.EclCoord.prototype={toWgs84String:function(){return C.Math.formatNum(180*this.lat/Math.PI)+", "+C.Math.formatNum(180*-this.lng/Math.PI)}},C.EclCoordfromWgs84=function(r,e,n){return new C.EclCoord(r*Math.PI/180,-e*Math.PI/180,n)},C.EqCoord=function(r,e){if(isNaN(r)||isNaN(e))throw Error("Invalid EqCoord object: ("+r+", "+e+")");this.ra=r,this.dec=e},C.EqCoord.prototype={toString:function(){return"ra:"+C.Math.formatNum(180*this.ra/Math.PI)+", dec:"+C.Math.formatNum(180*this.dec/Math.PI)}},C.HzCoord=function(r,e){if(isNaN(r)||isNaN(e))throw Error("Invalid HzCoord object: ("+r+", "+e+")");this.az=r,this.alt=e},C.HzCoord.prototype={toString:function(){return"azi:"+C.Math.formatNum(180*this.az/Math.PI)+", alt:"+C.Math.formatNum(180*this.alt/Math.PI)}},C.Coord={dmsToDeg:function(r,e,n,t){return t=(60*(60*e+n)+t)/3600,r?-t:t},calcAngle:function(r,e,n,t){return C.Coord.dmsToDeg(r,e,n,t)*Math.PI/180},calcRA:function(r,e,n){return C.Coord.dmsToDeg(!1,r,e,n)%24*15*Math.PI/180},secondsToHMSStr:function(r){var e=Math.floor(r/86400);r=C.Math.pMod(r,86400);var n=Math.floor(r/3600)%24,t=Math.floor(r/60)%60;return(0!==e?e+"d ":"")+(10>n?"0":"")+n+":"+(10>t?"0":"")+t+":"+(10>(r=Math.floor(r%60))?"0":"")+r},secondsToHMStr:function(r){var e=Math.floor(r/86400);r=C.Math.pMod(r,86400);var n=Math.floor(r/3600)%24;return(0!==e?e+"d ":"")+(10>n?"0":"")+n+":"+(10>(r=Math.floor(r/60)%60)?"0":"")+r},eqToEcl:function(r,e){var n=Math.sin(r.ra),t=Math.sin(r.dec),i=Math.cos(r.dec),o=Math.sin(e);return e=Math.cos(e),new C.EclCoord(Math.atan2(n*e+t/i*o,Math.cos(r.ra)),Math.asin(t*e-i*o*n))},eclToEq:function(r,e){var n=Math.sin(r.lat),t=Math.sin(r.lng),i=Math.cos(r.lng),o=Math.sin(e);e=Math.cos(e);let a=Math.atan2(n*e-t/i*o,Math.cos(r.lat));return 0>a&&(a+=2*Math.PI),new C.EqCoord(a,Math.asin(t*e+i*o*n))},eqToHz:function(r,e,n){n=n-e.lng-r.ra;var t=Math.cos(n),i=Math.sin(e.lat);e=Math.cos(e.lat);var o=Math.sin(r.dec);return r=Math.cos(r.dec),new C.HzCoord(Math.atan2(Math.sin(n),t*i-o/r*e),Math.asin(i*o+e*r*t))}},C.DeltaT={jdToJde:function(r,e){return e||(e=C.DeltaT.estimate(r)),r+e/86400},jdeToJd:function(r,e){return e||(e=C.DeltaT.estimate(r)),r-e/86400},decimalYear:function(r){return(r=C.JulianDay.jdToCalendar(r)).y+(r.m-.5)/12},estimate:function(r){var e=C.DeltaT.decimalYear(r);return r=Math.pow,-500>e?32*r((e-1820)/100,2)-20:500>e?10583.6-1014.41*(e/=100)+33.78311*r(e,2)-5.952053*r(e,3)-.1798452*r(e,4)+.022174192*r(e,5)+.0090316521*r(e,6):1600>e?1574.2-556.01*(e=(e-1e3)/100)+71.23472*r(e,2)+.319781*r(e,3)-.8503463*r(e,4)-.005050998*r(e,5)+.0083572073*r(e,6):1700>e?120-.9808*(e-=1600)-.01532*r(e,2)+r(e,3)/7129:1800>e?8.83+.1603*(e-=1700)-.0059285*r(e,2)+13336e-8*r(e,3)-r(e,4)/1174e3:1860>e?13.72-.332447*(e-=1800)+.0068612*r(e,2)+.0041116*r(e,3)-37436e-8*r(e,4)+121272e-10*r(e,5)-1.699e-7*r(e,6)+8.75e-10*r(e,7):1900>e?7.62+.5737*(e-=1860)-.251754*r(e,2)+.01680668*r(e,3)-.0004473624*r(e,4)+r(e,5)/233174:1920>e?1.494119*(e-=1900)-2.79-.0598939*r(e,2)+.0061966*r(e,3)-197e-6*r(e,4):1941>e?21.2+.84493*(e-=1920)-.0761*r(e,2)+.0020936*r(e,3):1961>e?29.07+.407*(e-=1950)-r(e,2)/233+r(e,3)/2547:1986>e?45.45+1.067*(e-=1975)-r(e,2)/260-r(e,3)/718:2005>e?63.86+.3345*(e-=2e3)-.060374*r(e,2)+.0017275*r(e,3)+651814e-9*r(e,4)+2373599e-11*r(e,5):2050>e?62.92+.32217*(e-=2e3)+.005589*r(e,2):2150>e?32*r((e-1820)/100,2)-20-.5628*(2150-e):32*r((e-1820)/100,2)-20}},C.Globe={Er:6378.14,Fl:1/298.257,parallaxConstants:function(r,e){e||(e=0);var n=1-C.Globe.Fl;return e=.001*e/C.Globe.Er,{rhoslat:Math.sin(Math.atan(n*Math.tan(r)))*n+e*Math.sin(r),rhoclat:Math.cos(Math.atan(n*Math.tan(r)))+e*Math.cos(r)}}},C.Interp={newLen3:function(r,e,n){if(3!=n.length)throw"Error not 3";if(e==r)throw"Error no x range";var t=n[1]-n[0],i=n[2]-n[1];return{x1:r,x3:e,y:n,a:t,b:i,c:i-t,abSum:t+i,xSum:e+r,xDiff:e-r}},interpolateX:function(r,e){return C.Interp.interpolateN(r,(2*e-r.xSum)/r.xDiff)},interpolateN:function(r,e){return r.y[1]+.5*e*(r.abSum+e*r.c)}},C.JulianDay=function(r,e){r instanceof Date&&(r=C.JulianDay.dateToJD(r)),this.jd=r,this.deltaT=e||C.DeltaT.estimate(this.jd),this.jde=C.DeltaT.jdToJde(this.jd,this.deltaT)},C.JulianDay.prototype={toCalendar:function(){return C.JulianDay.jdToCalendar(this.jd)},toDate:function(){return C.JulianDay.jdToDate(this.jd)},jdJ2000Century:function(){return(this.jd-C.J2000)/C.JulianCentury},jdeJ2000Century:function(){return(this.jde-C.J2000)/C.JulianCentury},startOfDay:function(){return new C.JulianDay(Math.floor(this.jde-.5)+.5,this.deltaT)}},C.JulianDay.gregorianTimeStart=Date.UTC(1582,9,4),C.JulianDay.jdFromGregorian=function(r,e,n){return new C.JulianDay(C.JulianDay.jdFromGregorian(r,e,n))},C.JulianDay.jdFromJulian=function(r,e,n){return new C.JulianDay(C.JulianDay.calendarJulianToJD(r,e,n))},C.JulianDay.jdFromJDE=function(r){var e=C.DeltaT.estimate(r);return r=C.DeltaT.jdeToJd(r,e),new C.JulianDay(r,e)},C.JulianDay.dateToJD=function(r){var e=r.getUTCDate()+C.JulianDay.secondsFromHMS(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds())/86400;return r.getTime()<C.JulianDay.gregorianTimeStart?C.JulianDay.calendarJulianToJD(r.getUTCFullYear(),r.getUTCMonth()+1,e):C.JulianDay.calendarGregorianToJD(r.getUTCFullYear(),r.getUTCMonth()+1,e)},C.JulianDay.calendarGregorianToJD=function(r,e,n){1!=e&&2!=e||(r--,e+=12);var t=Math.floor(r/100);return Math.floor(36525*(r+4716)/100)+Math.floor(306*(e+1)/10)+(2-t+Math.floor(t/4))+n-1524.5},C.JulianDay.calendarJulianToJD=function(r,e,n){return 1!=e&&2!=e||(r--,e+=12),Math.floor(36525*(r+4716)/100)+Math.floor(306*(e+1)/10)+n-1524.5},C.JulianDay.secondsFromHMS=function(r,e,n){return 3600*r+60*e+n},C.JulianDay.jdToDate=function(r){var e=C.JulianDay.jdToCalendar(r);return r=C.Math.modF(r+.5)[1],r=Math.round(86400*r),new Date(Date.UTC(e.y,e.m-1,Math.floor(e.d),Math.floor(r/3600)%24,Math.floor(r/60)%60,Math.floor(r%60)))},C.JulianDay.jdToCalendar=function(r){var e=(r=C.Math.modF(r+.5))[0],n=e;2299151<=e&&(n=e+1+(n=Math.floor((100*e-186721625)/3652425))-Math.floor(n/4));var t=n+1524;e=Math.floor((100*t-12210)/36525);var i=Math.floor(36525*e/100);return n=Math.floor(1e4*(t-i)/306001),r=t-i-Math.floor(306001*n/1e4)+r[1],{y:1==(n=14==n||15==n?n-13:n-1)||2==n?Math.floor(e)-4715:Math.floor(e)-4716,m:n,d:r}},C.JulianDay.leapYearGregorian=function(r){return 0==r%4&&0!=r%100||0==r%400},C.JulianDay.dayOfYear=function(r,e,n,t){return r=2,t&&r--,C.JulianDay._wholeMonths(e,r)+n},C.JulianDay._wholeMonths=function(r,e){return Math.round(275*r/9-(r+9)/12*e-30)},C.Math={pMod:function(r,e){return 0>(r%=e)&&(r+=e),r},modF:function(r){return 0>r?(r=-r,[-Math.floor(r),-r%1]):[Math.floor(r),r%1]},horner:function(r,e){var n=e.length-1;if(0>=n)throw"empty array not supported";for(var t=e[n];0<n;)t=t*r+e[--n];return t},formatNum:function(r,e){return e=Math.pow(10,4|e),Math.round(r*e)/e}},C.Moon={parallax:function(r){return Math.asin(6378.14/r)},apparentEquatorial:function(r){var e=C.Moon.geocentricPosition(r),n=C.Nutation.nutation(r);return r=C.Nutation.meanObliquityLaskar(r)+n.deltaobliquity,{eq:C.Coord.eclToEq(new C.EclCoord(e.lng+n.deltalng,e.lat),r),delta:e.delta}},apparentTopocentric:function(r,e,n){var t=C.Moon.apparentEquatorial(r),i=C.Globe.parallaxConstants(e.lat,e.h),o=C.Moon.parallax(t.delta);return n||(n=C.Sidereal.apparentInRa(r)),{eq:C.Parallax.topocentric(t.eq,o,i.rhoslat,i.rhoclat,e.lng,n),delta:t.delta}},topocentricPosition:function(r,e,n){var t=C.Sidereal.apparentInRa(r);r=C.Moon.apparentTopocentric(r,e,t);var i=C.Coord.eqToHz(r.eq,e,t);return!0===n&&(i.alt+=C.Refraction.bennett2(i.alt)),e=C.Moon.parallacticAngle(e.lat,t-(e.lng+r.eq.ra),r.eq.dec),{hz:i,eq:r.eq,delta:r.delta,q:e}},approxTransit:function(r,e){return r=r.startOfDay(),C.Rise.approxTransit(e,C.Sidereal.apparent0UT(r),C.Moon.apparentTopocentric(r,e).eq)},approxTimes:function(r,e){r=r.startOfDay();var n=C.Moon.apparentTopocentric(r,e),t=C.Moon.parallax(n.delta);return t=C.Rise.stdh0Lunar(t),r=C.Sidereal.apparent0UT(r),C.Rise.approxTimes(e,t,r,n.eq)},times:function(r,e){r=r.startOfDay();var n=C.Moon.apparentTopocentric(new C.JulianDay(r.jd-1,r.deltaT),e),t=C.Moon.apparentTopocentric(r,e),i=C.Moon.apparentTopocentric(new C.JulianDay(r.jd+1,r.deltaT),e),o=C.Moon.parallax(t.delta);o=C.Rise.stdh0Lunar(o);var a=C.Sidereal.apparent0UT(r);return C.Rise.times(e,r.deltaT,o,a,[n.eq,t.eq,i.eq])},parallacticAngle:function(r,e,n){return Math.atan2(Math.sin(e),Math.tan(r)*Math.cos(n)-Math.sin(n)*Math.cos(e))},geocentricPosition:function(r){var e=Math.PI/180,n=r.jdeJ2000Century();r=C.Math.pMod(C.Math.horner(n,[218.3164477*e,481267.88123421*e,-.0015786*e,e/538841,-e/65194e3]),2*Math.PI);var t=C.Math.pMod(C.Math.horner(n,[297.8501921*e,445267.1114034*e,-.0018819*e,e/545868,-e/113065e3]),2*Math.PI),i=C.Math.pMod(C.Math.horner(n,[357.5291092*e,35999.0502909*e,-1535e-7*e,e/2449e4]),2*Math.PI),o=C.Math.pMod(C.Math.horner(n,[134.9633964*e,477198.8675055*e,.0087414*e,e/69699,-e/14712e3]),2*Math.PI),a=C.Math.pMod(C.Math.horner(n,[93.272095*e,483202.0175233*e,-.0036539*e,-e/3526e3,e/86331e4]),2*Math.PI),s=119.75*e+131.849*e*n,c=53.09*e+479264.29*e*n,u=313.45*e+481266.484*e*n,h=(n=C.Math.horner(n,[1,-.002516,-74e-7]))*n;c=3958*Math.sin(s)+1962*Math.sin(r-a)+318*Math.sin(c);var m=0;for(s=-2235*Math.sin(r)+382*Math.sin(u)+175*Math.sin(s-a)+175*Math.sin(s+a)+127*Math.sin(r-o)-115*Math.sin(r+o),u=0;u<C.Moon.ta.length;u++){var l=C.Moon.ta[u],f=t*l[0]+i*l[1]+o*l[2]+a*l[3],d=Math.sin(f);switch(f=Math.cos(f),l[1]){case 0:c+=l[4]*d,m+=l[5]*f;break;case 1:case-1:c+=l[4]*d*n,m+=l[5]*f*n;break;case 2:case-2:c+=l[4]*d*h,m+=l[5]*f*h;break;default:throw"error"}}for(u=0;u<C.Moon.tb.length;u++)switch(l=C.Moon.tb[u],d=Math.sin(t*l[0]+i*l[1]+o*l[2]+a*l[3]),l[1]){case 0:s+=l[4]*d;break;case 1:case-1:s+=l[4]*d*n;break;case 2:case-2:s+=l[4]*d*h;break;default:throw"error"}return{lng:C.Math.pMod(r,2*Math.PI)+1e-6*c*e,lat:1e-6*s*e,delta:385000.56+.001*m}},ta:[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],tb:[[0,0,0,1,5128122],[0,0,1,1,280602],[0,0,1,-1,277693],[2,0,0,-1,173237],[2,0,-1,1,55413],[2,0,-1,-1,46271],[2,0,0,1,32573],[0,0,2,1,17198],[2,0,1,-1,9266],[0,0,2,-1,8822],[2,-1,0,-1,8216],[2,0,-2,-1,4324],[2,0,1,1,4200],[2,1,0,-1,-3359],[2,-1,-1,1,2463],[2,-1,0,1,2211],[2,-1,-1,-1,2065],[0,1,-1,-1,-1870],[4,0,-1,-1,1828],[0,1,0,1,-1794],[0,0,0,3,-1749],[0,1,-1,1,-1565],[1,0,0,1,-1491],[0,1,1,1,-1475],[0,1,1,-1,-1410],[0,1,0,-1,-1344],[1,0,0,-1,-1335],[0,0,3,1,1107],[4,0,0,-1,1021],[4,0,-1,1,833],[0,0,1,-3,777],[4,0,-2,1,671],[2,0,0,-3,607],[2,0,2,-1,596],[2,-1,1,-1,491],[2,0,-2,1,-451],[0,0,3,-1,439],[2,0,2,1,422],[2,0,-3,-1,421],[2,1,-1,1,-366],[2,1,0,1,-351],[4,0,0,1,331],[2,-1,1,1,315],[2,-2,0,-1,302],[0,0,1,3,-283],[2,1,1,-1,-229],[1,1,0,-1,223],[1,1,0,1,223],[0,1,-2,-1,-220],[2,1,-1,-1,-220],[1,0,1,1,-185],[2,-1,-2,-1,181],[0,1,2,1,-177],[4,0,-2,-1,176],[4,-1,-1,-1,166],[1,0,1,-1,-164],[4,0,1,-1,132],[1,0,-1,-1,-119],[4,-1,0,-1,115],[2,-2,0,1,107]]},C.MoonIllum={phaseAngleEq:function(r,e,n,t){return r=C.MoonIllum._coselong(r,n),Math.atan2(t*Math.sin(Math.acos(r)),e-t*r)},phaseAngleEq2:function(r,e){return Math.acos(-C.MoonIllum._coselong(r,e))},illuminated:function(r){return(1+Math.cos(r))/2},positionAngle:function(r,e){var n=Math.cos(e.dec);return Math.atan2(n*Math.sin(e.ra-r.ra),Math.sin(e.dec)*Math.cos(r.dec)-n*Math.sin(r.dec)*Math.cos(e.ra-r.ra))},_coselong:function(r,e){return Math.sin(e.dec)*Math.sin(r.dec)+Math.cos(e.dec)*Math.cos(r.dec)*Math.cos(e.ra-r.ra)}},C.Nutation={nutation:function(r){r=r.jdeJ2000Century();for(var e=C.Math.horner(r,[297.85036,445267.11148,-.0019142,1/189474])*Math.PI/180,n=C.Math.horner(r,[357.52772,35999.05034,-1603e-7,-1/3e5])*Math.PI/180,t=C.Math.horner(r,[134.96298,477198.867398,.0086972,1/5620])*Math.PI/180,i=C.Math.horner(r,[93.27191,483202.017538,-.0036825,1/327270])*Math.PI/180,o=C.Math.horner(r,[125.04452,-1934.136261,.0020708,1/45e4])*Math.PI/180,a=0,s=0,c=C.Nutation.table22A.length-1;0<=c;c--){var u=C.Nutation.table22A[c],h=u[0]*e+u[1]*n+u[2]*t+u[3]*i+u[4]*o,m=Math.cos(h);a+=Math.sin(h)*(u[5]+u[6]*r),s+=m*(u[7]+u[8]*r)}return{deltalng:1e-4/3600*a*(Math.PI/180),deltaobliquity:1e-4/3600*s*(Math.PI/180)}},nutationInRA:function(r){var e=C.Nutation.meanObliquityLaskar(r);return(r=C.Nutation.nutation(r)).deltalng*Math.cos(e+r.deltaobliquity)},trueObliquity:function(r){return C.Nutation.meanObliquityLaskar(r)+(r=C.Nutation.nutation(r)).deltaobliquity},meanObliquity:function(r){return C.Math.horner(r.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-46.815/3600*(Math.PI/180),-59e-5/3600*(Math.PI/180),.001813/3600*(Math.PI/180)])},meanObliquityLaskar:function(r){return C.Math.horner(.01*r.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-4680.93/3600*(Math.PI/180),-1.55/3600*(Math.PI/180),1999.25/3600*(Math.PI/180),-51.38/3600*(Math.PI/180),-249.67/3600*(Math.PI/180),-39.05/3600*(Math.PI/180),7.12/3600*(Math.PI/180),27.87/3600*(Math.PI/180),5.79/3600*(Math.PI/180),2.45/3600*(Math.PI/180)])},table22A:[[0,0,0,0,1,-171996,-174.2,92025,8.9],[-2,0,0,2,2,-13187,-1.6,5736,-3.1],[0,0,0,2,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[0,0,1,0,0,712,.1,-7,0],[-2,1,0,2,2,-517,1.2,224,-.6],[0,0,0,2,1,-386,-.4,200,0],[0,0,1,2,2,-301,0,129,-.1],[-2,-1,0,2,2,217,-.5,-95,.3],[-2,0,1,0,0,-158,0,0,0],[-2,0,0,2,1,129,.1,-70,0],[0,0,-1,2,2,123,0,-53,0],[2,0,0,0,0,63,0,0,0],[0,0,1,0,1,63,.1,-33,0],[2,0,-1,2,2,-59,0,26,0],[0,0,-1,0,1,-58,-.1,32,0],[0,0,1,2,1,-51,0,27,0],[-2,0,2,0,0,48,0,0,0],[0,0,-2,2,1,46,0,-24,0],[2,0,0,2,2,-38,0,16,0],[0,0,2,2,2,-31,0,13,0],[0,0,2,0,0,29,0,0,0],[-2,0,1,2,2,29,0,-12,0],[0,0,0,2,0,26,0,0,0],[-2,0,0,2,0,-22,0,0,0],[0,0,-1,2,1,21,0,-10,0],[0,2,0,0,0,17,-.1,0,0],[2,0,-1,0,1,16,0,-8,0],[-2,2,0,2,2,-16,.1,7,0],[0,1,0,0,1,-15,0,9,0],[-2,0,1,0,1,-13,0,7,0],[0,-1,0,0,1,-12,0,6,0],[0,0,2,-2,0,11,0,0,0],[2,0,-1,2,1,-10,0,5,0],[2,0,1,2,2,-8,0,3,0],[0,1,0,2,2,7,0,-3,0],[-2,1,1,0,0,-7,0,0,0],[0,-1,0,2,2,-7,0,3,0],[2,0,0,2,1,-7,0,3,0],[2,0,1,0,0,6,0,0,0],[-2,0,2,2,2,6,0,-3,0],[-2,0,1,2,1,6,0,-3,0],[2,0,-2,0,1,-6,0,3,0],[2,0,0,0,1,-6,0,3,0],[0,-1,1,0,0,5,0,0,0],[-2,-1,0,2,1,-5,0,3,0],[-2,0,0,0,1,-5,0,3,0],[0,0,2,2,1,-5,0,3,0],[-2,0,2,0,1,4,0,0,0],[-2,1,0,2,1,4,0,0,0],[0,0,1,-2,0,4,0,0,0],[-1,0,1,0,0,-4,0,0,0],[-2,1,0,0,0,-4,0,0,0],[1,0,0,0,0,-4,0,0,0],[0,0,1,2,0,3,0,0,0],[0,0,-2,2,2,-3,0,0,0],[-1,-1,1,0,0,-3,0,0,0],[0,1,1,0,0,-3,0,0,0],[0,-1,1,2,2,-3,0,0,0],[2,-1,-1,2,2,-3,0,0,0],[0,0,3,2,2,-3,0,0,0],[2,-1,0,2,2,-3,0,0,0]]},C.Parallax={earthsunParallax:8.794/60/60*Math.PI/180,horizontal:function(r){return 8.794/60/60*Math.PI/180/r},topocentric:function(r,e,n,t,i,o){i=C.Math.pMod(o-i-r.ra,2*Math.PI),e=Math.sin(e),o=Math.cos(i);var a=Math.cos(r.dec);return i=Math.atan2(-t*e*Math.sin(i),a-t*e*o),new C.EqCoord(r.ra+i,Math.atan2((Math.sin(r.dec)-n*e)*Math.cos(i),a-t*e*o))},topocentric2:function(r,e,n,t,i,o){return i=C.Math.pMod(o-i-r.ra,2*Math.PI),o=Math.cos(r.dec),new C.EqCoord(r.ra+-e*t*Math.sin(i)/o,r.dec+-e*(n*o-t*Math.cos(i)*Math.sin(r.dec)))}},C.Refraction={bennett:function(r){0>r&&(r=0);var e=Math.PI/180;return e/60/Math.tan(r+7.31*e*e/(r+4.4*e))},bennett2:function(r){var e=Math.PI/180,n=60/e,t=.06/n;return n=14.7*n*e,e*=13,(r=C.Refraction.bennett(r))-t*Math.sin(n*r+e)},saemundsson:function(r){var e=Math.PI/180;return 1.02*e/60/Math.tan(r+10.3*e*e/(r+5.11*e))}},C.Rise={meanRefraction:.5667*Math.PI/180,stdh0Stellar:-.5667*Math.PI/180,stdh0Solar:-.8333*Math.PI/180,stdh0LunarMean:.125*Math.PI/180,stdh0Lunar:function(r){return.7275*r-C.Rise.meanRefraction},circumpolar:function(r,e,n){return-1>(r=(Math.sin(e)-Math.sin(r)*Math.sin(n))/(Math.cos(r)*Math.cos(n)))||1<r?null:r},approxTransit:function(r,e,n){return 43200*(n.ra+r.lng)/Math.PI-e},approxTimes:function(r,e,n,t){return(e=C.Rise.circumpolar(r.lat,e,t.dec))?(e=43200*Math.acos(e)/Math.PI,r=43200*(t.ra+r.lng)/Math.PI-n,{transit:C.Math.pMod(r,86400),transitd:Math.floor(r/86400),rise:C.Math.pMod(r-e,86400),rised:Math.floor((r-e)/86400),set:C.Math.pMod(r+e,86400),setd:Math.floor((r+e)/86400)}):null},times:function(r,e,n,t,i){function o(i){var o=C.Math.pMod(t+360.985647*i/360,86400),a=i+e,u=C.Interp.interpolateX(s,a);return a=C.Interp.interpolateX(c,a),o=o*Math.PI/43200-(r.lng+u),u=Math.cos(a),C.Math.pMod(i+(h*Math.sin(a)+m*u*Math.cos(o)-n)/(u*m*Math.sin(o))*43200/Math.PI,86400)}var a=C.Rise.approxTimes(r,n,t,i[1]);if(!a)return null;var s=C.Interp.newLen3(-86400,86400,[i[0].ra,i[1].ra,i[2].ra]),c=C.Interp.newLen3(-86400,86400,[i[0].dec,i[1].dec,i[2].dec]);i=t+360.985647*a.transit/360;var u=C.Interp.interpolateX(s,a.transit+e);a.transit=C.Math.pMod(a.transit-(i-43200*(r.lng+u)/Math.PI),86400);var h=Math.sin(r.lat),m=Math.cos(r.lat);return a.rise=o(a.rise),a.set=o(a.set),a}},C.Sidereal={iau82:[24110.54841,8640184.812866,.093104,62e-7],jdToCFrac:function(r){return r=C.Math.modF(r.jd+.5),[new C.JulianDay(r[0]-.5).jdJ2000Century(),r[1]]},mean:function(r){return C.Math.pMod(C.Sidereal._mean(r),86400)},_mean:function(r){return(r=C.Sidereal._mean0UT(r)).s+86636.55536784*r.f},_meanInRA:function(r){return(r=C.Sidereal._mean0UT(r)).s*Math.PI/43200+2.0054758187*r.f*Math.PI},mean0UT:function(r){return r=C.Sidereal._mean0UT(r),C.Math.pMod(r.s,86400)},_mean0UT:function(r){return r=C.Sidereal.jdToCFrac(r),{s:C.Math.horner(r[0],C.Sidereal.iau82),f:r[1]}},apparentInRa:function(r){var e=C.Sidereal._meanInRA(r);return r=C.Nutation.nutationInRA(r),C.Math.pMod(e+r,2*Math.PI)},apparent:function(r){var e=C.Sidereal._mean(r);return r=648e3*C.Nutation.nutationInRA(r)/Math.PI/15,C.Math.pMod(e+r,86400)},apparentLocal:function(r,e){return r=C.Sidereal.apparent(r),C.Math.pMod(r-43200*e/Math.PI,86400)},apparent0UT:function(r){var e=C.Math.modF(r.jd+.5);return r=C.Math.modF(r.jde+.5),e=C.Math.horner((e[0]-.5-C.J2000)/36525,C.Sidereal.iau82)+86636.55536784*e[1],r=648e3*C.Nutation.nutationInRA(new C.JulianDay(r[0]))/Math.PI/15,C.Math.pMod(e+r,86400)}},C.Solar={earthsunDelta:149597870,apparentEquatorial:function(r){var e=r.jdJ2000Century(),n=C.Solar.node(e);return e=C.Solar.apparentLongitude(e,n),r=C.Nutation.meanObliquityLaskar(r)+.00256*Math.PI/180*Math.cos(n),n=Math.sin(e),new C.EqCoord(Math.atan2(Math.cos(r)*n,Math.cos(e)),Math.asin(Math.sin(r)*n))},apparentTopocentric:function(r,e,n){var t=C.Solar.apparentEquatorial(r),i=C.Globe.parallaxConstants(e.lat,e.h);return n||(n=C.Sidereal.apparentInRa(r)),C.Parallax.topocentric2(t,C.Parallax.earthsunParallax,i.rhoslat,i.rhoclat,e.lng,n)},topocentricPosition:function(r,e,n){var t=C.Sidereal.apparentInRa(r);return r=C.Solar.apparentTopocentric(r,e,t),e=C.Coord.eqToHz(r,e,t),!0===n&&(e.alt+=C.Refraction.bennett2(e.alt)),{hz:e,eq:r}},approxTransit:function(r,e){return r=r.startOfDay(),C.Rise.approxTransit(e,C.Sidereal.apparent0UT(r),C.Solar.apparentTopocentric(r,e))},approxTimes:function(r,e){var n=r.startOfDay();r=C.Solar.apparentTopocentric(n,e);var t=C.Rise.stdh0Solar;return n=C.Sidereal.apparent0UT(n),C.Rise.approxTimes(e,t,n,r)},times:function(r,e){r=r.startOfDay();var n=C.Solar.apparentTopocentric(new C.JulianDay(r.jd-1,r.deltaT),e),t=C.Solar.apparentTopocentric(r,e),i=C.Solar.apparentTopocentric(new C.JulianDay(r.jd+1,r.deltaT),e),o=C.Rise.stdh0Solar,a=C.Sidereal.apparent0UT(r);return C.Rise.times(e,r.deltaT,o,a,[n,t,i])},meanAnomaly:function(r){return C.Math.horner(r,[357.52911,35999.05029,-1537e-7])*Math.PI/180},trueLongitude:function(r){var e=C.Math.horner(r,[280.46646,36000.76983,3032e-7])*Math.PI/180,n=C.Solar.meanAnomaly(r);return r=(C.Math.horner(r,[1.914602,-.004817,-14e-6])*Math.sin(n)+(.019993-101e-6*r)*Math.sin(2*n)+289e-6*Math.sin(3*n))*Math.PI/180,{s:C.Math.pMod(e+r,2*Math.PI),v:C.Math.pMod(n+r,2*Math.PI)}},apparentLongitude:function(r,e){return e||(e=C.Solar.node(r)),C.Solar.trueLongitude(r).s-.00569*Math.PI/180-.00478*Math.PI/180*Math.sin(e)},node:function(r){return(125.04-1934.136*r)*Math.PI/180}},C.Solistice={march:function(r){return 1e3>r?C.Solistice._eq(r,C.Solistice.mc0):C.Solistice._eq(r-2e3,C.Solistice.mc2)},june:function(r){return 1e3>r?C.Solistice._eq(r,C.Solistice.jc0):C.Solistice._eq(r-2e3,C.Solistice.jc2)},september:function(r){return 1e3>r?C.Solistice._eq(r,C.Solistice.sc0):C.Solistice._eq(r-2e3,C.Solistice.sc2)},december:function(r){return 1e3>r?C.Solistice._eq(r,C.Solistice.dc0):C.Solistice._eq(r-2e3,C.Solistice.dc2)},_eq:function(r,e){e=((r=C.Math.horner(.001*r,e))-C.J2000)/C.JulianCentury;var n=35999.373*Math.PI/180*e-2.47*Math.PI/180;n=1+.0334*Math.cos(n)+7e-4*Math.cos(2*n);for(var t=0,i=this.terms.length-1;0<=i;i--){var o=this.terms[i];t+=o[0]*Math.cos((o[1]+o[2]*e)*Math.PI/180)}return r+1e-5*t/n},mc0:[1721139.29189,365242.1374,.06134,.00111,-71e-5],jc0:[1721233.25401,365241.72562,-.05232,.00907,25e-5],sc0:[1721325.70455,365242.49558,-.11677,-.00297,74e-5],dc0:[1721414.39987,365242.88257,-.00769,-.00933,-6e-5],mc2:[2451623.80984,365242.37404,.05169,-.00411,-57e-5],jc2:[2451716.56767,365241.62603,.00325,.00888,-3e-4],sc2:[2451810.21715,365242.01767,-.11575,.00337,78e-5],dc2:[2451900.05952,365242.74049,-.06223,-.00823,32e-5],terms:[[485,324.96,1934.136],[203,337.23,32964.467],[199,342.08,20.186],[182,27.85,445267.112],[156,73.14,45036.886],[136,171.52,22518.443],[77,222.54,65928.934],[74,296.72,3034.906],[70,243.58,9037.513],[58,119.81,33718.147],[52,297.17,150.678],[50,21.02,2281.226],[45,247.54,29929.562],[44,325.15,31555.956],[29,60.93,4443.417],[18,155.12,67555.328],[17,288.79,4562.452],[16,198.04,62894.029],[14,199.76,31436.921],[12,95.39,14577.848],[12,287.11,31931.756],[12,320.81,34777.259],[9,227.73,1222.114],[8,15.45,16859.074]]};const q=(r,e,n,t,o,a)=>{if(r)return 367*r-Math.floor(7*(r+Math.floor((e+9)/12))*.25)+Math.floor(275*e/9)+n+1721013.5+((a/60+o)/60+t)/24;{const r=new Date,e=new Date(r.getUTCFullYear(),0,0),n=r.getDate()-e.getDate();return Math.floor(n/i)}},L=(r,e,t,i,o,a)=>{const s=S({latitude:i,longitude:o,height:a}),c=Math.sin(i),u=Math.sin(o),h=Math.cos(i),m=Math.cos(o),l=n*r,f=n*e,d=-t*Math.cos(f)*Math.cos(l),p=t*Math.cos(f)*Math.sin(l),M=t*Math.sin(f);return{x:c*m*d+-u*p+h*m*M+s.x,y:c*u*d+m*p+h*u*M+s.y,z:-h*d+c*M+s.z}},E=(r,e)=>{const n=r.azimuth*t,i=r.elevation*t,o=r.rangeSat;if(e.obsminaz>e.obsmaxaz){if((n>=e.obsminaz||n<=e.obsmaxaz)&&i>=e.obsminel&&i<=e.obsmaxel&&o<=e.obsmaxrange&&o>=e.obsminrange||(n>=e.obsminaz2||n<=e.obsmaxaz2)&&i>=e.obsminel2&&i<=e.obsmaxel2&&o<=e.obsmaxrange2&&o>=e.obsminrange2)return 1}else if(n>=e.obsminaz&&n<=e.obsmaxaz&&i>=e.obsminel&&i<=e.obsmaxel&&o<=e.obsmaxrange&&o>=e.obsminrange||n>=e.obsminaz2&&n<=e.obsmaxaz2&&i>=e.obsminel2&&i<=e.obsmaxel2&&o<=e.obsmaxrange2&&o>=e.obsminrange2)return 1;return 0},N=(r,e,n)=>({longitude:e,latitude:r,height:n}),R=(r,e)=>r.elevation*t>0&&90-r.elevation*t<e,O=(r,e)=>r.length>1&&e.type===a.OPTICAL||r.length>1&&e.type===a.OBSERVER||r.length>1&&e.type===a.MECHANICAL,U=(r,e,n)=>(r[3*e]=n.x,r[3*e+1]=n.y,r[3*e+2]=n.z,r),J=(r,e)=>(r[3*e]=0,r[3*e+1]=0,r[3*e+2]=0,r),F=(r,e)=>(r[3*e]=0,r[3*e+1]=0,r[3*e+2]=0,r),G=new Float32Array(0),V=new Int8Array(0);let Y,B=[],H=G,X=G,Q=V,Z=V,W=[0],K=[-1],$=!1,rr=1e3,er=1,nr=!1,tr=1,ir=Date.now(),or=0,ar=1,sr=90,cr=!1,ur=!1,hr=!1,mr=!1,lr=!1,fr=!1,dr=!1,pr=!1,Mr=!1,gr=!1,xr=0,yr=[],vr={observerGd:{latitude:null,longitude:0,height:0},alt:null,country:"",lat:null,lon:null,name:"",obsmaxaz:0,obsmaxel:0,obsmaxrange:0,obsminaz:0,obsminel:0,obsminrange:0,shortName:"",staticNum:0,sun:"",volume:!1,zoom:""};try{onmessage=r=>br(r)}catch(r){if(!process)throw r}const br=t=>{let i,a,s,c=[];switch(t.data.typ){case"offset":return or=t.data.staticOffset,ir=t.data.dynamicOffsetEpoch,ar=t.data.propRate,$=!0,void(tr=1);case"satdata":for(i=JSON.parse(t.data.dat),Y=i.length,a=0;a<Y;){const r={lowAlt:null,inclination:null,eccentricity:null,raan:null,argPe:null,meanMotion:null,semiMajorAxis:null,semiMinorAxis:null,apogee:null,perigee:null,period:null};s=null,i[a].static||i[a].missile||i[a].isRadarData?(s=i[a],delete s.id,c.push(r),B.push(s),a++):(s=z(i[a].TLE1,i[a].TLE2),r.lowAlt=s.isimp,r.inclination=s.inclo,r.eccentricity=s.ecco,r.raan=s.nodeo,r.argPe=s.argpo,r.meanMotion=60*s.no*24/e,r.semiMajorAxis=Math.pow(8681663.653/r.meanMotion,2/3),r.semiMinorAxis=r.semiMajorAxis*Math.sqrt(1-Math.pow(r.eccentricity,2)),r.apogee=r.semiMajorAxis*(1+r.eccentricity)-o,s.apogee=r.apogee,r.perigee=r.semiMajorAxis*(1-r.eccentricity)-o,r.period=1440/r.meanMotion,c.push(r),delete s.id,B.push(s),a++)}H=new Float32Array(3*Y),X=new Float32Array(3*Y),Q=new Int8Array(Y),Z=new Int8Array(Y);try{postMessage({extraData:JSON.stringify(c)})}catch(r){if(!process)throw r}break;case"satEdit":s=z(t.data.TLE1,t.data.TLE2),B[t.data.id]=Object.assign(Object.assign({},B[t.data.id]),s),c=[];const u={lowAlt:null,inclination:null,eccentricity:null,raan:null,argPe:null,meanMotion:null,semiMajorAxis:null,semiMinorAxis:null,apogee:null,perigee:null,period:null,TLE1:null,TLE2:null};if(u.inclination=s.inclo,u.eccentricity=s.ecco,u.raan=s.nodeo,u.argPe=s.argpo,u.meanMotion=60*s.no*24/(2*r),u.semiMajorAxis=Math.pow(8681663.653/u.meanMotion,2/3),u.semiMinorAxis=u.semiMajorAxis*Math.sqrt(1-Math.pow(u.eccentricity,2)),u.apogee=u.semiMajorAxis*(1+u.eccentricity)-o,u.perigee=u.semiMajorAxis*(1-u.eccentricity)-o,u.period=1440/u.meanMotion,u.TLE1=t.data.TLE1,u.TLE2=t.data.TLE2,c.push(u),"undefined"!=typeof process)return;postMessage({extraUpdate:!0,extraData:JSON.stringify(c),satId:t.data.id});break;case"newMissile":B[t.data.id]=t.data;break;case"satelliteSelected":K=t.data.satelliteSelected,-1===K[0]&&(lr=!0,Mr||(Mr=!0));break;case"sensor":t.data.multiSensor?(fr=!0,yr=t.data.sensor,vr=t.data.sensor,er=2,gr||(gr=!0)):t.data.sensor&&(vr=t.data.sensor[0],t.data.setlatlong&&(t.data.resetObserverGd?(er=1,vr.observerGd=D,yr=[],gr||(gr=!0)):(er=2,vr.observerGd={longitude:t.data.sensor[0].lon*n,latitude:t.data.sensor[0].lat*n,height:parseFloat(t.data.sensor[0].alt)},gr||(gr=!0))),fr=!1);break;case"isShowSatOverfly":sr=t.data.selectedSatFOV?t.data.selectedSatFOV:sr,"enable"===t.data.isShowSatOverfly&&(mr=!0),"reset"===t.data.isShowSatOverfly&&(lr=!0,mr=!1,Mr||(Mr=!0));break;default:t.data.isSunlightView&&(dr=t.data.isSunlightView),t.data.isSlowCPUModeEnabled&&(rr=2e3),t.data.isLowPerf&&(pr=!0),t.data.fieldOfViewSetLength&&(xr=t.data.fieldOfViewSetLength),"enable"===t.data.isShowFOVBubble&&(cr=!0),"reset"===t.data.isShowFOVBubble&&(hr=!0,cr=!1,Mr||(Mr=!0)),"enable"===t.data.isShowSurvFence&&(ur=!0,Mr||(Mr=!0)),"disable"===t.data.isShowSurvFence&&(ur=!1,Mr||(Mr=!0))}nr||"satdata"!==t.data.typ||(Y=-1,Tr(),nr=!0)},Tr=e=>{B=e||B;const{now:n,j:o,gmst:s,gmstNext:c,isSunExclusion:u,sunEci:h}=((e,n,o,s,c,u)=>{const h=((r,e,n)=>{const t=new Date,i=t.getTime()-r;return t.setTime(r+e+i*n),t})(e,n,o),m=q(h.getUTCFullYear(),h.getUTCMonth()+1,h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds())+h.getUTCMilliseconds()*i,l=A(m);let f=!1,d={x:0,y:0,z:0};s&&!c&&([f,d]=((e,n,i,o)=>{const s=new C.JulianDay(n),c=C.EclCoordfromWgs84(0,0,0),u=C.EclCoordfromWgs84(e.observerGd.latitude*t,e.observerGd.longitude*t,e.observerGd.height),h=C.Solar.topocentricPosition(s,c,!1),m=C.Solar.topocentricPosition(s,u,!1),l=h.hz.az*t+180,f=h.hz.alt*t%360,d=m.hz.alt*t%360,p=new C.JulianDay(C.JulianDay.dateToJD(o)).jdJ2000Century();let M=180*C.Solar.meanAnomaly(p)/r;M%=360;const g=1.00014-.01671*Math.cos(M)-14e-5*Math.cos(2*M),x=P(L(l,f,149597870700*g/1e3,0,0,0),i);return e.observerGd!==D&&(e.type===a.OPTICAL||e.type===a.OBSERVER)&&d>-6?[!0,x]:[!1,x]})(u,m,l,h));const p=q(h.getUTCFullYear(),h.getUTCMonth()+1,h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds()+1)+h.getUTCMilliseconds()*i;return{now:h,j:m,gmst:l,gmstNext:A(p),isSunExclusion:f,sunEci:d}})(ir,or,ar,dr,fr,vr);Y=kr()?B.length-1-xr:B.length-1,wr(n,o,s,c,u,h),hr&&(hr=!1,Y-=xr),$||Cr(),$=!1,setTimeout((()=>{Tr()}),rr*er/tr)},wr=(r,e,n,t,i,o)=>{let s=-1;for(;s<Y&&!$;){s++;let c=!1;if(B[s].satnum?c=!Pr(s,n,o,e,i):B[s].isRadarData?c=!Ar(s):B[s].static&&!B[s].marker&&B[s].type===a.STAR?(zr(s,r),F(X,s)):B[s].static&&!B[s].marker?(Ir(s,n),F(X,s)):B[s].missile?c=!Sr(s,r,t,n):B[s].marker&&(cr||hr)?s=Dr(s,n):B[s].marker&&(mr||lr)&&(s=_r(s,n)),!c&&(lr=!1,B[s].marker)){jr(s);break}}},Ar=r=>!B[r].skip&&(B[r].skip=!0,J(H,r),F(X,r),!0),_r=(r,e)=>{if(lr&&!0===B[r].active)return r;let i,o,a,s,c,u,h,m,l,f,d,p,M;for(let g=0;g<K.length+1;g++){if(g===K.length){W.push(r);break}if(-1!==K[g]){if(!mr)continue;for(c={x:H[3*K[g]],y:H[3*K[g]+1],z:H[3*K[g]+2]},u=P(c,e),h=I(u,e),m=h.height,l=N(h.latitude,h.longitude,1),d=1,m<2500&&sr<=60&&(d=.5),(m>7e3||sr>=90)&&(d=2),K.length>1&&(d=2),f=-60;f<60;f+=d)if(o=Math.max(Math.min(Math.round(h.latitude*t)+f,90),-90)*n,!(o>90))for(M=m<2500&&sr<=60?.5:m>7e3||sr>=90?2:1,K.length>1&&(M=2),p=0;p<181;p+=M){if(a=h.longitude+p*n,l=N(o,a,15),i=j(l,c),R(i,sr)){if(s=S(l),r===Y)continue;B[r].active=!0,H=U(H,r,s),F(X,r),r++}if(0!==p&&180!==p){if(a=h.longitude-p*n,l=N(o,a,15),i=j(l,c),R(i,sr)){if(s=S(l),r===Y)continue;B[r].active=!0,H=U(H,r,s),F(X,r),r++}if(90===o||-90===o)break}}}}return r},zr=(r,e)=>{const n=s.getStarPosition(e,180,0,B[r]),i=L(n.azimuth*t,n.altitude*t,25e4,0,0,0);(0===H[3*r]||H[3*r]-i.x<.1&&H[3*r]-i.x>-.1)&&(H[3*r]=i.x),(0===H[3*r+1]||H[3*r+1]-i.y<.1&&H[3*r+1]-i.y>-.1)&&(H[3*r+1]=i.y),(0===H[3*r+2]||H[3*r+2]-i.z<.1&&H[3*r+2]-i.z>-.1)&&(H[3*r+2]=i.z)},Sr=(r,e,t,i)=>{if(!B[r].active)return H[3*r]=0,H[3*r+1]=0,H[3*r+2]=0,!1;let o,a,s,c;const u=B[r].altList.length;let h;for(let n=0;n<u;n++)if(1*B[r].startTime+1e3*n>=e.getTime()){h=n;break}B[r].lastTime=B[r].lastTime>=0?B[r].lastTime:0,o=Math.cos(B[r].latList[B[r].lastTime+1]*n),a=Math.sin(B[r].latList[B[r].lastTime+1]*n),s=Math.cos(B[r].lonList[B[r].lastTime+1]*n+t),c=Math.sin(B[r].lonList[B[r].lastTime+1]*n+t),0===B[r].lastTime?F(X,r):0===X[3*r]&&0===X[3*r+1]&&0===X[3*r+2]?(X[3*r]=(6371+B[r].altList[B[r].lastTime+1])*o*s-H[3*r],X[3*r+1]=(6371+B[r].altList[B[r].lastTime+1])*o*c-H[3*r+1],X[3*r+2]=(6371+B[r].altList[B[r].lastTime+1])*a-H[3*r+2]):(X[3*r]+=(6371+B[r].altList[B[r].lastTime+1])*o*s-H[3*r],X[3*r+1]+=(6371+B[r].altList[B[r].lastTime+1])*o*c-H[3*r+1],X[3*r+2]+=(6371+B[r].altList[B[r].lastTime+1])*a-H[3*r+2],X[3*r]*=.5,X[3*r+1]*=.5,X[3*r+2]*=.5),o=Math.cos(B[r].latList[h]*n),a=Math.sin(B[r].latList[h]*n),s=Math.cos(B[r].lonList[h]*n+i),c=Math.sin(B[r].lonList[h]*n+i),H[3*r]=(6371+B[r].altList[h])*o*s,H[3*r+1]=(6371+B[r].altList[h])*o*c,H[3*r+2]=(6371+B[r].altList[h])*a,B[r].lastTime=h;const m=H[3*r],l=H[3*r+1],f=H[3*r+2],d=k({x:m,y:l,z:f},i);return I({x:m,y:l,z:f},i).height<=150&&!1===B[r].missile&&(B[r].skip=!0),Q[r]=E(j(vr.observerGd,d),vr),!0},Ir=(r,e)=>{const t=Math.cos(B[r].lat*n),i=Math.sin(B[r].lat*n),o=Math.cos(B[r].lon*n+e),a=Math.sin(B[r].lon*n+e);H[3*r]=(6372+B[r].alt)*t*o,H[3*r+1]=(6372+B[r].alt)*t*a,H[3*r+2]=(6372+B[r].alt)*i},Pr=(i,s,c,h,m)=>{let l,f,d,p,M;if(B[i].skip)return!1;const g=1440*(h-B[i].jdsatepoch),x=_(B[i],g);try{if(H[3*i]=x.position.x,H[3*i+1]=x.position.y,H[3*i+2]=x.position.z,X[3*i]=x.velocity.x,X[3*i+1]=x.velocity.y,X[3*i+2]=x.velocity.z,B[i].isimp||g/1440>30){const n=6378.137,t=6356.7523142,o=Math.sqrt(x.position.x*x.position.x+x.position.y*x.position.y),a=(n-t)/n,c=2*a-a*a;let u=Math.atan2(x.position.y,x.position.x)-s;for(;u<-r;)u+=e;for(;u>r;)u-=e;const h=20;let m,l=0,f=Math.atan2(x.position.z,Math.sqrt(x.position.x*x.position.x+x.position.y*x.position.y));for(;l<h;)m=1/Math.sqrt(1-c*(Math.sin(f)*Math.sin(f))),f=Math.atan2(x.position.z+n*m*c*Math.sin(f),o),l+=1;if(o/Math.cos(f)-n*m>B[i].apogee+1e3)throw new Error("Impossible orbit")}vr.observerGd===D||fr||(M=j(vr.observerGd,k(x.position,s)))}catch(r){B[i].skip=!0,H[3*i]=0,H[3*i+1]=0,H[3*i+2]=0,X[3*i]=0,X[3*i+1]=0,X[3*i+2]=0,p=0,M=0}if(Q[i]=0,Z[i]=2,dr&&(l=Math.asin(o/Math.sqrt(Math.pow(-H[3*i],2)+Math.pow(-H[3*i+1],2)+Math.pow(-H[3*i+2],2)))*t,f=Math.asin(695700/Math.sqrt(Math.pow(-H[3*i]+c.x,2)+Math.pow(-H[3*i+1]+c.y,2)+Math.pow(-H[3*i+2]+c.z,2)))*t,d=Math.acos(u().dot([-H[3*i],-H[3*i+1],-H[3*i+2]],[-H[3*i]+c.x,-H[3*i+1]+c.y,-H[3*i+2]+c.z])/(Math.sqrt(Math.pow(-H[3*i],2)+Math.pow(-H[3*i+1],2)+Math.pow(-H[3*i+2],2))*Math.sqrt(Math.pow(-H[3*i]+c.x,2)+Math.pow(-H[3*i+1]+c.y,2)+Math.pow(-H[3*i+2]+c.z,2))))*t,l>f&&d<l-f&&(Z[i]=0),Math.abs(l-f)<d&&d<l+f&&(Z[i]=1),f>l&&(Z[i]=1),d<f-l&&(Z[i]=1)),vr.observerGd!==D&&!m)if(fr){for(let r=0;r<yr.length;r++)if(vr.type!==a.OPTICAL||0!==Z[i]){if(Q[i])break;vr=yr[r],vr.observerGd={longitude:vr.lon*n,latitude:vr.lat*n,height:1*vr.alt};try{p=k(x.position,s),M=j(vr.observerGd,p)}catch(r){continue}Q[i]=E(M,vr)}}else vr.type===a.OPTICAL&&0===Z[i]||(Q[i]=E(M,vr));return!0},kr=()=>!lr&&!mr&&!hr&&!cr||pr,jr=r=>{for(;r<Y;r++){if(!B[r].active){Y-=xr;break}J(H,r),F(X,r),B[r].active=!1}},Dr=(r,e)=>{let t,i,o,a,s,c;fr||vr.observerGd===D||(yr[0]=vr,yr.length=1),W=[];for(let u=0;u<yr.length+1&&(W.push(r),u!==yr.length);u++)if(vr=yr[u],vr.observerGd=N(vr.lat*n,vr.lon*n,vr.alt),J(H,r),F(X,r),!hr&&cr&&vr.observerGd!==D&&!O(yr,vr)){if(s=Math.abs(vr.obsmaxaz-vr.obsminaz)<30?.5:3,c=vr.obsmaxrange-vr.obsminrange<720?125:30,!ur)if(0!==vr.obsminaz&&360!==vr.obsmaxaz){for(o=Math.max(vr.obsminrange,100);o<Math.min(vr.obsmaxrange,6e4);o+=Math.min(vr.obsmaxrange,6e4)/c)for(t=vr.obsminaz,i=vr.obsminel;i<vr.obsmaxel;i+=s){a=P(L(t,i,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e);try{B[r].active=!0,H=U(H,r,a),F(X,r),r++}catch(r){}}for(o=Math.max(vr.obsminrange,100);o<Math.min(vr.obsmaxrange,6e4);o+=Math.min(vr.obsmaxrange,6e4)/c)for(t=vr.obsmaxaz,i=vr.obsminel;i<vr.obsmaxel;i+=s){a=P(L(t,i,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e);try{B[r].active=!0}catch(r){}H=U(H,r,a),F(X,r),r++}if(void 0!==vr.obsminaz2){for(o=Math.max(vr.obsminrange,100);o<Math.min(vr.obsmaxrange,6e4);o+=Math.min(vr.obsmaxrange,6e4)/c)for(t=vr.obsminaz2,i=vr.obsminel2;i<vr.obsmaxel2;i+=s)a=P(L(t,i,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e),B[r].active=!0,H=U(H,r,a),F(X,r),r++;for(o=Math.max(vr.obsminrange,100);o<Math.min(vr.obsmaxrange,6e4);o+=Math.min(vr.obsmaxrange,6e4)/c)for(t=vr.obsmaxaz2,i=vr.obsminel2;i<vr.obsmaxel2;i+=s)a=P(L(t,i,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e),B[r].active=!0,H=U(H,r,a),F(X,r),r++}}else for(o=Math.max(vr.obsminrange,100);o<Math.min(vr.obsmaxrange,6e4);o+=Math.min(vr.obsmaxrange,6e4)/c)for(i=vr.obsmaxel,t=vr.obsminaz;t<vr.obsmaxaz;t+=s)a=P(L(t,i,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e),B[r].active=!0,H=U(H,r,a),F(X,r),r++;if(vr.obsmaxel-vr.obsminel<20)for(o=Math.max(vr.obsminrange,100);o<Math.min(vr.obsmaxrange,6e4);o+=Math.min(vr.obsmaxrange,6e4)/c)for(t=0;t<Math.max(360,vr.obsmaxaz);t+=s){if(vr.obsminaz>vr.obsmaxaz){if(!(t>=vr.obsminaz||t<=vr.obsmaxaz))continue}else if(!(t>=vr.obsminaz&&t<=vr.obsmaxaz))continue;if(a=P(L(t,vr.obsmaxel,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e),r===Y)break;B[r].active=!0,H=U(H,r,a),F(X,r),r++}if(void 0!==vr.obsminaz2)for(s=2,o=Math.max(vr.obsminrange2,100);o<Math.min(vr.obsmaxrange2,6e4);o+=Math.min(vr.obsmaxrange2,6e4)/c)for(t=0;t<360;t+=1*s){if(vr.obsminaz2>vr.obsmaxaz2){if(!(t>=vr.obsminaz2||t<=vr.obsmaxaz2))continue}else if(!(t>=vr.obsminaz2&&t<=vr.obsmaxaz2))continue;if(a=P(L(t,vr.obsminel2,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e),r===Y)break;B[r].active=!0,H=U(H,r,a),F(X,r),r++}if(!ur){for(o=Math.min(vr.obsmaxrange,6e4),t=0;t<Math.max(360,vr.obsmaxaz);t+=s){if(vr.obsminaz>vr.obsmaxaz){if(!(t>=vr.obsminaz||t<=vr.obsmaxaz))continue}else if(!(t>=vr.obsminaz&&t<=vr.obsmaxaz))continue;for(i=vr.obsminel;i<vr.obsmaxel&&(a=P(L(t,i,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e),r!==Y);i+=s)B[r].active=!0,H=U(H,r,a),F(X,r),r++}if(void 0!==vr.obsminaz2)for(o=Math.min(vr.obsmaxrange2,6e4),t=0;t<Math.max(360,vr.obsmaxaz2);t+=s){if(vr.obsminaz2>vr.obsmaxaz2){if(!(t>=vr.obsminaz2||t<=vr.obsmaxaz2))continue}else if(!(t>=vr.obsminaz2&&t<=vr.obsmaxaz2))continue;for(i=vr.obsminel2;i<vr.obsmaxel2&&(a=P(L(t,i,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e),r!==Y);i+=s)B[r].active=!0,H=U(H,r,a),F(X,r),r++}}for(s=.25,o=vr.obsmaxrange;o===vr.obsmaxrange;o+=1)for(t=0;t<Math.max(360,vr.obsmaxaz);t+=s){if(vr.obsminaz>vr.obsmaxaz){if(!(t>=vr.obsminaz||t<=vr.obsmaxaz))continue}else if(!(t>=vr.obsminaz&&t<=vr.obsmaxaz))continue;if(a=P(L(t,vr.obsminel,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e),r===Y)break;B[r].active=!0,H=U(H,r,a),F(X,r),r++}for(o=vr.obsminrange;o===vr.obsminrange;o+=1)for(t=0;t<Math.max(360,vr.obsmaxaz);t+=s){if(vr.obsminaz>vr.obsmaxaz){if(!(t>=vr.obsminaz||t<=vr.obsmaxaz))continue}else if(!(t>=vr.obsminaz&&t<=vr.obsmaxaz))continue;if(a=P(L(t,vr.obsminel,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e),r===Y)break;B[r].active=!0,H=U(H,r,a),F(X,r),r++}if(vr.obsmaxrange-vr.obsminrange<720)for(o=Math.max(vr.obsminrange,100);o<Math.min(vr.obsmaxrange,6e4);o+=Math.min(vr.obsmaxrange,6e4)/c)for(t=0;t<Math.max(360,vr.obsmaxaz);t+=s){if(vr.obsminaz>vr.obsmaxaz){if(!(t>=vr.obsminaz||t<=vr.obsmaxaz))continue}else if(!(t>=vr.obsminaz&&t<=vr.obsmaxaz))continue;if(a=P(L(t,vr.obsminel,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e),r===Y)break;B[r].active=!0,H=U(H,r,a),F(X,r),r++}if(vr.obsminaz!==vr.obsmaxaz&&vr.obsminaz!==vr.obsmaxaz-360){for(t=vr.obsmaxaz;t===vr.obsmaxaz;t+=1)for(o=vr.obsminrange;o<vr.obsmaxrange&&(a=P(L(t,vr.obsminel,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e),r!==Y);o+=s)B[r].active=!0,H=U(H,r,a),F(X,r),r++;for(t=vr.obsminaz;t===vr.obsminaz;t+=1)for(o=vr.obsminrange;o<vr.obsmaxrange&&(a=P(L(t,vr.obsminel,o,vr.observerGd.latitude,vr.observerGd.longitude,vr.observerGd.height),e),r!==Y);o+=s)B[r].active=!0,H=U(H,r,a),F(X,r),r++}}return r},Cr=()=>{const r={satPos:H,satVel:X};vr.observerGd!==D?r.satInView=Q:r.satInView=V,r.satInSun=dr?Z:V,W.length>=1?r.sensorMarkerArray=W:r.sensorMarkerArray=[];try{postMessage(r)}catch(r){if(!process)throw r}}})()})();
/*! For license information please see positionCruncher.js.LICENSE.txt */
(()=>{var __webpack_modules__={90:function(e,n){var r,t;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dateFormat=void 0;var n=(e,n)=>{for(e=String(e),n=n||2;e.length<n;)e="0"+e;return e},r={masks:{default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd' 'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},i18n:{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]}},t=/d{1,4}|m{1,4}|yy(?:yy)?|([HMThst])\1?|[LSZlo]|"(?:(?!")[\s\S])*"|'(?:(?!')[\s\S])*'/g,a=/\b(?:[ACEMP][DPS]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[\+\x2D][0-9]{4})?)\b/g,o=/(?:(?![\+\x2D0-9A-Z])[\s\S])/g;e.dateFormat=function(e,i,s){if(1!==arguments.length||"[object String]"!==Object.prototype.toString.call(e)||/[0-9]/.test(e)||(i=e,e=void 0),e=e?new Date(e):new Date,Number.isNaN(e))throw SyntaxError("invalid date - ".concat(e));"UTC:"===(i=String(r.masks[i]||i||r.masks.default)).slice(0,4)&&(i=i.slice(4),s=!0);var c=s?"getUTC":"get",u=e[c+"Date"](),l=e[c+"Day"](),m=e[c+"Month"](),h=e[c+"FullYear"](),f=e[c+"Hours"](),d=e[c+"Minutes"](),p=e[c+"Seconds"](),M=e[c+"Milliseconds"](),g=s?0:e.getTimezoneOffset(),y={d:u,dd:n(u),ddd:r.i18n.dayNames[l],dddd:r.i18n.dayNames[l+7],m:m+1,mm:n(m+1),mmm:r.i18n.monthNames[m],mmmm:r.i18n.monthNames[m+12],yy:String(h).slice(2),yyyy:h,h:f%12||12,hh:n(f%12||12),H:f,HH:n(f),M:d,MM:n(d),s:p,ss:n(p),l:n(M,3),L:n(M>99?Math.round(M/10):M),t:f<12?"a":"p",tt:f<12?"am":"pm",T:f<12?"A":"P",TT:f<12?"AM":"PM",Z:s?"UTC":(String(e).match(a)||[""]).pop().replace(o,""),o:(g>0?"-":"+")+n(100*Math.floor(Math.abs(g)/60)+Math.abs(g)%60,4),S:["th","st","nd","rd"][u%10>3?0:(u%100-u%10!=10)*u%10]};return i.replace(t,(function(e){return e in y?y[e]:e.slice(1,e.length-1)}))}},void 0===(t=r.apply(n,[n]))||(e.exports=t)},32:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var numeric=exports;void 0!==__webpack_require__.g&&(__webpack_require__.g.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,n){var r,t,a;for(void 0===n&&(n=15),t=.5,r=new Date;;){for(a=t*=2;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;if(new Date-r>n)break}for(a=t;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;return 1e3*(3*t-1)/(new Date-r)},numeric._myIndexOf=function(e){var n,r=this.length;for(n=0;n<r;++n)if(this[n]===e)return n;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){function n(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(e<0)return"-"+n(-e);if(isFinite(e)){var r=Math.floor(Math.log(e)/Math.log(10)),t=e/Math.pow(10,r),a=t.toPrecision(numeric.precision);return 10===parseFloat(a)&&(r++,a=(t=1).toPrecision(numeric.precision)),parseFloat(a).toString()+"e"+r.toString()}return"Infinity"}var r=[];return function e(t){var a;if(void 0===t)return r.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof t)return r.push('"'+t+'"'),!1;if("boolean"==typeof t)return r.push(t.toString()),!1;if("number"==typeof t){var o=n(t),i=t.toPrecision(numeric.precision),s=parseFloat(t.toString()).toString(),c=[o,i,s,parseFloat(i).toString(),parseFloat(s).toString()];for(a=1;a<c.length;a++)c[a].length<o.length&&(o=c[a]);return r.push(Array(numeric.precision+8-o.length).join(" ")+o),!1}if(null===t)return r.push("null"),!1;if("function"==typeof t){r.push(t.toString());var u=!1;for(a in t)t.hasOwnProperty(a)&&(u?r.push(",\n"):r.push("\n{"),u=!0,r.push(a),r.push(": \n"),e(t[a]));return u&&r.push("}\n"),!0}if(t instanceof Array){if(t.length>numeric.largeArray)return r.push("...Large Array..."),!0;for(u=!1,r.push("["),a=0;a<t.length;a++)a>0&&(r.push(","),u&&r.push("\n ")),u=e(t[a]);return r.push("]"),!0}for(a in r.push("{"),u=!1,t)t.hasOwnProperty(a)&&(u&&r.push(",\n"),u=!0,r.push(a),r.push(": \n"),e(t[a]));return r.push("}"),!0}(e),r.join("")},numeric.parseDate=function(e){return function e(n){if("string"==typeof n)return Date.parse(n.replace(/-/g,"/"));if(!(n instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var r,t=[];for(r=0;r<n.length;r++)t[r]=e(n[r]);return t}(e)},numeric.parseFloat=function(e){return function e(n){if("string"==typeof n)return parseFloat(n);if(!(n instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var r,t=[];for(r=0;r<n.length;r++)t[r]=e(n[r]);return t}(e)},numeric.parseCSV=function(e){var n,r,t,a=e.split("\n"),o=[],i=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,c=0;for(r=0;r<a.length;r++){var u,l=(a[r]+",").match(i);if(l.length>0){for(o[c]=[],n=0;n<l.length;n++)u=(t=l[n]).substr(0,t.length-1),s.test(u)?o[c][n]=parseFloat(u):o[c][n]=u;c++}}return o},numeric.toCSV=function(e){var n,r,t,a,o,i=numeric.dim(e);for(t=i[0],i[1],o=[],n=0;n<t;n++){for(a=[],r=0;r<t;r++)a[r]=e[n][r].toString();o[n]=a.join(", ")}return o.join("\n")+"\n"},numeric.getURL=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(),n},numeric.imageURL=function(e){function n(e,n,r){void 0===n&&(n=0),void 0===r&&(r=e.length);var t,a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=-1;for(e.length,t=n;t<r;t++)o=o>>>8^a[255&(o^e[t])];return-1^o}var r,t,a,o,i,s,c,u,l,m,h=e[0].length,f=e[0][0].length,d=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,f>>24&255,f>>16&255,f>>8&255,255&f,h>>24&255,h>>16&255,h>>8&255,255&h,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(m=n(d,12,29),d[29]=m>>24&255,d[30]=m>>16&255,d[31]=m>>8&255,d[32]=255&m,r=1,t=0,c=0;c<h;c++){for(c<h-1?d.push(0):d.push(1),i=3*f+1+(0===c)&255,s=3*f+1+(0===c)>>8&255,d.push(i),d.push(s),d.push(255&~i),d.push(255&~s),0===c&&d.push(0),u=0;u<f;u++)for(a=0;a<3;a++)t=(t+(r=(r+(i=(i=e[a][c][u])>255?255:i<0?0:Math.round(i)))%65521))%65521,d.push(i);d.push(0)}return l=(t<<16)+r,d.push(l>>24&255),d.push(l>>16&255),d.push(l>>8&255),d.push(255&l),o=d.length-41,d[33]=o>>24&255,d[34]=o>>16&255,d[35]=o>>8&255,d[36]=255&o,m=n(d,37),d.push(m>>24&255),d.push(m>>16&255),d.push(m>>8&255),d.push(255&m),d.push(0),d.push(0),d.push(0),d.push(0),d.push(73),d.push(69),d.push(78),d.push(68),d.push(174),d.push(66),d.push(96),d.push(130),"data:image/png;base64,"+function(e){var n,r,t,a,o,i,s,c=e.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="";for(n=0;n<c;n+=3)o=((3&(r=e[n]))<<4)+((t=e[n+1])>>4),i=((15&t)<<2)+((a=e[n+2])>>6),s=63&a,n+1>=c?i=s=64:n+2>=c&&(s=64),l+=u.charAt(r>>2)+u.charAt(o)+u.charAt(i)+u.charAt(s);return l}(d)},numeric._dim=function(e){for(var n=[];"object"==typeof e;)n.push(e.length),e=e[0];return n},numeric.dim=function(e){var n;return"object"==typeof e?"object"==typeof(n=e[0])?"object"==typeof n[0]?numeric._dim(e):[e.length,n.length]:[e.length]:[]},numeric.mapreduce=function(e,n){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+n+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,n){return Function("x","var n = x.length;\nvar i,xi;\n"+n+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(n,r){var t,a;if(!(n instanceof Array&&r instanceof Array))return!1;if((a=n.length)!==r.length)return!1;for(t=0;t<a;t++)if(n[t]!==r[t]){if("object"!=typeof n[t])return!1;if(!e(n[t],r[t]))return!1}return!0},numeric.rep=function(e,n,r){void 0===r&&(r=0);var t,a=e[r],o=Array(a);if(r===e.length-1){for(t=a-2;t>=0;t-=2)o[t+1]=n,o[t]=n;return-1===t&&(o[0]=n),o}for(t=a-1;t>=0;t--)o[t]=numeric.rep(e,n,r+1);return o},numeric.dotMMsmall=function(e,n){var r,t,a,o,i,s,c,u,l,m,h;for(o=e.length,i=n.length,s=n[0].length,c=Array(o),r=o-1;r>=0;r--){for(u=Array(s),l=e[r],a=s-1;a>=0;a--){for(m=l[i-1]*n[i-1][a],t=i-2;t>=1;t-=2)h=t-1,m+=l[t]*n[t][a]+l[h]*n[h][a];0===t&&(m+=l[0]*n[0][a]),u[a]=m}c[r]=u}return c},numeric._getCol=function(e,n,r){var t;for(t=e.length-1;t>0;--t)r[t]=e[t][n],r[--t]=e[t][n];0===t&&(r[0]=e[0][n])},numeric.dotMMbig=function(e,n){var r,t,a,o=numeric._getCol,i=n.length,s=Array(i),c=e.length,u=n[0].length,l=new Array(c),m=numeric.dotVV;for(--i,t=--c;-1!==t;--t)l[t]=Array(u);for(t=--u;-1!==t;--t)for(o(n,t,s),a=c;-1!==a;--a)r=e[a],l[a][t]=m(r,s);return l},numeric.dotMV=function(e,n){var r,t=e.length,a=(n.length,Array(t)),o=numeric.dotVV;for(r=t-1;r>=0;r--)a[r]=o(e[r],n);return a},numeric.dotVM=function(e,n){var r,t,a,o,i,s,c;for(a=e.length,o=n[0].length,i=Array(o),t=o-1;t>=0;t--){for(s=e[a-1]*n[a-1][t],r=a-2;r>=1;r-=2)c=r-1,s+=e[r]*n[r][t]+e[c]*n[c][t];0===r&&(s+=e[0]*n[0][t]),i[t]=s}return i},numeric.dotVV=function(e,n){var r,t,a=e.length,o=e[a-1]*n[a-1];for(r=a-2;r>=1;r-=2)t=r-1,o+=e[r]*n[r]+e[t]*n[t];return 0===r&&(o+=e[0]*n[0]),o},numeric.dot=function(e,n){var r=numeric.dim;switch(1e3*r(e).length+r(n).length){case 2002:return n.length<10?numeric.dotMMsmall(e,n):numeric.dotMMbig(e,n);case 2001:return numeric.dotMV(e,n);case 1002:return numeric.dotVM(e,n);case 1001:return numeric.dotVV(e,n);case 1e3:return numeric.mulVS(e,n);case 1:return numeric.mulSV(e,n);case 0:return e*n;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var n,r,t,a,o=e.length,i=Array(o);for(n=o-1;n>=0;n--){for(a=Array(o),r=n+2,t=o-1;t>=r;t-=2)a[t]=0,a[t-1]=0;for(t>n&&(a[t]=0),a[n]=e[n],t=n-1;t>=1;t-=2)a[t]=0,a[t-1]=0;0===t&&(a[0]=0),i[n]=a}return i},numeric.getDiag=function(e){var n,r=Math.min(e.length,e[0].length),t=Array(r);for(n=r-1;n>=1;--n)t[n]=e[n][n],t[--n]=e[n][n];return 0===n&&(t[0]=e[0][0]),t},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,n,r){void 0===r&&(r="");var t,a,o=[],i=/\[i\]$/,s="",c=!1;for(t=0;t<e.length;t++)i.test(e[t])?s=a=e[t].substring(0,e[t].length-3):a=e[t],"ret"===a&&(c=!0),o.push(a);return o[e.length]="_s",o[e.length+1]="_k",o[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(c?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+r+"\nfor(i=_n-1;i!==-1;--i) {\n    "+n+"\n}\nreturn ret;",Function.apply(null,o)},numeric.pointwise2=function(e,n,r){void 0===r&&(r="");var t,a,o=[],i=/\[i\]$/,s="",c=!1;for(t=0;t<e.length;t++)i.test(e[t])?s=a=e[t].substring(0,e[t].length-3):a=e[t],"ret"===a&&(c=!0),o.push(a);return o[e.length]="var _n = "+s+".length;\nvar i"+(c?"":", ret = Array(_n)")+";\n"+r+"\nfor(i=_n-1;i!==-1;--i) {\n"+n+"\n}\nreturn ret;",Function.apply(null,o)},numeric._biforeach=function e(n,r,t,a,o){var i;if(a!==t.length-1)for(i=t[a]-1;i>=0;i--)e("object"==typeof n?n[i]:n,"object"==typeof r?r[i]:r,t,a+1,o);else o(n,r)},numeric._biforeach2=function e(n,r,t,a,o){if(a===t.length-1)return o(n,r);var i,s=t[a],c=Array(s);for(i=s-1;i>=0;--i)c[i]=e("object"==typeof n?n[i]:n,"object"==typeof r?r[i]:r,t,a+1,o);return c},numeric._foreach=function e(n,r,t,a){var o;if(t!==r.length-1)for(o=r[t]-1;o>=0;o--)e(n[o],r,t+1,a);else a(n)},numeric._foreach2=function e(n,r,t,a){if(t===r.length-1)return a(n);var o,i=r[t],s=Array(i);for(o=i-1;o>=0;o--)s[o]=e(n[o],r,t+1,a);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,n;for(e=0;e<numeric.mathfuns2.length;++e)n=numeric.mathfuns2[e],numeric.ops2[n]=n;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){n=numeric.ops2[e];var r,t,a="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(a="var "+n+" = Math."+n+";\n",r=function(e,r,t){return e+" = "+n+"("+r+","+t+")"},t=function(e,r){return e+" = "+n+"("+e+","+r+")"}):(r=function(e,r,t){return e+" = "+r+" "+n+" "+t},t=numeric.opseq.hasOwnProperty(e+"eq")?function(e,r){return e+" "+n+"= "+r}:function(e,r){return e+" = "+e+" "+n+" "+r}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),a),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),a),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),a),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+t("x","y")+"\n}\nreturn x;\n"),numeric[n]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],t("ret[i]","x[i]"),a),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],t("ret[i]","x"),a),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)n=numeric.mathfuns2[e],delete numeric.ops2[n];for(e=0;e<numeric.mathfuns.length;++e)n=numeric.mathfuns[e],numeric.ops1[n]=n;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(a="",n=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(n)&&(a="var "+n+" = Math."+n+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+n+"(ret[i]);",a),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+n+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+n+"(x[i]);",a),numeric[e]=Function("x",'if(typeof x !== "object") return '+n+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)n=numeric.mathfuns[e],delete numeric.ops1[n];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(n=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(n[0],n[1]),numeric[e]=Function("x","s","k",n[1]+'if(typeof x !== "object") {    xi = x;\n'+n[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+n[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,n){return"object"==typeof e?"object"==typeof n?numeric.truncVV(e,n):numeric.truncVS(e,n):"object"==typeof n?numeric.truncSV(e,n):Math.round(e/n)*n},numeric.inv=function(e){var n,r,t,a,o,i,s,c=numeric.dim(e),u=Math.abs,l=c[0],m=c[1],h=numeric.clone(e),f=numeric.identity(l);for(i=0;i<m;++i){var d=-1,p=-1;for(o=i;o!==l;++o)(s=u(h[o][i]))>p&&(d=o,p=s);for(r=h[d],h[d]=h[i],h[i]=r,a=f[d],f[d]=f[i],f[i]=a,e=r[i],s=i;s!==m;++s)r[s]/=e;for(s=m-1;-1!==s;--s)a[s]/=e;for(o=l-1;-1!==o;--o)if(o!==i){for(n=h[o],t=f[o],e=n[i],s=i+1;s!==m;++s)n[s]-=r[s]*e;for(s=m-1;s>0;--s)t[s]-=a[s]*e,t[--s]-=a[s]*e;0===s&&(t[0]-=a[0]*e)}}return f},numeric.det=function(e){var n=numeric.dim(e);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: det() only works on square matrices");var r,t,a,o,i,s,c,u,l=n[0],m=1,h=numeric.clone(e);for(t=0;t<l-1;t++){for(a=t,r=t+1;r<l;r++)Math.abs(h[r][t])>Math.abs(h[a][t])&&(a=r);for(a!==t&&(c=h[a],h[a]=h[t],h[t]=c,m*=-1),o=h[t],r=t+1;r<l;r++){for(s=(i=h[r])[t]/o[t],a=t+1;a<l-1;a+=2)u=a+1,i[a]-=o[a]*s,i[u]-=o[u]*s;a!==l&&(i[a]-=o[a]*s)}if(0===o[t])return 0;m*=o[t]}return m*h[t][t]},numeric.transpose=function(e){var n,r,t,a,o,i=e.length,s=e[0].length,c=Array(s);for(r=0;r<s;r++)c[r]=Array(i);for(n=i-1;n>=1;n-=2){for(a=e[n],t=e[n-1],r=s-1;r>=1;--r)(o=c[r])[n]=a[r],o[n-1]=t[r],(o=c[--r])[n]=a[r],o[n-1]=t[r];0===r&&((o=c[0])[n]=a[0],o[n-1]=t[0])}if(0===n){for(t=e[0],r=s-1;r>=1;--r)c[r][0]=t[r],c[--r][0]=t[r];0===r&&(c[0][0]=t[0])}return c},numeric.negtranspose=function(e){var n,r,t,a,o,i=e.length,s=e[0].length,c=Array(s);for(r=0;r<s;r++)c[r]=Array(i);for(n=i-1;n>=1;n-=2){for(a=e[n],t=e[n-1],r=s-1;r>=1;--r)(o=c[r])[n]=-a[r],o[n-1]=-t[r],(o=c[--r])[n]=-a[r],o[n-1]=-t[r];0===r&&((o=c[0])[n]=-a[0],o[n-1]=-t[0])}if(0===n){for(t=e[0],r=s-1;r>=1;--r)c[r][0]=-t[r],c[--r][0]=-t[r];0===r&&(c[0][0]=-t[0])}return c},numeric._random=function e(n,r){var t,a,o=n[r],i=Array(o);if(r===n.length-1){for(a=Math.random,t=o-1;t>=1;t-=2)i[t]=a(),i[t-1]=a();return 0===t&&(i[0]=a()),i}for(t=o-1;t>=0;t--)i[t]=e(n,r+1);return i},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,n,r){if(void 0===r&&(r=Math.max(Math.round(n-e)+1,1)),r<2)return 1===r?[e]:[];var t,a=Array(r);for(t=--r;t>=0;t--)a[t]=(t*n+(r-t)*e)/r;return a},numeric.getBlock=function(e,n,r){var t=numeric.dim(e);return function e(a,o){var i,s=n[o],c=r[o]-s,u=Array(c);if(o===t.length-1){for(i=c;i>=0;i--)u[i]=a[i+s];return u}for(i=c;i>=0;i--)u[i]=e(a[i+s],o+1);return u}(e,0)},numeric.setBlock=function(e,n,r,t){var a=numeric.dim(e);return function e(t,o,i){var s,c=n[i],u=r[i]-c;if(i===a.length-1)for(s=u;s>=0;s--)t[s+c]=o[s];for(s=u;s>=0;s--)e(t[s+c],o[s],i+1)}(e,t,0),e},numeric.getRange=function(e,n,r){var t,a,o,i,s=n.length,c=r.length,u=Array(s);for(t=s-1;-1!==t;--t)for(u[t]=Array(c),o=u[t],i=e[n[t]],a=c-1;-1!==a;--a)o[a]=i[r[a]];return u},numeric.blockMatrix=function(e){var n=numeric.dim(e);if(n.length<4)return numeric.blockMatrix([e]);var r,t,a,o,i,s=n[0],c=n[1];for(r=0,t=0,a=0;a<s;++a)r+=e[a][0].length;for(o=0;o<c;++o)t+=e[0][o][0].length;var u=Array(r);for(a=0;a<r;++a)u[a]=Array(t);var l,m,h,f,d,p=0;for(a=0;a<s;++a){for(l=t,o=c-1;-1!==o;--o)for(l-=(i=e[a][o])[0].length,h=i.length-1;-1!==h;--h)for(d=i[h],m=u[p+h],f=d.length-1;-1!==f;--f)m[l+f]=d[f];p+=e[a][0].length}return u},numeric.tensor=function(e,n){if("number"==typeof e||"number"==typeof n)return numeric.mul(e,n);var r=numeric.dim(e),t=numeric.dim(n);if(1!==r.length||1!==t.length)throw new Error("numeric: tensor product is only defined for vectors");var a,o,i,s,c=r[0],u=t[0],l=Array(c);for(o=c-1;o>=0;o--){for(a=Array(u),s=e[o],i=u-1;i>=3;--i)a[i]=s*n[i],a[--i]=s*n[i],a[--i]=s*n[i],a[--i]=s*n[i];for(;i>=0;)a[i]=s*n[i],--i;l[o]=a}return l},numeric.T=function(e,n){this.x=e,this.y=n},numeric.t=function(e,n){return new numeric.T(e,n)},numeric.Tbinop=function(e,n,r,t,a){var o;if(numeric.indexOf,"string"!=typeof a)for(o in a="",numeric)numeric.hasOwnProperty(o)&&(e.indexOf(o)>=0||n.indexOf(o)>=0||r.indexOf(o)>=0||t.indexOf(o)>=0)&&o.length>1&&(a+="var "+o+" = numeric."+o+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+a+"\nif(x.y) {  if(y.y) {    return new numeric.T("+t+");\n  }\n  return new numeric.T("+r+");\n}\nif(y.y) {\n  return new numeric.T("+n+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,n=numeric.div;if(this.y){var r=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(n(this.x,r),n(numeric.neg(this.y),r))}return new T(n(1,this.x))},numeric.T.prototype.div=function(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var n=numeric.div;return this.y?new numeric.T(n(this.x,e.x),n(this.y,e.x)):new numeric.T(n(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,n=this.x,r=this.y;return r?new numeric.T(e(n),e(r)):new numeric.T(e(n))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,n=this.x,r=this.y;return r?new numeric.T(e(n),numeric.negtranspose(r)):new numeric.T(e(n))},numeric.Tunop=function(e,n,r){return"string"!=typeof r&&(r=""),Function("var x = this;\n"+r+"\nif(x.y) {  "+n+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if(void 0===e.y)return new numeric.T(numeric.inv(e.x));var n,r,t,a,o,i,s,c,u,l,m,h,f,d,p,M,g,y,v=e.x.length,b=numeric.identity(v),x=numeric.rep([v,v],0),w=numeric.clone(e.x),T=numeric.clone(e.y);for(u=0;u<v;u++){for(h=(d=w[u][u])*d+(p=T[u][u])*p,m=u,l=u+1;l<v;l++)(f=(d=w[l][u])*d+(p=T[l][u])*p)>h&&(m=l,h=f);for(m!==u&&(y=w[u],w[u]=w[m],w[m]=y,y=T[u],T[u]=T[m],T[m]=y,y=b[u],b[u]=b[m],b[m]=y,y=x[u],x[u]=x[m],x[m]=y),n=w[u],r=T[u],o=b[u],i=x[u],d=n[u],p=r[u],l=u+1;l<v;l++)M=n[l],g=r[l],n[l]=(M*d+g*p)/h,r[l]=(g*d-M*p)/h;for(l=0;l<v;l++)M=o[l],g=i[l],o[l]=(M*d+g*p)/h,i[l]=(g*d-M*p)/h;for(l=u+1;l<v;l++){for(t=w[l],a=T[l],s=b[l],c=x[l],d=t[u],p=a[u],m=u+1;m<v;m++)M=n[m],g=r[m],t[m]-=M*d-g*p,a[m]-=g*d+M*p;for(m=0;m<v;m++)M=o[m],g=i[m],s[m]-=M*d-g*p,c[m]-=g*d+M*p}}for(u=v-1;u>0;u--)for(o=b[u],i=x[u],l=u-1;l>=0;l--)for(s=b[l],c=x[l],d=w[l][u],p=T[l][u],m=v-1;m>=0;m--)M=o[m],g=i[m],s[m]-=d*M-p*g,c[m]-=d*g+p*M;return new numeric.T(b,x)},numeric.T.prototype.get=function(e){var n,r=this.x,t=this.y,a=0,o=e.length;if(t){for(;a<o;)r=r[n=e[a]],t=t[n],a++;return new numeric.T(r,t)}for(;a<o;)r=r[n=e[a]],a++;return new numeric.T(r)},numeric.T.prototype.set=function(e,n){var r,t=this.x,a=this.y,o=0,i=e.length,s=n.x,c=n.y;if(0===i)return c?this.y=c:a&&(this.y=void 0),this.x=t,this;if(c){for(a||(a=numeric.rep(numeric.dim(t),0),this.y=a);o<i-1;)t=t[r=e[o]],a=a[r],o++;return t[r=e[o]]=s,a[r]=c,this}if(a){for(;o<i-1;)t=t[r=e[o]],a=a[r],o++;return t[r=e[o]]=s,a[r]=s instanceof Array?numeric.rep(numeric.dim(s),0):0,this}for(;o<i-1;)t=t[r=e[o]],o++;return t[r=e[o]]=s,this},numeric.T.prototype.getRows=function(e,n){var r,t,a=n-e+1,o=Array(a),i=this.x,s=this.y;for(r=e;r<=n;r++)o[r-e]=i[r];if(s){for(t=Array(a),r=e;r<=n;r++)t[r-e]=s[r];return new numeric.T(o,t)}return new numeric.T(o)},numeric.T.prototype.setRows=function(e,n,r){var t,a=this.x,o=this.y,i=r.x,s=r.y;for(t=e;t<=n;t++)a[t]=i[t-e];if(s)for(o||(o=numeric.rep(numeric.dim(a),0),this.y=o),t=e;t<=n;t++)o[t]=s[t-e];else if(o)for(t=e;t<=n;t++)o[t]=numeric.rep([i[t-e].length],0);return this},numeric.T.prototype.getRow=function(e){var n=this.x,r=this.y;return r?new numeric.T(n[e],r[e]):new numeric.T(n[e])},numeric.T.prototype.setRow=function(e,n){var r=this.x,t=this.y,a=n.x,o=n.y;return r[e]=a,o?(t||(t=numeric.rep(numeric.dim(r),0),this.y=t),t[e]=o):t&&(t=numeric.rep([a.length],0)),this},numeric.T.prototype.getBlock=function(e,n){var r=this.x,t=this.y,a=numeric.getBlock;return t?new numeric.T(a(r,e,n),a(t,e,n)):new numeric.T(a(r,e,n))},numeric.T.prototype.setBlock=function(e,n,r){r instanceof numeric.T||(r=new numeric.T(r));var t=this.x,a=this.y,o=numeric.setBlock,i=r.x,s=r.y;if(s)return a||(this.y=numeric.rep(numeric.dim(this),0),a=this.y),o(t,e,n,i),o(a,e,n,s),this;o(t,e,n,i),a&&o(a,e,n,numeric.rep(numeric.dim(i),0))},numeric.T.rep=function(e,n){var r=numeric.T;n instanceof r||(n=new r(n));var t=n.x,a=n.y,o=numeric.rep;return a?new r(o(e,t),o(e,a)):new r(o(e,t))},numeric.T.diag=function(e){e instanceof numeric.T||(e=new numeric.T(e));var n=e.x,r=e.y,t=numeric.diag;return r?new numeric.T(t(n),t(r)):new numeric.T(t(n))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,n=this.x,r=this.y;return r?new e.T(e.getDiag(n),e.getDiag(r)):new e.T(e.getDiag(n))},numeric.house=function(e){var n=numeric.clone(e),r=(e[0]>=0?1:-1)*numeric.norm2(e);n[0]+=r;var t=numeric.norm2(n);if(0===t)throw new Error("eig: internal error");return numeric.div(n,t)},numeric.toUpperHessenberg=function(e){var n=numeric.dim(e);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var r,t,a,o,i,s,c,u,l,m,h=n[0],f=numeric.clone(e),d=numeric.identity(h);for(t=0;t<h-2;t++){for(o=Array(h-t-1),r=t+1;r<h;r++)o[r-t-1]=f[r][t];if(numeric.norm2(o)>0){for(i=numeric.house(o),s=numeric.getBlock(f,[t+1,t],[h-1,h-1]),c=numeric.tensor(i,numeric.dot(i,s)),r=t+1;r<h;r++)for(u=f[r],l=c[r-t-1],a=t;a<h;a++)u[a]-=2*l[a-t];for(s=numeric.getBlock(f,[0,t+1],[h-1,h-1]),c=numeric.tensor(numeric.dot(s,i),i),r=0;r<h;r++)for(u=f[r],l=c[r],a=t+1;a<h;a++)u[a]-=2*l[a-t-1];for(s=Array(h-t-1),r=t+1;r<h;r++)s[r-t-1]=d[r];for(c=numeric.tensor(i,numeric.dot(i,s)),r=t+1;r<h;r++)for(m=d[r],l=c[r-t-1],a=0;a<h;a++)m[a]-=2*l[a]}}return{H:f,Q:d}},numeric.epsilon=2220446049250313e-31,numeric.QRFrancis=function(e,n){void 0===n&&(n=1e4),e=numeric.clone(e),numeric.clone(e);var r,t,a,o,i,s,c,u,l,m,h,f,d,p,M,g,y,v,b=numeric.dim(e)[0],x=numeric.identity(b);if(b<3)return{Q:x,B:[[0,b-1]]};var w=numeric.epsilon;for(v=0;v<n;v++){for(g=0;g<b-1;g++)if(Math.abs(e[g+1][g])<w*(Math.abs(e[g][g])+Math.abs(e[g+1][g+1]))){var T=numeric.QRFrancis(numeric.getBlock(e,[0,0],[g,g]),n),A=numeric.QRFrancis(numeric.getBlock(e,[g+1,g+1],[b-1,b-1]),n);for(f=Array(g+1),M=0;M<=g;M++)f[M]=x[M];for(d=numeric.dot(T.Q,f),M=0;M<=g;M++)x[M]=d[M];for(f=Array(b-g-1),M=g+1;M<b;M++)f[M-g-1]=x[M];for(d=numeric.dot(A.Q,f),M=g+1;M<b;M++)x[M]=d[M-g-1];return{Q:x,B:T.B.concat(numeric.add(A.B,g+1))}}var _,S,N;for(a=e[b-2][b-2],o=e[b-2][b-1],i=e[b-1][b-2],u=a+(s=e[b-1][b-1]),c=a*s-o*i,l=numeric.getBlock(e,[0,0],[2,2]),u*u>=4*c?(_=.5*(u+Math.sqrt(u*u-4*c)),S=.5*(u-Math.sqrt(u*u-4*c)),l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,_+S)),numeric.diag(numeric.rep([3],_*S)))):l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,u)),numeric.diag(numeric.rep([3],c))),r=[l[0][0],l[1][0],l[2][0]],t=numeric.house(r),f=[e[0],e[1],e[2]],d=numeric.tensor(t,numeric.dot(t,f)),M=0;M<3;M++)for(h=e[M],p=d[M],y=0;y<b;y++)h[y]-=2*p[y];for(f=numeric.getBlock(e,[0,0],[b-1,2]),d=numeric.tensor(numeric.dot(f,t),t),M=0;M<b;M++)for(h=e[M],p=d[M],y=0;y<3;y++)h[y]-=2*p[y];for(f=[x[0],x[1],x[2]],d=numeric.tensor(t,numeric.dot(t,f)),M=0;M<3;M++)for(m=x[M],p=d[M],y=0;y<b;y++)m[y]-=2*p[y];for(g=0;g<b-2;g++){for(y=g;y<=g+1;y++)if(Math.abs(e[y+1][y])<w*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){for(T=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),n),A=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[b-1,b-1]),n),f=Array(y+1),M=0;M<=y;M++)f[M]=x[M];for(d=numeric.dot(T.Q,f),M=0;M<=y;M++)x[M]=d[M];for(f=Array(b-y-1),M=y+1;M<b;M++)f[M-y-1]=x[M];for(d=numeric.dot(A.Q,f),M=y+1;M<b;M++)x[M]=d[M-y-1];return{Q:x,B:T.B.concat(numeric.add(A.B,y+1))}}for(N=Math.min(b-1,g+3),r=Array(N-g),M=g+1;M<=N;M++)r[M-g-1]=e[M][g];for(t=numeric.house(r),f=numeric.getBlock(e,[g+1,g],[N,b-1]),d=numeric.tensor(t,numeric.dot(t,f)),M=g+1;M<=N;M++)for(h=e[M],p=d[M-g-1],y=g;y<b;y++)h[y]-=2*p[y-g];for(f=numeric.getBlock(e,[0,g+1],[b-1,N]),d=numeric.tensor(numeric.dot(f,t),t),M=0;M<b;M++)for(h=e[M],p=d[M],y=g+1;y<=N;y++)h[y]-=2*p[y-g-1];for(f=Array(N-g),M=g+1;M<=N;M++)f[M-g-1]=x[M];for(d=numeric.tensor(t,numeric.dot(t,f)),M=g+1;M<=N;M++)for(m=x[M],p=d[M-g-1],y=0;y<b;y++)m[y]-=2*p[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,n){var r,t,a,o,i,s,c,u,l,m,h,f,d,p,M,g,y=numeric.toUpperHessenberg(e),v=numeric.QRFrancis(y.H,n),b=numeric.T,x=e.length,w=v.B,T=numeric.dot(v.Q,numeric.dot(y.H,numeric.transpose(v.Q))),A=new b(numeric.dot(v.Q,y.Q)),_=w.length,S=Math.sqrt;for(t=0;t<_;t++)if((r=w[t][0])===w[t][1]);else{if(o=r+1,i=T[r][r],s=T[r][o],c=T[o][r],u=T[o][o],0===s&&0===c)continue;(m=(l=-i-u)*l-4*(i*u-s*c))>=0?((M=(i-(h=l<0?-.5*(l-S(m)):-.5*(l+S(m))))*(i-h)+s*s)>(g=c*c+(u-h)*(u-h))?(d=(i-h)/(M=S(M)),p=s/M):(d=c/(g=S(g)),p=(u-h)/g),a=new b([[p,-d],[d,p]]),A.setRows(r,o,a.dot(A.getRows(r,o)))):(h=-.5*l,f=.5*S(-m),(M=(i-h)*(i-h)+s*s)>(g=c*c+(u-h)*(u-h))?(d=(i-h)/(M=S(M+f*f)),p=s/M,h=0,f/=M):(d=c/(g=S(g+f*f)),p=(u-h)/g,h=f/g,f=0),a=new b([[p,-d],[d,p]],[[h,f],[f,-h]]),A.setRows(r,o,a.dot(A.getRows(r,o))))}var N=A.dot(e).dot(A.transjugate()),D=(x=e.length,numeric.T.identity(x));for(o=0;o<x;o++)if(o>0)for(t=o-1;t>=0;t--){var I=N.get([t,t]),E=N.get([o,o]);numeric.neq(I.x,E.x)||numeric.neq(I.y,E.y)?(h=N.getRow(t).getBlock([t],[o-1]),f=D.getRow(o).getBlock([t],[o-1]),D.set([o,t],N.get([t,o]).neg().sub(h.dot(f)).div(I.sub(E)))):D.setRow(o,D.getRow(t))}for(o=0;o<x;o++)h=D.getRow(o),D.setRow(o,h.div(h.norm2()));return D=D.transpose(),D=A.transjugate().dot(D),{lambda:N.getDiag(),E:D}},numeric.ccsSparse=function(e){var n,r,t,a=e.length,o=[];for(r=a-1;-1!==r;--r)for(t in n=e[r]){for(t=parseInt(t);t>=o.length;)o[o.length]=0;0!==n[t]&&o[t]++}var i=o.length,s=Array(i+1);for(s[0]=0,r=0;r<i;++r)s[r+1]=s[r]+o[r];var c=Array(s[i]),u=Array(s[i]);for(r=a-1;-1!==r;--r)for(t in n=e[r])0!==n[t]&&(o[t]--,c[s[t]+o[t]]=r,u[s[t]+o[t]]=n[t]);return[s,c,u]},numeric.ccsFull=function(e){var n,r,t,a,o=e[0],i=e[1],s=e[2],c=numeric.ccsDim(e),u=c[0],l=c[1],m=numeric.rep([u,l],0);for(n=0;n<l;n++)for(t=o[n],a=o[n+1],r=t;r<a;++r)m[i[r]][n]=s[r];return m},numeric.ccsTSolve=function(e,n,r,t,a){var o,i,s,c,u,l,m,h=e[0],f=e[1],d=e[2],p=h.length-1,M=Math.max,g=0;function y(e){var n;if(0===r[e]){for(r[e]=1,n=h[e];n<h[e+1];++n)y(f[n]);a[g]=e,++g}}for(void 0===t&&(r=numeric.rep([p],0)),void 0===t&&(t=numeric.linspace(0,r.length-1)),void 0===a&&(a=[]),o=t.length-1;-1!==o;--o)y(t[o]);for(a.length=g,o=a.length-1;-1!==o;--o)r[a[o]]=0;for(o=t.length-1;-1!==o;--o)i=t[o],r[i]=n[i];for(o=a.length-1;-1!==o;--o){for(i=a[o],s=h[i],c=M(h[i+1],s),u=s;u!==c;++u)if(f[u]===i){r[i]/=d[u];break}for(m=r[i],u=s;u!==c;++u)(l=f[u])!==i&&(r[l]-=m*d[u])}return r},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,n,r,t,a,o){var i,s,c,u=0,l=a.length,m=this.k,h=this.k1,f=this.j;if(0===t[e])for(t[e]=1,f[0]=e,m[0]=s=n[e],h[0]=c=n[e+1];;)if(s>=c){if(a[l]=f[u],0===u)return;++l,s=m[--u],c=h[u]}else 0===t[i=o[r[s]]]?(t[i]=1,m[u]=s,f[++u]=i,s=n[i],h[u]=c=n[i+1]):++s},numeric.ccsLPSolve=function(e,n,r,t,a,o,i){var s,c,u,l,m,h,f,d,p,M=e[0],g=e[1],y=e[2],v=(M.length,n[0]),b=n[1],x=n[2];for(c=v[a],u=v[a+1],t.length=0,s=c;s<u;++s)i.dfs(o[b[s]],M,g,r,t,o);for(s=t.length-1;-1!==s;--s)r[t[s]]=0;for(s=c;s!==u;++s)r[l=o[b[s]]]=x[s];for(s=t.length-1;-1!==s;--s){for(m=M[l=t[s]],h=M[l+1],f=m;f<h;++f)if(o[g[f]]===l){r[l]/=y[f];break}for(p=r[l],f=m;f<h;++f)(d=o[g[f]])!==l&&(r[d]-=p*y[f])}return r},numeric.ccsLUP1=function(e,n){var r,t,a,o,i,s,c,u=e[0].length-1,l=[numeric.rep([u+1],0),[],[]],m=[numeric.rep([u+1],0),[],[]],h=l[0],f=l[1],d=l[2],p=m[0],M=m[1],g=m[2],y=numeric.rep([u],0),v=numeric.rep([u],0),b=numeric.ccsLPSolve,x=(Math.max,Math.abs),w=numeric.linspace(0,u-1),T=numeric.linspace(0,u-1),A=new numeric.ccsDFS(u);for(void 0===n&&(n=1),r=0;r<u;++r){for(b(l,e,y,v,r,T,A),o=-1,i=-1,t=v.length-1;-1!==t;--t)(a=v[t])<=r||(s=x(y[a]))>o&&(i=a,o=s);for(x(y[r])<n*o&&(t=w[r],o=w[i],w[r]=o,T[o]=r,w[i]=t,T[t]=i,o=y[r],y[r]=y[i],y[i]=o),o=h[r],i=p[r],c=y[r],f[o]=w[r],d[o]=1,++o,t=v.length-1;-1!==t;--t)s=y[a=v[t]],v[t]=0,y[a]=0,a<=r?(M[i]=a,g[i]=s,++i):(f[o]=w[a],d[o]=s/c,++o);h[r+1]=o,p[r+1]=i}for(t=f.length-1;-1!==t;--t)f[t]=T[f[t]];return{L:l,U:m,P:w,Pinv:T}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,n,r,t,a,o,i){var s,c,u,l=0,m=a.length,h=this.k,f=this.k1,d=this.j;if(0===t[e])for(t[e]=1,d[0]=e,h[0]=c=n[o[e]],f[0]=u=n[o[e]+1];;){if(isNaN(c))throw new Error("Ow!");if(c>=u){if(a[m]=o[d[l]],0===l)return;++m,c=h[--l],u=f[l]}else 0===t[s=r[c]]?(t[s]=1,h[l]=c,d[++l]=s,c=n[s=o[s]],f[l]=u=n[s+1]):++c}},numeric.ccsLPSolve0=function(e,n,r,t,a,o,i,s){var c,u,l,m,h,f,d,p,M,g=e[0],y=e[1],v=e[2],b=(g.length,n[0]),x=n[1],w=n[2];for(u=b[a],l=b[a+1],t.length=0,c=u;c<l;++c)s.dfs(x[c],g,y,r,t,o,i);for(c=t.length-1;-1!==c;--c)r[i[m=t[c]]]=0;for(c=u;c!==l;++c)r[m=x[c]]=w[c];for(c=t.length-1;-1!==c;--c){for(p=i[m=t[c]],h=g[m],f=g[m+1],d=h;d<f;++d)if(y[d]===p){r[p]/=v[d];break}for(M=r[p],d=h;d<f;++d)r[y[d]]-=M*v[d];r[p]=M}},numeric.ccsLUP0=function(e,n){var r,t,a,o,i,s,c,u=e[0].length-1,l=[numeric.rep([u+1],0),[],[]],m=[numeric.rep([u+1],0),[],[]],h=l[0],f=l[1],d=l[2],p=m[0],M=m[1],g=m[2],y=numeric.rep([u],0),v=numeric.rep([u],0),b=numeric.ccsLPSolve0,x=(Math.max,Math.abs),w=numeric.linspace(0,u-1),T=numeric.linspace(0,u-1),A=new numeric.ccsDFS0(u);for(void 0===n&&(n=1),r=0;r<u;++r){for(b(l,e,y,v,r,T,w,A),o=-1,i=-1,t=v.length-1;-1!==t;--t)(a=v[t])<=r||(s=x(y[w[a]]))>o&&(i=a,o=s);for(x(y[w[r]])<n*o&&(t=w[r],o=w[i],w[r]=o,T[o]=r,w[i]=t,T[t]=i),o=h[r],i=p[r],c=y[w[r]],f[o]=w[r],d[o]=1,++o,t=v.length-1;-1!==t;--t)s=y[w[a=v[t]]],v[t]=0,y[w[a]]=0,a<=r?(M[i]=a,g[i]=s,++i):(f[o]=w[a],d[o]=s/c,++o);h[r+1]=o,p[r+1]=i}for(t=f.length-1;-1!==t;--t)f[t]=T[f[t]];return{L:l,U:m,P:w,Pinv:T}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,n,r){var t=numeric.ccsDim(e),a=t[0],o=t[1];void 0===n?n=numeric.linspace(0,a-1):"number"==typeof n&&(n=[n]),void 0===r?r=numeric.linspace(0,o-1):"number"==typeof r&&(r=[r]);var i,s,c,u,l=n.length,m=r.length,h=numeric.rep([o],0),f=[],d=[],p=[h,f,d],M=e[0],g=e[1],y=e[2],v=numeric.rep([a],0),b=0,x=numeric.rep([a],0);for(s=0;s<m;++s){var w=M[u=r[s]],T=M[u+1];for(i=w;i<T;++i)x[c=g[i]]=1,v[c]=y[i];for(i=0;i<l;++i)x[n[i]]&&(f[b]=i,d[b]=v[n[i]],++b);for(i=w;i<T;++i)x[c=g[i]]=0;h[s+1]=b}return p},numeric.ccsDot=function(e,n){var r,t,a,o,i,s,c,u,l,m,h,f=e[0],d=e[1],p=e[2],M=n[0],g=n[1],y=n[2],v=numeric.ccsDim(e),b=numeric.ccsDim(n),x=v[0],w=(v[1],b[1]),T=numeric.rep([x],0),A=numeric.rep([x],0),_=Array(x),S=numeric.rep([w],0),N=[],D=[],I=[S,N,D];for(a=0;a!==w;++a){for(o=M[a],i=M[a+1],l=0,t=o;t<i;++t)for(m=g[t],h=y[t],s=f[m],c=f[m+1],r=s;r<c;++r)0===A[u=d[r]]&&(_[l]=u,A[u]=1,l+=1),T[u]=T[u]+p[r]*h;for(i=(o=S[a])+l,S[a+1]=i,t=l-1;-1!==t;--t)h=o+t,r=_[t],N[h]=r,D[h]=T[r],A[r]=0,T[r]=0;S[a+1]=S[a]+l}return I},numeric.ccsLUPSolve=function(e,n){var r=e.L,t=e.U,a=(e.P,n[0]),o=!1;"object"!=typeof a&&(a=(n=[[0,n.length],numeric.linspace(0,n.length-1),n])[0],o=!0);var i,s,c,u,l,m,h=n[1],f=n[2],d=r[0].length-1,p=a.length-1,M=numeric.rep([d],0),g=Array(d),y=numeric.rep([d],0),v=Array(d),b=numeric.rep([p+1],0),x=[],w=[],T=numeric.ccsTSolve,A=0;for(i=0;i<p;++i){for(l=0,c=a[i],u=a[i+1],s=c;s<u;++s)m=e.Pinv[h[s]],v[l]=m,y[m]=f[s],++l;for(v.length=l,T(r,y,M,v,g),s=v.length-1;-1!==s;--s)y[v[s]]=0;if(T(t,M,y,g,v),o)return y;for(s=g.length-1;-1!==s;--s)M[g[s]]=0;for(s=v.length-1;-1!==s;--s)m=v[s],x[A]=m,w[A]=y[m],y[m]=0,++A;b[i+1]=A}return[b,x,w]},numeric.ccsbinop=function(e,n){return void 0===n&&(n=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+n+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var n,r=e[0],t=e[1],a=e[2],o=numeric.sup(t)+1,i=r.length,s=numeric.rep([o],0),c=Array(i),u=Array(i),l=numeric.rep([o],0);for(n=0;n<i;++n)l[t[n]]++;for(n=0;n<o;++n)s[n+1]=s[n]+l[n];var m,h,f=s.slice(0);for(n=0;n<i;++n)c[m=f[h=t[n]]]=r[n],u[m]=a[n],f[h]=f[h]+1;return[s,c,u]},numeric.ccsGather=function(e){var n,r,t,a,o,i=e[0],s=e[1],c=e[2],u=i.length-1,l=s.length,m=Array(l),h=Array(l),f=Array(l);for(o=0,n=0;n<u;++n)for(t=i[n],a=i[n+1],r=t;r!==a;++r)h[o]=n,m[o]=s[r],f[o]=c[r],++o;return[m,h,f]},numeric.sdim=function e(n,r,t){if(void 0===r&&(r=[]),"object"!=typeof n)return r;var a;for(a in void 0===t&&(t=0),t in r||(r[t]=0),n.length>r[t]&&(r[t]=n.length),n)n.hasOwnProperty(a)&&e(n[a],r,t+1);return r},numeric.sclone=function e(n,r,t){void 0===r&&(r=0),void 0===t&&(t=numeric.sdim(n).length);var a,o=Array(n.length);if(r===t-1){for(a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);return o}for(a in n)n.hasOwnProperty(a)&&(o[a]=e(n[a],r+1,t));return o},numeric.sdiag=function(e){var n,r,t=e.length,a=Array(t);for(n=t-1;n>=1;n-=2)r=n-1,a[n]=[],a[n][n]=e[n],a[r]=[],a[r][r]=e[r];return 0===n&&(a[0]=[],a[0][0]=e[n]),a},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var n,r,t,a=[];for(n in e.length,e)if(e.hasOwnProperty(n))for(r in t=e[n])t.hasOwnProperty(r)&&("object"!=typeof a[r]&&(a[r]=[]),a[r][n]=t[r]);return a},numeric.sLUP=function(e,n){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,n){var r,t,a,o,i,s,c,u=e.length,l=(n.length,numeric.stranspose(n)),m=l.length,h=Array(u);for(a=u-1;a>=0;a--){for(c=[],r=e[a],i=m-1;i>=0;i--){for(o in s=0,t=l[i],r)r.hasOwnProperty(o)&&o in t&&(s+=r[o]*t[o]);s&&(c[i]=s)}h[a]=c}return h},numeric.sdotMV=function(e,n){var r,t,a,o,i=e.length,s=Array(i);for(t=i-1;t>=0;t--){for(a in o=0,r=e[t])r.hasOwnProperty(a)&&n[a]&&(o+=r[a]*n[a]);o&&(s[t]=o)}return s},numeric.sdotVM=function(e,n){var r,t,a,o,i=[];for(r in e)if(e.hasOwnProperty(r))for(t in a=n[r],o=e[r],a)a.hasOwnProperty(t)&&(i[t]||(i[t]=0),i[t]+=o*a[t]);return i},numeric.sdotVV=function(e,n){var r,t=0;for(r in e)e[r]&&n[r]&&(t+=e[r]*n[r]);return t},numeric.sdot=function(e,n){var r=numeric.sdim(e).length,t=numeric.sdim(n).length;switch(1e3*r+t){case 0:return e*n;case 1001:return numeric.sdotVV(e,n);case 2001:return numeric.sdotMV(e,n);case 1002:return numeric.sdotVM(e,n);case 2002:return numeric.sdotMM(e,n);default:throw new Error("numeric.sdot not implemented for tensors of order "+r+" and "+t)}},numeric.sscatter=function(e){var n,r,t,a,o=e[0].length,i=e.length,s=[];for(r=o-1;r>=0;--r)if(e[i-1][r]){for(a=s,t=0;t<i-2;t++)a[n=e[t][r]]||(a[n]=[]),a=a[n];a[e[t][r]]=e[t+1][r]}return s},numeric.sgather=function e(n,r,t){var a,o,i;for(o in void 0===r&&(r=[]),void 0===t&&(t=[]),a=t.length,n)if(n.hasOwnProperty(o))if(t[a]=parseInt(o),"number"==typeof(i=n[o])){if(i){if(0===r.length)for(o=a+1;o>=0;--o)r[o]=[];for(o=a;o>=0;--o)r[o].push(t[o]);r[a+1].push(i)}}else e(i,r,t);return t.length>a&&t.pop(),r},numeric.cLU=function(e){var n,r,t,a,o,i,s=e[0],c=e[1],u=e[2],l=s.length,m=0;for(n=0;n<l;n++)s[n]>m&&(m=s[n]);m++;var h,f=Array(m),d=Array(m),p=numeric.rep([m],1/0),M=numeric.rep([m],-1/0);for(t=0;t<l;t++)n=s[t],(r=c[t])<p[n]&&(p[n]=r),r>M[n]&&(M[n]=r);for(n=0;n<m-1;n++)M[n]>M[n+1]&&(M[n+1]=M[n]);for(n=m-1;n>=1;n--)p[n]<p[n-1]&&(p[n-1]=p[n]);for(n=0;n<m;n++)d[n]=numeric.rep([M[n]-p[n]+1],0),f[n]=numeric.rep([n-p[n]],0),p[n],M[n];for(t=0;t<l;t++)d[n=s[t]][c[t]-p[n]]=u[t];for(n=0;n<m-1;n++)for(a=n-p[n],v=d[n],r=n+1;p[r]<=n&&r<m;r++)if(o=n-p[r],i=M[n]-n,h=(b=d[r])[o]/v[a]){for(t=1;t<=i;t++)b[t+o]-=h*v[t+a];f[r][n-p[r]]=h}var g,y,v=[],b=[],x=[],w=[],T=[],A=[];for(l=0,g=0,n=0;n<m;n++){for(a=p[n],o=M[n],y=d[n],r=n;r<=o;r++)y[r-a]&&(v[l]=n,b[l]=r,x[l]=y[r-a],l++);for(y=f[n],r=a;r<n;r++)y[r-a]&&(w[g]=n,T[g]=r,A[g]=y[r-a],g++);w[g]=n,T[g]=n,A[g]=1,g++}return{U:[v,b,x],L:[w,T,A]}},numeric.cLUsolve=function(e,n){var r,t,a=e.L,o=e.U,i=numeric.clone(n),s=a[0],c=a[1],u=a[2],l=o[0],m=o[1],h=o[2],f=l.length,d=(s.length,i.length);for(t=0,r=0;r<d;r++){for(;c[t]<r;)i[r]-=u[t]*i[c[t]],t++;t++}for(t=f-1,r=d-1;r>=0;r--){for(;m[t]>r;)i[r]-=h[t]*i[m[t]],t--;i[r]/=h[t],t--}return i},numeric.cgrid=function(e,n){"number"==typeof e&&(e=[e,e]);var r,t,a,o=numeric.rep(e,-1);for("function"!=typeof n&&(n="L"===n?function(n,r){return n>=e[0]/2||r<e[1]/2}:function(e,n){return!0}),a=0,r=1;r<e[0]-1;r++)for(t=1;t<e[1]-1;t++)n(r,t)&&(o[r][t]=a,a++);return o},numeric.cdelsq=function(e){var n,r,t,a,o,i=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),c=s[0],u=s[1],l=[],m=[],h=[];for(n=1;n<c-1;n++)for(r=1;r<u-1;r++)if(!(e[n][r]<0)){for(t=0;t<4;t++)a=n+i[t][0],o=r+i[t][1],e[a][o]<0||(l.push(e[n][r]),m.push(e[a][o]),h.push(-1));l.push(e[n][r]),m.push(e[n][r]),h.push(4)}return[l,m,h]},numeric.cdotMV=function(e,n){var r,t,a,o=e[0],i=e[1],s=e[2],c=o.length;for(a=0,t=0;t<c;t++)o[t]>a&&(a=o[t]);for(a++,r=numeric.rep([a],0),t=0;t<c;t++)r[o[t]]+=s[t]*n[i[t]];return r},numeric.Spline=function(e,n,r,t,a){this.x=e,this.yl=n,this.yr=r,this.kl=t,this.kr=a},numeric.Spline.prototype._at=function(e,n){var r,t,a,o=this.x,i=this.yl,s=this.yr,c=this.kl,u=this.kr,l=numeric.add,m=numeric.sub,h=numeric.mul;r=m(h(c[n],o[n+1]-o[n]),m(s[n+1],i[n])),t=l(h(u[n+1],o[n]-o[n+1]),m(s[n+1],i[n]));var f=(a=(e-o[n])/(o[n+1]-o[n]))*(1-a);return l(l(l(h(1-a,i[n]),h(a,s[n+1])),h(r,f*(1-a))),h(t,f*a))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var n,r,t,a=this.x,o=a.length,i=Math.floor;for(n=0,r=o-1;r-n>1;)a[t=i((n+r)/2)]<=e?n=t:r=t;return this._at(e,n)}o=e.length;var s,c=Array(o);for(s=o-1;-1!==s;--s)c[s]=this.at(e[s]);return c},numeric.Spline.prototype.diff=function(){var e,n,r,t=this.x,a=this.yl,o=this.yr,i=this.kl,s=this.kr,c=a.length,u=i,l=s,m=Array(c),h=Array(c),f=numeric.add,d=numeric.mul,p=numeric.div,M=numeric.sub;for(e=c-1;-1!==e;--e)n=t[e+1]-t[e],r=M(o[e+1],a[e]),m[e]=p(f(d(r,6),d(i[e],-4*n),d(s[e+1],-2*n)),n*n),h[e+1]=p(f(d(r,-6),d(i[e],2*n),d(s[e+1],4*n)),n*n);return new numeric.Spline(t,u,l,m,h)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var n=[],r=this.x,t=this.yl,a=this.yr,o=this.kl,i=this.kr;"number"==typeof t[0]&&(t=[t],a=[a],o=[o],i=[i]);var s,c,u,l,m,h,f,d,p,M,g,y,v,b,x,w,T,A,_,S,N,D,I,E=t.length,R=r.length-1,C=(n=Array(E),Math.sqrt);for(s=0;s!==E;++s){for(l=t[s],m=a[s],h=o[s],f=i[s],d=[],c=0;c!==R;c++){for(c>0&&m[c]*l[c]<0&&d.push(r[c]),w=r[c+1]-r[c],r[c],g=l[c],y=m[c+1],p=h[c]/w,v=(M=f[c+1]/w)+3*g+2*p-3*y,b=3*(M+p+2*(g-y)),(x=e(p-M+3*(g-y))+12*M*g)<=0?T=(A=v/b)>r[c]&&A<r[c+1]?[r[c],A,r[c+1]]:[r[c],r[c+1]]:(A=(v-C(x))/b,_=(v+C(x))/b,T=[r[c]],A>r[c]&&A<r[c+1]&&T.push(A),_>r[c]&&_<r[c+1]&&T.push(_),T.push(r[c+1])),N=T[0],A=this._at(N,c),u=0;u<T.length-1;u++)if(D=T[u+1],_=this._at(D,c),0!==A)if(0===_||A*_>0)N=D,A=_;else{for(var O=0;!((I=(A*D-_*N)/(A-_))<=N||I>=D);)if((S=this._at(I,c))*_>0)D=I,_=S,-1===O&&(A*=.5),O=-1;else{if(!(S*A>0))break;N=I,A=S,1===O&&(_*=.5),O=1}d.push(I),N=T[u+1],A=this._at(N,c)}else d.push(N),N=D,A=_;0===_&&d.push(D)}n[s]=d}return"number"==typeof this.yl[0]?n[0]:n},numeric.spline=function(e,n,r,t){var a,o=e.length,i=[],s=[],c=[],u=numeric.sub,l=numeric.mul,m=numeric.add;for(a=o-2;a>=0;a--)s[a]=e[a+1]-e[a],c[a]=u(n[a+1],n[a]);"string"!=typeof r&&"string"!=typeof t||(r=t="periodic");var h=[[],[],[]];switch(typeof r){case"undefined":i[0]=l(3/(s[0]*s[0]),c[0]),h[0].push(0,0),h[1].push(0,1),h[2].push(2/s[0],1/s[0]);break;case"string":i[0]=m(l(3/(s[o-2]*s[o-2]),c[o-2]),l(3/(s[0]*s[0]),c[0])),h[0].push(0,0,0),h[1].push(o-2,0,1),h[2].push(1/s[o-2],2/s[o-2]+2/s[0],1/s[0]);break;default:i[0]=r,h[0].push(0),h[1].push(0),h[2].push(1)}for(a=1;a<o-1;a++)i[a]=m(l(3/(s[a-1]*s[a-1]),c[a-1]),l(3/(s[a]*s[a]),c[a])),h[0].push(a,a,a),h[1].push(a-1,a,a+1),h[2].push(1/s[a-1],2/s[a-1]+2/s[a],1/s[a]);switch(typeof t){case"undefined":i[o-1]=l(3/(s[o-2]*s[o-2]),c[o-2]),h[0].push(o-1,o-1),h[1].push(o-2,o-1),h[2].push(1/s[o-2],2/s[o-2]);break;case"string":h[1][h[1].length-1]=0;break;default:i[o-1]=t,h[0].push(o-1),h[1].push(o-1),h[2].push(1)}i="number"!=typeof i[0]?numeric.transpose(i):[i];var f=Array(i.length);if("string"==typeof r)for(a=f.length-1;-1!==a;--a)f[a]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(h)),i[a]),f[a][o-1]=f[a][0];else for(a=f.length-1;-1!==a;--a)f[a]=numeric.cLUsolve(numeric.cLU(h),i[a]);return f="number"==typeof n[0]?f[0]:numeric.transpose(f),new numeric.Spline(e,n,n,f,f)},numeric.fftpow2=function e(n,r){var t=n.length;if(1!==t){var a,o,i=Math.cos,s=Math.sin,c=Array(t/2),u=Array(t/2),l=Array(t/2),m=Array(t/2);for(o=t/2,a=t-1;-1!==a;--a)l[--o]=n[a],m[o]=r[a],--a,c[o]=n[a],u[o]=r[a];e(c,u),e(l,m),o=t/2;var h,f,d,p=-6.283185307179586/t;for(a=t-1;-1!==a;--a)-1==--o&&(o=t/2-1),f=i(h=p*a),d=s(h),n[a]=c[o]+f*l[o]-d*m[o],r[a]=u[o]+f*m[o]+d*l[o]}},numeric._ifftpow2=function e(n,r){var t=n.length;if(1!==t){var a,o,i=Math.cos,s=Math.sin,c=Array(t/2),u=Array(t/2),l=Array(t/2),m=Array(t/2);for(o=t/2,a=t-1;-1!==a;--a)l[--o]=n[a],m[o]=r[a],--a,c[o]=n[a],u[o]=r[a];e(c,u),e(l,m),o=t/2;var h,f,d,p=6.283185307179586/t;for(a=t-1;-1!==a;--a)-1==--o&&(o=t/2-1),f=i(h=p*a),d=s(h),n[a]=c[o]+f*l[o]-d*m[o],r[a]=u[o]+f*m[o]+d*l[o]}},numeric.ifftpow2=function(e,n){numeric._ifftpow2(e,n),numeric.diveq(e,e.length),numeric.diveq(n,n.length)},numeric.convpow2=function(e,n,r,t){var a,o,i,s,c;for(numeric.fftpow2(e,n),numeric.fftpow2(r,t),a=e.length-1;-1!==a;--a)o=e[a],s=n[a],i=r[a],c=t[a],e[a]=o*i-s*c,n[a]=o*c+s*i;numeric.ifftpow2(e,n)},numeric.T.prototype.fft=function(){var e,n,r=this.x,t=this.y,a=r.length,o=Math.log,i=o(2),s=Math.ceil(o(2*a-1)/i),c=Math.pow(2,s),u=numeric.rep([c],0),l=numeric.rep([c],0),m=Math.cos,h=Math.sin,f=-3.141592653589793/a,d=numeric.rep([c],0),p=numeric.rep([c],0);for(Math.floor(a/2),e=0;e<a;e++)d[e]=r[e];if(void 0!==t)for(e=0;e<a;e++)p[e]=t[e];for(u[0]=1,e=1;e<=c/2;e++)n=f*e*e,u[e]=m(n),l[e]=h(n),u[c-e]=m(n),l[c-e]=h(n);var M=new numeric.T(d,p),g=new numeric.T(u,l);return M=M.mul(g),numeric.convpow2(M.x,M.y,numeric.clone(g.x),numeric.neg(g.y)),(M=M.mul(g)).x.length=a,M.y.length=a,M},numeric.T.prototype.ifft=function(){var e,n,r=this.x,t=this.y,a=r.length,o=Math.log,i=o(2),s=Math.ceil(o(2*a-1)/i),c=Math.pow(2,s),u=numeric.rep([c],0),l=numeric.rep([c],0),m=Math.cos,h=Math.sin,f=3.141592653589793/a,d=numeric.rep([c],0),p=numeric.rep([c],0);for(Math.floor(a/2),e=0;e<a;e++)d[e]=r[e];if(void 0!==t)for(e=0;e<a;e++)p[e]=t[e];for(u[0]=1,e=1;e<=c/2;e++)n=f*e*e,u[e]=m(n),l[e]=h(n),u[c-e]=m(n),l[c-e]=h(n);var M=new numeric.T(d,p),g=new numeric.T(u,l);return M=M.mul(g),numeric.convpow2(M.x,M.y,numeric.clone(g.x),numeric.neg(g.y)),(M=M.mul(g)).x.length=a,M.y.length=a,M.div(a)},numeric.gradient=function(e,n){var r=n.length,t=e(n);if(isNaN(t))throw new Error("gradient: f(x) is a NaN!");var a,o,i,s,c,u,l,m,h,f=Math.max,d=numeric.clone(n),p=Array(r),M=(numeric.div,numeric.sub,f=Math.max,Math.abs),g=Math.min,y=0;for(a=0;a<r;a++)for(var v=f(1e-6*t,1e-8);;){if(++y>20)throw new Error("Numerical gradient fails");if(d[a]=n[a]+v,o=e(d),d[a]=n[a]-v,i=e(d),d[a]=n[a],isNaN(o)||isNaN(i))v/=16;else{if(p[a]=(o-i)/(2*v),s=n[a]-v,c=n[a],u=n[a]+v,l=(o-t)/v,m=(t-i)/v,h=f(M(p[a]),M(t),M(o),M(i),M(s),M(c),M(u),1e-8),!(g(f(M(l-p[a]),M(m-p[a]),M(l-m))/h,v/h)>.001))break;v/=16}}return p},numeric.uncmin=function(e,n,r,t,a,o,i){var s=numeric.gradient;void 0===i&&(i={}),void 0===r&&(r=1e-8),void 0===t&&(t=function(n){return s(e,n)}),void 0===a&&(a=1e3);var c,u,l=(n=numeric.clone(n)).length,m=e(n);if(isNaN(m))throw new Error("uncmin: f(x0) is a NaN!");var h=Math.max,f=numeric.norm2;r=h(r,numeric.epsilon);var d,p,M,g,y,v,b,x,w,T,A=i.Hinv||numeric.identity(l),_=numeric.dot,S=(numeric.inv,numeric.sub),N=numeric.add,D=numeric.tensor,I=numeric.div,E=numeric.mul,R=numeric.all,C=numeric.isFinite,O=numeric.neg,P=0,L="";for(p=t(n);P<a;){if("function"==typeof o&&o(P,n,m,p,A)){L="Callback returned true";break}if(!R(C(p))){L="Gradient has Infinity or NaN";break}if(!R(C(d=O(_(A,p))))){L="Search direction has Infinity or NaN";break}if((T=f(d))<r){L="Newton step smaller than tol";break}for(w=1,u=_(p,d),y=n;P<a&&!(w*T<r)&&(y=N(n,g=E(d,w)),(c=e(y))-m>=.1*w*u||isNaN(c));)w*=.5,++P;if(w*T<r){L="Line search step size smaller than tol";break}if(P===a){L="maxit reached during line search";break}x=_(v=S(M=t(y),p),g),b=_(A,v),A=S(N(A,E((x+_(v,b))/(x*x),D(g,g))),I(N(D(b,g),D(g,b)),x)),n=y,m=c,p=M,++P}return{solution:n,f:m,gradient:p,invHessian:A,iterations:P,message:L}},numeric.Dopri=function(e,n,r,t,a,o,i){this.x=e,this.y=n,this.f=r,this.ymid=t,this.iterations=a,this.events=i,this.message=o},numeric.Dopri.prototype._at=function(e,n){function r(e){return e*e}var t,a,o,i,s,c,u,l,m,h=this,f=h.x,d=h.y,p=h.f,M=h.ymid,g=(f.length,Math.floor,numeric.add),y=numeric.mul,v=numeric.sub;return t=f[n],a=f[n+1],i=d[n],s=d[n+1],o=t+.5*(a-t),c=M[n],u=v(p[n],y(i,1/(t-o)+2/(t-a))),l=v(p[n+1],y(s,1/(a-o)+2/(a-t))),g(g(g(g(y(i,(m=[r(e-a)*(e-o)/r(t-a)/(t-o),r(e-t)*r(e-a)/r(t-o)/r(a-o),r(e-t)*(e-o)/r(a-t)/(a-o),(e-t)*r(e-a)*(e-o)/r(t-a)/(t-o),(e-a)*r(e-t)*(e-o)/r(t-a)/(a-o)])[0]),y(c,m[1])),y(s,m[2])),y(u,m[3])),y(l,m[4]))},numeric.Dopri.prototype.at=function(e){var n,r,t,a=Math.floor;if("number"!=typeof e){var o=e.length,i=Array(o);for(n=o-1;-1!==n;--n)i[n]=this.at(e[n]);return i}var s=this.x;for(n=0,r=s.length-1;r-n>1;)s[t=a(.5*(n+r))]<=e?n=t:r=t;return this._at(e,n)},numeric.dopri=function(e,n,r,t,a,o,i){void 0===a&&(a=1e-6),void 0===o&&(o=1e3);var s,c,u,l,m,h,f,d,p,M,g,y,v,b=[e],x=[r],w=[t(e,r)],T=[],A=[3/40,9/40],_=[44/45,-56/15,32/9],S=[19372/6561,-25360/2187,64448/6561,-212/729],N=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],D=[35/384,0,500/1113,125/192,-2187/6784,11/84],I=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,5618549.5/235043384],E=[.2,.3,.8,8/9,1,1],R=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40],C=0,O=(n-e)/10,P=0,L=numeric.add,z=numeric.mul,j=(Math.max,Math.min),k=Math.abs,U=numeric.norminf,q=Math.pow,F=numeric.any,Y=numeric.lt,G=numeric.and,J=(numeric.sub,new numeric.Dopri(b,x,w,T,-1,""));for("function"==typeof i&&(g=i(e,r));e<n&&P<o;)if(++P,e+O>n&&(O=n-e),s=t(e+E[0]*O,L(r,z(.2*O,w[C]))),c=t(e+E[1]*O,L(L(r,z(A[0]*O,w[C])),z(A[1]*O,s))),u=t(e+E[2]*O,L(L(L(r,z(_[0]*O,w[C])),z(_[1]*O,s)),z(_[2]*O,c))),l=t(e+E[3]*O,L(L(L(L(r,z(S[0]*O,w[C])),z(S[1]*O,s)),z(S[2]*O,c)),z(S[3]*O,u))),m=t(e+E[4]*O,L(L(L(L(L(r,z(N[0]*O,w[C])),z(N[1]*O,s)),z(N[2]*O,c)),z(N[3]*O,u)),z(N[4]*O,l))),h=t(e+O,p=L(L(L(L(L(r,z(w[C],O*D[0])),z(c,O*D[2])),z(u,O*D[3])),z(l,O*D[4])),z(m,O*D[5]))),(M="number"==typeof(f=L(L(L(L(L(z(w[C],O*R[0]),z(c,O*R[2])),z(u,O*R[3])),z(l,O*R[4])),z(m,O*R[5])),z(h,O*R[6])))?k(f):U(f))>a){if(e+(O=.2*O*q(a/M,.25))===e){J.msg="Step size became too small";break}}else{if(T[C]=L(L(L(L(L(L(r,z(w[C],O*I[0])),z(c,O*I[2])),z(u,O*I[3])),z(l,O*I[4])),z(m,O*I[5])),z(h,O*I[6])),b[++C]=e+O,x[C]=p,w[C]=h,"function"==typeof i){var V,H,B=e,X=e+.5*O;if(y=i(X,T[C-1]),F(v=G(Y(g,0),Y(0,y)))||(B=X,g=y,y=i(X=e+O,p),v=G(Y(g,0),Y(0,y))),F(v)){for(var Q,Z,W=0,K=1,$=1;;){if("number"==typeof g)H=($*y*B-K*g*X)/($*y-K*g);else for(H=X,d=g.length-1;-1!==d;--d)g[d]<0&&y[d]>0&&(H=j(H,($*y[d]*B-K*g[d]*X)/($*y[d]-K*g[d])));if(H<=B||H>=X)break;Z=i(H,V=J._at(H,C-1)),F(Q=G(Y(g,0),Y(0,Z)))?(X=H,y=Z,v=Q,$=1,-1===W?K*=.5:K=1,W=-1):(B=H,g=Z,K=1,1===W?$*=.5:$=1,W=1)}return p=J._at(.5*(e+H),C-1),J.f[C]=t(H,V),J.x[C]=H,J.y[C]=V,J.ymid[C-1]=p,J.events=v,J.iterations=P,J}}e+=O,r=p,g=y,O=j(.8*O*q(a/M,.25),4*O)}return J.iterations=P,J},numeric.LU=function(e,n){n=n||!1;var r,t,a,o,i,s,c,u,l,m=Math.abs,h=e.length,f=h-1,d=new Array(h);for(n||(e=numeric.clone(e)),a=0;a<h;++a){for(c=a,l=m((s=e[a])[a]),t=a+1;t<h;++t)l<(o=m(e[t][a]))&&(l=o,c=t);for(d[a]=c,c!=a&&(e[a]=e[c],e[c]=s,s=e[a]),i=s[a],r=a+1;r<h;++r)e[r][a]/=i;for(r=a+1;r<h;++r){for(u=e[r],t=a+1;t<f;++t)u[t]-=u[a]*s[t],u[++t]-=u[a]*s[t];t===f&&(u[t]-=u[a]*s[t])}}return{LU:e,P:d}},numeric.LUsolve=function(e,n){var r,t,a,o,i,s=e.LU,c=s.length,u=numeric.clone(n),l=e.P;for(r=c-1;-1!==r;--r)u[r]=n[r];for(r=0;r<c;++r)for(a=l[r],l[r]!==r&&(i=u[r],u[r]=u[a],u[a]=i),o=s[r],t=0;t<r;++t)u[r]-=u[t]*o[t];for(r=c-1;r>=0;--r){for(o=s[r],t=r+1;t<c;++t)u[r]-=u[t]*o[t];u[r]/=o[r]}return u},numeric.solve=function(e,n,r){return numeric.LUsolve(numeric.LU(e,r),n)},numeric.echelonize=function(e){var n,r,t,a,o,i,s,c,u=numeric.dim(e),l=u[0],m=u[1],h=numeric.identity(l),f=Array(l),d=Math.abs,p=numeric.diveq;for(e=numeric.clone(e),n=0;n<l;++n){for(t=0,o=e[n],i=h[n],r=1;r<m;++r)d(o[t])<d(o[r])&&(t=r);for(f[n]=t,p(i,o[t]),p(o,o[t]),r=0;r<l;++r)if(r!==n){for(c=(s=e[r])[t],a=m-1;-1!==a;--a)s[a]-=o[a]*c;for(s=h[r],a=l-1;-1!==a;--a)s[a]-=i[a]*c}}return{I:h,A:e,P:f}},numeric.__solveLP=function(e,n,r,t,a,o,i){var s,c,u,l,m=numeric.sum,h=(numeric.log,numeric.mul),f=numeric.sub,d=numeric.dot,p=numeric.div,M=numeric.add,g=e.length,y=r.length,v=!1,b=1,x=(numeric.transpose(n),numeric.svd,numeric.transpose),w=(numeric.leq,Math.sqrt),T=Math.abs,A=(numeric.muleq,numeric.norminf,numeric.any,Math.min),_=numeric.all,S=numeric.gt,N=Array(g),D=Array(y),I=(numeric.rep([y],1),numeric.solve),E=f(r,d(n,o)),R=d(e,e);for(u=0;u<a;++u){var C,O;for(C=y-1;-1!==C;--C)D[C]=p(n[C],E[C]);var P=x(D);for(C=g-1;-1!==C;--C)N[C]=m(P[C]);b=.25*T(R/d(e,N));var L=100*w(R/d(N,N));for((!isFinite(b)||b>L)&&(b=L),l=M(e,h(b,N)),c=d(P,D),C=g-1;-1!==C;--C)c[C][C]+=1;O=I(c,p(l,b),!0);var z=p(E,d(n,O)),j=1;for(C=y-1;-1!==C;--C)z[C]<0&&(j=A(j,-.999*z[C]));if(s=f(o,h(O,j)),!_(S(E=f(r,d(n,s)),0)))return{solution:o,message:"",iterations:u};if(o=s,b<t)return{solution:s,message:"",iterations:u};if(i){var k=d(e,l),U=d(n,l);for(v=!0,C=y-1;-1!==C;--C)if(k*U[C]<0){v=!1;break}}else v=!(o[g-1]>=0);if(v)return{solution:s,message:"Unbounded",iterations:u}}return{solution:o,message:"maximum iteration count exceeded",iterations:u}},numeric._solveLP=function(e,n,r,t,a){var o=e.length,i=r.length,s=(numeric.sum,numeric.log,numeric.mul,numeric.sub),c=numeric.dot,u=(numeric.div,numeric.add,numeric.rep([o],0).concat([1])),l=numeric.rep([i,1],-1),m=numeric.blockMatrix([[n,l]]),h=r,f=numeric.rep([o],0).concat(Math.max(0,numeric.sup(numeric.neg(r)))+1),d=numeric.__solveLP(u,m,h,t,a,f,!1),p=numeric.clone(d.solution);if(p.length=o,numeric.inf(s(r,c(n,p)))<0)return{solution:NaN,message:"Infeasible",iterations:d.iterations};var M=numeric.__solveLP(e,n,r,t,a-d.iterations,p,!0);return M.iterations+=d.iterations,M},numeric.solveLP=function(e,n,r,t,a,o,i){if(void 0===i&&(i=1e3),void 0===o&&(o=numeric.epsilon),void 0===t)return numeric._solveLP(e,n,r,o,i);var s,c=t.length,u=t[0].length,l=n.length,m=numeric.echelonize(t),h=numeric.rep([u],0),f=m.P,d=[];for(s=f.length-1;-1!==s;--s)h[f[s]]=1;for(s=u-1;-1!==s;--s)0===h[s]&&d.push(s);var p=numeric.getRange,M=numeric.linspace(0,c-1),g=numeric.linspace(0,l-1),y=p(t,M,d),v=p(n,g,f),b=p(n,g,d),x=numeric.dot,w=numeric.sub,T=x(v,m.I),A=w(b,x(T,y)),_=w(r,x(T,a)),S=Array(f.length),N=Array(d.length);for(s=f.length-1;-1!==s;--s)S[s]=e[f[s]];for(s=d.length-1;-1!==s;--s)N[s]=e[d[s]];var D=w(N,x(S,x(m.I,y))),I=numeric._solveLP(D,A,_,o,i),E=I.solution;if(E!=E)return I;var R=x(m.I,w(a,x(y,E))),C=Array(e.length);for(s=f.length-1;-1!==s;--s)C[f[s]]=R[s];for(s=d.length-1;-1!==s;--s)C[d[s]]=E[s];return{solution:C,message:I.message,iterations:I.iterations}},numeric.MPStoLP=function(e){e instanceof String&&e.split("\n");var n,r,t,a,o=0,i=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],s=e.length,c=0,u={},l=[],m=0,h={},f=0,d=[],p=[],M=[];function g(r){throw new Error("MPStoLP: "+r+"\nLine "+n+": "+e[n]+"\nCurrent state: "+i[o]+"\n")}for(n=0;n<s;++n){var y=(t=e[n]).match(/\S*/g),v=[];for(r=0;r<y.length;++r)""!==y[r]&&v.push(y[r]);if(0!==v.length){for(r=0;r<i.length&&t.substr(0,i[r].length)!==i[r];++r);if(r<i.length){if(o=r,1===r&&(a=v[1]),6===r)return{name:a,c:d,A:numeric.transpose(p),b:M,rows:u,vars:h}}else switch(o){case 0:case 1:g("Unexpected line");case 2:switch(v[0]){case"N":0===c?c=v[1]:g("Two or more N rows");break;case"L":u[v[1]]=m,l[m]=1,M[m]=0,++m;break;case"G":u[v[1]]=m,l[m]=-1,M[m]=0,++m;break;case"E":u[v[1]]=m,l[m]=0,M[m]=0,++m;break;default:g("Parse error "+numeric.prettyPrint(v))}break;case 3:h.hasOwnProperty(v[0])||(h[v[0]]=f,d[f]=0,p[f]=numeric.rep([m],0),++f);var b=h[v[0]];for(r=1;r<v.length;r+=2)if(v[r]!==c){var x=u[v[r]];p[b][x]=(l[x]<0?-1:1)*parseFloat(v[r+1])}else d[b]=parseFloat(v[r+1]);break;case 4:for(r=1;r<v.length;r+=2)M[u[v[r]]]=(l[u[v[r]]]<0?-1:1)*parseFloat(v[r+1]);break;case 5:break;case 6:g("Internal error")}}}g("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,n,r,t,a,o,i){function s(e){var n,t,a=this,o=e.length,i=0,s=a.i=a.j=a.m=0;for(a.S=[],a.c=[],o||(e=[o++]);i<r;)a.S[i]=i++;for(i=0;i<r;i++)s=l(s+(n=a.S[i])+e[i%o]),t=a.S[s],a.S[i]=t,a.S[s]=n;a.g=function(e){var n=a.S,t=l(a.i+1),o=n[t],i=l(a.j+o),s=n[i];n[t]=s,n[i]=o;for(var c=n[l(o+s)];--e;)t=l(t+1),s=n[i=l(i+(o=n[t]))],n[t]=s,n[i]=o,c=c*r+n[l(o+s)];return a.i=t,a.j=i,c},a.g(r)}function c(e,n,r,t,a){if(r=[],a=typeof e,n&&"object"==a)for(t in e)if(t.indexOf("S")<5)try{r.push(c(e[t],n-1))}catch(e){}return r.length?r:e+("string"!=a?"\0":"")}function u(e,n,r,t){for(e+="",r=0,t=0;t<e.length;t++)n[l(t)]=l((r^=19*n[l(t)])+e.charCodeAt(t));for(t in e="",n)e+=String.fromCharCode(n[t]);return e}function l(e){return 255&e}n.seedrandom=function(t,l){var m,h=[];return t=u(c(l?[t,e]:arguments.length?t:[(new Date).getTime(),e,window],3),h),u((m=new s(h)).S,e),n.random=function(){for(var e=m.g(6),n=i,t=0;e<a;)e=(e+t)*r,n*=r,t=m.g(1);for(;e>=o;)e/=2,n/=2,t>>>=1;return(e+t)/n},t},i=n.pow(r,6),a=n.pow(2,a),o=2*a,u(n.random(),e)}([],numeric.seedrandom,256,0,52),function(e){function n(e){if("object"!=typeof e)return e;var r,t=[],a=e.length;for(r=0;r<a;r++)t[r+1]=n(e[r]);return t}function r(e){if("object"!=typeof e)return e;var n,t=[],a=e.length;for(n=1;n<a;n++)t[n-1]=r(e[n]);return t}e.solveQP=function(e,t,a,o,i,s){e=n(e),t=n(t),a=n(a);var c,u,l,m,h,f=[],d=[],p=[],M=[],g=[];if(i=i||0,s=s?n(s):[void 0,0],o=o?n(o):[],u=e.length-1,l=a[1].length-1,!o)for(c=1;c<=l;c+=1)o[c]=0;for(c=1;c<=l;c+=1)d[c]=0;for(m=Math.min(u,l),c=1;c<=u;c+=1)p[c]=0;for(f[1]=0,c=1;c<=2*u+m*(m+5)/2+2*l+1;c+=1)M[c]=0;for(c=1;c<=2;c+=1)g[c]=0;return function(e,n,r,t,a,o,i,s,c,u,l,m,h,f,d,p){var M,g,y,v,b,x,w,T,A,_,S,N,D,I,E,R,C,O,P,L,z,j,k,U,q,F,Y;D=Math.min(t,u),y=2*t+D*(D+5)/2+2*u+1,U=1e-60;do{q=1+.1*(U+=U),F=1+.2*U}while(q<=1||F<=1);for(M=1;M<=t;M+=1)d[M]=n[M];for(M=t+1;M<=y;M+=1)d[M]=0;for(M=1;M<=u;M+=1)m[M]=0;if(b=[],0===p[1]){if(function(e,n,r,t){var a,o,i,s,c,u;for(o=1;o<=r;o+=1){if(t[1]=o,u=0,(i=o-1)<1){if((u=e[o][o]-u)<=0)break;e[o][o]=Math.sqrt(u)}else{for(s=1;s<=i;s+=1){for(c=e[s][o],a=1;a<s;a+=1)c-=e[a][o]*e[a][s];c/=e[s][s],e[s][o]=c,u+=c*c}if((u=e[o][o]-u)<=0)break;e[o][o]=Math.sqrt(u)}t[1]=0}}(e,0,t,b),0!==b[1])return void(p[1]=2);!function(e,n,r,t){var a,o,i,s;for(o=1;o<=r;o+=1){for(s=0,a=1;a<o;a+=1)s+=e[a][o]*t[a];t[o]=(t[o]-s)/e[o][o]}for(i=1;i<=r;i+=1)for(t[o=r+1-i]=t[o]/e[o][o],s=-t[o],a=1;a<o;a+=1)t[a]=t[a]+s*e[a][o]}(e,0,t,n),function(e,n,r){var t,a,o,i,s;for(o=1;o<=r;o+=1){for(e[o][o]=1/e[o][o],s=-e[o][o],t=1;t<o;t+=1)e[t][o]=s*e[t][o];if(r<(i=o+1))break;for(a=i;a<=r;a+=1)for(s=e[o][a],e[o][a]=0,t=1;t<=o;t+=1)e[t][a]=e[t][a]+s*e[t][o]}}(e,0,t)}else{for(g=1;g<=t;g+=1)for(a[g]=0,M=1;M<=g;M+=1)a[g]=a[g]+e[M][g]*n[M];for(g=1;g<=t;g+=1)for(n[g]=0,M=g;M<=t;M+=1)n[g]=n[g]+e[g][M]*a[M]}for(o[1]=0,g=1;g<=t;g+=1)for(a[g]=n[g],o[1]=o[1]+d[g]*a[g],d[g]=0,M=g+1;M<=t;M+=1)e[M][g]=0;for(o[1]=-o[1]/2,p[1]=0,I=(_=(A=(S=(T=(w=t)+t)+D)+D+1)+D*(D+1)/2)+u,M=1;M<=u;M+=1){for(R=0,g=1;g<=t;g+=1)R+=i[g][M]*i[g][M];d[I+M]=Math.sqrt(R)}function G(){for(f[1]=f[1]+1,y=_,M=1;M<=u;M+=1){for(y+=1,R=-s[M],g=1;g<=t;g+=1)R+=i[g][M]*a[g];if(Math.abs(R)<U&&(R=0),M>l)d[y]=R;else if(d[y]=-Math.abs(R),R>0){for(g=1;g<=t;g+=1)i[g][M]=-i[g][M];s[M]=-s[M]}}for(M=1;M<=h;M+=1)d[_+m[M]]=0;for(N=0,E=0,M=1;M<=u;M+=1)d[_+M]<E*d[I+M]&&(N=M,E=d[_+M]/d[I+M]);return 0===N?999:0}function J(){for(M=1;M<=t;M+=1){for(R=0,g=1;g<=t;g+=1)R+=e[g][M]*i[g][N];d[M]=R}for(v=w,M=1;M<=t;M+=1)d[v+M]=0;for(g=h+1;g<=t;g+=1)for(M=1;M<=t;M+=1)d[v+M]=d[v+M]+e[M][g]*d[g];for(j=!0,M=h;M>=1;M-=1){for(R=d[M],v=(y=A+M*(M+3)/2)-M,g=M+1;g<=h;g+=1)R-=d[y]*d[T+g],y+=g;if(R/=d[v],d[T+M]=R,m[M]<l)break;if(R<0)break;j=!1,x=M}if(!j)for(C=d[S+x]/d[T+x],M=1;M<=h&&!(m[M]<l)&&!(d[T+M]<0);M+=1)(E=d[S+M]/d[T+M])<C&&(C=E,x=M);for(R=0,M=w+1;M<=w+t;M+=1)R+=d[M]*d[M];if(Math.abs(R)<=U){if(j)return p[1]=1,999;for(M=1;M<=h;M+=1)d[S+M]=d[S+M]-C*d[T+M];return d[S+h+1]=d[S+h+1]+C,700}for(R=0,M=1;M<=t;M+=1)R+=d[w+M]*i[M][N];for(O=-d[_+N]/R,k=!0,j||C<O&&(O=C,k=!1),M=1;M<=t;M+=1)a[M]=a[M]+O*d[w+M],Math.abs(a[M])<U&&(a[M]=0);for(o[1]=o[1]+O*R*(O/2+d[S+h+1]),M=1;M<=h;M+=1)d[S+M]=d[S+M]-O*d[T+M];if(d[S+h+1]=d[S+h+1]+O,!k){for(R=-s[N],g=1;g<=t;g+=1)R+=a[g]*i[g][N];if(N>l)d[_+N]=R;else if(d[_+N]=-Math.abs(R),R>0){for(g=1;g<=t;g+=1)i[g][N]=-i[g][N];s[N]=-s[N]}return 700}for(m[h+=1]=N,y=A+(h-1)*h/2+1,M=1;M<=h-1;M+=1)d[y]=d[M],y+=1;if(h===t)d[y]=d[t];else{for(M=t;M>=h+1&&0!==d[M]&&(P=Math.max(Math.abs(d[M-1]),Math.abs(d[M])),L=Math.min(Math.abs(d[M-1]),Math.abs(d[M])),E=d[M-1]>=0?Math.abs(P*Math.sqrt(1+L*L/(P*P))):-Math.abs(P*Math.sqrt(1+L*L/(P*P))),P=d[M-1]/E,L=d[M]/E,1!==P);M-=1)if(0===P)for(d[M-1]=L*E,g=1;g<=t;g+=1)E=e[g][M-1],e[g][M-1]=e[g][M],e[g][M]=E;else for(d[M-1]=E,z=L/(1+P),g=1;g<=t;g+=1)E=P*e[g][M-1]+L*e[g][M],e[g][M]=z*(e[g][M-1]+E)-e[g][M],e[g][M-1]=E;d[y]=d[h]}return 0}function V(){if(0===d[v=(y=A+x*(x+1)/2+1)+x])return 798;if(P=Math.max(Math.abs(d[v-1]),Math.abs(d[v])),L=Math.min(Math.abs(d[v-1]),Math.abs(d[v])),E=d[v-1]>=0?Math.abs(P*Math.sqrt(1+L*L/(P*P))):-Math.abs(P*Math.sqrt(1+L*L/(P*P))),P=d[v-1]/E,L=d[v]/E,1===P)return 798;if(0===P){for(M=x+1;M<=h;M+=1)E=d[v-1],d[v-1]=d[v],d[v]=E,v+=M;for(M=1;M<=t;M+=1)E=e[M][x],e[M][x]=e[M][x+1],e[M][x+1]=E}else{for(z=L/(1+P),M=x+1;M<=h;M+=1)E=P*d[v-1]+L*d[v],d[v]=z*(d[v-1]+E)-d[v],d[v-1]=E,v+=M;for(M=1;M<=t;M+=1)E=P*e[M][x]+L*e[M][x+1],e[M][x+1]=z*(e[M][x]+E)-e[M][x+1],e[M][x]=E}return 0}function H(){for(v=y-x,M=1;M<=x;M+=1)d[v]=d[y],y+=1,v+=1;return d[S+x]=d[S+x+1],m[x]=m[x+1],(x+=1)<h?797:0}function B(){return d[S+h]=d[S+h+1],d[S+h+1]=0,m[h]=0,h-=1,f[2]=f[2]+1,0}for(h=0,f[1]=0,f[2]=0,Y=0;;){if(999===(Y=G()))return;for(;0!==(Y=J());){if(999===Y)return;if(700===Y)if(x===h)B();else{for(;V(),797===(Y=H()););B()}}}}(e,t,0,u,p,f,a,o,0,l,i,d,0,g,M,s),h="",1===s[1]&&(h="constraints are inconsistent, no solution!"),2===s[1]&&(h="matrix D in quadratic function is not positive definite!"),{solution:r(p),value:r(f),unconstrained_solution:r(t),iterations:r(g),iact:r(d),message:h}}}(numeric),numeric.svd=function(e){var n,r=numeric.epsilon,t=1e-64/r,a=0,o=0,i=0,s=0,c=0,u=numeric.clone(e),l=u.length,m=u[0].length;if(l<m)throw"Need more rows than columns";var h=new Array(m),f=new Array(m);for(o=0;o<m;o++)h[o]=f[o]=0;var d=numeric.rep([m,m],0);function p(e,n){return(e=Math.abs(e))>(n=Math.abs(n))?e*Math.sqrt(1+n*n/e/e):0==n?e:n*Math.sqrt(1+e*e/n/n)}var M=0,g=0,y=0,v=0,b=0,x=0,w=0;for(o=0;o<m;o++){for(h[o]=g,w=0,c=o+1,i=o;i<l;i++)w+=u[i][o]*u[i][o];if(w<=t)g=0;else for(M=u[o][o],g=Math.sqrt(w),M>=0&&(g=-g),y=M*g-w,u[o][o]=M-g,i=c;i<m;i++){for(w=0,s=o;s<l;s++)w+=u[s][o]*u[s][i];for(M=w/y,s=o;s<l;s++)u[s][i]+=M*u[s][o]}for(f[o]=g,w=0,i=c;i<m;i++)w+=u[o][i]*u[o][i];if(w<=t)g=0;else{for(M=u[o][o+1],g=Math.sqrt(w),M>=0&&(g=-g),y=M*g-w,u[o][o+1]=M-g,i=c;i<m;i++)h[i]=u[o][i]/y;for(i=c;i<l;i++){for(w=0,s=c;s<m;s++)w+=u[i][s]*u[o][s];for(s=c;s<m;s++)u[i][s]+=w*h[s]}}(b=Math.abs(f[o])+Math.abs(h[o]))>v&&(v=b)}for(o=m-1;-1!=o;o+=-1){if(0!=g){for(y=g*u[o][o+1],i=c;i<m;i++)d[i][o]=u[o][i]/y;for(i=c;i<m;i++){for(w=0,s=c;s<m;s++)w+=u[o][s]*d[s][i];for(s=c;s<m;s++)d[s][i]+=w*d[s][o]}}for(i=c;i<m;i++)d[o][i]=0,d[i][o]=0;d[o][o]=1,g=h[o],c=o}for(o=m-1;-1!=o;o+=-1){for(c=o+1,g=f[o],i=c;i<m;i++)u[o][i]=0;if(0!=g){for(y=u[o][o]*g,i=c;i<m;i++){for(w=0,s=c;s<l;s++)w+=u[s][o]*u[s][i];for(M=w/y,s=o;s<l;s++)u[s][i]+=M*u[s][o]}for(i=o;i<l;i++)u[i][o]=u[i][o]/g}else for(i=o;i<l;i++)u[i][o]=0;u[o][o]+=1}for(r*=v,s=m-1;-1!=s;s+=-1)for(var T=0;T<50;T++){var A=!1;for(c=s;-1!=c;c+=-1){if(Math.abs(h[c])<=r){A=!0;break}if(Math.abs(f[c-1])<=r)break}if(!A){a=0,w=1;var _=c-1;for(o=c;o<s+1&&(M=w*h[o],h[o]=a*h[o],!(Math.abs(M)<=r));o++)for(y=p(M,g=f[o]),f[o]=y,a=g/y,w=-M/y,i=0;i<l;i++)b=u[i][_],x=u[i][o],u[i][_]=b*a+x*w,u[i][o]=-b*w+x*a}if(x=f[s],c==s){if(x<0)for(f[s]=-x,i=0;i<m;i++)d[i][s]=-d[i][s];break}if(T>=49)throw"Error: no convergence.";for(v=f[c],g=p(M=(((b=f[s-1])-x)*(b+x)+((g=h[s-1])-(y=h[s]))*(g+y))/(2*y*b),1),M=M<0?((v-x)*(v+x)+y*(b/(M-g)-y))/v:((v-x)*(v+x)+y*(b/(M+g)-y))/v,a=1,w=1,o=c+1;o<s+1;o++){for(g=h[o],b=f[o],y=w*g,g*=a,x=p(M,y),h[o-1]=x,M=v*(a=M/x)+g*(w=y/x),g=-v*w+g*a,y=b*w,b*=a,i=0;i<m;i++)v=d[i][o-1],x=d[i][o],d[i][o-1]=v*a+x*w,d[i][o]=-v*w+x*a;for(x=p(M,y),f[o-1]=x,M=(a=M/x)*g+(w=y/x)*b,v=-w*g+a*b,i=0;i<l;i++)b=u[i][o-1],x=u[i][o],u[i][o-1]=b*a+x*w,u[i][o]=-b*w+x*a}h[c]=0,h[s]=M,f[s]=v}for(o=0;o<f.length;o++)f[o]<r&&(f[o]=0);for(o=0;o<m;o++)for(i=o-1;i>=0;i--)if(f[i]<f[o]){for(a=f[i],f[i]=f[o],f[o]=a,s=0;s<u.length;s++)n=u[s][o],u[s][o]=u[s][i],u[s][i]=n;for(s=0;s<d.length;s++)n=d[s][o],d[s][o]=d[s][i],d[s][i]=n;o=i}return{U:u,S:f,V:d}}},991:function(e){e.exports=(()=>{"use strict";var e={636:(e,n,r)=>{r.r(n),r.d(n,{DetailedSat:()=>D,Sat:()=>S,Sensor:()=>E,Sgp4:()=>h,SpaceObjectType:()=>a,Star:()=>C,Tle:()=>x,Transforms:()=>f,Utils:()=>y});var t={};r.r(t),r.d(t,{SpaceObjectType:()=>a});var a,o=Math.PI,i=2*o,s=o/180,c=2/3,u=15e-13,l=864e5,m=1.15741e-8,h=function(){function e(){}return e.dpper=function(e,n){var r=e.e3,t=e.ee2,a=e.peo,s=e.pgho,c=e.pho,u=e.PInco,l=e.plo,m=e.se2,h=e.se3,f=e.sgh2,d=e.sgh3,p=e.sgh4,M=e.sh2,g=e.sh3,y=e.si2,v=e.si3,b=e.sl2,x=e.sl3,w=e.sl4,T=e.t,A=e.xgh2,_=e.xgh3,S=e.xgh4,N=e.xh2,D=e.xh3,I=e.xi2,E=e.xi3,R=e.xl2,C=e.xl3,O=e.xl4,P=e.zmol,L=e.zmos,z=n.ep,j=n.inclp,k=n.nodep,U=n.argpp,q=n.mp,F=n.opsmode,Y=void 0===F?"i":F,G=n.init,J=L+119459e-10*T;"y"===G&&(J=L);var V=J+.0335*Math.sin(J),H=Math.sin(V),B=.5*H*H-.25,X=-.5*H*Math.cos(V),Q=m*B+h*X,Z=y*B+v*X,W=b*B+x*X+w*H,K=f*B+d*X+p*H,$=M*B+g*X;J=P+.00015835218*T,"y"===G&&(J=P),V=J+.1098*Math.sin(J);var ee=Q+(t*(B=.5*(H=Math.sin(V))*H-.25)+r*(X=-.5*H*Math.cos(V))),ne=Z+(I*B+E*X),re=W+(R*B+C*X+O*H),te=K+(A*B+_*X+S*H),ae=$+(N*B+D*X);if("n"===G){re-=l,te-=s,ae-=c,j+=ne-=u,z+=ee-=a;var oe=Math.sin(j),ie=Math.cos(j);if(j>=.2)U+=te-=ie*(ae/=oe),k+=ae,q+=re;else{var se=Math.sin(k),ce=Math.cos(k),ue=oe*se,le=oe*ce;ue+=ae*ce+ne*ie*se,le+=-ae*se+ne*ie*ce,(k%=i)<0&&"a"===Y&&(k+=i);var me=q+U+ie*k;me+=re+te-ne*k*oe;var he=k;(k=Math.atan2(ue,le))<0&&"a"===Y&&(k+=i),Math.abs(he-k)>o&&(k<he?k+=i:k-=i),U=me-(q+=re)-ie*k}}return{ep:z,inclp:j,nodep:k,argpp:U,mp:q}},e.dscom=function(e){var n,r,t,a,o,i,s,c,u,l,m,h,f,d,p,M,g,y,v,b,x,w,T,A,_,S,N,D,I,E,R,C,O,P,L,z,j,k,U=e.epoch,q=e.ep,F=e.argpp,Y=e.tc,G=e.inclp,J=e.nodep,V=e.np,H=.01675,B=.0549,X=2*Math.PI,Q=V,Z=q,W=Math.sin(J),K=Math.cos(J),$=Math.sin(F),ee=Math.cos(F),ne=Math.sin(G),re=Math.cos(G),te=Z*Z,ae=1-te,oe=Math.sqrt(ae),ie=U+18261.5+Y/1440,se=(4.523602-.00092422029*ie)%X,ce=Math.sin(se),ue=Math.cos(se),le=.91375164-.03568096*ue,me=Math.sqrt(1-le*le),he=.089683511*ce/me,fe=Math.sqrt(1-he*he),de=5.8351514+.001944368*ie,pe=.39785416*ce/me,Me=fe*ue+.91744867*he*ce;pe=Math.atan2(pe,Me),pe+=de-se;for(var ge=Math.cos(pe),ye=Math.sin(pe),ve=.1945905,be=-.98088458,xe=.91744867,we=.39785416,Te=K,Ae=W,_e=29864797e-13,Se=1/Q,Ne=1;Ne<=2;Ne++){var De=ve*Te+be*xe*Ae,Ie=-be*Te+ve*xe*Ae,Ee=-ve*Ae+be*xe*Te,Re=be*we,Ce=be*Ae+ve*xe*Te,Oe=ve*we,Pe=re*Ee+ne*Re,Le=re*Ce+ne*Oe,ze=-ne*Ee+re*Re,je=-ne*Ce+re*Oe,ke=De*ee+Pe*$,Ue=Ie*ee+Le*$,qe=-De*$+Pe*ee,Fe=-Ie*$+Le*ee,Ye=ze*$,Ge=je*$,Je=ze*ee,Ve=je*ee;D=-6*De*ze+te*(-24*ke*Je-6*qe*Ye),I=-6*(De*je+Ie*ze)+te*(-24*(Ue*Je+ke*Ve)+-6*(qe*Ge+Fe*Ye)),E=-6*Ie*je+te*(-24*Ue*Ve-6*Fe*Ge),C=6*Pe*ze+te*(24*ke*Ye-6*qe*Je),O=6*(Le*ze+Pe*je)+te*(24*(Ue*Ye+ke*Ge)-6*(Fe*Je+qe*Ve)),P=6*Le*je+te*(24*Ue*Ge-6*Fe*Ve),N=(N=3*(De*De+Pe*Pe)+(z=12*ke*ke-3*qe*qe)*te)+N+ae*z,R=(R=6*(De*Ie+Pe*Le)+(j=24*ke*Ue-6*qe*Fe)*te)+R+ae*j,L=(L=3*(Ie*Ie+Le*Le)+(k=12*Ue*Ue-3*Fe*Fe)*te)+L+ae*k,r=-.5*(t=_e*Se)/oe,n=-15*Z*(a=t*oe),o=ke*qe+Ue*Fe,i=Ue*qe+ke*Fe,s=Ue*Fe-ke*qe,1===Ne&&(c=n,u=r,l=t,m=a,h=o,f=i,d=s,p=N,v=R,T=L,M=D,g=I,y=E,b=C,x=O,w=P,A=z,_=j,S=k,ve=ge,be=ye,xe=le,we=me,Te=fe*K+he*W,Ae=W*fe-K*he,_e=4.7968065e-7)}return{snodm:W,cnodm:K,sinim:ne,cosim:re,sinomm:$,cosomm:ee,day:ie,e3:2*n*s,ee2:2*n*i,em:Z,emsq:te,gam:de,peo:0,pgho:0,pho:0,PInco:0,plo:0,rtemsq:oe,se2:2*c*f,se3:2*c*d,sgh2:2*m*_,sgh3:2*m*(S-A),sgh4:-18*m*H,sh2:-2*u*x,sh3:-2*u*(w-b),si2:2*u*g,si3:2*u*(y-M),sl2:-2*l*v,sl3:-2*l*(T-p),sl4:-2*l*(-21-9*te)*H,s1:n,s2:r,s3:t,s4:a,s5:o,s6:i,s7:s,ss1:c,ss2:u,ss3:l,ss4:m,ss5:h,ss6:f,ss7:d,sz1:p,sz2:v,sz3:T,sz11:M,sz12:g,sz13:y,sz21:b,sz22:x,sz23:w,sz31:A,sz32:_,sz33:S,xgh2:2*a*j,xgh3:2*a*(k-z),xgh4:-18*a*B,xh2:-2*r*O,xh3:-2*r*(P-C),xi2:2*r*I,xi3:2*r*(E-D),xl2:-2*t*R,xl3:-2*t*(L-N),xl4:-2*t*(-21-9*te)*B,nm:Q,z1:N,z2:R,z3:L,z11:D,z12:I,z13:E,z21:C,z22:O,z23:P,z31:z,z32:j,z33:k,zmol:(.2299715*ie-de+4.7199672)%X,zmos:(6.2565837+.017201977*ie)%X}},e.dsinit=function(e){var n=e.xke,r=e.cosim,t=e.argpo,a=e.s1,s=e.s2,c=e.s3,u=e.s4,l=e.s5,m=e.sinim,h=e.ss1,f=e.ss2,d=e.ss3,p=e.ss4,M=e.ss5,g=e.sz1,y=e.sz3,v=e.sz11,b=e.sz13,x=e.sz21,w=e.sz23,T=e.sz31,A=e.sz33,_=e.t,S=e.tc,N=e.gsto,D=e.mo,I=e.mdot,E=e.no,R=e.nodeo,C=e.nodedot,O=e.xPIdot,P=e.z1,L=e.z3,z=e.z11,j=e.z13,k=e.z21,U=e.z23,q=e.z31,F=e.z33,Y=e.ecco,G=e.eccsq,J=e.emsq,V=e.em,H=e.argpm,B=e.inclm,X=e.mm,Q=e.nm,Z=e.nodem,W=e.irez,K=e.atime,$=e.d2201,ee=e.d2211,ne=e.d3210,re=e.d3222,te=e.d4410,ae=e.d4422,oe=e.d5220,ie=e.d5232,se=e.d5421,ce=e.d5433,ue=e.dedt,le=e.didt,me=e.dmdt,he=e.dnodt,fe=e.domdt,de=e.del1,pe=e.del2,Me=e.del3,ge=e.xfact,ye=e.xlamo,ve=e.xli,be=e.xni,xe=.0043752690880113,we=.00015835218,Te=119459e-10;W=0,Q<.0052359877&&Q>.0034906585&&(W=1),Q>=.00826&&Q<=.00924&&V>=.5&&(W=2);var Ae=-Te*f*(x+w);(B<.052359877||B>o-.052359877)&&(Ae=0),0!==m&&(Ae/=m);var _e=-we*s*(k+U);(B<.052359877||B>o-.052359877)&&(_e=0),fe=p*Te*(T+A-6)-r*Ae+u*we*(q+F-6),he=Ae,0!==m&&(fe-=r/m*_e,he+=_e/m);var Se=(N+S*xe)%i;if(V+=(ue=h*Te*M+a*we*l)*_,B+=(le=f*Te*(v+b)+s*we*(z+j))*_,H+=fe*_,Z+=he*_,X+=(me=-Te*d*(g+y-14-6*J)-we*c*(P+L-14-6*J))*_,0!==W){var Ne=Math.pow(Q/n,2/3);if(2===W){var De=r*r,Ie=V,Ee=J,Re=(V=Y)*(J=G),Ce=void 0,Oe=void 0,Pe=void 0,Le=void 0,ze=void 0,je=void 0,ke=void 0,Ue=void 0,qe=void 0;V<=.65?(Ce=3.616-13.247*V+16.29*J,Oe=117.39*V-19.302-228.419*J+156.591*Re,Pe=109.7927*V-18.9068-214.6334*J+146.5816*Re,Le=242.694*V-41.122-471.094*J+313.953*Re,ze=841.88*V-146.407-1629.014*J+1083.435*Re,je=3017.977*V-532.114-5740.032*J+3708.276*Re):(Ce=331.819*V-72.099-508.738*J+266.724*Re,Oe=1582.851*V-346.844-2415.925*J+1246.113*Re,Pe=1554.908*V-342.585-2366.899*J+1215.972*Re,Le=4758.686*V-1052.797-7193.992*J+3651.957*Re,ze=16178.11*V-3581.69-24462.77*J+12422.52*Re,je=V>.715?29936.92*V-5149.66-54087.36*J+31324.56*Re:1464.74-4664.75*V+3763.64*J),V<.7?(qe=4988.61*V-919.2277-9064.77*J+5542.21*Re,ke=4568.6173*V-822.71072-8491.4146*J+5337.524*Re,Ue=4690.25*V-853.666-8624.77*J+5341.4*Re):(qe=161616.52*V-37995.78-229838.2*J+109377.94*Re,ke=218913.95*V-51752.104-309468.16*J+146349.42*Re,Ue=170470.89*V-40023.88-242699.48*J+115605.82*Re);var Fe=m*m,Ye=Q*Q*3*(Ne*Ne),Ge=17891679e-13*Ye;$=Ge*(Je=.75*(1+2*r+De))*(-.306-.44*(V-.64)),ee=Ge*(1.5*Fe)*Ce,ne=(Ge=3.7393792e-7*(Ye*=Ne))*(1.875*m*(1-2*r-3*De))*Oe,re=Ge*(-1.875*m*(1+2*r-3*De))*Pe,te=(Ge=2*(Ye*=Ne)*7.3636953e-9)*(35*Fe*Je)*Le,ae=Ge*(39.375*Fe*Fe)*ze,oe=(Ge=1.1428639e-7*(Ye*=Ne))*(9.84375*m*(Fe*(1-2*r-5*De)+.33333333*(4*r-2+6*De)))*je,ie=Ge*(m*(4.92187512*Fe*(-2-4*r+10*De)+6.56250012*(1+2*r-3*De)))*Ue,se=(Ge=2*Ye*2.1765803e-9)*(29.53125*m*(2-8*r+De*(8*r-12+10*De)))*ke,ce=Ge*(29.53125*m*(-2-8*r+De*(12+8*r-10*De)))*qe,ye=(D+R+R-(Se+Se))%i,ge=I+me+2*(C+he-xe)-E,V=Ie,J=Ee}if(1===W){var Je,Ve=1+r;pe=2*(de=3*Q*Q*Ne*Ne)*(Je=.75*(1+r)*(1+r))*(1+J*(.8125*J-2.5))*17891679e-13,Me=3*de*(Ve*=1.875*Ve*Ve)*(1+J*(6.60937*J-6))*2.2123015e-7*Ne,de=de*(.9375*m*m*(1+3*r)-.75*(1+r))*(Oe=1+2*J)*21460748e-13*Ne,ye=(D+R+t-Se)%i,ge=I+O+me+fe+he-(E+xe)}ve=ye,be=E,K=0,Q=E+0}return{em:V,argpm:H,inclm:B,mm:X,nm:Q,nodem:Z,irez:W,atime:K,d2201:$,d2211:ee,d3210:ne,d3222:re,d4410:te,d4422:ae,d5220:oe,d5232:ie,d5421:se,d5433:ce,dedt:ue,didt:le,dmdt:me,dndt:0,dnodt:he,domdt:fe,del1:de,del2:pe,del3:Me,xfact:ge,xlamo:ye,xli:ve,xni:be}},e.dspace=function(e,n,r,t,a,o,s,c,u,l,m,h,f,d,p,M,g,y,v,b,x,w,T,A,_,S,N,D,I,E,R,C,O,P,L,z){var j=.13130908,k=2.8843198,U=.37448087,q=5.7686396,F=.95240898,Y=1.8014998,G=1.050833,J=4.4108898,V=259200,H=0,B=(A+.0043752690880113*T)%i;if(I+=h*w,R+=M*w,E+=v*w,L+=y*w,O+=g*w,0!==e){var X;(0===D||w*D<=0||Math.abs(w)<Math.abs(D))&&(D=0,P=N,C=S),X=w>0?720:-720;for(var Q=void 0,Z=void 0,W=void 0,K=void 0,$=void 0,ee=void 0,ne=void 0,re=381;381===re;)2!==e?(ee=f*Math.sin(C-j)+d*Math.sin(2*(C-k))+p*Math.sin(3*(C-U)),K=P+_,$=f*Math.cos(C-j)+2*d*Math.cos(2*(C-k))+3*p*Math.cos(3*(C-U)),$*=K):(W=(ne=b+x*D)+ne,Z=C+C,ee=n*Math.sin(W+C-q)+r*Math.sin(C-q)+t*Math.sin(ne+C-F)+a*Math.sin(-ne+C-F)+o*Math.sin(W+Z-Y)+s*Math.sin(Z-Y)+c*Math.sin(ne+C-G)+u*Math.sin(-ne+C-G)+l*Math.sin(ne+Z-J)+m*Math.sin(-ne+Z-J),K=P+_,$=n*Math.cos(W+C-q)+r*Math.cos(C-q)+t*Math.cos(ne+C-F)+a*Math.cos(-ne+C-F)+c*Math.cos(ne+C-G)+u*Math.cos(-ne+C-G)+2*(o*Math.cos(W+Z-Y)+s*Math.cos(Z-Y)+l*Math.cos(ne+Z-J)+m*Math.cos(-ne+Z-J)),$*=K),Math.abs(w-D)>=720?re=381:(Q=w-D,re=0),381===re&&(C+=K*X+ee*V,P+=ee*X+$*V,D+=X);z=P+ee*Q+$*Q*Q*.5;var te=C+K*Q+ee*Q*Q*.5;1!==e?(O=te-2*L+2*B,H=z-N):(O=te-L-E+B,H=z-N),z=N+H}return[I,E,R,O,L,z]},e.initl=function(n){var r=n.opsmode,t=n.ecco,a=n.epoch,o=n.inclo,i=n.xke,s=n.j2,c=n.no,u=2*Math.PI,l=2/3,m=t*t,h=1-m,f=Math.sqrt(h),d=Math.cos(o),p=d*d,M=Math.pow(i/c,l),g=.75*s*(3*p-1)/(f*h),y=g/(M*M),v=M*(1-y*y-y*(1/3+134*y*y/81));c/=1+(y=g/(v*v));var b,x=Math.pow(i/c,l),w=Math.sin(o),T=x*h,A=1-5*p,_=-A-p-p,S=1/x,N=T*T,D=x*(1-t);if("a"===r){var I=a-7305,E=Math.floor(I+1e-8),R=.017202791694070362;(b=(1.7321343856509375+R*E+(R+u)*(I-E)+I*I*5075514194322695e-30)%u)<0&&(b+=u)}else b=e.gstime(a+2433281.5);return{no:c,method:"n",ainv:S,ao:x,con41:_,con42:A,cosio:d,cosio2:p,eccsq:m,omeosq:h,posq:N,rp:D,rteosq:f,sinio:w,gsto:b}},e.sgp4init=function(n,r){var t=r.whichconst,a=void 0===t?"wgs72":t,o=r.opsmode,s=void 0===o?"i":o,l=r.satn,m=void 0===l?n.satnum:l,h=r.epoch,f=r.xbstar,d=r.xecco,p=r.xargpo,M=r.xinclo,g=r.xndot,y=r.xnddot,v=r.xmo,b=r.xno,x=r.xnodeo;n.isimp=0,n.method="n",n.aycof=0,n.con41=0,n.cc1=0,n.cc4=0,n.cc5=0,n.d2=0,n.d3=0,n.d4=0,n.delmo=0,n.eta=0,n.argpdot=0,n.omgcof=0,n.sinmao=0,n.t=0,n.t2cof=0,n.t3cof=0,n.t4cof=0,n.t5cof=0,n.x1mth2=0,n.x7thm1=0,n.mdot=0,n.nodedot=0,n.xlcof=0,n.xmcof=0,n.nodecf=0,n.irez=0,n.d2201=0,n.d2211=0,n.d3210=0,n.d3222=0,n.d4410=0,n.d4422=0,n.d5220=0,n.d5232=0,n.d5421=0,n.d5433=0,n.dedt=0,n.del1=0,n.del2=0,n.del3=0,n.didt=0,n.dmdt=0,n.dnodt=0,n.domdt=0,n.e3=0,n.ee2=0,n.peo=0,n.pgho=0,n.pho=0,n.PInco=0,n.plo=0,n.se2=0,n.se3=0,n.sgh2=0,n.sgh3=0,n.sgh4=0,n.sh2=0,n.sh3=0,n.si2=0,n.si3=0,n.sl2=0,n.sl3=0,n.sl4=0,n.gsto=0,n.xfact=0,n.xgh2=0,n.xgh3=0,n.xgh4=0,n.xh2=0,n.xh3=0,n.xi2=0,n.xi3=0,n.xl2=0,n.xl3=0,n.xl4=0,n.xlamo=0,n.zmol=0,n.zmos=0,n.atime=0,n.xli=0,n.xni=0;var w=e.getgravconst(a);n.tumin=w.tumin,n.mus=w.mus,n.radiusearthkm=w.radiusearthkm,n.xke=w.xke,n.j2=w.j2,n.j3=w.j3,n.j4=w.j4,n.j3oj2=w.j3oj2;var T=w.j2,A=w.j4,_=w.xke,S=w.j3oj2;n.error=0,n.operationmode=s;var N=m.split("")[0].toLowerCase();isNaN(parseInt(N))?n.satnum=parseInt(N.charCodeAt(0)-96+9+n.satnum.slice(1,5)).toString():n.satnum=m,n.bstar=f,n.ndot=g,n.nddot=y,n.ecco=d,n.argpo=p,n.inclo=M,n.mo=v,n.no=b,n.nodeo=x;var D=78/n.radiusearthkm+1,I=42/n.radiusearthkm,E=I*I*I*I;n.init="y",n.t=0;var R={ecco:n.ecco,epoch:h,inclo:n.inclo,no:n.no,method:n.method,opsmode:n.operationmode,xke:n.xke,j2:n.j2},C=e.initl(R),O=C.ao,P=C.con42,L=C.cosio,z=C.cosio2,j=C.eccsq,k=C.omeosq,U=C.posq,q=C.rp,F=C.rteosq,Y=C.sinio;if(n.no=C.no,n.con41=C.con41,n.gsto=C.gsto,n.a=Math.pow(n.no*n.tumin,-2/3),n.alta=n.a*(1+n.ecco)-1,n.altp=n.a*(1-n.ecco)-1,n.error=0,k>=0||n.no>=0){n.isimp=0,q<220/n.radiusearthkm+1&&(n.isimp=1);var G=D,J=E,V=(q-1)*n.radiusearthkm;if(V<156){G=V-78,V<98&&(G=20);var H=(120-G)/n.radiusearthkm;J=H*H*H*H,G=G/n.radiusearthkm+1}var B=1/U,X=1/(O-G);n.eta=O*n.ecco*X;var Q=n.eta*n.eta,Z=n.ecco*n.eta,W=Math.abs(1-Q),K=J*Math.pow(X,4),$=K/Math.pow(W,3.5),ee=$*n.no*(O*(1+1.5*Q+Z*(4+Q))+.375*T*X/W*n.con41*(8+3*Q*(8+Q)));n.cc1=n.bstar*ee;var ne=0;n.ecco>1e-4&&(ne=-2*K*X*S*n.no*Y/n.ecco),n.x1mth2=1-z,n.cc4=2*n.no*$*O*k*(n.eta*(2+.5*Q)+n.ecco*(.5+2*Q)-T*X/(O*W)*(-3*n.con41*(1-2*Z+Q*(1.5-.5*Z))+.75*n.x1mth2*(2*Q-Z*(1+Q))*Math.cos(2*n.argpo))),n.cc5=2*$*O*k*(1+2.75*(Q+Z)+Z*Q);var re=z*z,te=1.5*T*B*n.no,ae=.5*te*T*B,oe=-.46875*A*B*B*n.no;n.mdot=n.no+.5*te*F*n.con41+.0625*ae*F*(13-78*z+137*re),n.argpdot=-.5*te*P+.0625*ae*(7-114*z+395*re)+oe*(3-36*z+49*re);var ie=-te*L;n.nodedot=ie+(.5*ae*(4-19*z)+2*oe*(3-7*z))*L;var se=n.argpdot+n.nodedot;n.omgcof=n.bstar*ne*Math.cos(n.argpo),n.xmcof=0,n.ecco>1e-4&&(n.xmcof=-c*K*n.bstar/Z),n.nodecf=3.5*k*ie*n.cc1,n.t2cof=1.5*n.cc1,Math.abs(L+1)>15e-13?n.xlcof=-.25*S*Y*(3+5*L)/(1+L):n.xlcof=-.25*S*Y*(3+5*L)/u,n.aycof=-.5*S*Y;var ce=1+n.eta*Math.cos(n.mo);if(n.delmo=ce*ce*ce,n.sinmao=Math.sin(n.mo),n.x7thm1=7*z-1,i/n.no>=225){n.method="d",n.isimp=1;var ue=n.inclo,le={epoch:h,ep:n.ecco,argpp:n.argpo,tc:0,inclp:n.inclo,nodep:n.nodeo,np:n.no,e3:n.e3,ee2:n.ee2,peo:n.peo,pgho:n.pgho,pho:n.pho,PInco:n.PInco,plo:n.plo,se2:n.se2,se3:n.se3,sgh2:n.sgh2,sgh3:n.sgh3,sgh4:n.sgh4,sh2:n.sh2,sh3:n.sh3,si2:n.si2,si3:n.si3,sl2:n.sl2,sl3:n.sl3,sl4:n.sl4,xgh2:n.xgh2,xgh3:n.xgh3,xgh4:n.xgh4,xh2:n.xh2,xh3:n.xh3,xi2:n.xi2,xi3:n.xi3,xl2:n.xl2,xl3:n.xl3,xl4:n.xl4,zmol:n.zmol,zmos:n.zmos},me=e.dscom(le);n.e3=me.e3,n.ee2=me.ee2,n.peo=me.peo,n.pgho=me.pgho,n.pho=me.pho,n.PInco=me.PInco,n.plo=me.plo,n.se2=me.se2,n.se3=me.se3,n.sgh2=me.sgh2,n.sgh3=me.sgh3,n.sgh4=me.sgh4,n.sh2=me.sh2,n.sh3=me.sh3,n.si2=me.si2,n.si3=me.si3,n.sl2=me.sl2,n.sl3=me.sl3,n.sl4=me.sl4;var he=me.sinim,fe=me.cosim,de=me.em,pe=me.emsq,Me=me.s1,ge=me.s2,ye=me.s3,ve=me.s4,be=me.s5,xe=me.ss1,we=me.ss2,Te=me.ss3,Ae=me.ss4,_e=me.ss5,Se=me.sz1,Ne=me.sz3,De=me.sz11,Ie=me.sz13,Ee=me.sz21,Re=me.sz23,Ce=me.sz31,Oe=me.sz33;n.xgh2=me.xgh2,n.xgh3=me.xgh3,n.xgh4=me.xgh4,n.xh2=me.xh2,n.xh3=me.xh3,n.xi2=me.xi2,n.xi3=me.xi3,n.xl2=me.xl2,n.xl3=me.xl3,n.xl4=me.xl4,n.zmol=me.zmol,n.zmos=me.zmos;var Pe=me.nm,Le=me.z1,ze=me.z3,je=me.z11,ke=me.z13,Ue=me.z21,qe=me.z23,Fe=me.z31,Ye=me.z33,Ge={inclo:ue,init:n.init,ep:n.ecco,inclp:n.inclo,nodep:n.nodeo,argpp:n.argpo,mp:n.mo,opsmode:n.operationmode},Je=e.dpper(n,Ge);n.ecco=Je.ep,n.inclo=Je.inclp,n.nodeo=Je.nodep,n.argpo=Je.argpp,n.mo=Je.mp;var Ve={xke:_,cosim:fe,emsq:pe,argpo:n.argpo,s1:Me,s2:ge,s3:ye,s4:ve,s5:be,sinim:he,ss1:xe,ss2:we,ss3:Te,ss4:Ae,ss5:_e,sz1:Se,sz3:Ne,sz11:De,sz13:Ie,sz21:Ee,sz23:Re,sz31:Ce,sz33:Oe,t:n.t,tc:0,gsto:n.gsto,mo:n.mo,mdot:n.mdot,no:n.no,nodeo:n.nodeo,nodedot:n.nodedot,xPIdot:se,z1:Le,z3:ze,z11:je,z13:ke,z21:Ue,z23:qe,z31:Fe,z33:Ye,ecco:n.ecco,eccsq:j,em:de,argpm:0,inclm:ue,mm:0,nm:Pe,nodem:0,irez:n.irez,atime:n.atime,d2201:n.d2201,d2211:n.d2211,d3210:n.d3210,d3222:n.d3222,d4410:n.d4410,d4422:n.d4422,d5220:n.d5220,d5232:n.d5232,d5421:n.d5421,d5433:n.d5433,dedt:n.dedt,didt:n.didt,dmdt:n.dmdt,dnodt:n.dnodt,domdt:n.domdt,del1:n.del1,del2:n.del2,del3:n.del3,xfact:n.xfact,xlamo:n.xlamo,xli:n.xli,xni:n.xni},He=e.dsinit(Ve);n.irez=He.irez,n.atime=He.atime,n.d2201=He.d2201,n.d2211=He.d2211,n.d3210=He.d3210,n.d3222=He.d3222,n.d4410=He.d4410,n.d4422=He.d4422,n.d5220=He.d5220,n.d5232=He.d5232,n.d5421=He.d5421,n.d5433=He.d5433,n.dedt=He.dedt,n.didt=He.didt,n.dmdt=He.dmdt,n.dnodt=He.dnodt,n.domdt=He.domdt,n.del1=He.del1,n.del2=He.del2,n.del3=He.del3,n.xfact=He.xfact,n.xlamo=He.xlamo,n.xli=He.xli,n.xni=He.xni}if(1!==n.isimp){var Be=n.cc1*n.cc1;n.d2=4*O*X*Be;var Xe=n.d2*X*n.cc1/3;n.d3=(17*O+G)*Xe,n.d4=.5*Xe*O*X*(221*O+31*G)*n.cc1,n.t3cof=n.d2+2*Be,n.t4cof=.25*(3*n.d3+n.cc1*(12*n.d2+10*Be)),n.t5cof=.2*(3*n.d4+12*n.cc1*n.d3+6*n.d2*n.d2+15*Be*(2*n.d2+Be))}}e.propagate(n,0),n.init="n"},e.propagate=function(n,r){var t=n.xke,a=n.j2,s=n.j3oj2,l=n.radiusearthkm*n.xke/60;n.t=r,n.error=0;var m=n.mo+n.mdot*n.t,h=n.argpo+n.argpdot*n.t,f=n.nodeo+n.nodedot*n.t,d=h,p=m,M=n.t*n.t,g=f+n.nodecf*M,y=1-n.cc1*n.t,v=n.bstar*n.cc4*n.t,b=n.t2cof*M;if(1!==n.isimp){var x=n.omgcof*n.t,w=1+n.eta*Math.cos(m),T=x+n.xmcof*(w*w*w-n.delmo);p=m+T,d=h-T;var A=M*n.t,_=A*n.t;y=y-n.d2*M-n.d3*A-n.d4*_,v+=n.bstar*n.cc5*(Math.sin(p)-n.sinmao),b=b+n.t3cof*A+_*(n.t4cof+n.t*n.t5cof)}var S=n.no,N=n.ecco,D=n.inclo;if("d"===n.method){var I=n.t,E=e.dspace(n.irez,n.d2201,n.d2211,n.d3210,n.d3222,n.d4410,n.d4422,n.d5220,n.d5232,n.d5421,n.d5433,n.dedt,n.del1,n.del2,n.del3,n.didt,n.dmdt,n.dnodt,n.domdt,n.argpo,n.argpdot,n.t,I,n.gsto,n.xfact,n.xlamo,n.no,n.atime,N,d,D,n.xli,p,n.xni,g,S);N=E[0],d=E[1],D=E[2],p=E[3],g=E[4],S=E[5]}if(S<=0)return n.error=2,{position:!1,velocity:!1};var R=Math.pow(t/S,c)*y*y;if(S=t/Math.pow(R,1.5),(N-=v)>=1||N<-.001)return n.error=1,{position:!1,velocity:!1};N<1e-6&&(N=1e-6);var C=(p+=n.no*b)+d+g,O=N,P=D,L=d%=i,z=g%=i,j=p=((C%=i)-d-g)%i,k=Math.sin(D),U=Math.cos(D);if("d"===n.method){var q={inclo:n.inclo,init:"n",ep:O,inclp:P,nodep:z,argpp:L,mp:j,opsmode:n.operationmode},F=e.dpper(n,q);if(O=F.ep,z=F.nodep,L=F.argpp,j=F.mp,(P=F.inclp)<0&&(P=-P,z+=o,L-=o),O<0||O>1)return n.error=3,{position:!1,velocity:!1}}"d"===n.method&&(k=Math.sin(P),U=Math.cos(P),n.aycof=-.5*s*k,Math.abs(U+1)>15e-13?n.xlcof=-.25*s*k*(3+5*U)/(1+U):n.xlcof=-.25*s*k*(3+5*U)/u);for(var Y,G,J=O*Math.cos(L),V=1/(R*(1-O*O)),H=O*Math.sin(L)+V*n.aycof,B=(j+L+z+V*n.xlcof*J-z)%i,X=B,Q=9999.9,Z=1;Math.abs(Q)>=1e-12&&Z<=10;)G=Math.sin(X),Q=(B-H*(Y=Math.cos(X))+J*G-X)/(Q=1-Y*J-G*H),Math.abs(Q)>=.95&&(Q=Q>0?.95:-.95),X+=Q,Z+=1;var W=J*Y+H*G,K=J*G-H*Y,$=J*J+H*H,ee=R*(1-$);if(ee<0)return n.error=4,{position:!1,velocity:!1};var ne=R*(1-W),re=Math.sqrt(R)*K/ne,te=Math.sqrt(ee)/ne,ae=Math.sqrt(1-$),oe=R/ne*(G-H-J*(V=K/(1+ae))),ie=R/ne*(Y-J+H*V),se=Math.atan2(oe,ie),ce=(ie+ie)*oe,ue=1-2*oe*oe,le=.5*a*(V=1/ee),me=le*V;if("d"===n.method){var he=U*U;n.con41=3*he-1,n.x1mth2=1-he,n.x7thm1=7*he-1}var fe=ne*(1-1.5*me*ae*n.con41)+.5*le*n.x1mth2*ue;if(fe<1)return n.error=6,{position:!1,velocity:!1};se-=.25*me*n.x7thm1*ce;var de=z+1.5*me*U*ce,pe=P+1.5*me*U*k*ue,Me=re-S*le*n.x1mth2*ce/t,ge=te+S*le*(n.x1mth2*ue+1.5*n.con41)/t,ye=Math.sin(se),ve=Math.cos(se),be=Math.sin(de),xe=Math.cos(de),we=Math.sin(pe),Te=Math.cos(pe),Ae=-be*Te,_e=xe*Te,Se=Ae*ye+xe*ve,Ne=_e*ye+be*ve,De=we*ye,Ie=Ae*ve-xe*ye,Ee=_e*ve-be*ye,Re=we*ve;return{position:{x:fe*Se*n.radiusearthkm,y:fe*Ne*n.radiusearthkm,z:fe*De*n.radiusearthkm},velocity:{x:(Me*Se+ge*Ie)*l,y:(Me*Ne+ge*Ee)*l,z:(Me*De+ge*Re)*l}}},e.getgravconst=function(e){var n,r,t,a,o,i,s,c;switch(e){case"wgs72old":o=398600.79964,i=6378.135,s=1/(c=.0743669161),a=-165597e-11,t=(r=-253881e-11)/(n=.001082616);break;case"wgs72":o=398600.8,i=6378.135,s=1/(c=60/Math.sqrt(i*i*i/o)),a=-165597e-11,t=(r=-253881e-11)/(n=.001082616);break;case"wgs84":o=398600.5,i=6378.137,s=1/(c=60/Math.sqrt(i*i*i/o)),a=-161098761e-14,t=(r=-253215306e-14)/(n=.00108262998905);break;default:throw new Error("unknown gravity option ".concat(e))}return{tumin:s,mus:o,radiusearthkm:i,xke:c,j2:n,j3:r,j4:a,j3oj2:t}},e.createSatrec=function(n,r,t,a){void 0===t&&(t="wgs72"),void 0===a&&(a="i");var i,c={a:null,am:null,alta:null,altp:null,argpdot:null,argpo:null,aycof:null,bstar:null,cc1:null,cc4:null,cc5:null,con41:null,d2:null,d3:null,d4:null,d5232:null,d5421:null,d5433:null,dedt:null,delmo:null,del1:null,ecco:null,em:null,epochdays:null,epochyr:null,error:null,eta:null,gsto:null,im:null,inclo:null,init:null,isimp:null,jdsatepoch:null,mdot:null,method:null,mo:null,mm:null,nddot:null,ndot:null,no:null,nodecf:null,nodedot:null,nodeo:null,om:null,Om:null,omgcof:null,operationmode:null,satnum:null,sinmao:null,t:null,t2cof:null,t3cof:null,t4cof:null,t5cof:null,x1mth2:null,x7thm1:null,xlcof:null,xmcof:null,xfact:null,xlamo:null,xli:null,xgh4:null,xgh3:null,xh2:null,xi2:null,xi3:null,xl2:null,xl3:null,xl4:null,zmol:null,zmos:null,dmdt:null,dnodt:null,domdt:null,e3:null,ee2:null,peo:null,pgho:null,pho:null,PInco:null,plo:null,se2:null,se3:null,sgh2:null,sgh3:null,sgh4:null,sh2:null,sh3:null,si2:null,si3:null,sl2:null,sl3:null,sl4:null,xgh2:null,xh3:null,tumin:null,radiusearthkm:null,irez:null,d3210:null,d3222:null,d4410:null,d4422:null,d5220:null,del2:null,del3:null,didt:null,atime:null,j2:null,j3:null,j4:null,mus:null,xke:null,j3oj2:null,xni:null,d2201:null,d2211:null,nm:null},u=1440/(2*o);c.error=0,c.satnum=n.substring(2,7),c.epochyr=parseInt(n.substring(18,20)),c.epochdays=parseFloat(n.substring(20,32)),c.ndot=parseFloat(n.substring(33,43)),c.nddot=parseFloat("".concat(n.substring(44,45),".").concat(n.substring(45,50),"E").concat(n.substring(50,52))),c.bstar=parseFloat("".concat(n.substring(53,54),".").concat(n.substring(54,59),"E").concat(n.substring(59,61))),c.inclo=parseFloat(r.substring(8,16)),c.nodeo=parseFloat(r.substring(17,25)),c.ecco=parseFloat(".".concat(r.substring(26,33))),c.argpo=parseFloat(r.substring(34,42)),c.mo=parseFloat(r.substring(43,51)),c.no=parseFloat(r.substring(52,63)),c.no/=u,c.inclo*=s,c.nodeo*=s,c.argpo*=s,c.mo*=s,i=c.epochyr<57?c.epochyr+2e3:c.epochyr+1900;var l=e.days2mdhms(i,c.epochdays),m=l.mon,h=l.day,f=l.hr,d=l.min,p=l.sec,M=e.jday(i,m,h,f,d,p);return c.jdsatepoch=M.jd+M.jdFrac,e.sgp4init(c,{whichconst:t,opsmode:a,satn:c.satnum,epoch:c.jdsatepoch-2433281.5,xbstar:c.bstar,xecco:c.ecco,xargpo:c.argpo,xinclo:c.inclo,xndot:c.ndot,xnddot:c.nddot,xmo:c.mo,xno:c.no,xnodeo:c.nodeo}),c},e.gstime=function(e){var n=(e-2451545)/36525,r=-62e-7*n*n*n+.093104*n*n+3164400184.812866*n+67310.54841;return(r=r*s/240%i)<0&&(r+=i),r},e.sgn=function(e){return e<0?-1:1},e.mag=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},e.cross=function(e,n){var r=[0,0,0];return r[0]=e[1]*n[2]-e[2]*n[1],r[1]=e[2]*n[0]-e[0]*n[2],r[2]=e[0]*n[1]-e[1]*n[0],r},e.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},e.angle=function(n,r){var t=e.mag(n),a=e.mag(r);if(t*a>1e-8*1e-8){var o=e.dot(n,r)/(t*a);return Math.abs(o)>1&&(o=Number(e.sgn(o))),Math.acos(o)}return 999999.1},e.asinh=function(e){return Math.log(e+Math.sqrt(e*e+1))},e.newtonnu=function(n,r){var t=999999.9,a=999999.9,i=1e-8;if(Math.abs(n)<i)a=r,t=r;else if(n<1-i){var s=Math.sqrt(1-n*n)*Math.sin(r)/(1+n*Math.cos(r)),c=(n+Math.cos(r))/(1+n*Math.cos(r));a=(t=Math.atan2(s,c))-n*Math.sin(t)}else n>1+i?n>1&&Math.abs(r)+1e-5<o-Math.acos(1/n)&&(s=Math.sqrt(n*n-1)*Math.sin(r)/(1+n*Math.cos(r)),t=e.asinh(s),a=n*e.sinh(t)-t):Math.abs(r)<168*o/180&&(a=(t=Math.tan(.5*r))+t*t*t/3);return n<1&&((a%=2*o)<0&&(a+=2*o),t%=2*o),{e0:t,m:a}},e.sinh=function(e){return(Math.exp(e)-Math.exp(-e))/2},e.rv2coe=function(n,r,t){var a,s,c,u,l,m,h,f,d,p,M,g,y,v,b,x,w,T=[0,0,0],A=[0,0,0],_=.5*o,S=1e-8,N=999999.1,D=e.mag(n),I=e.mag(r),E=e.cross(n,r),R=e.mag(E);if(R>S){T[0]=-E[1],T[1]=E[0],T[2]=0,y=e.mag(T);var C=I*I-t/D;for(g=e.dot(n,r),x=0;x<=2;x++)A[x]=(C*n[x]-g*r[x])/t;if(c=e.mag(A),b=I*I*.5-t/D,s=Math.abs(b)>S?-t/(2*b):999999.9,a=R*R/t,v=E[2]/R,u=Math.acos(v),w=1,c<S?w=u<S||Math.abs(u-o)<S?2:3:(u<S||Math.abs(u-o)<S)&&(w=4),y>S){var O=T[0]/y;Math.abs(O)>1&&(O=e.sgn(O)),l=Math.acos(O),T[1]<0&&(l=i-l)}else l=N;1===w?(m=e.angle(T,A),A[2]<0&&(m=i-m)):m=N,1===w||4===w?(h=e.angle(A,n),g<0&&(h=i-h)):h=N,3===w?(d=e.angle(T,n),n[2]<0&&(d=i-d),f=d):d=N,c>S&&4===w?(O=A[0]/c,Math.abs(O)>1&&(O=e.sgn(O)),M=Math.acos(O),A[1]<0&&(M=i-M),u>_&&(M=i-M)):M=N,D>S&&2===w?(O=n[0]/D,Math.abs(O)>1&&(O=e.sgn(O)),p=Math.acos(O),n[1]<0&&(p=i-p),u>_&&(p=i-p),f=p):p=N,1!==w&&4!==w||(f=e.newtonnu(c,h).m)}else a=N,s=N,c=N,u=N,l=N,m=N,h=N,f=N,d=N,p=N,M=N;return{p:a,a:s,ecc:c,incl:u,omega:l,argp:m,nu:h,m:f,arglat:d,truelon:p,lonper:M}},e.jday=function(e,n,r,t,a,o,i){void 0===n&&(n=0),void 0===r&&(r=0),void 0===t&&(t=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===i&&(i=0),e instanceof Date&&(n=e.getUTCMonth()+1,r=e.getUTCDate(),t=e.getUTCHours(),a=e.getUTCMinutes(),o=e.getUTCSeconds(),i=e.getUTCMilliseconds(),e=e.getUTCFullYear());var s=367*e-Math.floor(7*(e+Math.floor((n+9)/12))*.25)+Math.floor(275*n/9)+r+1721013.5,c=(i/1e3+o+60*a+3600*t)/86400;if(Math.abs(c)>1){var u=Math.floor(c);s+=u,c-=u}return{jd:s,jdFrac:c}},e.days2mdhms=function(e,n){for(var r=[31,e%4==0?29:28,31,30,31,30,31,31,30,31,30,31],t=Math.floor(n),a=1,o=0;t>o+r[a-1]&&a<12;)o+=r[a-1],a+=1;var i=a,s=t-o,c=24*(n-t),u=Math.floor(c);c=60*(c-u);var l=Math.floor(c);return{mon:i,day:s,hr:u,min:l,sec:60*(c-l)}},e.invjday=function(n,r){var t,a;Math.abs(r)>=1&&(n+=Math.floor(r),r-=Math.floor(r));var o=n-Math.floor(n)-.5;Math.abs(o)>1e-8&&(n-=o,r+=o);var i=n-2415019.5,s=i/365.25,c=1900+Math.floor(s);t=Math.floor(.25*(c-1901)),(a=Math.floor(i-(365*(c-1900)+t)))+r<1&&(c-=1,t=Math.floor(.25*(c-1901)),a=Math.floor(i-(365*(c-1900)+t)));var u=e.days2mdhms(c,a+r);return{year:c,mon:u.mon,day:u.day,hr:u.hr,min:u.min,sec:u.sec}},e}(),f=function(){function e(){}return e.getDegLat=function(n){if(n<-o/2||n>o/2)throw new RangeError("Latitude radians must be in range [-PI/2; PI/2].");return e.rad2deg(n)},e.getDegLon=function(n){if(n<-o||n>o)throw new RangeError("Longitude radians must be in range [-PI; PI].");return e.rad2deg(n)},e.getRadLat=function(n){if(n<-90||n>90)throw new RangeError("Latitude degrees must be in range [-90; 90].");return e.deg2rad(n)},e.getRadLon=function(n){if(n<-180||n>180)throw new RangeError("Longitude degrees must be in range [-180; 180].");return e.deg2rad(n)},e.rad2deg=function(e){return 180*e/o},e.deg2rad=function(e){return e*o/180},e.ecf2eci=function(e,n){return{x:e.x*Math.cos(n)-e.y*Math.sin(n),y:e.x*Math.sin(n)+e.y*Math.cos(n),z:e.z}},e.ecf2rae=function(n,r){var t=e.lla2sez(n,r);return e.sez2rae(t)},e.eci2lla=function(e,n){for(var r=6378.137,t=Math.sqrt(e.x*e.x+e.y*e.y),a=(r-6356.7523142)/r,s=2*a-a*a,c=Math.atan2(e.y,e.x)-n;c<-o;)c+=i;for(;c>o;)c-=i;for(var u,l=0,m=Math.atan2(e.z,Math.sqrt(e.x*e.x+e.y*e.y));l<20;)u=1/Math.sqrt(1-s*(Math.sin(m)*Math.sin(m))),m=Math.atan2(e.z+r*u*s*Math.sin(m),t),l+=1;return{lon:c,lat:m,alt:t/Math.cos(m)-r*u}},e.eci2ecf=function(e,n){return{x:e.x*Math.cos(n)+e.y*Math.sin(n),y:e.x*-Math.sin(n)+e.y*Math.cos(n),z:e.z}},e.lla2ecf=function(e){var n=e.lon,r=e.lat,t=e.alt,a=6378.137,o=(a-6356.7523142)/a,i=2*o-o*o,s=a/Math.sqrt(1-i*(Math.sin(r)*Math.sin(r)));return{x:(s+t)*Math.cos(r)*Math.cos(n),y:(s+t)*Math.cos(r)*Math.sin(n),z:(s*(1-i)+t)*Math.sin(r)}},e.lla2sez=function(n,r){var t=n.lon,a=n.lat,o=e.lla2ecf(n),i=r.x-o.x,s=r.y-o.y,c=r.z-o.z;return{s:Math.sin(a)*Math.cos(t)*i+Math.sin(a)*Math.sin(t)*s-Math.cos(a)*c,e:-Math.sin(t)*i+Math.cos(t)*s,z:Math.cos(a)*Math.cos(t)*i+Math.cos(a)*Math.sin(t)*s+Math.sin(a)*c}},e.rae2sez=function(e){return{s:-e.rng*Math.cos(e.el)*Math.cos(e.az),e:e.rng*Math.cos(e.el)*Math.sin(e.az),z:e.rng*Math.sin(e.el)}},e.rae2ecf=function(n,r){var t=e.lla2ecf(r),a=e.rae2sez(n),o=Math.sin(r.lat),i=Math.sin(r.lon),s=Math.cos(r.lat),c=Math.cos(r.lon);return{x:o*c*a.s+-i*a.e+s*c*a.z+t.x,y:o*i*a.s+c*a.e+s*i*a.z+t.y,z:-s*a.s+o*a.z+t.z}},e.sez2rae=function(e){var n=Math.sqrt(e.s*e.s+e.e*e.e+e.z*e.z),r=Math.asin(e.z/n);return{rng:n,az:Math.atan2(-e.e,e.s)+o,el:r}},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PAYLOAD=1]="PAYLOAD",e[e.ROCKET_BODY=2]="ROCKET_BODY",e[e.DEBRIS=3]="DEBRIS",e[e.SPECIAL=4]="SPECIAL",e[e.RADAR_MEASUREMENT=5]="RADAR_MEASUREMENT",e[e.RADAR_TRACK=6]="RADAR_TRACK",e[e.RADAR_OBJECT=7]="RADAR_OBJECT",e[e.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",e[e.STAR=9]="STAR",e[e.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",e[e.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",e[e.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",e[e.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",e[e.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",e[e.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",e[e.LAUNCH_SITE=16]="LAUNCH_SITE",e[e.LAUNCH_POSITION=17]="LAUNCH_POSITION",e[e.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",e[e.CONTROL_FACILITY=19]="CONTROL_FACILITY",e[e.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",e[e.OPTICAL=21]="OPTICAL",e[e.MECHANICAL=22]="MECHANICAL",e[e.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",e[e.OBSERVER=24]="OBSERVER",e[e.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",e[e.COUNTRY=26]="COUNTRY",e[e.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",e[e.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER"}(a||(a={}));var d,p=2*Math.PI,M=function(){function e(){}return e.julianCycle=function(n,r){var t=r/p;return Math.round(n-e.J0-t)},e.observerAngle=function(e){return-2.076*Math.sqrt(e)/60},e.solarMeanAnomaly=function(e){return s*(357.5291+.98560028*e)},e.julian2date=function(n){return new Date((n-e.J1970)*l)},e.date2jSince2000=function(n){return n.getTime()/l+e.J1970-e.J2000},e.rightAscension=function(n,r){return Math.atan2(Math.sin(n)*Math.cos(e.e)-Math.tan(r)*Math.sin(e.e),Math.cos(n))},e.declination=function(n,r){return Math.asin(Math.sin(r)*Math.cos(e.e)+Math.cos(r)*Math.sin(e.e)*Math.sin(n))},e.azimuth=function(e,n,r){return Math.PI+Math.atan2(Math.sin(e),Math.cos(e)*Math.sin(n)-Math.tan(r)*Math.cos(n))},e.elevation=function(e,n,r){return Math.asin(Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos(e))},e.siderealTime=function(e,n){return s*(280.16+360.9856235*e)-n},e.astroRefraction=function(e){return e<0&&(e=0),2967e-7/Math.tan(e+.00312536/(e+.08901179))},e.eclipticLongitude=function(e){return e+s*(1.9148*Math.sin(e)+.02*Math.sin(2*e)+3e-4*Math.sin(3*e))+102.9372*s+Math.PI},e.eclipticLatitude=function(e){var n=p/360,r=e-.00569-.00478*Math.sin(n*e);return p*(r+3e-4*Math.sin(2*n*r))},e.julianCyle=function(n,r){return Math.round(n-e.J0-r/(2*p/2))},e.approxTransit=function(n,r,t){return e.J0+(n+r)/p+t},e.solarTransitJulian=function(n,r,t){return e.J2000+n+.0053*Math.sin(r)-.0069*Math.sin(2*t)},e.hourAngle=function(e,n,r){return Math.acos((Math.sin(e)-Math.sin(n)*Math.sin(r))/(Math.cos(n)*Math.cos(r)))},e.getSetJulian=function(n,r,t,a,o,i,s){var c=e.hourAngle(n,t,a),u=e.approxTransit(c,r,o);return e.solarTransitJulian(u,i,s)},e.getSetJ=function(n,r,t,a,o,i,s){var c=e.hourAngle(n,t,a),u=e.approxTransit(c,r,o);return e.solarTransitJulian(u,i,s)},e.getTimes=function(n,r,t,a,o){if(void 0===a&&(a=0),void 0===o&&(o=!1),isNaN(r))throw new Error("latitude missing");if(isNaN(t))throw new Error("longitude missing");var i=new Date(n);o?i.setUTCHours(12,0,0,0):i.setHours(12,0,0,0);var c,u=0,l=[],m=0,h=0,f=0,d=e.calculateJnoon(t,r,a,i),p=d.Jnoon,M=d.dh,g=d.lw,y=d.phi,v=d.dec,b=d.n,x=d.M,w=d.L,T={solarNoon:e.julian2date(p),nadir:e.julian2date(p+.5)};for(u=0,c=e.times.length;u<c;u+=1)m=((l=e.times[u])[0]+M)*s,f=p-((h=e.getSetJ(m,g,y,v,b,x,w))-p),T[l[1]]=e.julian2date(f),T[l[2]]=e.julian2date(h);return T},e.calculateJnoon=function(n,r,t,a){var o=s*-n,i=s*r,c=e.observerAngle(t),u=e.date2jSince2000(a),l=e.julianCycle(u,o),m=e.approxTransit(0,o,l),h=e.solarMeanAnomaly(m),f=e.eclipticLongitude(h),d=e.declination(f,0);return{Jnoon:e.solarTransitJulian(m,h,f),dh:c,lw:o,phi:i,dec:d,n:l,M:h,L:f}},e.getSunTimeByAzimuth=function(n,r,t,a,o){if(void 0===o&&(o=!1),isNaN(a))throw new Error("azimuth missing");if(isNaN(r))throw new Error("latitude missing");if(isNaN(t))throw new Error("longitude missing");o&&(a*=s);var i=new Date(n),c=s*-t,u=s*r,m=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0).getTime(),h=l;for(m+=h;h>200;){var f=e.date2jSince2000(new Date(m)),d=e.getSunRaDec(f),p=e.siderealTime(f,c)-d.ra;h/=2,e.getAzimuth(p,u,d.dec)<a?m+=h:m-=h}return new Date(Math.floor(m))},e.getAzimuth=function(e,n,r){return Math.atan2(Math.sin(e),Math.cos(e)*Math.sin(n)-Math.tan(r)*Math.cos(n))+Math.PI},e.getSolarTime=function(e,n,r){var t=new Date;t.setUTCFullYear(e.getUTCFullYear(),0,1),t.setUTCHours(0,0,0,0);var a=e.getTime()-t.getTime(),o=360/365*(Math.floor(a/l)-81)*s,i=9.87*Math.sin(2*o)-7.53*Math.cos(o)-1.5*Math.sin(o)+4*(r-15*n);return new Date(e.getTime()+60*i*1e3)},e.getStarAzEl=function(n,r,t,a,o){var i=-t*s,c=r*s,u=e.date2jSince2000(n),l=e.siderealTime(u,i)-a,m=e.elevation(l,c,o);return{az:e.azimuth(l,c,o),el:m+=e.astroRefraction(m)}},e.getSunAzEl=function(n,r,t){var a=-t*s,o=r*s,i=e.date2jSince2000(n),c=e.getSunRaDec(i),u=e.siderealTime(i,a)-c.ra;return{az:e.azimuth(u,o,c.dec),el:e.elevation(u,o,c.dec)}},e.getSunRaDec=function(n){var r=e.solarMeanAnomaly(n),t=e.eclipticLongitude(r);return{dec:e.declination(t,0),ra:e.rightAscension(t,0)}},e.J1970=2440587.5,e.J2000=2451545,e.J0=9e-4,e.e=23.4397*s,e.times=[[6,"goldenHourDawnEnd","goldenHourDuskStart"],[-.3,"sunriseEnd","sunsetStart"],[-.833,"sunriseStart","sunsetEnd"],[-1,"goldenHourDawnStart","goldenHourDuskEnd"],[-4,"blueHourDawnEnd","blueHourDuskStart"],[-6,"civilDawn","civilDusk"],[-8,"blueHourDawnStart","blueHourDuskEnd"],[-12,"nauticalDawn","nauticalDusk"],[-15,"amateurDawn","amateurDusk"],[-18,"astronomicalDawn","astronomicalDusk"]],e}(),g=function(){function e(){}return e.moonCoords=function(e){var n=s*(134.963+13.064993*e),r=s*(93.272+13.22935*e),t=s*(218.316+13.176396*e)+6.289*s*Math.sin(n),a=5.128*s*Math.sin(r),o=385001-20905*Math.cos(n);return{ra:M.rightAscension(t,a),dec:M.declination(t,a),dist:o}},e.hoursLater=function(e,n){return new Date(e.getTime()+n*l/24)},e.getMoonPosition=function(n,r,t){var a=s*-t,o=s*r,i=M.date2jSince2000(n),c=e.moonCoords(i),u=M.siderealTime(i,a)-c.ra,l=M.elevation(u,o,c.dec),m=Math.atan2(Math.sin(u),Math.tan(o)*Math.cos(c.dec)-Math.sin(c.dec)*Math.cos(u));return l+=M.astroRefraction(l),{az:M.azimuth(u,o,c.dec),el:l,rng:c.dist,parallacticAngle:m}},e.getMoonIllumination=function(n){var r=n instanceof Date?n.getTime():n,t=2551442778,a=M.date2jSince2000(new Date(r)),o=M.getSunRaDec(a),i=e.moonCoords(a),s=149598e3,c=Math.acos(Math.sin(o.dec)*Math.sin(i.dec)+Math.cos(o.dec)*Math.cos(i.dec)*Math.cos(o.ra-i.ra)),u=Math.atan2(s*Math.sin(c),i.dist-s*Math.cos(c)),l=Math.atan2(Math.cos(o.dec)*Math.sin(o.ra-i.ra),Math.sin(o.dec)*Math.cos(i.dec)-Math.cos(o.dec)*Math.sin(i.dec)*Math.cos(o.ra-i.ra)),m=.5+.5*u*(l<0?-1:1)/Math.PI,h=(r-94717884e4)%t;h<0&&(h+=t);var f=t-h+r,d=1275721389-h+r;d<r&&(d+=t);var p=637860694.5-h+r;p<r&&(p+=t);var g,y=1913582083.5-h+r;y<r&&(y+=t);for(var v,b=Math.min(f,p,d,y),x=0;x<e.moonCycles.length;x++){var w=e.moonCycles[x];if(m>=w.from&&m<=w.to){v=w;break}}return g=b===f?"newMoon":b===p?"firstQuarter":b===d?"fullMoon":"thirdQuarter",{fraction:(1+Math.cos(u))/2,phase:v,phaseValue:m,angle:l,next:{value:b,date:new Date(b).toISOString(),type:g,newMoon:{value:f,date:new Date(f).toISOString()},fullMoon:{value:d,date:new Date(d).toISOString()},firstQuarter:{value:p,date:new Date(p).toISOString()},thirdQuarter:{value:y,date:new Date(y).toISOString()}}}},e.getMoonTimes=function(n,r,t,a){void 0===a&&(a=!1);var o=new Date(n);a?o.setUTCHours(0,0,0,0):o.setHours(0,0,0,0);var i=e.calculateRiseSetTimes(o,r,t),s=i.rise,c=i.set,u=i.ye,l={rise:null,set:null,ye:null,alwaysUp:null,alwaysDown:null,highest:null};return l.rise=s?new Date(e.hoursLater(n,s)):NaN,l.set=c?new Date(e.hoursLater(n,c)):NaN,s||c?s&&c?(l.alwaysUp=!1,l.alwaysDown=!1,l.highest=new Date(e.hoursLater(n,Math.min(s,c)+Math.abs(c-s)/2))):(l.alwaysUp=!1,l.alwaysDown=!1):u>0?(l.alwaysUp=!0,l.alwaysDown=!1):(l.alwaysUp=!1,l.alwaysDown=!0),l},e.calculateRiseSetTimes=function(n,r,t){for(var a=.133*s,o=e.getMoonPosition(n,r,t).el-a,i=0,c=0,u=0,l=0,m=0,h=0,f=0,d=0,p=0,M=0,g=0,y=0,v=0,b=1;b<=24&&(i=e.getMoonPosition(e.hoursLater(n,b),r,t).el-a,d=((m=(o+(c=e.getMoonPosition(e.hoursLater(n,b+1),r,t).el-a))/2-i)*(f=-(h=(c-o)/2)/(2*m))+h)*f+i,M=0,(p=h*h-4*m*i)>=0&&(g=f-(v=Math.sqrt(p)/(2*Math.abs(m))),y=f+v,Math.abs(g)<=1&&M++,Math.abs(y)<=1&&M++,g<-1&&(g=y)),1===M?o<0?u=b+g:l=b+g:2===M&&(u=b+(d<0?y:g),l=b+(d<0?g:y)),!u||!l);b+=2)o=c;return{rise:u,set:l,ye:d}},e.moonCycles=[{from:0,to:.033863193308711,id:"newMoon",emoji:"🌚",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"},{from:.033863193308711,to:.216136806691289,id:"waxingCrescentMoon",emoji:"🌒",code:":waxing_crescent_moon:",name:"Waxing Crescent",weight:6.3825,css:"wi-moon-wax-cres"},{from:.216136806691289,to:.283863193308711,id:"firstQuarterMoon",emoji:"🌓",code:":first_quarter_moon:",name:"First Quarter",weight:1,css:"wi-moon-first-quart"},{from:.283863193308711,to:.466136806691289,id:"waxingGibbousMoon",emoji:"🌔",code:":waxing_gibbous_moon:",name:"Waxing Gibbous",weight:6.3825,css:"wi-moon-wax-gibb"},{from:.466136806691289,to:.533863193308711,id:"fullMoon",emoji:"🌝",code:":full_moon_with_face:",name:"Full Moon",weight:1,css:"wi-moon-full"},{from:.533863193308711,to:.716136806691289,id:"waningGibbousMoon",emoji:"🌖",code:":waning_gibbous_moon:",name:"Waning Gibbous",weight:6.3825,css:"wi-moon-wan-gibb"},{from:.716136806691289,to:.783863193308711,id:"thirdQuarterMoon",emoji:"🌗",code:":last_quarter_moon:",name:"third Quarter",weight:1,css:"wi-moon-third-quart"},{from:.783863193308711,to:.966136806691289,id:"waningCrescentMoon",emoji:"🌘",code:":waning_crescent_moon:",name:"Waning Crescent",weight:6.3825,css:"wi-moon-wan-cres"},{from:.966136806691289,to:1,id:"newMoon",emoji:"🌚",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"}],e}(),y=function(){function e(){}return e.distance=function(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)+Math.pow(e.z-n.z,2))},e.dopplerFactor=function(n,r,t){var a=7292115e-11,o={x:r.x-n.x,y:r.y-n.y,z:r.z-n.z},i=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)+Math.pow(o.z,2)),s=t.x+a*n.y,c=t.y-a*n.x,u=t.z,l=(o.x*s+o.y*c+o.z*u)/i;return 1+l/299792.458*e.sign(l)},e.createVec=function(e,n,r){for(var t=[],a=e;a<=n;a+=r)t.push(a);return t},e.roundToNDecimalPlaces=function(e,n){return Math.round(e*Math.pow(10,n))/Math.pow(10,n)},e.Types=t,e.sign=function(e){return e>=0?1:-1},e.jday=function(e,n,r,t,a,o){if(!e){var i=new Date,s=new Date(i.getUTCFullYear(),0,0),c=i.getDate()-s.getDate();return Math.floor(c/m)}return 367*e-Math.floor(7*(e+Math.floor((n+9)/12))*.25)+Math.floor(275*n/9)+r+1721013.5+((o/60+a)/60+t)/24},e.SunMath=M,e.MoonMath=g,e}(),v=function(e,n){this.start=e-1,this.stop=n,this.length=this.stop-this.start},b=function(){return b=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},b.apply(this,arguments)},x=function(){function e(){}return e.parseTle=function(n,r){var t=e.parseLine1(n),a=e.parseLine2(r);if(t.satNum!==a.satNum)throw new Error("Satellite numbers do not match");if(t.satNumRaw!==a.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==t.lineNumber1)throw new Error("First line number must be 1");if(2!==a.lineNumber2)throw new Error("Second line number must be 2");return{satNum:t.satNum,intlDes:t.intlDes,epochYear:t.epochYear,epochDay:t.epochDay,meanMoDev1:t.meanMoDev1,meanMoDev2:t.meanMoDev2,bstar:t.bstar,inclination:a.inclination,raan:a.raan,eccentricity:a.eccentricity,argOfPerigee:a.argOfPerigee,meanAnomaly:a.meanAnomaly,meanMotion:a.meanMotion}},e.parseTleFull=function(n,r){var t=e.parseLine1(n),a=e.parseLine2(r);if(t.satNum!==a.satNum)throw new Error("Satellite numbers do not match");if(t.satNumRaw!==a.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==t.lineNumber1)throw new Error("First line number must be 1");if(2!==a.lineNumber2)throw new Error("Second line number must be 2");return b(b({},t),a)},e.parseLine1=function(n){return{lineNumber1:e.getLineNumber(n),satNum:e.getSatNum(n),satNumRaw:e.getRawSatNum(n),classification:e.getClassification(n),intlDes:e.getIntlDes(n),intlDesYear:e.getIntlDesYear(n),intlDesLaunchNum:e.getIntlDesLaunchNum(n),intlDesLaunchPiece:e.getIntlDesLaunchPiece(n),epochYear:e.getEpochYear(n),epochYearFull:e.getEpochYearFull(n),epochDay:e.getEpochDay(n),meanMoDev1:e.getMeanMoDev1(n),meanMoDev2:e.getMeanMoDev2(n),bstar:e.getBstar(n),ephemerisType:e.getEphemerisType(n),elsetNum:e.getElsetNum(n),checksum1:e.getChecksum(n)}},e.parseLine2=function(n){return{lineNumber2:e.getLineNumber(n),satNum:e.getSatNum(n),satNumRaw:e.getRawSatNum(n),inclination:e.getInclination(n),raan:e.getRaan(n),eccentricity:e.getEccentricity(n),argOfPerigee:e.getArgOfPerigee(n),meanAnomaly:e.getMeanAnomaly(n),meanMotion:e.getMeanMotion(n),revNum:e.getRevNum(n),checksum2:e.getChecksum(n)}},e.getLineNumber=function(n){var r=parseInt(n.substring(e.lineNumber.start,e.lineNumber.stop));if(1!==r&&2!==r)throw new Error("Invalid line number");return r},e.getSatNum=function(n){var r=n.substring(e.satNum.start,e.satNum.stop),t=r.split("")[0].toLowerCase();return isNaN(parseInt(t))?parseInt(t.charCodeAt(0)-96+9+r.slice(1,5)):parseInt(r)},e.getRawSatNum=function(n){return n.substring(e.satNum.start,e.satNum.stop)},e.getClassification=function(n){return n.substring(e.classification.start,e.classification.stop)},e.getIntlDes=function(n){return n.substring(e.intlDes.start,e.intlDes.stop).trim()},e.getIntlDesYear=function(n){return parseInt(n.substring(e.intlDesYear.start,e.intlDesYear.stop))},e.getIntlDesLaunchNum=function(n){return parseInt(n.substring(e.intlDesLaunchNum.start,e.intlDesLaunchNum.stop))},e.getIntlDesLaunchPiece=function(n){return n.substring(e.intlDesLaunchPiece.start,e.intlDesLaunchPiece.stop).trim()},e.getEpochYear=function(n){var r=parseInt(n.substring(e.epochYear.start,e.epochYear.stop));if(r<0||r>99)throw new Error("Invalid epoch year");return r},e.getEpochYearFull=function(n){var r=parseInt(n.substring(e.epochYear.start,e.epochYear.stop));if(r<0||r>99)throw new Error("Invalid epoch year");return r<57?r+2e3:r+1900},e.getEpochDay=function(n){var r=parseFloat(n.substring(e.epochDay.start,e.epochDay.stop));if(r<1||r>365.99999999)throw new Error("Invalid epoch day");return y.roundToNDecimalPlaces(r,8)},e.getMeanMoDev1=function(n){var r=parseFloat(n.substring(e.meanMoDev1.start,e.meanMoDev1.stop));if(isNaN(r))throw new Error("Invalid first derivative of mean motion.");return y.roundToNDecimalPlaces(r,8)},e.getMeanMoDev2=function(n){var r=parseFloat(n.substring(e.meanMoDev2.start,e.meanMoDev2.stop));if(isNaN(r))throw new Error("Invalid second derivative of mean motion.");return r},e.getBstar=function(n){var r=e.bstar.start+1,t=e.bstar.start+6,a=e.bstar.stop-1,o=n.substring(e.bstar.start,r),i=parseFloat("0.".concat(n.substring(r,t))),s=n.substring(t,a),c=parseInt(n.substring(a,e.bstar.stop));if("-"===s)c*=-1;else if("+"!==s)throw new Error("Invalid BSTAR symbol: ".concat(o));if(i*=Math.pow(10,c),"-"===o)i*=-1;else if("+"!==o&&" "!==o)throw new Error("Invalid BSTAR symbol: ".concat(o));return y.roundToNDecimalPlaces(i,14)},e.getEphemerisType=function(n){return parseInt(n.substring(e.ephemerisType.start,e.ephemerisType.stop))},e.getElsetNum=function(n){return parseInt(n.substring(e.elsetNum.start,e.elsetNum.stop))},e.getChecksum=function(n){return parseInt(n.substring(e.checksum.start,e.checksum.stop))},e.getInclination=function(n){var r=parseFloat(n.substring(e.inclination.start,e.inclination.stop));if(r<0||r>180)throw new Error("Invalid inclination: ".concat(r));return y.roundToNDecimalPlaces(r,4)},e.getRaan=function(n){var r=parseFloat(n.substring(e.raan.start,e.raan.stop));if(!(r>=0&&r<=360))throw new Error("Invalid RAAN: ".concat(r));return y.roundToNDecimalPlaces(r,4)},e.getEccentricity=function(n){var r=parseFloat("0.".concat(n.substring(e.eccentricity.start,e.eccentricity.stop)));if(!(r>=0&&r<=1))throw new Error("Invalid eccentricity: ".concat(r));return y.roundToNDecimalPlaces(r,7)},e.getArgOfPerigee=function(n){var r=parseFloat(n.substring(e.argPerigee.start,e.argPerigee.stop));if(!(r>=0&&r<=360))throw new Error("Invalid argument of perigee: ".concat(r));return y.roundToNDecimalPlaces(r,4)},e.getMeanAnomaly=function(n){var r=parseFloat(n.substring(e.meanAnom.start,e.meanAnom.stop));if(!(r>=0&&r<=360))throw new Error("Invalid mean anomaly: ".concat(r));return y.roundToNDecimalPlaces(r,4)},e.getMeanMotion=function(n){var r=parseFloat(n.substring(e.meanMo.start,e.meanMo.stop));if(!(r>=0&&r<=17))throw new Error("Invalid mean motion: ".concat(r));return y.roundToNDecimalPlaces(r,8)},e.getRevNum=function(n){return parseInt(n.substring(e.revNum.start,e.revNum.stop))},e.lineNumber=new v(1,1),e.satNum=new v(3,7),e.classification=new v(8,8),e.intlDes=new v(10,17),e.intlDesYear=new v(10,11),e.intlDesLaunchNum=new v(12,14),e.intlDesLaunchPiece=new v(15,17),e.epochYear=new v(19,20),e.epochDay=new v(21,32),e.meanMoDev1=new v(34,43),e.meanMoDev2=new v(45,52),e.bstar=new v(54,61),e.ephemerisType=new v(63,63),e.elsetNum=new v(65,68),e.checksum=new v(69,69),e.inclination=new v(9,16),e.raan=new v(18,25),e.eccentricity=new v(27,33),e.argPerigee=new v(35,42),e.meanAnom=new v(44,51),e.meanMo=new v(53,63),e.revNum=new v(64,68),e}(),w=function(){function e(e){this.type=e.type||a.UNKNOWN,this.name=e.name||"Unknown",this.position=e.position||{x:0,y:0,z:0},this.time=e.time||new Date}return e.prototype.getName=function(){return this.name},e.prototype.getType=function(){return this.type},e.prototype.getTypeString=function(){switch(this.type){case a.UNKNOWN:return"Unknown";case a.PAYLOAD:return"Payload";case a.ROCKET_BODY:return"Rocket Body";case a.DEBRIS:return"Debris";case a.SPECIAL:return"Special";case a.RADAR_MEASUREMENT:return"Radar Measurement";case a.RADAR_TRACK:return"Radar Track";case a.RADAR_OBJECT:return"Radar Object";case a.BALLISTIC_MISSILE:return"Ballistic Missile";case a.STAR:return"Star";case a.INTERGOVERNMENTAL_ORGANIZATION:return"Intergovernmental Organization";case a.SUBORBITAL_PAYLOAD_OPERATOR:return"Suborbital Payload Operator";case a.PAYLOAD_OWNER:return"Payload Owner";case a.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER:return"Meteorological Rocket Launch Agency or Manufacturer";case a.PAYLOAD_MANUFACTURER:return"Payload Manufacturer";case a.LAUNCH_AGENCY:return"Launch Agency";case a.LAUNCH_SITE:return"Launch Site";case a.LAUNCH_POSITION:return"Launch Position";case a.LAUNCH_FACILITY:return"Launch Facility";case a.CONTROL_FACILITY:return"Control Facility";case a.GROUND_SENSOR_STATION:return"Ground Sensor Station";case a.OPTICAL:return"Optical";case a.MECHANICAL:return"Mechanical";case a.PHASED_ARRAY_RADAR:return"Phased Array Radar";case a.OBSERVER:return"Observer";case a.BISTATIC_RADIO_TELESCOPE:return"Bistatic Radio Telescope";case a.COUNTRY:return"Country";case a.LAUNCH_VEHICLE_MANUFACTURER:return"Launch Vehicle Manufacturer";case a.ENGINE_MANUFACTURER:return"Engine Manufacturer";default:return"Unknown"}},e}(),T=(d=function(e,n){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},d(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}d(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),A=function(e){function n(n){var r=e.call(this,n)||this;return n.rcs&&(r.rcs=n.rcs),n.vmag&&(r.vmag=n.vmag),r}return T(n,e),n.prototype.getRcs=function(){return this.rcs},n.prototype.getVmag=function(){return this.vmag},n}(w),_=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},e(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=n}e(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),S=function(e){function n(n,r){var t=e.call(this,n)||this,a=x.parseTle(n.tle1,n.tle2);return t.satNum=a.satNum,t.intlDes=a.intlDes,t.epochYear=a.epochYear,t.epochDay=a.epochDay,t.meanMoDev1=a.meanMoDev1,t.meanMoDev2=a.meanMoDev2,t.bstar=a.bstar,t.inclination=a.inclination,t.raan=a.raan,t.eccentricity=a.eccentricity,t.argOfPerigee=a.argOfPerigee,t.meanAnomaly=a.meanAnomaly,t.meanMotion=a.meanMotion,t.period=1440/t.meanMotion,t.satrec=h.createSatrec(n.tle1,n.tle2),t.options=r,t}return _(n,e),n.prototype.propagateTo=function(e){var r=n.calculateTimeVariables(e,this.satrec).m,t=h.propagate(this.satrec,r).position||{x:0,y:0,z:0};return this.position=t,this.time=e,this},n.prototype.getStateVec=function(e){void 0===e&&(e=this.time);var r=n.calculateTimeVariables(e,this.satrec).m;return h.propagate(this.satrec,r)},n.prototype.getEci=function(e){void 0===e&&(e=this.time);var r=n.calculateTimeVariables(e,this.satrec).m;return h.propagate(this.satrec,r).position||{x:0,y:0,z:0}},n.prototype.getEcf=function(e){void 0===e&&(e=this.time);var r=n.calculateTimeVariables(e,this.satrec),t=r.m,a=r.gmst,o=h.propagate(this.satrec,t).position||{x:0,y:0,z:0};return f.eci2ecf(o,a)},n.prototype.getLla=function(e){void 0===e&&(e=this.time);var r=n.calculateTimeVariables(e,this.satrec),t=r.m,a=r.gmst,o=h.propagate(this.satrec,t).position||{x:0,y:0,z:0};return f.eci2lla(o,a)},n.prototype.getRae=function(e,r){void 0===r&&(r=this.time);var t=n.calculateTimeVariables(r,this.satrec),a=t.m,o=t.gmst,i=h.propagate(this.satrec,a).position||{x:0,y:0,z:0},s=f.eci2ecf(i,o);return f.ecf2rae({lat:e.lat,lon:e.lon,alt:e.alt},s)},n.calculateTimeVariables=function(e,n){var r=y.jday(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())+e.getUTCMilliseconds()*m;return{gmst:h.gstime(r),m:n?1440*(r-n.jdsatepoch):null,j:r}},n}(A),N=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},e(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=n}e(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),D=function(e){function n(n,r,t){var a=e.call(this,n,r)||this;return a.setLaunchDetails(t.launchDetails),a.setSpaceCraftDetails(t.spaceCraftDetails),a.setOperationsDetails(t.operationsDetails),a}return N(n,e),n.prototype.setLaunchDetails=function(e){e.launchDate&&(this.launchDate=e.launchDate),e.launchMass&&(this.launchMass=e.launchMass),e.launchSite&&(this.launchSite=e.launchSite),e.launchVehicle&&(this.launchVehicle=e.launchVehicle)},n.prototype.getLaunchDetails=function(){return{launchDate:this.launchDate,launchMass:this.launchMass,launchSite:this.launchSite,launchVehicle:this.launchVehicle}},n.prototype.setSpaceCraftDetails=function(e){e.lifetime&&(this.lifetime=e.lifetime),e.maneuver&&(this.maneuver=e.maneuver),e.manufacturer&&(this.manufacturer=e.manufacturer),e.motor&&(this.motor=e.motor),e.power&&(this.power=e.power),e.payload&&(this.payload=e.payload),e.purpose&&(this.purpose=e.purpose),e.shape&&(this.shape=e.shape),e.span&&(this.span=e.span),e.configuration&&(this.configuration=e.configuration),e.equipment&&(this.equipment=e.equipment),e.dryMass&&(this.dryMass=e.dryMass)},n.prototype.getSpaceCraftDetails=function(){return{lifetime:this.lifetime,maneuver:this.maneuver,manufacturer:this.manufacturer,motor:this.motor,power:this.power,payload:this.payload,purpose:this.purpose,shape:this.shape,span:this.span,configuration:this.configuration,equipment:this.equipment,dryMass:this.dryMass}},n.prototype.setOperationsDetails=function(e){e.user&&(this.user=e.user),e.mission&&(this.mission=e.mission),e.owner&&(this.owner=e.owner),e.country&&(this.country=e.country)},n.prototype.getOperationsDetails=function(){return{user:this.user,mission:this.mission,owner:this.owner,country:this.country}},n}(S),I=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},e(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=n}e(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),E=function(e){function n(n){var r=this;if(n.type)switch(n.type){case a.OPTICAL:case a.MECHANICAL:case a.PHASED_ARRAY_RADAR:case a.OBSERVER:case a.BISTATIC_RADIO_TELESCOPE:break;default:throw new Error("Invalid sensor type")}if(r=e.call(this,n)||this,!(n.lat>=-90&&n.lat<=90))throw new Error("Invalid latitude");if(r.lat=n.lat,!(n.lon>=-180&&n.lon<=180))throw new Error("Invalid longitude");if(r.lon=n.lon,!(n.alt>=0))throw new Error("Invalid altitude");return r.alt=n.alt,r}return I(n,e),n.prototype.setTime=function(e){return this.time=e,this},n.prototype.getRae=function(e,n){return void 0===n&&(n=this.time),e.getRae(this,n)},n}(w),R=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},e(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=n}e(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),C=function(e){function n(n){var r=this;if(n.type&&n.type!==a.STAR)throw new Error("Invalid object type");return n.type=a.STAR,(r=e.call(this,n)||this).ra=n.ra,r.dec=n.dec,n.pname&&(r.pname=n.pname),n.bf&&(r.bf=n.bf),n.h&&(r.h=n.h),r}return R(n,e),n.prototype.getEci=function(e,r){void 0===e&&(e={lat:180,lon:0,alt:0}),void 0===r&&(r=this.time);var t=this.getRae(e,r),a=n.calculateTimeVariables(r).gmst;return f.ecf2eci(f.rae2ecf(t,{lat:0,lon:0,alt:0}),a)},n.prototype.getRae=function(e,n){void 0===e&&(e={lat:180,lon:0,alt:0}),void 0===n&&(n=this.time);var r=y.SunMath.getStarAzEl(n,e.lat*s,e.lon*s,this.ra,this.dec);return{az:r.az,el:r.el,rng:25e4}},n.calculateTimeVariables=function(e){var n=y.jday(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())+e.getUTCMilliseconds()*m;return{gmst:h.gstime(n),j:n}},n}(A)}},n={};function r(t){if(n[t])return n[t].exports;var a=n[t]={exports:{}};return e[t](a,a.exports,r),a.exports}return r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(636)})()}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(n,{a:n}),n},__webpack_require__.d=(e,n)=>{for(var r in n)__webpack_require__.o(n,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var __webpack_exports__={};(()=>{"use strict";var e,n=__webpack_require__(32),r=__webpack_require__.n(n),t=__webpack_require__(991);!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PAYLOAD=1]="PAYLOAD",e[e.ROCKET_BODY=2]="ROCKET_BODY",e[e.DEBRIS=3]="DEBRIS",e[e.SPECIAL=4]="SPECIAL",e[e.RADAR_MEASUREMENT=5]="RADAR_MEASUREMENT",e[e.RADAR_TRACK=6]="RADAR_TRACK",e[e.RADAR_OBJECT=7]="RADAR_OBJECT",e[e.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",e[e.STAR=9]="STAR",e[e.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",e[e.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",e[e.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",e[e.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",e[e.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",e[e.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",e[e.LAUNCH_SITE=16]="LAUNCH_SITE",e[e.LAUNCH_POSITION=17]="LAUNCH_POSITION",e[e.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",e[e.CONTROL_FACILITY=19]="CONTROL_FACILITY",e[e.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",e[e.OPTICAL=21]="OPTICAL",e[e.MECHANICAL=22]="MECHANICAL",e[e.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",e[e.OBSERVER=24]="OBSERVER",e[e.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",e[e.COUNTRY=26]="COUNTRY",e[e.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",e[e.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER",e[e.NOTIONAL=29]="NOTIONAL"}(e||(e={}));const a=Math.PI,o=2*Math.PI,i=o/360,s=360/o,c=1.15741e-8,u=6371,l={lat:null,lon:0,alt:0},m={JMod:2400000.5,J2000:2451545,J1900:2415020,B1900:2415020.3135,B1950:2433282.4235,JulianYear:365.25,JulianCentury:36525,BesselianYear:365.2421988,AU:149597870,EclCoord:function(e,n,r){if(isNaN(e)||isNaN(n))throw Error("Invalid EclCoord object: ("+e+", "+n+")");this.lat=e,this.lng=n,void 0!==r&&(this.h=r)}};m.EclCoord.prototype={toWgs84String:function(){return m.Math.formatNum(180*this.lat/Math.PI)+", "+m.Math.formatNum(180*-this.lng/Math.PI)}},m.EclCoordfromWgs84=function(e,n,r){return new m.EclCoord(e*Math.PI/180,-n*Math.PI/180,r)},m.EqCoord=function(e,n){if(isNaN(e)||isNaN(n))throw Error("Invalid EqCoord object: ("+e+", "+n+")");this.ra=e,this.dec=n},m.EqCoord.prototype={toString:function(){return"ra:"+m.Math.formatNum(180*this.ra/Math.PI)+", dec:"+m.Math.formatNum(180*this.dec/Math.PI)}},m.HzCoord=function(e,n){if(isNaN(e)||isNaN(n))throw Error("Invalid HzCoord object: ("+e+", "+n+")");this.az=e,this.alt=n},m.HzCoord.prototype={toString:function(){return"azi:"+m.Math.formatNum(180*this.az/Math.PI)+", alt:"+m.Math.formatNum(180*this.alt/Math.PI)}},m.Coord={dmsToDeg:function(e,n,r,t){return t=(60*(60*n+r)+t)/3600,e?-t:t},calcAngle:function(e,n,r,t){return m.Coord.dmsToDeg(e,n,r,t)*Math.PI/180},calcRA:function(e,n,r){return m.Coord.dmsToDeg(!1,e,n,r)%24*15*Math.PI/180},secondsToHMSStr:function(e){var n=Math.floor(e/86400);e=m.Math.pMod(e,86400);var r=Math.floor(e/3600)%24,t=Math.floor(e/60)%60;return(0!==n?n+"d ":"")+(10>r?"0":"")+r+":"+(10>t?"0":"")+t+":"+(10>(e=Math.floor(e%60))?"0":"")+e},secondsToHMStr:function(e){var n=Math.floor(e/86400);e=m.Math.pMod(e,86400);var r=Math.floor(e/3600)%24;return(0!==n?n+"d ":"")+(10>r?"0":"")+r+":"+(10>(e=Math.floor(e/60)%60)?"0":"")+e},eqToEcl:function(e,n){var r=Math.sin(e.ra),t=Math.sin(e.dec),a=Math.cos(e.dec),o=Math.sin(n);return n=Math.cos(n),new m.EclCoord(Math.atan2(r*n+t/a*o,Math.cos(e.ra)),Math.asin(t*n-a*o*r))},eclToEq:function(e,n){var r=Math.sin(e.lat),t=Math.sin(e.lng),a=Math.cos(e.lng),o=Math.sin(n);n=Math.cos(n);let i=Math.atan2(r*n-t/a*o,Math.cos(e.lat));return 0>i&&(i+=2*Math.PI),new m.EqCoord(i,Math.asin(t*n+a*o*r))},eqToHz:function(e,n,r){r=r-n.lng-e.ra;var t=Math.cos(r),a=Math.sin(n.lat);n=Math.cos(n.lat);var o=Math.sin(e.dec);return e=Math.cos(e.dec),new m.HzCoord(Math.atan2(Math.sin(r),t*a-o/e*n),Math.asin(a*o+n*e*t))}},m.DeltaT={jdToJde:function(e,n){return n||(n=m.DeltaT.estimate(e)),e+n/86400},jdeToJd:function(e,n){return n||(n=m.DeltaT.estimate(e)),e-n/86400},decimalYear:function(e){return(e=m.JulianDay.jdToCalendar(e)).y+(e.m-.5)/12},estimate:function(e){var n=m.DeltaT.decimalYear(e);return e=Math.pow,-500>n?32*e((n-1820)/100,2)-20:500>n?10583.6-1014.41*(n/=100)+33.78311*e(n,2)-5.952053*e(n,3)-.1798452*e(n,4)+.022174192*e(n,5)+.0090316521*e(n,6):1600>n?1574.2-556.01*(n=(n-1e3)/100)+71.23472*e(n,2)+.319781*e(n,3)-.8503463*e(n,4)-.005050998*e(n,5)+.0083572073*e(n,6):1700>n?120-.9808*(n-=1600)-.01532*e(n,2)+e(n,3)/7129:1800>n?8.83+.1603*(n-=1700)-.0059285*e(n,2)+13336e-8*e(n,3)-e(n,4)/1174e3:1860>n?13.72-.332447*(n-=1800)+.0068612*e(n,2)+.0041116*e(n,3)-37436e-8*e(n,4)+121272e-10*e(n,5)-1.699e-7*e(n,6)+8.75e-10*e(n,7):1900>n?7.62+.5737*(n-=1860)-.251754*e(n,2)+.01680668*e(n,3)-.0004473624*e(n,4)+e(n,5)/233174:1920>n?1.494119*(n-=1900)-2.79-.0598939*e(n,2)+.0061966*e(n,3)-197e-6*e(n,4):1941>n?21.2+.84493*(n-=1920)-.0761*e(n,2)+.0020936*e(n,3):1961>n?29.07+.407*(n-=1950)-e(n,2)/233+e(n,3)/2547:1986>n?45.45+1.067*(n-=1975)-e(n,2)/260-e(n,3)/718:2005>n?63.86+.3345*(n-=2e3)-.060374*e(n,2)+.0017275*e(n,3)+651814e-9*e(n,4)+2373599e-11*e(n,5):2050>n?62.92+.32217*(n-=2e3)+.005589*e(n,2):2150>n?32*e((n-1820)/100,2)-20-.5628*(2150-n):32*e((n-1820)/100,2)-20}},m.Globe={Er:6378.14,Fl:1/298.257,parallaxConstants:function(e,n){n||(n=0);var r=1-m.Globe.Fl;return n=.001*n/m.Globe.Er,{rhoslat:Math.sin(Math.atan(r*Math.tan(e)))*r+n*Math.sin(e),rhoclat:Math.cos(Math.atan(r*Math.tan(e)))+n*Math.cos(e)}}},m.Interp={newLen3:function(e,n,r){if(3!=r.length)throw"Error not 3";if(n==e)throw"Error no x range";var t=r[1]-r[0],a=r[2]-r[1];return{x1:e,x3:n,y:r,a:t,b:a,c:a-t,abSum:t+a,xSum:n+e,xDiff:n-e}},interpolateX:function(e,n){return m.Interp.interpolateN(e,(2*n-e.xSum)/e.xDiff)},interpolateN:function(e,n){return e.y[1]+.5*n*(e.abSum+n*e.c)}},m.JulianDay=function(e,n){e instanceof Date&&(e=m.JulianDay.dateToJD(e)),this.jd=e,this.deltaT=n||m.DeltaT.estimate(this.jd),this.jde=m.DeltaT.jdToJde(this.jd,this.deltaT)},m.JulianDay.prototype={toCalendar:function(){return m.JulianDay.jdToCalendar(this.jd)},toDate:function(){return m.JulianDay.jdToDate(this.jd)},jdJ2000Century:function(){return(this.jd-m.J2000)/m.JulianCentury},jdeJ2000Century:function(){return(this.jde-m.J2000)/m.JulianCentury},startOfDay:function(){return new m.JulianDay(Math.floor(this.jde-.5)+.5,this.deltaT)}},m.JulianDay.gregorianTimeStart=Date.UTC(1582,9,4),m.JulianDay.jdFromGregorian=function(e,n,r){return new m.JulianDay(m.JulianDay.jdFromGregorian(e,n,r))},m.JulianDay.jdFromJulian=function(e,n,r){return new m.JulianDay(m.JulianDay.calendarJulianToJD(e,n,r))},m.JulianDay.jdFromJDE=function(e){var n=m.DeltaT.estimate(e);return e=m.DeltaT.jdeToJd(e,n),new m.JulianDay(e,n)},m.JulianDay.dateToJD=function(e){var n=e.getUTCDate()+m.JulianDay.secondsFromHMS(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())/86400;return e.getTime()<m.JulianDay.gregorianTimeStart?m.JulianDay.calendarJulianToJD(e.getUTCFullYear(),e.getUTCMonth()+1,n):m.JulianDay.calendarGregorianToJD(e.getUTCFullYear(),e.getUTCMonth()+1,n)},m.JulianDay.calendarGregorianToJD=function(e,n,r){1!=n&&2!=n||(e--,n+=12);var t=Math.floor(e/100);return Math.floor(36525*(e+4716)/100)+Math.floor(306*(n+1)/10)+(2-t+Math.floor(t/4))+r-1524.5},m.JulianDay.calendarJulianToJD=function(e,n,r){return 1!=n&&2!=n||(e--,n+=12),Math.floor(36525*(e+4716)/100)+Math.floor(306*(n+1)/10)+r-1524.5},m.JulianDay.secondsFromHMS=function(e,n,r){return 3600*e+60*n+r},m.JulianDay.jdToDate=function(e){var n=m.JulianDay.jdToCalendar(e);return e=m.Math.modF(e+.5)[1],e=Math.round(86400*e),new Date(Date.UTC(n.y,n.m-1,Math.floor(n.d),Math.floor(e/3600)%24,Math.floor(e/60)%60,Math.floor(e%60)))},m.JulianDay.jdToCalendar=function(e){var n=(e=m.Math.modF(e+.5))[0],r=n;2299151<=n&&(r=n+1+(r=Math.floor((100*n-186721625)/3652425))-Math.floor(r/4));var t=r+1524;n=Math.floor((100*t-12210)/36525);var a=Math.floor(36525*n/100);return r=Math.floor(1e4*(t-a)/306001),e=t-a-Math.floor(306001*r/1e4)+e[1],{y:1==(r=14==r||15==r?r-13:r-1)||2==r?Math.floor(n)-4715:Math.floor(n)-4716,m:r,d:e}},m.JulianDay.leapYearGregorian=function(e){return 0==e%4&&0!=e%100||0==e%400},m.JulianDay.dayOfYear=function(e,n,r,t){return e=2,t&&e--,m.JulianDay._wholeMonths(n,e)+r},m.JulianDay._wholeMonths=function(e,n){return Math.round(275*e/9-(e+9)/12*n-30)},m.Math={pMod:function(e,n){return 0>(e%=n)&&(e+=n),e},modF:function(e){return 0>e?(e=-e,[-Math.floor(e),-e%1]):[Math.floor(e),e%1]},horner:function(e,n){var r=n.length-1;if(0>=r)throw"empty array not supported";for(var t=n[r];0<r;)t=t*e+n[--r];return t},formatNum:function(e,n){return n=Math.pow(10,4|n),Math.round(e*n)/n}},m.Moon={parallax:function(e){return Math.asin(6378.14/e)},apparentEquatorial:function(e){var n=m.Moon.geocentricPosition(e),r=m.Nutation.nutation(e);return e=m.Nutation.meanObliquityLaskar(e)+r.deltaobliquity,{eq:m.Coord.eclToEq(new m.EclCoord(n.lng+r.deltalng,n.lat),e),delta:n.delta}},apparentTopocentric:function(e,n,r){var t=m.Moon.apparentEquatorial(e),a=m.Globe.parallaxConstants(n.lat,n.h),o=m.Moon.parallax(t.delta);return r||(r=m.Sidereal.apparentInRa(e)),{eq:m.Parallax.topocentric(t.eq,o,a.rhoslat,a.rhoclat,n.lng,r),delta:t.delta}},topocentricPosition:function(e,n,r){var t=m.Sidereal.apparentInRa(e);e=m.Moon.apparentTopocentric(e,n,t);var a=m.Coord.eqToHz(e.eq,n,t);return!0===r&&(a.alt+=m.Refraction.bennett2(a.alt)),n=m.Moon.parallacticAngle(n.lat,t-(n.lng+e.eq.ra),e.eq.dec),{hz:a,eq:e.eq,delta:e.delta,q:n}},approxTransit:function(e,n){return e=e.startOfDay(),m.Rise.approxTransit(n,m.Sidereal.apparent0UT(e),m.Moon.apparentTopocentric(e,n).eq)},approxTimes:function(e,n){e=e.startOfDay();var r=m.Moon.apparentTopocentric(e,n),t=m.Moon.parallax(r.delta);return t=m.Rise.stdh0Lunar(t),e=m.Sidereal.apparent0UT(e),m.Rise.approxTimes(n,t,e,r.eq)},times:function(e,n){e=e.startOfDay();var r=m.Moon.apparentTopocentric(new m.JulianDay(e.jd-1,e.deltaT),n),t=m.Moon.apparentTopocentric(e,n),a=m.Moon.apparentTopocentric(new m.JulianDay(e.jd+1,e.deltaT),n),o=m.Moon.parallax(t.delta);o=m.Rise.stdh0Lunar(o);var i=m.Sidereal.apparent0UT(e);return m.Rise.times(n,e.deltaT,o,i,[r.eq,t.eq,a.eq])},parallacticAngle:function(e,n,r){return Math.atan2(Math.sin(n),Math.tan(e)*Math.cos(r)-Math.sin(r)*Math.cos(n))},geocentricPosition:function(e){var n=Math.PI/180,r=e.jdeJ2000Century();e=m.Math.pMod(m.Math.horner(r,[218.3164477*n,481267.88123421*n,-.0015786*n,n/538841,-n/65194e3]),2*Math.PI);var t=m.Math.pMod(m.Math.horner(r,[297.8501921*n,445267.1114034*n,-.0018819*n,n/545868,-n/113065e3]),2*Math.PI),a=m.Math.pMod(m.Math.horner(r,[357.5291092*n,35999.0502909*n,-1535e-7*n,n/2449e4]),2*Math.PI),o=m.Math.pMod(m.Math.horner(r,[134.9633964*n,477198.8675055*n,.0087414*n,n/69699,-n/14712e3]),2*Math.PI),i=m.Math.pMod(m.Math.horner(r,[93.272095*n,483202.0175233*n,-.0036539*n,-n/3526e3,n/86331e4]),2*Math.PI),s=119.75*n+131.849*n*r,c=53.09*n+479264.29*n*r,u=313.45*n+481266.484*n*r,l=(r=m.Math.horner(r,[1,-.002516,-74e-7]))*r;c=3958*Math.sin(s)+1962*Math.sin(e-i)+318*Math.sin(c);var h=0;for(s=-2235*Math.sin(e)+382*Math.sin(u)+175*Math.sin(s-i)+175*Math.sin(s+i)+127*Math.sin(e-o)-115*Math.sin(e+o),u=0;u<m.Moon.ta.length;u++){var f=m.Moon.ta[u],d=t*f[0]+a*f[1]+o*f[2]+i*f[3],p=Math.sin(d);switch(d=Math.cos(d),f[1]){case 0:c+=f[4]*p,h+=f[5]*d;break;case 1:case-1:c+=f[4]*p*r,h+=f[5]*d*r;break;case 2:case-2:c+=f[4]*p*l,h+=f[5]*d*l;break;default:throw"error"}}for(u=0;u<m.Moon.tb.length;u++)switch(f=m.Moon.tb[u],p=Math.sin(t*f[0]+a*f[1]+o*f[2]+i*f[3]),f[1]){case 0:s+=f[4]*p;break;case 1:case-1:s+=f[4]*p*r;break;case 2:case-2:s+=f[4]*p*l;break;default:throw"error"}return{lng:m.Math.pMod(e,2*Math.PI)+1e-6*c*n,lat:1e-6*s*n,delta:385000.56+.001*h}},ta:[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],tb:[[0,0,0,1,5128122],[0,0,1,1,280602],[0,0,1,-1,277693],[2,0,0,-1,173237],[2,0,-1,1,55413],[2,0,-1,-1,46271],[2,0,0,1,32573],[0,0,2,1,17198],[2,0,1,-1,9266],[0,0,2,-1,8822],[2,-1,0,-1,8216],[2,0,-2,-1,4324],[2,0,1,1,4200],[2,1,0,-1,-3359],[2,-1,-1,1,2463],[2,-1,0,1,2211],[2,-1,-1,-1,2065],[0,1,-1,-1,-1870],[4,0,-1,-1,1828],[0,1,0,1,-1794],[0,0,0,3,-1749],[0,1,-1,1,-1565],[1,0,0,1,-1491],[0,1,1,1,-1475],[0,1,1,-1,-1410],[0,1,0,-1,-1344],[1,0,0,-1,-1335],[0,0,3,1,1107],[4,0,0,-1,1021],[4,0,-1,1,833],[0,0,1,-3,777],[4,0,-2,1,671],[2,0,0,-3,607],[2,0,2,-1,596],[2,-1,1,-1,491],[2,0,-2,1,-451],[0,0,3,-1,439],[2,0,2,1,422],[2,0,-3,-1,421],[2,1,-1,1,-366],[2,1,0,1,-351],[4,0,0,1,331],[2,-1,1,1,315],[2,-2,0,-1,302],[0,0,1,3,-283],[2,1,1,-1,-229],[1,1,0,-1,223],[1,1,0,1,223],[0,1,-2,-1,-220],[2,1,-1,-1,-220],[1,0,1,1,-185],[2,-1,-2,-1,181],[0,1,2,1,-177],[4,0,-2,-1,176],[4,-1,-1,-1,166],[1,0,1,-1,-164],[4,0,1,-1,132],[1,0,-1,-1,-119],[4,-1,0,-1,115],[2,-2,0,1,107]]},m.MoonIllum={phaseAngleEq:function(e,n,r,t){return e=m.MoonIllum._coselong(e,r),Math.atan2(t*Math.sin(Math.acos(e)),n-t*e)},phaseAngleEq2:function(e,n){return Math.acos(-m.MoonIllum._coselong(e,n))},illuminated:function(e){return(1+Math.cos(e))/2},positionAngle:function(e,n){var r=Math.cos(n.dec);return Math.atan2(r*Math.sin(n.ra-e.ra),Math.sin(n.dec)*Math.cos(e.dec)-r*Math.sin(e.dec)*Math.cos(n.ra-e.ra))},_coselong:function(e,n){return Math.sin(n.dec)*Math.sin(e.dec)+Math.cos(n.dec)*Math.cos(e.dec)*Math.cos(n.ra-e.ra)}},m.Nutation={nutation:function(e){e=e.jdeJ2000Century();for(var n=m.Math.horner(e,[297.85036,445267.11148,-.0019142,1/189474])*Math.PI/180,r=m.Math.horner(e,[357.52772,35999.05034,-1603e-7,-1/3e5])*Math.PI/180,t=m.Math.horner(e,[134.96298,477198.867398,.0086972,1/5620])*Math.PI/180,a=m.Math.horner(e,[93.27191,483202.017538,-.0036825,1/327270])*Math.PI/180,o=m.Math.horner(e,[125.04452,-1934.136261,.0020708,1/45e4])*Math.PI/180,i=0,s=0,c=m.Nutation.table22A.length-1;0<=c;c--){var u=m.Nutation.table22A[c],l=u[0]*n+u[1]*r+u[2]*t+u[3]*a+u[4]*o,h=Math.cos(l);i+=Math.sin(l)*(u[5]+u[6]*e),s+=h*(u[7]+u[8]*e)}return{deltalng:1e-4/3600*i*(Math.PI/180),deltaobliquity:1e-4/3600*s*(Math.PI/180)}},nutationInRA:function(e){var n=m.Nutation.meanObliquityLaskar(e);return(e=m.Nutation.nutation(e)).deltalng*Math.cos(n+e.deltaobliquity)},trueObliquity:function(e){return m.Nutation.meanObliquityLaskar(e)+(e=m.Nutation.nutation(e)).deltaobliquity},meanObliquity:function(e){return m.Math.horner(e.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-46.815/3600*(Math.PI/180),-59e-5/3600*(Math.PI/180),.001813/3600*(Math.PI/180)])},meanObliquityLaskar:function(e){return m.Math.horner(.01*e.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-4680.93/3600*(Math.PI/180),-1.55/3600*(Math.PI/180),1999.25/3600*(Math.PI/180),-51.38/3600*(Math.PI/180),-249.67/3600*(Math.PI/180),-39.05/3600*(Math.PI/180),7.12/3600*(Math.PI/180),27.87/3600*(Math.PI/180),5.79/3600*(Math.PI/180),2.45/3600*(Math.PI/180)])},table22A:[[0,0,0,0,1,-171996,-174.2,92025,8.9],[-2,0,0,2,2,-13187,-1.6,5736,-3.1],[0,0,0,2,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[0,0,1,0,0,712,.1,-7,0],[-2,1,0,2,2,-517,1.2,224,-.6],[0,0,0,2,1,-386,-.4,200,0],[0,0,1,2,2,-301,0,129,-.1],[-2,-1,0,2,2,217,-.5,-95,.3],[-2,0,1,0,0,-158,0,0,0],[-2,0,0,2,1,129,.1,-70,0],[0,0,-1,2,2,123,0,-53,0],[2,0,0,0,0,63,0,0,0],[0,0,1,0,1,63,.1,-33,0],[2,0,-1,2,2,-59,0,26,0],[0,0,-1,0,1,-58,-.1,32,0],[0,0,1,2,1,-51,0,27,0],[-2,0,2,0,0,48,0,0,0],[0,0,-2,2,1,46,0,-24,0],[2,0,0,2,2,-38,0,16,0],[0,0,2,2,2,-31,0,13,0],[0,0,2,0,0,29,0,0,0],[-2,0,1,2,2,29,0,-12,0],[0,0,0,2,0,26,0,0,0],[-2,0,0,2,0,-22,0,0,0],[0,0,-1,2,1,21,0,-10,0],[0,2,0,0,0,17,-.1,0,0],[2,0,-1,0,1,16,0,-8,0],[-2,2,0,2,2,-16,.1,7,0],[0,1,0,0,1,-15,0,9,0],[-2,0,1,0,1,-13,0,7,0],[0,-1,0,0,1,-12,0,6,0],[0,0,2,-2,0,11,0,0,0],[2,0,-1,2,1,-10,0,5,0],[2,0,1,2,2,-8,0,3,0],[0,1,0,2,2,7,0,-3,0],[-2,1,1,0,0,-7,0,0,0],[0,-1,0,2,2,-7,0,3,0],[2,0,0,2,1,-7,0,3,0],[2,0,1,0,0,6,0,0,0],[-2,0,2,2,2,6,0,-3,0],[-2,0,1,2,1,6,0,-3,0],[2,0,-2,0,1,-6,0,3,0],[2,0,0,0,1,-6,0,3,0],[0,-1,1,0,0,5,0,0,0],[-2,-1,0,2,1,-5,0,3,0],[-2,0,0,0,1,-5,0,3,0],[0,0,2,2,1,-5,0,3,0],[-2,0,2,0,1,4,0,0,0],[-2,1,0,2,1,4,0,0,0],[0,0,1,-2,0,4,0,0,0],[-1,0,1,0,0,-4,0,0,0],[-2,1,0,0,0,-4,0,0,0],[1,0,0,0,0,-4,0,0,0],[0,0,1,2,0,3,0,0,0],[0,0,-2,2,2,-3,0,0,0],[-1,-1,1,0,0,-3,0,0,0],[0,1,1,0,0,-3,0,0,0],[0,-1,1,2,2,-3,0,0,0],[2,-1,-1,2,2,-3,0,0,0],[0,0,3,2,2,-3,0,0,0],[2,-1,0,2,2,-3,0,0,0]]},m.Parallax={earthsunParallax:8.794/60/60*Math.PI/180,horizontal:function(e){return 8.794/60/60*Math.PI/180/e},topocentric:function(e,n,r,t,a,o){a=m.Math.pMod(o-a-e.ra,2*Math.PI),n=Math.sin(n),o=Math.cos(a);var i=Math.cos(e.dec);return a=Math.atan2(-t*n*Math.sin(a),i-t*n*o),new m.EqCoord(e.ra+a,Math.atan2((Math.sin(e.dec)-r*n)*Math.cos(a),i-t*n*o))},topocentric2:function(e,n,r,t,a,o){return a=m.Math.pMod(o-a-e.ra,2*Math.PI),o=Math.cos(e.dec),new m.EqCoord(e.ra+-n*t*Math.sin(a)/o,e.dec+-n*(r*o-t*Math.cos(a)*Math.sin(e.dec)))}},m.Refraction={bennett:function(e){0>e&&(e=0);var n=Math.PI/180;return n/60/Math.tan(e+7.31*n*n/(e+4.4*n))},bennett2:function(e){var n=Math.PI/180,r=60/n,t=.06/r;return r=14.7*r*n,n*=13,(e=m.Refraction.bennett(e))-t*Math.sin(r*e+n)},saemundsson:function(e){var n=Math.PI/180;return 1.02*n/60/Math.tan(e+10.3*n*n/(e+5.11*n))}},m.Rise={meanRefraction:.5667*Math.PI/180,stdh0Stellar:-.5667*Math.PI/180,stdh0Solar:-.8333*Math.PI/180,stdh0LunarMean:.125*Math.PI/180,stdh0Lunar:function(e){return.7275*e-m.Rise.meanRefraction},circumpolar:function(e,n,r){return-1>(e=(Math.sin(n)-Math.sin(e)*Math.sin(r))/(Math.cos(e)*Math.cos(r)))||1<e?null:e},approxTransit:function(e,n,r){return 43200*(r.ra+e.lng)/Math.PI-n},approxTimes:function(e,n,r,t){return(n=m.Rise.circumpolar(e.lat,n,t.dec))?(n=43200*Math.acos(n)/Math.PI,e=43200*(t.ra+e.lng)/Math.PI-r,{transit:m.Math.pMod(e,86400),transitd:Math.floor(e/86400),rise:m.Math.pMod(e-n,86400),rised:Math.floor((e-n)/86400),set:m.Math.pMod(e+n,86400),setd:Math.floor((e+n)/86400)}):null},times:function(e,n,r,t,a){function o(a){var o=m.Math.pMod(t+360.985647*a/360,86400),i=a+n,u=m.Interp.interpolateX(s,i);return i=m.Interp.interpolateX(c,i),o=o*Math.PI/43200-(e.lng+u),u=Math.cos(i),m.Math.pMod(a+(l*Math.sin(i)+h*u*Math.cos(o)-r)/(u*h*Math.sin(o))*43200/Math.PI,86400)}var i=m.Rise.approxTimes(e,r,t,a[1]);if(!i)return null;var s=m.Interp.newLen3(-86400,86400,[a[0].ra,a[1].ra,a[2].ra]),c=m.Interp.newLen3(-86400,86400,[a[0].dec,a[1].dec,a[2].dec]);a=t+360.985647*i.transit/360;var u=m.Interp.interpolateX(s,i.transit+n);i.transit=m.Math.pMod(i.transit-(a-43200*(e.lng+u)/Math.PI),86400);var l=Math.sin(e.lat),h=Math.cos(e.lat);return i.rise=o(i.rise),i.set=o(i.set),i}},m.Sidereal={iau82:[24110.54841,8640184.812866,.093104,62e-7],jdToCFrac:function(e){return e=m.Math.modF(e.jd+.5),[new m.JulianDay(e[0]-.5).jdJ2000Century(),e[1]]},mean:function(e){return m.Math.pMod(m.Sidereal._mean(e),86400)},_mean:function(e){return(e=m.Sidereal._mean0UT(e)).s+86636.55536784*e.f},_meanInRA:function(e){return(e=m.Sidereal._mean0UT(e)).s*Math.PI/43200+2.0054758187*e.f*Math.PI},mean0UT:function(e){return e=m.Sidereal._mean0UT(e),m.Math.pMod(e.s,86400)},_mean0UT:function(e){return e=m.Sidereal.jdToCFrac(e),{s:m.Math.horner(e[0],m.Sidereal.iau82),f:e[1]}},apparentInRa:function(e){var n=m.Sidereal._meanInRA(e);return e=m.Nutation.nutationInRA(e),m.Math.pMod(n+e,2*Math.PI)},apparent:function(e){var n=m.Sidereal._mean(e);return e=648e3*m.Nutation.nutationInRA(e)/Math.PI/15,m.Math.pMod(n+e,86400)},apparentLocal:function(e,n){return e=m.Sidereal.apparent(e),m.Math.pMod(e-43200*n/Math.PI,86400)},apparent0UT:function(e){var n=m.Math.modF(e.jd+.5);return e=m.Math.modF(e.jde+.5),n=m.Math.horner((n[0]-.5-m.J2000)/36525,m.Sidereal.iau82)+86636.55536784*n[1],e=648e3*m.Nutation.nutationInRA(new m.JulianDay(e[0]))/Math.PI/15,m.Math.pMod(n+e,86400)}},m.Solar={earthsunDelta:149597870,apparentEquatorial:function(e){var n=e.jdJ2000Century(),r=m.Solar.node(n);return n=m.Solar.apparentLongitude(n,r),e=m.Nutation.meanObliquityLaskar(e)+.00256*Math.PI/180*Math.cos(r),r=Math.sin(n),new m.EqCoord(Math.atan2(Math.cos(e)*r,Math.cos(n)),Math.asin(Math.sin(e)*r))},apparentTopocentric:function(e,n,r){var t=m.Solar.apparentEquatorial(e),a=m.Globe.parallaxConstants(n.lat,n.h);return r||(r=m.Sidereal.apparentInRa(e)),m.Parallax.topocentric2(t,m.Parallax.earthsunParallax,a.rhoslat,a.rhoclat,n.lng,r)},topocentricPosition:function(e,n,r){var t=m.Sidereal.apparentInRa(e);return e=m.Solar.apparentTopocentric(e,n,t),n=m.Coord.eqToHz(e,n,t),!0===r&&(n.alt+=m.Refraction.bennett2(n.alt)),{hz:n,eq:e}},approxTransit:function(e,n){return e=e.startOfDay(),m.Rise.approxTransit(n,m.Sidereal.apparent0UT(e),m.Solar.apparentTopocentric(e,n))},approxTimes:function(e,n){var r=e.startOfDay();e=m.Solar.apparentTopocentric(r,n);var t=m.Rise.stdh0Solar;return r=m.Sidereal.apparent0UT(r),m.Rise.approxTimes(n,t,r,e)},times:function(e,n){e=e.startOfDay();var r=m.Solar.apparentTopocentric(new m.JulianDay(e.jd-1,e.deltaT),n),t=m.Solar.apparentTopocentric(e,n),a=m.Solar.apparentTopocentric(new m.JulianDay(e.jd+1,e.deltaT),n),o=m.Rise.stdh0Solar,i=m.Sidereal.apparent0UT(e);return m.Rise.times(n,e.deltaT,o,i,[r,t,a])},meanAnomaly:function(e){return m.Math.horner(e,[357.52911,35999.05029,-1537e-7])*Math.PI/180},trueLongitude:function(e){var n=m.Math.horner(e,[280.46646,36000.76983,3032e-7])*Math.PI/180,r=m.Solar.meanAnomaly(e);return e=(m.Math.horner(e,[1.914602,-.004817,-14e-6])*Math.sin(r)+(.019993-101e-6*e)*Math.sin(2*r)+289e-6*Math.sin(3*r))*Math.PI/180,{s:m.Math.pMod(n+e,2*Math.PI),v:m.Math.pMod(r+e,2*Math.PI)}},apparentLongitude:function(e,n){return n||(n=m.Solar.node(e)),m.Solar.trueLongitude(e).s-.00569*Math.PI/180-.00478*Math.PI/180*Math.sin(n)},node:function(e){return(125.04-1934.136*e)*Math.PI/180}},m.Solistice={march:function(e){return 1e3>e?m.Solistice._eq(e,m.Solistice.mc0):m.Solistice._eq(e-2e3,m.Solistice.mc2)},june:function(e){return 1e3>e?m.Solistice._eq(e,m.Solistice.jc0):m.Solistice._eq(e-2e3,m.Solistice.jc2)},september:function(e){return 1e3>e?m.Solistice._eq(e,m.Solistice.sc0):m.Solistice._eq(e-2e3,m.Solistice.sc2)},december:function(e){return 1e3>e?m.Solistice._eq(e,m.Solistice.dc0):m.Solistice._eq(e-2e3,m.Solistice.dc2)},_eq:function(e,n){n=((e=m.Math.horner(.001*e,n))-m.J2000)/m.JulianCentury;var r=35999.373*Math.PI/180*n-2.47*Math.PI/180;r=1+.0334*Math.cos(r)+7e-4*Math.cos(2*r);for(var t=0,a=this.terms.length-1;0<=a;a--){var o=this.terms[a];t+=o[0]*Math.cos((o[1]+o[2]*n)*Math.PI/180)}return e+1e-5*t/r},mc0:[1721139.29189,365242.1374,.06134,.00111,-71e-5],jc0:[1721233.25401,365241.72562,-.05232,.00907,25e-5],sc0:[1721325.70455,365242.49558,-.11677,-.00297,74e-5],dc0:[1721414.39987,365242.88257,-.00769,-.00933,-6e-5],mc2:[2451623.80984,365242.37404,.05169,-.00411,-57e-5],jc2:[2451716.56767,365241.62603,.00325,.00888,-3e-4],sc2:[2451810.21715,365242.01767,-.11575,.00337,78e-5],dc2:[2451900.05952,365242.74049,-.06223,-.00823,32e-5],terms:[[485,324.96,1934.136],[203,337.23,32964.467],[199,342.08,20.186],[182,27.85,445267.112],[156,73.14,45036.886],[136,171.52,22518.443],[77,222.54,65928.934],[74,296.72,3034.906],[70,243.58,9037.513],[58,119.81,33718.147],[52,297.17,150.678],[50,21.02,2281.226],[45,247.54,29929.562],[44,325.15,31555.956],[29,60.93,4443.417],[18,155.12,67555.328],[17,288.79,4562.452],[16,198.04,62894.029],[14,199.76,31436.921],[12,95.39,14577.848],[12,287.11,31931.756],[12,320.81,34777.259],[9,227.73,1222.114],[8,15.45,16859.074]]},__webpack_require__(90);const h=(e,n,r,t,a,o)=>{if(e)return 367*e-Math.floor(7*(e+Math.floor((n+9)/12))*.25)+Math.floor(275*n/9)+r+1721013.5+((o/60+a)/60+t)/24;{const e=new Date,n=new Date(e.getUTCFullYear(),0,0),r=e.getDate()-n.getDate();return Math.floor(r/c)}},f=(e,n,r,a,o,s)=>{const c={lat:a,lon:o,alt:s},u=t.Transforms.lla2ecf(c),l=Math.sin(a),m=Math.sin(o),h=Math.cos(a),f=Math.cos(o),d=i*e,p=i*n,M=-r*Math.cos(p)*Math.cos(d),g=r*Math.cos(p)*Math.sin(d),y=r*Math.sin(p);return{x:l*f*M+-m*g+h*f*y+u.x,y:l*m*M+f*g+h*m*y+u.y,z:-h*M+l*y+u.z}},d=(e,n)=>{const r=e.az*s,t=e.el*s,a=e.rng;if(n.obsminaz>n.obsmaxaz){if((r>=n.obsminaz||r<=n.obsmaxaz)&&t>=n.obsminel&&t<=n.obsmaxel&&a<=n.obsmaxrange&&a>=n.obsminrange||(r>=n.obsminaz2||r<=n.obsmaxaz2)&&t>=n.obsminel2&&t<=n.obsmaxel2&&a<=n.obsmaxrange2&&a>=n.obsminrange2)return 1}else if(r>=n.obsminaz&&r<=n.obsmaxaz&&t>=n.obsminel&&t<=n.obsmaxel&&a<=n.obsmaxrange&&a>=n.obsminrange||r>=n.obsminaz2&&r<=n.obsmaxaz2&&t>=n.obsminel2&&t<=n.obsmaxel2&&a<=n.obsmaxrange2&&a>=n.obsminrange2)return 1;return 0},p=(e,n,r)=>({lon:n,lat:e,alt:r}),M=(e,n)=>e.el*s>0&&90-e.el*s<n,g=(n,r)=>n.length>1&&r.type===e.OPTICAL||n.length>1&&r.type===e.OBSERVER||n.length>1&&r.type===e.MECHANICAL,y=(e,n,r)=>(e[3*n]=r.x,e[3*n+1]=r.y,e[3*n+2]=r.z,e),v=(e,n)=>(e[3*n]=0,e[3*n+1]=0,e[3*n+2]=0,e),b=(e,n)=>(e[3*n]=0,e[3*n+1]=0,e[3*n+2]=0,e);var x;const w=t.Utils.SunMath,T=new Float32Array(0),A=new Int8Array(0);let _,S=[],N=T,D=T,I=A,E=A,R=[0],C=[-1],O=!1,P=1e3,L=1,z=!1,j=1,k=Date.now(),U=0,q=1,F=90,Y=!1,G=!1,J=!1,V=!1,H=!1,B=!1,X=!1,Q=!1,Z=!1,W=!1,K=0,$=[],ee={observerGd:{lat:null,lon:0,alt:0},alt:null,country:"",lat:null,lon:null,name:"",obsmaxaz:0,obsmaxel:0,obsmaxrange:0,obsminaz:0,obsminel:0,obsminrange:0,shortName:"",staticNum:0,sun:"",volume:!1,zoom:""};const ne="undefined"!=typeof process&&(null===(x=null===process||void 0===process?void 0:process.release)||void 0===x?void 0:x.name);try{onmessage=e=>re(e)}catch(e){if(!process)throw e}const re=e=>{let n,r,a,s=[];switch(e.data.typ){case"offset":return U=e.data.staticOffset,k=e.data.dynamicOffsetEpoch,q=e.data.propRate,O=!0,void(j=1);case"satdata":for(n=JSON.parse(e.data.dat),_=n.length,r=0;r<_;){const e={lowAlt:null,inclination:null,eccentricity:null,raan:null,argPe:null,meanMotion:null,semiMajorAxis:null,semiMinorAxis:null,apogee:null,perigee:null,period:null};a=null,n[r].static||n[r].missile||n[r].isRadarData?(a=n[r],delete a.id,s.push(e),S.push(a),r++):(a=t.Sgp4.createSatrec(n[r].TLE1,n[r].TLE2),e.lowAlt=a.isimp,e.inclination=a.inclo,e.eccentricity=a.ecco,e.raan=a.nodeo,e.argPe=a.argpo,e.meanMotion=60*a.no*24/o,e.semiMajorAxis=Math.pow(8681663.653/e.meanMotion,2/3),e.semiMinorAxis=e.semiMajorAxis*Math.sqrt(1-Math.pow(e.eccentricity,2)),e.apogee=e.semiMajorAxis*(1+e.eccentricity)-u,a.apogee=e.apogee,e.perigee=e.semiMajorAxis*(1-e.eccentricity)-u,e.period=1440/e.meanMotion,s.push(e),delete a.id,S.push(a),r++)}N=new Float32Array(3*_),D=new Float32Array(3*_),I=new Int8Array(_),E=new Int8Array(_);try{postMessage({extraData:JSON.stringify(s)})}catch(e){if(!process)throw e}break;case"satEdit":a=t.Sgp4.createSatrec(e.data.TLE1,e.data.TLE2),S[e.data.id]=Object.assign(Object.assign({},S[e.data.id]),a),S[e.data.id].skip=!1,s=[];const c={lowAlt:null,inclination:null,eccentricity:null,raan:null,argPe:null,meanMotion:null,semiMajorAxis:null,semiMinorAxis:null,apogee:null,perigee:null,period:null,TLE1:null,TLE2:null};if(c.inclination=a.inclo,c.eccentricity=a.ecco,c.raan=a.nodeo,c.argPe=a.argpo,c.meanMotion=60*a.no*24/o,c.semiMajorAxis=Math.pow(8681663.653/c.meanMotion,2/3),c.semiMinorAxis=c.semiMajorAxis*Math.sqrt(1-Math.pow(c.eccentricity,2)),c.apogee=c.semiMajorAxis*(1+c.eccentricity)-u,S[e.data.id].apogee=c.apogee,c.perigee=c.semiMajorAxis*(1-c.eccentricity)-u,c.period=1440/c.meanMotion,c.TLE1=e.data.TLE1,c.TLE2=e.data.TLE2,s.push(c),ne)return;postMessage({extraUpdate:!0,extraData:JSON.stringify(s),satId:e.data.id}),O=!0;break;case"newMissile":S[e.data.id]=e.data;break;case"satelliteSelected":C=e.data.satelliteSelected,-1===C[0]&&(H=!0,Z||(Z=!0));break;case"sensor":e.data.multiSensor?(B=!0,$=e.data.sensor,ee=e.data.sensor,L=2,W||(W=!0)):e.data.sensor&&(ee=e.data.sensor[0],e.data.setlatlong&&(e.data.resetObserverGd?(L=1,ee.observerGd=l,$=[],W||(W=!0)):(L=2,ee.observerGd={lon:e.data.sensor[0].lon*i,lat:e.data.sensor[0].lat*i,alt:parseFloat(e.data.sensor[0].alt)},W||(W=!0))),B=!1);break;case"isShowSatOverfly":F=e.data.selectedSatFOV?e.data.selectedSatFOV:F,"enable"===e.data.isShowSatOverfly&&(V=!0),"reset"===e.data.isShowSatOverfly&&(H=!0,V=!1,Z||(Z=!0));break;default:e.data.isSunlightView&&(X=e.data.isSunlightView),e.data.isSlowCPUModeEnabled&&(P=2e3),e.data.isLowPerf&&(Q=!0),e.data.fieldOfViewSetLength&&(K=e.data.fieldOfViewSetLength),"enable"===e.data.isShowFOVBubble&&(Y=!0),"reset"===e.data.isShowFOVBubble&&(J=!0,Y=!1,Z||(Z=!0)),"enable"===e.data.isShowSurvFence&&(G=!0,Z||(Z=!0)),"disable"===e.data.isShowSurvFence&&(G=!1,Z||(Z=!0))}z||"satdata"!==e.data.typ||(_=-1,te(),z=!0)},te=n=>{S=n||S;const{now:r,j:o,gmst:i,gmstNext:u,isSunExclusion:d,sunEci:p}=((n,r,o,i,u,d)=>{const p=((e,n,r)=>{const t=new Date,a=t.getTime()-e;return t.setTime(e+n+a*r),t})(n,r,o),M=h(p.getUTCFullYear(),p.getUTCMonth()+1,p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds())+p.getUTCMilliseconds()*c,g=t.Sgp4.gstime(M);let y=!1,v={x:0,y:0,z:0};i&&!u&&([y,v]=((n,r,o,i)=>{const c=new m.JulianDay(r),u=m.EclCoordfromWgs84(0,0,0),h=m.EclCoordfromWgs84(n.observerGd.lat*s,n.observerGd.lon*s,n.observerGd.alt),d=m.Solar.topocentricPosition(c,u,!1),p=m.Solar.topocentricPosition(c,h,!1),M=d.hz.az*s+180,g=d.hz.alt*s%360,y=p.hz.alt*s%360,v=new m.JulianDay(m.JulianDay.dateToJD(i)).jdJ2000Century();let b=180*m.Solar.meanAnomaly(v)/a;b%=360;const x=149597870700*(1.00014-.01671*Math.cos(b)-14e-5*Math.cos(2*b))/1e3,w=t.Transforms.ecf2eci(f(M,g,x,0,0,0),o);return n.observerGd!==l&&(n.type===e.OPTICAL||n.type===e.OBSERVER)&&y>-6?[!0,w]:[!1,w]})(d,M,g,p));const b=h(p.getUTCFullYear(),p.getUTCMonth()+1,p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds()+1)+p.getUTCMilliseconds()*c;return{now:p,j:M,gmst:g,gmstNext:t.Sgp4.gstime(b),isSunExclusion:y,sunEci:v}})(k,U,q,X,B,ee);_=me()?S.length-1-K:S.length-1,ae(r,o,i,u,d,p),J&&(J=!1,_-=K),O||de(),O=!1,setTimeout((()=>{te()}),P*L/j)},ae=(n,r,t,a,o,i)=>{let s=-1;for(;s<_&&!O;){s++;let c=!1;if(S[s].satnum?c=!le(s,t,i,r,o):S[s].isRadarData?c=!oe(s):S[s].static&&!S[s].marker&&S[s].type===e.STAR?(se(s,n),b(D,s)):S[s].static&&!S[s].marker?(ue(s,t),b(D,s)):S[s].missile?c=!ce(s,n,a,t):S[s].marker&&(Y||J)?s=fe(s,t):S[s].marker&&(V||H)&&(s=ie(s,t)),!c&&(H=!1,S[s].marker)){he(s);break}}},oe=e=>!S[e].skip&&(S[e].skip=!0,v(N,e),b(D,e),!0),ie=(e,n)=>{if(H&&!0===S[e].active)return e;let r,a,o,c,u,l,m,h,f,d,g,v,x;for(let w=0;w<C.length+1;w++){if(w===C.length){R.push(e);break}if(-1!==C[w]){if(!V)continue;for(u={x:N[3*C[w]],y:N[3*C[w]+1],z:N[3*C[w]+2]},l=t.Transforms.ecf2eci(u,n),m=t.Transforms.eci2lla(l,n),h=m.alt,f=p(m.lat,m.lon,1),g=1,h<2500&&F<=60&&(g=.5),(h>7e3||F>=90)&&(g=2),C.length>1&&(g=2),d=-60;d<60;d+=g)if(a=Math.max(Math.min(Math.round(m.lat*s)+d,90),-90)*i,!(a>90))for(x=h<2500&&F<=60?.5:h>7e3||F>=90?2:1,C.length>1&&(x=2),v=0;v<181;v+=x){if(o=m.lon+v*i,f=p(a,o,15),r=t.Transforms.ecf2rae(f,u),M(r,F)){if(c=t.Transforms.lla2ecf(f),e===_)continue;S[e].active=!0,N=y(N,e,c),b(D,e),e++}if(0!==v&&180!==v){if(o=m.lon-v*i,f=p(a,o,15),r=t.Transforms.ecf2rae(f,u),M(r,F)){if(c=t.Transforms.lla2ecf(f),e===_)continue;S[e].active=!0,N=y(N,e,c),b(D,e),e++}if(90===a||-90===a)break}}}}return e},se=(e,n)=>{const r=w.getStarAzEl(n,0,188,S[e].ra,S[e].dec),t=f(r.az*s,r.el*s,25e4,0,0,0);N[3*e]=t.x,N[3*e+1]=t.y,N[3*e+2]=t.z},ce=(e,n,r,a)=>{if(!S[e].active)return N[3*e]=0,N[3*e+1]=0,N[3*e+2]=0,!1;let o,s,c,u;const l=S[e].altList.length;let m;for(let r=0;r<l;r++)if(1*S[e].startTime+1e3*r>=n.getTime()){m=r;break}S[e].lastTime=S[e].lastTime>=0?S[e].lastTime:0,o=Math.cos(S[e].latList[S[e].lastTime+1]*i),s=Math.sin(S[e].latList[S[e].lastTime+1]*i),c=Math.cos(S[e].lonList[S[e].lastTime+1]*i+r),u=Math.sin(S[e].lonList[S[e].lastTime+1]*i+r),0===S[e].lastTime?b(D,e):0===D[3*e]&&0===D[3*e+1]&&0===D[3*e+2]?(D[3*e]=(6371+S[e].altList[S[e].lastTime+1])*o*c-N[3*e],D[3*e+1]=(6371+S[e].altList[S[e].lastTime+1])*o*u-N[3*e+1],D[3*e+2]=(6371+S[e].altList[S[e].lastTime+1])*s-N[3*e+2]):(D[3*e]+=(6371+S[e].altList[S[e].lastTime+1])*o*c-N[3*e],D[3*e+1]+=(6371+S[e].altList[S[e].lastTime+1])*o*u-N[3*e+1],D[3*e+2]+=(6371+S[e].altList[S[e].lastTime+1])*s-N[3*e+2],D[3*e]*=.5,D[3*e+1]*=.5,D[3*e+2]*=.5),o=Math.cos(S[e].latList[m]*i),s=Math.sin(S[e].latList[m]*i),c=Math.cos(S[e].lonList[m]*i+a),u=Math.sin(S[e].lonList[m]*i+a),N[3*e]=(6371+S[e].altList[m])*o*c,N[3*e+1]=(6371+S[e].altList[m])*o*u,N[3*e+2]=(6371+S[e].altList[m])*s,S[e].lastTime=m;const h=N[3*e],f=N[3*e+1],p=N[3*e+2],M=t.Transforms.eci2ecf({x:h,y:f,z:p},a);t.Transforms.eci2lla({x:h,y:f,z:p},a).alt<=150&&!1===S[e].missile&&(S[e].skip=!0);const g=t.Transforms.ecf2rae(ee.observerGd,M);return I[e]=d(g,ee),!0},ue=(e,n)=>{const r=Math.cos(S[e].lat*i),t=Math.sin(S[e].lat*i),a=Math.cos(S[e].lon*i+n),o=Math.sin(S[e].lon*i+n);N[3*e]=(6372+S[e].alt)*r*a,N[3*e+1]=(6372+S[e].alt)*r*o,N[3*e+2]=(6372+S[e].alt)*t},le=(n,c,m,h,f)=>{let p,M,g,y,v;if(S[n].skip)return!1;const b=1440*(h-S[n].jdsatepoch),x=t.Sgp4.propagate(S[n],b);try{if(N[3*n]=x.position.x,N[3*n+1]=x.position.y,N[3*n+2]=x.position.z,D[3*n]=x.velocity.x,D[3*n+1]=x.velocity.y,D[3*n+2]=x.velocity.z,S[n].isimp||b/1440>20){const e=6378.137,r=6356.7523142,t=Math.sqrt(x.position.x*x.position.x+x.position.y*x.position.y),i=(e-r)/e,s=2*i-i*i;let u=Math.atan2(x.position.y,x.position.x)-c;for(;u<-a;)u+=o;for(;u>a;)u-=o;const l=20;let m,h=0,f=Math.atan2(x.position.z,Math.sqrt(x.position.x*x.position.x+x.position.y*x.position.y));for(;h<l;)m=1/Math.sqrt(1-s*(Math.sin(f)*Math.sin(f))),f=Math.atan2(x.position.z+e*m*s*Math.sin(f),t),h+=1;if(t/Math.cos(f)-e*m>S[n].apogee+1e3)throw new Error("Impossible orbit")}if(S[n].apogee<350&&Math.sqrt(x.velocity.x*x.velocity.x+x.velocity.y*x.velocity.y)<5.5)throw new Error("Impossible orbit");ee.observerGd===l||B||(v=t.Transforms.ecf2rae(ee.observerGd,t.Transforms.eci2ecf(x.position,c)))}catch(e){S[n].skip=!0,N[3*n]=0,N[3*n+1]=0,N[3*n+2]=0,D[3*n]=0,D[3*n+1]=0,D[3*n+2]=0,y=0,v=0}if(I[n]=0,E[n]=2,X&&(p=Math.asin(u/Math.sqrt(Math.pow(-N[3*n],2)+Math.pow(-N[3*n+1],2)+Math.pow(-N[3*n+2],2)))*s,M=Math.asin(695700/Math.sqrt(Math.pow(-N[3*n]+m.x,2)+Math.pow(-N[3*n+1]+m.y,2)+Math.pow(-N[3*n+2]+m.z,2)))*s,g=Math.acos(r().dot([-N[3*n],-N[3*n+1],-N[3*n+2]],[-N[3*n]+m.x,-N[3*n+1]+m.y,-N[3*n+2]+m.z])/(Math.sqrt(Math.pow(-N[3*n],2)+Math.pow(-N[3*n+1],2)+Math.pow(-N[3*n+2],2))*Math.sqrt(Math.pow(-N[3*n]+m.x,2)+Math.pow(-N[3*n+1]+m.y,2)+Math.pow(-N[3*n+2]+m.z,2))))*s,p>M&&g<p-M&&(E[n]=0),Math.abs(p-M)<g&&g<p+M&&(E[n]=1),M>p&&(E[n]=1),g<M-p&&(E[n]=1)),ee.observerGd!==l&&!f)if(B){for(let r=0;r<$.length;r++)if(ee.type!==e.OPTICAL||0!==E[n]){if(I[n])break;ee=$[r],ee.observerGd={lon:ee.lon*i,lat:ee.lat*i,alt:1*ee.alt};try{y=t.Transforms.eci2ecf(x.position,c),v=t.Transforms.ecf2rae(ee.observerGd,y)}catch(e){continue}I[n]=d(v,ee)}}else ee.type===e.OPTICAL&&0===E[n]||(I[n]=d(v,ee));return!0},me=()=>!H&&!V&&!J&&!Y||Q,he=e=>{for(;e<_;e++){if(!S[e].active){_-=K;break}v(N,e),b(D,e),S[e].active=!1}},fe=(e,n)=>{let r,a,o,s,c,u;B||ee.observerGd===l||($[0]=ee,$.length=1),R=[];for(let m=0;m<$.length+1&&(R.push(e),m!==$.length);m++)if(ee=$[m],ee.observerGd=p(ee.lat*i,ee.lon*i,ee.alt),v(N,e),b(D,e),!J&&Y&&ee.observerGd!==l&&!g($,ee)){if(c=Math.abs(ee.obsmaxaz-ee.obsminaz)<30?.5:3,u=ee.obsmaxrange-ee.obsminrange<720?125:30,!G)if(0!==ee.obsminaz&&360!==ee.obsmaxaz){for(o=Math.max(ee.obsminrange,100);o<Math.min(ee.obsmaxrange,6e4);o+=Math.min(ee.obsmaxrange,6e4)/u)for(r=ee.obsminaz,a=ee.obsminel;a<ee.obsmaxel;a+=c){s=t.Transforms.ecf2eci(f(r,a,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n);try{S[e].active=!0,N=y(N,e,s),b(D,e),e++}catch(e){}}for(o=Math.max(ee.obsminrange,100);o<Math.min(ee.obsmaxrange,6e4);o+=Math.min(ee.obsmaxrange,6e4)/u)for(r=ee.obsmaxaz,a=ee.obsminel;a<ee.obsmaxel;a+=c){s=t.Transforms.ecf2eci(f(r,a,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n);try{S[e].active=!0}catch(e){}N=y(N,e,s),b(D,e),e++}if(void 0!==ee.obsminaz2){for(o=Math.max(ee.obsminrange,100);o<Math.min(ee.obsmaxrange,6e4);o+=Math.min(ee.obsmaxrange,6e4)/u)for(r=ee.obsminaz2,a=ee.obsminel2;a<ee.obsmaxel2;a+=c)s=t.Transforms.ecf2eci(f(r,a,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),S[e].active=!0,N=y(N,e,s),b(D,e),e++;for(o=Math.max(ee.obsminrange,100);o<Math.min(ee.obsmaxrange,6e4);o+=Math.min(ee.obsmaxrange,6e4)/u)for(r=ee.obsmaxaz2,a=ee.obsminel2;a<ee.obsmaxel2;a+=c)s=t.Transforms.ecf2eci(f(r,a,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),S[e].active=!0,N=y(N,e,s),b(D,e),e++}}else for(o=Math.max(ee.obsminrange,100);o<Math.min(ee.obsmaxrange,6e4);o+=Math.min(ee.obsmaxrange,6e4)/u)for(a=ee.obsmaxel,r=ee.obsminaz;r<ee.obsmaxaz;r+=c){s=t.Transforms.ecf2eci(f(r,a,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n);try{S[e].active=!0}catch(e){}N=y(N,e,s),b(D,e),e++}if(ee.obsmaxel-ee.obsminel<20)for(o=Math.max(ee.obsminrange,100);o<Math.min(ee.obsmaxrange,6e4);o+=Math.min(ee.obsmaxrange,6e4)/u)for(r=0;r<Math.max(360,ee.obsmaxaz);r+=c){if(ee.obsminaz>ee.obsmaxaz){if(!(r>=ee.obsminaz||r<=ee.obsmaxaz))continue}else if(!(r>=ee.obsminaz&&r<=ee.obsmaxaz))continue;if(s=t.Transforms.ecf2eci(f(r,ee.obsmaxel,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e===_)break;S[e].active=!0,N=y(N,e,s),b(D,e),e++}if(void 0!==ee.obsminaz2)for(c=2,o=Math.max(ee.obsminrange2,100);o<Math.min(ee.obsmaxrange2,6e4);o+=Math.min(ee.obsmaxrange2,6e4)/u)for(r=0;r<360;r+=1*c){if(ee.obsminaz2>ee.obsmaxaz2){if(!(r>=ee.obsminaz2||r<=ee.obsmaxaz2))continue}else if(!(r>=ee.obsminaz2&&r<=ee.obsmaxaz2))continue;if(s=t.Transforms.ecf2eci(f(r,ee.obsminel2,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e===_)break;S[e].active=!0,N=y(N,e,s),b(D,e),e++}if(!G){for(o=Math.min(ee.obsmaxrange,6e4),r=0;r<Math.max(360,ee.obsmaxaz);r+=c){if(ee.obsminaz>ee.obsmaxaz){if(!(r>=ee.obsminaz||r<=ee.obsmaxaz))continue}else if(!(r>=ee.obsminaz&&r<=ee.obsmaxaz))continue;for(a=ee.obsminel;a<ee.obsmaxel&&(s=t.Transforms.ecf2eci(f(r,a,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e!==_);a+=c)S[e].active=!0,N=y(N,e,s),b(D,e),e++}if(void 0!==ee.obsminaz2)for(o=Math.min(ee.obsmaxrange2,6e4),r=0;r<Math.max(360,ee.obsmaxaz2);r+=c){if(ee.obsminaz2>ee.obsmaxaz2){if(!(r>=ee.obsminaz2||r<=ee.obsmaxaz2))continue}else if(!(r>=ee.obsminaz2&&r<=ee.obsmaxaz2))continue;for(a=ee.obsminel2;a<ee.obsmaxel2&&(s=t.Transforms.ecf2eci(f(r,a,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e!==_);a+=c)S[e].active=!0,N=y(N,e,s),b(D,e),e++}}for(c=.25,o=ee.obsmaxrange,r=0;r<Math.max(360,ee.obsmaxaz);r+=c){if(ee.obsminaz>ee.obsmaxaz){if(!(r>=ee.obsminaz||r<=ee.obsmaxaz))continue}else if(!(r>=ee.obsminaz&&r<=ee.obsmaxaz))continue;if(s=t.Transforms.ecf2eci(f(r,ee.obsminel,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e===_)break;S[e].active=!0,N=y(N,e,s),b(D,e),e++}for(o=ee.obsminrange,r=0;r<Math.max(360,ee.obsmaxaz);r+=c){if(ee.obsminaz>ee.obsmaxaz){if(!(r>=ee.obsminaz||r<=ee.obsmaxaz))continue}else if(!(r>=ee.obsminaz&&r<=ee.obsmaxaz))continue;if(s=t.Transforms.ecf2eci(f(r,ee.obsminel,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e===_)break;S[e].active=!0,N=y(N,e,s),b(D,e),e++}if(ee.obsmaxrange-ee.obsminrange<720)for(o=Math.max(ee.obsminrange,100);o<Math.min(ee.obsmaxrange,6e4);o+=Math.min(ee.obsmaxrange,6e4)/u)for(r=0;r<Math.max(360,ee.obsmaxaz);r+=c){if(ee.obsminaz>ee.obsmaxaz){if(!(r>=ee.obsminaz||r<=ee.obsmaxaz))continue}else if(!(r>=ee.obsminaz&&r<=ee.obsmaxaz))continue;if(s=t.Transforms.ecf2eci(f(r,ee.obsminel,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e===_)break;S[e].active=!0,N=y(N,e,s),b(D,e),e++}if(ee.obsminaz!==ee.obsmaxaz&&ee.obsminaz!==ee.obsmaxaz-360){for(c=(ee.obsmaxrange-ee.obsminrange)/5555,r=ee.obsmaxaz;r===ee.obsmaxaz;r+=1)for(o=ee.obsminrange;o<ee.obsmaxrange&&(s=t.Transforms.ecf2eci(f(r,ee.obsminel,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e!==_);o+=c)S[e].active=!0,N=y(N,e,s),b(D,e),e++;for(r=ee.obsminaz;r===ee.obsminaz;r+=1)for(o=ee.obsminrange;o<ee.obsmaxrange&&(s=t.Transforms.ecf2eci(f(r,ee.obsminel,o,ee.observerGd.lat,ee.observerGd.lon,ee.observerGd.alt),n),e!==_);o+=c)S[e].active=!0,N=y(N,e,s),b(D,e),e++}}return e},de=()=>{const e={satPos:N};ee.observerGd!==l?e.satInView=I:e.satInView=A,e.satInSun=X?E:A,R.length>=1?e.sensorMarkerArray=R:e.sensorMarkerArray=[];try{postMessage(e),postMessage({satVel:D})}catch(e){if(!process)throw e}}})()})();
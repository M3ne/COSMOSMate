{"version":3,"file":"src_js_plugins_newLaunch_newLaunch_ts.cc6085996d45f756f505.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAwD;AACR;AACzB;AAC2B;AAClD;AACO;AACP,YAAY,qFAAqF,EAAE,2EAAqB;AACxH,gBAAgB,6CAAC;AACjB;AACA;AACA,qBAAqB,6CAAC;AACtB,sBAAsB,6CAAC;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,0GAA0G;AAC1G;AACA,8BAA8B;AAC9B,2EAA2E;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,IAAI,6CAAC;AACL;AACO;AACP;AACA,IAAI,6CAAC,uBAAuB,uEAAiB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,6CAAC;AACL,QAAQ,6CAAC;AACT;AACA,KAAK;AACL;AACA,IAAI,6CAAC;AACL;AACA;AACA,YAAY,6CAAC;AACb,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,IAAI,6CAAC,yBAAyB,uEAAiB;AAC/C;AACA,gDAAgD,sDAAS,CAAC;AAC1D;AACA;AACA;AACA;AACA;AACO;AACP;AACA,eAAe,yFAAmC;AAClD;AACA;AACA;AACA,YAAY,mGAA6C;AACzD;AACA;AACA;AACA,gBAAgB,qGAA+C;AAC/D;AACA,oBAAoB,kGAA4C;AAChE,gBAAgB,mGAA6C;AAC7D,gBAAgB,6CAAC,sCAAsC,iCAAiC;AACxF,gBAAgB,6CAAC;AACjB;AACA,4BAA4B,kGAA4C,CAAC,qGAA+C;AACxH,gBAAgB,6CAAC;AACjB,gBAAgB,6CAAC,mCAAmC,0DAAO;AAC3D;AACA;AACA;AACA,gBAAgB,2FAAqC;AACrD,qBAAqB,6CAAC;AACtB,oBAAoB,6CAAC;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA,IAAI,2EAAqB;AACzB;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI,2EAAqB;AACzB;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI,2EAAqB;AACzB;AACA;AACA;AACA,KAAK;AACL,IAAI,2EAAqB;AACzB;AACA;AACA;AACA,KAAK;AACL;AACO;AACP,IAAI,6CAAC,sCAAsC,iCAAiC;AAC5E,IAAI,6CAAC;AACL;AACA;AACO;AACP,eAAe,yFAAmC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://keeptrack.space/./src/js/plugins/newLaunch/newLaunch.ts"],"sourcesContent":["import { keepTrackApi } from '@app/js/api/keepTrackApi';\nimport { RAD2DEG } from '@app/js/lib/constants';\nimport $ from 'jquery';\nimport rocketPng from '@app/img/icons/rocket.png';\nlet isNewLaunchMenuOpen = false;\nexport const newLaunchSubmit = () => {\n    const { timeManager, mainCamera, satellite, satSet, orbitManager, uiManager, objectManager } = keepTrackApi.programs;\n    const scc = $('#nl-scc').val();\n    const satId = satSet.getIdFromObjNum(scc);\n    let sat = satSet.getSat(satId);\n    const upOrDown = $('#nl-updown').val();\n    const launchFac = $('#nl-facility').val();\n    let launchLat, launchLon;\n    if (objectManager.isLaunchSiteManagerLoaded) {\n        for (const launchSite in objectManager.launchSiteManager.launchSiteList) {\n            if (objectManager.launchSiteManager.launchSiteList[launchSite].name === launchFac) {\n                launchLat = objectManager.launchSiteManager.launchSiteList[launchSite].lat;\n                launchLon = objectManager.launchSiteManager.launchSiteList[launchSite].lon;\n            }\n        }\n    }\n    if (launchLon > 180) {\n        // if West not East\n        launchLon -= 360; // Convert from 0-360 to -180-180\n    }\n    // if (sat.inclination * RAD2DEG < launchLat) {\n    //   keepTrackApi.programs.uiManager.toast(`Satellite Inclination Lower than Launch Latitude!`, 'critical');\n    //   $('#loading-screen').fadeOut('slow');\n    //   return;\n    // }\n    // Set time to 0000z for relative time.\n    const today = new Date(); // Need to know today for offset calculation\n    const quadZTime = new Date(today.getUTCFullYear(), today.getUTCMonth(), today.getUTCDate(), 0, 0, 0); // New Date object of the future collision\n    // Date object defaults to local time.\n    quadZTime.setUTCHours(0); // Move to UTC Hour\n    timeManager.changeStaticOffset(quadZTime.getTime() - today.getTime()); // Find the offset from today\n    mainCamera.isCamSnapMode = false;\n    const simulationTimeObj = timeManager.calculateSimulationTime();\n    const TLEs = satellite.getOrbitByLatLon(sat, launchLat, launchLon, upOrDown, simulationTimeObj);\n    const TLE1 = TLEs[0];\n    const TLE2 = TLEs[1];\n    if (satellite.altitudeCheck(TLE1, TLE2, simulationTimeObj) > 1) {\n        satSet.satCruncher.postMessage({\n            typ: 'satEdit',\n            id: satId,\n            active: true,\n            TLE1: TLE1,\n            TLE2: TLE2,\n        });\n        orbitManager.updateOrbitBuffer(satId, true, TLE1, TLE2);\n    }\n    else {\n        uiManager.toast(`Failed Altitude Test - Try a Different Satellite!`, 'critical');\n    }\n    $('#loading-screen').fadeOut('slow');\n};\nexport const uiManagerInit = () => {\n    // Side Menu\n    $('#left-menus').append(keepTrackApi.html `\n        <div id=\"newLaunch-menu\" class=\"side-menu-parent start-hidden text-select\">\n          <div id=\"newLaunch-content\" class=\"side-menu\">\n            <div class=\"row\">\n              <h5 class=\"center-align\">New Launch</h5>\n              <form id=\"newLaunch\" class=\"col s12\">\n                <div class=\"input-field col s12\">\n                  <input disabled value=\"00005\" id=\"nl-scc\" type=\"text\">\n                  <label for=\"disabled\" class=\"active\">Satellite SCC#</label>\n                </div>\n                <div class=\"input-field col s12\">\n                  <input disabled value=\"50.00\" id=\"nl-inc\" type=\"text\">\n                  <label for=\"disabled\" class=\"active\">Inclination</label>\n                </div>\n                <div class=\"input-field col s12\">\n                  <select value=\"50.00\" id=\"nl-updown\" type=\"text\">\n                    <option value=\"N\">North</option>\n                    <option value=\"S\">South</option>\n                  </select>\n                  <label for=\"disabled\">Launching North or South</label>\n                </div>\n                <div class=\"input-field col s12\" id=\"nl-launch-menu\">\n                  <select id=\"nl-facility\">\n                    <optgroup label=\"United States\">\n                      <option value=\"CAS\">Canary Island Air Space (Pegasus)</option>\n                      <option value=\"AFETR\">Cape Canaveral AFS | Kennedy Space Center</option>\n                      <option value=\"ERAS\">Eastern Range Air Space (Pegasus)</option>\n                      <option value=\"KODAK\">Kodiak Launch Complex</option>\n                      <option value=\"KWAJ\">Reagan Test Site</option>\n                      <option value=\"AFWTR\">Vandenberg AFB</option>\n                      <option value=\"WLPIS\">Wallops Flight Facility</option>\n                      <option value=\"WRAS\">Western Range Air Space (Pegasus)</option>\n                    </optgroup>\n                    <optgroup label=\"Russia\">\n                      <option value=\"KYMTR\">Kasputin Yar MSC</option>\n                      <option value=\"PKMTR\">Plesetsk MSC</option>\n                      <option value=\"SEAL\">Sea Launch Platform</option>\n                      <option value=\"SADOL\">Submarine Launch, Barents Sea</option>\n                      <option value=\"TTMTR\">Tyuratam MSC | Baikonur Cosmodrome</option>\n                      <option value=\"VOSTO\">Vostochny Cosmodrome</option>\n                      <option value=\"OREN\">Yasny (Dombarovskiy) Cosmodrome</option>\n                    </optgroup>\n                    <optgroup label=\"China\">\n                      <option value=\"JSC\">Jiuquan SLC</option>\n                      <option value=\"TSC\">Taiyuan SLC</option>\n                      <option value=\"WSC\">Wenchang SLC</option>\n                      <option value=\"XSC\">Xichang SLC</option>\n                    </optgroup>\n                    <optgroup label=\"Japan\">\n                      <option value=\"TNSTA\">Tanegashima Space Center</option>\n                      <option value=\"KSCUT\">Uchinoura Space Center</option>\n                    </optgroup>\n                    <optgroup label=\"North Korea\">\n                      <option value=\"YUN\">Sohae Satellite Launch Station</option>\n                      <option value=\"TNGH\">Tonghae Satellite Launching Ground</option>\n                    </optgroup>\n                    <optgroup label=\"Other\">\n                      <option value=\"FRGUI\">Guiana Space Centre (Kourou FG)</option>\n                      <option value=\"HGSTR\">Hammaguira Space Track Range</option>\n                      <option value=\"NSC\">Naro Space Center</option>\n                      <option value=\"YAVNE\">Palmachim Air Force Base</option>\n                      <option value=\"RLLC\">Rocket Labs Launch Complex</option>\n                      <option value=\"SNMLP\">San Marco Launch Platform</option>\n                      <option value=\"SRI\">Satish Dhawan Space Centre (Sriharikota IN)</option>\n                      <option value=\"SEM\">Semnan Spaceport</option>\n                      <option value=\"WOMRA\">Woomera Test Range</option>\n                    </optgroup>\n                  </select>\n                  <label>Launch Facility</label>\n                </div>\n                <div class=\"center-align\">\n                  <button class=\"btn btn-ui waves-effect waves-light\" type=\"submit\" name=\"action\">Create Launch\n                    Nominal &#9658;\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      `);\n    $('#newLaunch').on('submit', function (e) {\n        $('#loading-screen').fadeIn(1000, newLaunchSubmit);\n        e.preventDefault();\n    });\n    // Allow resizing of the side menu\n    $('#newLaunch-menu').resizable({\n        handles: 'e',\n        stop: function () {\n            $(this).css('height', '');\n        },\n        maxWidth: 450,\n        minWidth: 280,\n    });\n    // Bottom Icon\n    $('#bottom-icons').append(keepTrackApi.html `\n        <div id=\"menu-newLaunch\" class=\"bmenu-item bmenu-item-disabled\">\n          <img alt=\"rocket\" src=\"\" delayedsrc=${rocketPng}/>\n          <span class=\"bmenu-title\">New Launch</span>\n          <div class=\"status-icon\"></div>\n        </div>  \n      `);\n};\nexport const bottomMenuClick = (iconName) => {\n    var _a;\n    const aM = keepTrackApi.programs.adviceManager;\n    if (iconName === 'menu-newLaunch') {\n        if (isNewLaunchMenuOpen) {\n            isNewLaunchMenuOpen = false;\n            keepTrackApi.programs.uiManager.hideSideMenus();\n            return;\n        }\n        else {\n            if (keepTrackApi.programs.objectManager.selectedSat !== -1) {\n                if (settingsManager.isMobileModeEnabled)\n                    keepTrackApi.programs.uiManager.searchToggle(false);\n                keepTrackApi.programs.uiManager.hideSideMenus();\n                $('#newLaunch-menu').effect('slide', { direction: 'left', mode: 'show' }, 1000);\n                $('#menu-newLaunch').addClass('bmenu-item-selected');\n                isNewLaunchMenuOpen = true;\n                const sat = keepTrackApi.programs.satSet.getSatExtraOnly(keepTrackApi.programs.objectManager.selectedSat);\n                $('#nl-scc').val(sat.sccNum);\n                $('#nl-inc').val((sat.inclination * RAD2DEG).toPrecision(2));\n            }\n            else {\n                (_a = aM.adviceList) === null || _a === void 0 ? void 0 : _a.newLaunchDisabled();\n                keepTrackApi.programs.uiManager.toast(`Select a Satellite First!`, 'caution');\n                if (!$('#menu-newLaunch:animated').length) {\n                    $('#menu-newLaunch').effect('shake', {\n                        distance: 10,\n                    });\n                }\n            }\n            return;\n        }\n    }\n};\nexport const init = () => {\n    // Add HTML\n    keepTrackApi.register({\n        method: 'uiManagerInit',\n        cbName: 'newLaunch',\n        cb: uiManagerInit,\n    });\n    // Add Advice Info\n    keepTrackApi.register({\n        method: 'adviceReady',\n        cbName: 'newLaunch',\n        cb: adviceReady,\n    });\n    // Add JavaScript\n    keepTrackApi.register({\n        method: 'bottomMenuClick',\n        cbName: 'newLaunch',\n        cb: bottomMenuClick,\n    });\n    keepTrackApi.register({\n        method: 'hideSideMenus',\n        cbName: 'newLaunch',\n        cb: hideSideMenus,\n    });\n};\nexport const hideSideMenus = () => {\n    $('#newLaunch-menu').effect('slide', { direction: 'left', mode: 'hide' }, 1000);\n    $('#menu-newLaunch').removeClass('bmenu-item-selected');\n    isNewLaunchMenuOpen = false;\n};\nexport const adviceReady = () => {\n    const aM = keepTrackApi.programs.adviceManager;\n    aM.adviceCount.newLaunch = 0;\n    aM.adviceCount.newLaunchDisabled = 0;\n    aM.adviceList.newLaunchDisabled = function () {\n        // Only Do this Twice\n        if (aM.adviceCount.newLaunchDisabled >= 3)\n            return;\n        aM.adviceCount.newLaunchDisabled += 1;\n        aM.showAdvice('Create Launch Nominal', 'Creating a Launch Nominal requres a satellite to be selected first. Pick a satellite whose orbit is close to your upcomming launch!', null, 'bottom-right');\n    };\n    aM.adviceArray.push(aM.adviceList.socrates);\n};\n"],"names":[],"sourceRoot":""}
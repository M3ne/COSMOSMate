{"version":3,"file":"src_js_plugins_satChanges_satChanges_ts.4432cdabfe8c92cbf968.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAwD;AACM;AACN;AACjC;AACvB;AACA,qFAA+B;AAC/B;AACA;AACO;AACP;AACA,IAAI,2EAAqB;AACzB;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI,2EAAqB;AACzB;AACA;AACA;AACA,KAAK;AACL,IAAI,2EAAqB;AACzB;AACA;AACA;AACA,KAAK;AACL;AACO;AACP;AACA,IAAI,6CAAC,uBAAuB,uEAAiB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,6CAAC,yBAAyB,uEAAiB;AAC/C;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,IAAI,6CAAC;AACL;AACA;AACA,YAAY,6CAAC;AACb,SAAS;AACT;AACA;AACA,KAAK;AACL,IAAI,6CAAC;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACO;AACP,YAAY,YAAY,EAAE,2EAAqB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,iDAAK;AACb,eAAe,qBAAqB;AACpC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,QAAQ,2EAAkB,oCAAoC;AAC9D,QAAQ,6CAAC;AACT,MAAM;AACN;AACO;AACP,IAAI,6CAAC,oCAAoC,iCAAiC;AAC1E,IAAI,6CAAC;AACL;AACA;AACO;AACP;AACA,gBAAgB,YAAY,EAAE,2EAAqB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,6CAAC,oCAAoC,iCAAiC;AAClF;AACA;AACA,YAAY,6CAAC;AACb;AACA;AACA;AACA;AACO;AACP;AACA,YAAY,SAAS,EAAE,2EAAqB;AAC5C,oBAAoB,iBAAiB;AACrC;AACA;AACA,mBAAmB,4EAAY;AAC/B;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D,wBAAwB;AACxB,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uCAAuC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,YAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb","sources":["webpack://keeptrack.space/./src/js/plugins/satChanges/satChanges.ts"],"sourcesContent":["import { keepTrackApi } from '@app/js/api/keepTrackApi';\nimport { dateFromJday } from '@app/js/timeManager/transforms';\nimport { uiManager } from '@app/js/uiManager/uiManager';\nimport $ from 'jquery';\nlet issatChngMenuOpen = false;\nkeepTrackApi.programs.satChange = {\n    satChngTable: null,\n};\nexport const init = () => {\n    // Add HTML\n    keepTrackApi.register({\n        method: 'uiManagerInit',\n        cbName: 'satChanges',\n        cb: uiManagerInit,\n    });\n    // Add JavaScript\n    keepTrackApi.register({\n        method: 'bottomMenuClick',\n        cbName: 'satChanges',\n        cb: bottomMenuClick,\n    });\n    keepTrackApi.register({\n        method: 'hideSideMenus',\n        cbName: 'satChanges',\n        cb: hideSideMenus,\n    });\n};\nexport const uiManagerInit = () => {\n    // Side Menu\n    $('#left-menus').append(keepTrackApi.html `\n        <div id=\"satChng-menu\" class=\"side-menu-parent start-hidden text-select\">\n          <div id=\"satChng-content\" class=\"side-menu\">\n            <div class=\"row\">\n              <h5 class=\"center-align\">Interesting Movements</h5>\n              <table id=\"satChng-table\" class=\"center-align\"></table>\n            </div>\n          </div>\n        </div>\n      `);\n    // Bottom Icon\n    $('#bottom-icons').append(keepTrackApi.html `\n        <div id=\"menu-satChng\" class=\"bmenu-item\">\n          <img alt=\"satchng\" src=\"\" delayedsrc=\"data:image/png;base64,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\">\n          <span class=\"bmenu-title\">Satellite Changes</span>\n          <div class=\"status-icon\"></div>\n        </div>\n      `);\n    $('#satChng-menu').resizable({\n        handles: 'e',\n        stop: function () {\n            $(this).css('height', '');\n        },\n        maxWidth: 450,\n        minWidth: 280,\n    });\n    $('#satChng-menu').on('click', '.satChng-object', function (evt) {\n        // Might be better code for this.\n        const hiddenRow = evt.currentTarget.attributes.hiddenrow.value;\n        if (hiddenRow !== null) {\n            satChng(parseInt(hiddenRow));\n        }\n    });\n};\nexport const satChng = (row) => {\n    const { satChange } = keepTrackApi.programs;\n    let satChngTable = satChange.satChngTable;\n    if (typeof row !== 'number')\n        throw new Error('Row must be a number');\n    if (row !== -1 && typeof satChngTable[row] === 'undefined')\n        throw new Error('Row does not exist');\n    if (row === -1 && (satChngTable === null || satChngTable === void 0 ? void 0 : satChngTable.length) === 0) {\n        // Only generate the table if receiving the -1 argument for the first time\n        $.get('/analysis/satchng.json?v=' + settingsManager.versionNumber).done((resp) => {\n            ({ resp, satChngTable } = getSatChngJson(resp));\n            satChange.satChngTable = satChngTable;\n        });\n    }\n    if (row !== -1) {\n        // If an object was selected from the menu\n        if (!satChngTable[row].SCC)\n            return;\n        uiManager.doSearch(satChngTable[row].SCC.toString()); // Actually perform the search of the two objects\n        $('#anal-sat').val(satChngTable[row].SCC.toString());\n    } // If a row was selected\n};\nexport const hideSideMenus = () => {\n    $('#satChng-menu').effect('slide', { direction: 'left', mode: 'hide' }, 1000);\n    $('#menu-satChng').removeClass('bmenu-item-selected');\n    issatChngMenuOpen = false;\n};\nexport const bottomMenuClick = (iconName) => {\n    if (iconName === 'menu-satChng') {\n        const { uiManager } = keepTrackApi.programs;\n        if (issatChngMenuOpen) {\n            issatChngMenuOpen = false;\n            uiManager.hideSideMenus();\n            return;\n        }\n        else {\n            if (settingsManager.isMobileModeEnabled)\n                uiManager.searchToggle(false);\n            uiManager.hideSideMenus();\n            $('#satChng-menu').effect('slide', { direction: 'left', mode: 'show' }, 1000);\n            issatChngMenuOpen = true;\n            satChng(-1);\n            $('#menu-satChng').addClass('bmenu-item-selected');\n            return;\n        }\n    }\n};\nexport const getSatChngJson = (resp) => {\n    resp = [...new Set(resp)];\n    const { satSet } = keepTrackApi.programs;\n    for (let i = 0; i < resp.length; i++) {\n        const prefix = resp[i].year > 50 ? '19' : '20';\n        const year = parseInt(prefix + resp[i].year.toString());\n        let date = dateFromJday(year, resp[i].day);\n        date = new Date(date.getTime() + (resp[i].day % 1) * 1440 * 60000);\n        resp[i].date = date;\n    }\n    const satChngTable = resp;\n    // satChng Menu\n    const tbl = document.getElementById('satChng-table'); // Identify the table to update\n    tbl.innerHTML = ''; // Clear the table from old object data\n    // var tblLength = 0;                                   // Iniially no rows to the table\n    let tr = tbl.insertRow();\n    let tdT = tr.insertCell();\n    tdT.appendChild(document.createTextNode('Time'));\n    tdT.setAttribute('style', 'text-decoration: underline');\n    let tdSat = tr.insertCell();\n    tdSat.appendChild(document.createTextNode('Sat'));\n    tdSat.setAttribute('style', 'text-decoration: underline');\n    let tdInc = tr.insertCell();\n    tdInc.appendChild(document.createTextNode('Inc'));\n    tdInc.setAttribute('style', 'text-decoration: underline');\n    let tdPer = tr.insertCell();\n    tdPer.appendChild(document.createTextNode('Per'));\n    tdPer.setAttribute('style', 'text-decoration: underline');\n    // 20 rows max\n    for (let i = 0; i < Math.min(satChngTable.length, 20); i++) {\n        const sat = satSet.getSat(satSet.getIdFromObjNum(satChngTable[i].SCC));\n        // Skip Decays\n        if (sat === null)\n            continue;\n        tr = tbl.insertRow();\n        tr.setAttribute('class', 'satChng-object link');\n        tr.setAttribute('hiddenrow', i.toString());\n        tdT = tr.insertCell();\n        const dateStr = satChngTable[i].date.toJSON();\n        let timeTextStr = '';\n        for (let iText = 0; iText < 20; iText++) {\n            if (iText < 10)\n                timeTextStr += dateStr[iText];\n            if (iText === 10)\n                timeTextStr += ' ';\n            if (iText > 11)\n                timeTextStr += dateStr[iText - 1];\n        }\n        tdT.appendChild(document.createTextNode(timeTextStr));\n        tdSat = tr.insertCell();\n        tdSat.appendChild(document.createTextNode(satChngTable[i].SCC.toString()));\n        tdInc = tr.insertCell();\n        tdInc.appendChild(document.createTextNode(satChngTable[i].inc.toFixed(2)));\n        tdPer = tr.insertCell();\n        const deltaMeanMo = satChngTable[i].meanmo;\n        const origPer = 1440 / (sat.meanMotion + deltaMeanMo);\n        const perDelta = 1440 / sat.meanMotion - origPer;\n        tdPer.appendChild(document.createTextNode(perDelta.toFixed(2)));\n    }\n    return { resp, satChngTable };\n};\n"],"names":[],"sourceRoot":""}
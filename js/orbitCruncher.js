/*! For license information please see orbitCruncher.js.LICENSE.txt */
(()=>{var t={90:function(t,a){var e,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,e=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dateFormat=void 0;var a=(t,a)=>{for(t=String(t),a=a||2;t.length<a;)t="0"+t;return t},e={masks:{default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd' 'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},i18n:{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]}},n=/d{1,4}|m{1,4}|yy(?:yy)?|([HMThst])\1?|[LSZlo]|"(?:(?!")[\s\S])*"|'(?:(?!')[\s\S])*'/g,o=/\b(?:[ACEMP][DPS]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[\+\x2D][0-9]{4})?)\b/g,r=/(?:(?![\+\x2D0-9A-Z])[\s\S])/g;t.dateFormat=function(t,i,s){if(1!==arguments.length||"[object String]"!==Object.prototype.toString.call(t)||/[0-9]/.test(t)||(i=t,t=void 0),t=t?new Date(t):new Date,Number.isNaN(t))throw SyntaxError("invalid date - ".concat(t));"UTC:"===(i=String(e.masks[i]||i||e.masks.default)).slice(0,4)&&(i=i.slice(4),s=!0);var c=s?"getUTC":"get",l=t[c+"Date"](),u=t[c+"Day"](),h=t[c+"Month"](),d=t[c+"FullYear"](),M=t[c+"Hours"](),p=t[c+"Minutes"](),m=t[c+"Seconds"](),f=t[c+"Milliseconds"](),g=s?0:t.getTimezoneOffset(),y={d:l,dd:a(l),ddd:e.i18n.dayNames[u],dddd:e.i18n.dayNames[u+7],m:h+1,mm:a(h+1),mmm:e.i18n.monthNames[h],mmmm:e.i18n.monthNames[h+12],yy:String(d).slice(2),yyyy:d,h:M%12||12,hh:a(M%12||12),H:M,HH:a(M),M:p,MM:a(p),s:m,ss:a(m),l:a(f,3),L:a(f>99?Math.round(f/10):f),t:M<12?"a":"p",tt:M<12?"am":"pm",T:M<12?"A":"P",TT:M<12?"AM":"PM",Z:s?"UTC":(String(t).match(o)||[""]).pop().replace(r,""),o:(g>0?"-":"+")+a(100*Math.floor(Math.abs(g)/60)+Math.abs(g)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return i.replace(n,(function(t){return t in y?y[t]:t.slice(1,t.length-1)}))}},void 0===(n=e.apply(a,[a]))||(t.exports=n)},991:function(t){t.exports=(()=>{"use strict";var t={636:(t,a,e)=>{e.r(a),e.d(a,{DetailedSat:()=>C,Sat:()=>E,Sensor:()=>x,Sgp4:()=>d,SpaceObjectType:()=>o,Star:()=>O,Tle:()=>A,Transforms:()=>M,Utils:()=>y});var n={};e.r(n),e.d(n,{SpaceObjectType:()=>o});var o,r=Math.PI,i=2*r,s=r/180,c=2/3,l=15e-13,u=864e5,h=1.15741e-8,d=function(){function t(){}return t.dpper=function(t,a){var e=t.e3,n=t.ee2,o=t.peo,s=t.pgho,c=t.pho,l=t.PInco,u=t.plo,h=t.se2,d=t.se3,M=t.sgh2,p=t.sgh3,m=t.sgh4,f=t.sh2,g=t.sh3,y=t.si2,T=t.si3,v=t.sl2,A=t.sl3,I=t.sl4,D=t.t,w=t.xgh2,N=t.xgh3,E=t.xgh4,R=t.xh2,C=t.xh3,S=t.xi2,x=t.xi3,b=t.xl2,O=t.xl3,_=t.xl4,P=t.zmol,L=t.zmos,U=a.ep,z=a.inclp,j=a.nodep,J=a.argpp,F=a.mp,q=a.opsmode,Y=void 0===q?"i":q,H=a.init,k=L+119459e-10*D;"y"===H&&(k=L);var B=k+.0335*Math.sin(k),G=Math.sin(B),V=.5*G*G-.25,K=-.5*G*Math.cos(B),W=h*V+d*K,Z=y*V+T*K,Q=v*V+A*K+I*G,X=M*V+p*K+m*G,$=f*V+g*K;k=P+.00015835218*D,"y"===H&&(k=P),B=k+.1098*Math.sin(k);var tt=W+(n*(V=.5*(G=Math.sin(B))*G-.25)+e*(K=-.5*G*Math.cos(B))),at=Z+(S*V+x*K),et=Q+(b*V+O*K+_*G),nt=X+(w*V+N*K+E*G),ot=$+(R*V+C*K);if("n"===H){et-=u,nt-=s,ot-=c,z+=at-=l,U+=tt-=o;var rt=Math.sin(z),it=Math.cos(z);if(z>=.2)J+=nt-=it*(ot/=rt),j+=ot,F+=et;else{var st=Math.sin(j),ct=Math.cos(j),lt=rt*st,ut=rt*ct;lt+=ot*ct+at*it*st,ut+=-ot*st+at*it*ct,(j%=i)<0&&"a"===Y&&(j+=i);var ht=F+J+it*j;ht+=et+nt-at*j*rt;var dt=j;(j=Math.atan2(lt,ut))<0&&"a"===Y&&(j+=i),Math.abs(dt-j)>r&&(j<dt?j+=i:j-=i),J=ht-(F+=et)-it*j}}return{ep:U,inclp:z,nodep:j,argpp:J,mp:F}},t.dscom=function(t){var a,e,n,o,r,i,s,c,l,u,h,d,M,p,m,f,g,y,T,v,A,I,D,w,N,E,R,C,S,x,b,O,_,P,L,U,z,j,J=t.epoch,F=t.ep,q=t.argpp,Y=t.tc,H=t.inclp,k=t.nodep,B=t.np,G=.01675,V=.0549,K=2*Math.PI,W=B,Z=F,Q=Math.sin(k),X=Math.cos(k),$=Math.sin(q),tt=Math.cos(q),at=Math.sin(H),et=Math.cos(H),nt=Z*Z,ot=1-nt,rt=Math.sqrt(ot),it=J+18261.5+Y/1440,st=(4.523602-.00092422029*it)%K,ct=Math.sin(st),lt=Math.cos(st),ut=.91375164-.03568096*lt,ht=Math.sqrt(1-ut*ut),dt=.089683511*ct/ht,Mt=Math.sqrt(1-dt*dt),pt=5.8351514+.001944368*it,mt=.39785416*ct/ht,ft=Mt*lt+.91744867*dt*ct;mt=Math.atan2(mt,ft),mt+=pt-st;for(var gt=Math.cos(mt),yt=Math.sin(mt),Tt=.1945905,vt=-.98088458,At=.91744867,It=.39785416,Dt=X,wt=Q,Nt=29864797e-13,Et=1/W,Rt=1;Rt<=2;Rt++){var Ct=Tt*Dt+vt*At*wt,St=-vt*Dt+Tt*At*wt,xt=-Tt*wt+vt*At*Dt,bt=vt*It,Ot=vt*wt+Tt*At*Dt,_t=Tt*It,Pt=et*xt+at*bt,Lt=et*Ot+at*_t,Ut=-at*xt+et*bt,zt=-at*Ot+et*_t,jt=Ct*tt+Pt*$,Jt=St*tt+Lt*$,Ft=-Ct*$+Pt*tt,qt=-St*$+Lt*tt,Yt=Ut*$,Ht=zt*$,kt=Ut*tt,Bt=zt*tt;C=-6*Ct*Ut+nt*(-24*jt*kt-6*Ft*Yt),S=-6*(Ct*zt+St*Ut)+nt*(-24*(Jt*kt+jt*Bt)+-6*(Ft*Ht+qt*Yt)),x=-6*St*zt+nt*(-24*Jt*Bt-6*qt*Ht),O=6*Pt*Ut+nt*(24*jt*Yt-6*Ft*kt),_=6*(Lt*Ut+Pt*zt)+nt*(24*(Jt*Yt+jt*Ht)-6*(qt*kt+Ft*Bt)),P=6*Lt*zt+nt*(24*Jt*Ht-6*qt*Bt),R=(R=3*(Ct*Ct+Pt*Pt)+(U=12*jt*jt-3*Ft*Ft)*nt)+R+ot*U,b=(b=6*(Ct*St+Pt*Lt)+(z=24*jt*Jt-6*Ft*qt)*nt)+b+ot*z,L=(L=3*(St*St+Lt*Lt)+(j=12*Jt*Jt-3*qt*qt)*nt)+L+ot*j,e=-.5*(n=Nt*Et)/rt,a=-15*Z*(o=n*rt),r=jt*Ft+Jt*qt,i=Jt*Ft+jt*qt,s=Jt*qt-jt*Ft,1===Rt&&(c=a,l=e,u=n,h=o,d=r,M=i,p=s,m=R,T=b,D=L,f=C,g=S,y=x,v=O,A=_,I=P,w=U,N=z,E=j,Tt=gt,vt=yt,At=ut,It=ht,Dt=Mt*X+dt*Q,wt=Q*Mt-X*dt,Nt=4.7968065e-7)}return{snodm:Q,cnodm:X,sinim:at,cosim:et,sinomm:$,cosomm:tt,day:it,e3:2*a*s,ee2:2*a*i,em:Z,emsq:nt,gam:pt,peo:0,pgho:0,pho:0,PInco:0,plo:0,rtemsq:rt,se2:2*c*M,se3:2*c*p,sgh2:2*h*N,sgh3:2*h*(E-w),sgh4:-18*h*G,sh2:-2*l*A,sh3:-2*l*(I-v),si2:2*l*g,si3:2*l*(y-f),sl2:-2*u*T,sl3:-2*u*(D-m),sl4:-2*u*(-21-9*nt)*G,s1:a,s2:e,s3:n,s4:o,s5:r,s6:i,s7:s,ss1:c,ss2:l,ss3:u,ss4:h,ss5:d,ss6:M,ss7:p,sz1:m,sz2:T,sz3:D,sz11:f,sz12:g,sz13:y,sz21:v,sz22:A,sz23:I,sz31:w,sz32:N,sz33:E,xgh2:2*o*z,xgh3:2*o*(j-U),xgh4:-18*o*V,xh2:-2*e*_,xh3:-2*e*(P-O),xi2:2*e*S,xi3:2*e*(x-C),xl2:-2*n*b,xl3:-2*n*(L-R),xl4:-2*n*(-21-9*nt)*V,nm:W,z1:R,z2:b,z3:L,z11:C,z12:S,z13:x,z21:O,z22:_,z23:P,z31:U,z32:z,z33:j,zmol:(.2299715*it-pt+4.7199672)%K,zmos:(6.2565837+.017201977*it)%K}},t.dsinit=function(t){var a=t.xke,e=t.cosim,n=t.argpo,o=t.s1,s=t.s2,c=t.s3,l=t.s4,u=t.s5,h=t.sinim,d=t.ss1,M=t.ss2,p=t.ss3,m=t.ss4,f=t.ss5,g=t.sz1,y=t.sz3,T=t.sz11,v=t.sz13,A=t.sz21,I=t.sz23,D=t.sz31,w=t.sz33,N=t.t,E=t.tc,R=t.gsto,C=t.mo,S=t.mdot,x=t.no,b=t.nodeo,O=t.nodedot,_=t.xPIdot,P=t.z1,L=t.z3,U=t.z11,z=t.z13,j=t.z21,J=t.z23,F=t.z31,q=t.z33,Y=t.ecco,H=t.eccsq,k=t.emsq,B=t.em,G=t.argpm,V=t.inclm,K=t.mm,W=t.nm,Z=t.nodem,Q=t.irez,X=t.atime,$=t.d2201,tt=t.d2211,at=t.d3210,et=t.d3222,nt=t.d4410,ot=t.d4422,rt=t.d5220,it=t.d5232,st=t.d5421,ct=t.d5433,lt=t.dedt,ut=t.didt,ht=t.dmdt,dt=t.dnodt,Mt=t.domdt,pt=t.del1,mt=t.del2,ft=t.del3,gt=t.xfact,yt=t.xlamo,Tt=t.xli,vt=t.xni,At=.0043752690880113,It=.00015835218,Dt=119459e-10;Q=0,W<.0052359877&&W>.0034906585&&(Q=1),W>=.00826&&W<=.00924&&B>=.5&&(Q=2);var wt=-Dt*M*(A+I);(V<.052359877||V>r-.052359877)&&(wt=0),0!==h&&(wt/=h);var Nt=-It*s*(j+J);(V<.052359877||V>r-.052359877)&&(Nt=0),Mt=m*Dt*(D+w-6)-e*wt+l*It*(F+q-6),dt=wt,0!==h&&(Mt-=e/h*Nt,dt+=Nt/h);var Et=(R+E*At)%i;if(B+=(lt=d*Dt*f+o*It*u)*N,V+=(ut=M*Dt*(T+v)+s*It*(U+z))*N,G+=Mt*N,Z+=dt*N,K+=(ht=-Dt*p*(g+y-14-6*k)-It*c*(P+L-14-6*k))*N,0!==Q){var Rt=Math.pow(W/a,2/3);if(2===Q){var Ct=e*e,St=B,xt=k,bt=(B=Y)*(k=H),Ot=void 0,_t=void 0,Pt=void 0,Lt=void 0,Ut=void 0,zt=void 0,jt=void 0,Jt=void 0,Ft=void 0;B<=.65?(Ot=3.616-13.247*B+16.29*k,_t=117.39*B-19.302-228.419*k+156.591*bt,Pt=109.7927*B-18.9068-214.6334*k+146.5816*bt,Lt=242.694*B-41.122-471.094*k+313.953*bt,Ut=841.88*B-146.407-1629.014*k+1083.435*bt,zt=3017.977*B-532.114-5740.032*k+3708.276*bt):(Ot=331.819*B-72.099-508.738*k+266.724*bt,_t=1582.851*B-346.844-2415.925*k+1246.113*bt,Pt=1554.908*B-342.585-2366.899*k+1215.972*bt,Lt=4758.686*B-1052.797-7193.992*k+3651.957*bt,Ut=16178.11*B-3581.69-24462.77*k+12422.52*bt,zt=B>.715?29936.92*B-5149.66-54087.36*k+31324.56*bt:1464.74-4664.75*B+3763.64*k),B<.7?(Ft=4988.61*B-919.2277-9064.77*k+5542.21*bt,jt=4568.6173*B-822.71072-8491.4146*k+5337.524*bt,Jt=4690.25*B-853.666-8624.77*k+5341.4*bt):(Ft=161616.52*B-37995.78-229838.2*k+109377.94*bt,jt=218913.95*B-51752.104-309468.16*k+146349.42*bt,Jt=170470.89*B-40023.88-242699.48*k+115605.82*bt);var qt=h*h,Yt=W*W*3*(Rt*Rt),Ht=17891679e-13*Yt;$=Ht*(kt=.75*(1+2*e+Ct))*(-.306-.44*(B-.64)),tt=Ht*(1.5*qt)*Ot,at=(Ht=3.7393792e-7*(Yt*=Rt))*(1.875*h*(1-2*e-3*Ct))*_t,et=Ht*(-1.875*h*(1+2*e-3*Ct))*Pt,nt=(Ht=2*(Yt*=Rt)*7.3636953e-9)*(35*qt*kt)*Lt,ot=Ht*(39.375*qt*qt)*Ut,rt=(Ht=1.1428639e-7*(Yt*=Rt))*(9.84375*h*(qt*(1-2*e-5*Ct)+.33333333*(4*e-2+6*Ct)))*zt,it=Ht*(h*(4.92187512*qt*(-2-4*e+10*Ct)+6.56250012*(1+2*e-3*Ct)))*Jt,st=(Ht=2*Yt*2.1765803e-9)*(29.53125*h*(2-8*e+Ct*(8*e-12+10*Ct)))*jt,ct=Ht*(29.53125*h*(-2-8*e+Ct*(12+8*e-10*Ct)))*Ft,yt=(C+b+b-(Et+Et))%i,gt=S+ht+2*(O+dt-At)-x,B=St,k=xt}if(1===Q){var kt,Bt=1+e;mt=2*(pt=3*W*W*Rt*Rt)*(kt=.75*(1+e)*(1+e))*(1+k*(.8125*k-2.5))*17891679e-13,ft=3*pt*(Bt*=1.875*Bt*Bt)*(1+k*(6.60937*k-6))*2.2123015e-7*Rt,pt=pt*(.9375*h*h*(1+3*e)-.75*(1+e))*(_t=1+2*k)*21460748e-13*Rt,yt=(C+b+n-Et)%i,gt=S+_+ht+Mt+dt-(x+At)}Tt=yt,vt=x,X=0,W=x+0}return{em:B,argpm:G,inclm:V,mm:K,nm:W,nodem:Z,irez:Q,atime:X,d2201:$,d2211:tt,d3210:at,d3222:et,d4410:nt,d4422:ot,d5220:rt,d5232:it,d5421:st,d5433:ct,dedt:lt,didt:ut,dmdt:ht,dndt:0,dnodt:dt,domdt:Mt,del1:pt,del2:mt,del3:ft,xfact:gt,xlamo:yt,xli:Tt,xni:vt}},t.dspace=function(t,a,e,n,o,r,s,c,l,u,h,d,M,p,m,f,g,y,T,v,A,I,D,w,N,E,R,C,S,x,b,O,_,P,L,U){var z=.13130908,j=2.8843198,J=.37448087,F=5.7686396,q=.95240898,Y=1.8014998,H=1.050833,k=4.4108898,B=259200,G=0,V=(w+.0043752690880113*D)%i;if(S+=d*I,b+=f*I,x+=T*I,L+=y*I,_+=g*I,0!==t){var K;(0===C||I*C<=0||Math.abs(I)<Math.abs(C))&&(C=0,P=R,O=E),K=I>0?720:-720;for(var W=void 0,Z=void 0,Q=void 0,X=void 0,$=void 0,tt=void 0,at=void 0,et=381;381===et;)2!==t?(tt=M*Math.sin(O-z)+p*Math.sin(2*(O-j))+m*Math.sin(3*(O-J)),X=P+N,$=M*Math.cos(O-z)+2*p*Math.cos(2*(O-j))+3*m*Math.cos(3*(O-J)),$*=X):(Q=(at=v+A*C)+at,Z=O+O,tt=a*Math.sin(Q+O-F)+e*Math.sin(O-F)+n*Math.sin(at+O-q)+o*Math.sin(-at+O-q)+r*Math.sin(Q+Z-Y)+s*Math.sin(Z-Y)+c*Math.sin(at+O-H)+l*Math.sin(-at+O-H)+u*Math.sin(at+Z-k)+h*Math.sin(-at+Z-k),X=P+N,$=a*Math.cos(Q+O-F)+e*Math.cos(O-F)+n*Math.cos(at+O-q)+o*Math.cos(-at+O-q)+c*Math.cos(at+O-H)+l*Math.cos(-at+O-H)+2*(r*Math.cos(Q+Z-Y)+s*Math.cos(Z-Y)+u*Math.cos(at+Z-k)+h*Math.cos(-at+Z-k)),$*=X),Math.abs(I-C)>=720?et=381:(W=I-C,et=0),381===et&&(O+=X*K+tt*B,P+=tt*K+$*B,C+=K);U=P+tt*W+$*W*W*.5;var nt=O+X*W+tt*W*W*.5;1!==t?(_=nt-2*L+2*V,G=U-R):(_=nt-L-x+V,G=U-R),U=R+G}return[S,x,b,_,L,U]},t.initl=function(a){var e=a.opsmode,n=a.ecco,o=a.epoch,r=a.inclo,i=a.xke,s=a.j2,c=a.no,l=2*Math.PI,u=2/3,h=n*n,d=1-h,M=Math.sqrt(d),p=Math.cos(r),m=p*p,f=Math.pow(i/c,u),g=.75*s*(3*m-1)/(M*d),y=g/(f*f),T=f*(1-y*y-y*(1/3+134*y*y/81));c/=1+(y=g/(T*T));var v,A=Math.pow(i/c,u),I=Math.sin(r),D=A*d,w=1-5*m,N=-w-m-m,E=1/A,R=D*D,C=A*(1-n);if("a"===e){var S=o-7305,x=Math.floor(S+1e-8),b=.017202791694070362;(v=(1.7321343856509375+b*x+(b+l)*(S-x)+S*S*5075514194322695e-30)%l)<0&&(v+=l)}else v=t.gstime(o+2433281.5);return{no:c,method:"n",ainv:E,ao:A,con41:N,con42:w,cosio:p,cosio2:m,eccsq:h,omeosq:d,posq:R,rp:C,rteosq:M,sinio:I,gsto:v}},t.sgp4init=function(a,e){var n=e.whichconst,o=void 0===n?"wgs72":n,r=e.opsmode,s=void 0===r?"i":r,u=e.satn,h=void 0===u?a.satnum:u,d=e.epoch,M=e.xbstar,p=e.xecco,m=e.xargpo,f=e.xinclo,g=e.xndot,y=e.xnddot,T=e.xmo,v=e.xno,A=e.xnodeo;a.isimp=0,a.method="n",a.aycof=0,a.con41=0,a.cc1=0,a.cc4=0,a.cc5=0,a.d2=0,a.d3=0,a.d4=0,a.delmo=0,a.eta=0,a.argpdot=0,a.omgcof=0,a.sinmao=0,a.t=0,a.t2cof=0,a.t3cof=0,a.t4cof=0,a.t5cof=0,a.x1mth2=0,a.x7thm1=0,a.mdot=0,a.nodedot=0,a.xlcof=0,a.xmcof=0,a.nodecf=0,a.irez=0,a.d2201=0,a.d2211=0,a.d3210=0,a.d3222=0,a.d4410=0,a.d4422=0,a.d5220=0,a.d5232=0,a.d5421=0,a.d5433=0,a.dedt=0,a.del1=0,a.del2=0,a.del3=0,a.didt=0,a.dmdt=0,a.dnodt=0,a.domdt=0,a.e3=0,a.ee2=0,a.peo=0,a.pgho=0,a.pho=0,a.PInco=0,a.plo=0,a.se2=0,a.se3=0,a.sgh2=0,a.sgh3=0,a.sgh4=0,a.sh2=0,a.sh3=0,a.si2=0,a.si3=0,a.sl2=0,a.sl3=0,a.sl4=0,a.gsto=0,a.xfact=0,a.xgh2=0,a.xgh3=0,a.xgh4=0,a.xh2=0,a.xh3=0,a.xi2=0,a.xi3=0,a.xl2=0,a.xl3=0,a.xl4=0,a.xlamo=0,a.zmol=0,a.zmos=0,a.atime=0,a.xli=0,a.xni=0;var I=t.getgravconst(o);a.tumin=I.tumin,a.mus=I.mus,a.radiusearthkm=I.radiusearthkm,a.xke=I.xke,a.j2=I.j2,a.j3=I.j3,a.j4=I.j4,a.j3oj2=I.j3oj2;var D=I.j2,w=I.j4,N=I.xke,E=I.j3oj2;a.error=0,a.operationmode=s;var R=h.split("")[0].toLowerCase();isNaN(parseInt(R))?a.satnum=parseInt(R.charCodeAt(0)-96+9+a.satnum.slice(1,5)).toString():a.satnum=h,a.bstar=M,a.ndot=g,a.nddot=y,a.ecco=p,a.argpo=m,a.inclo=f,a.mo=T,a.no=v,a.nodeo=A;var C=78/a.radiusearthkm+1,S=42/a.radiusearthkm,x=S*S*S*S;a.init="y",a.t=0;var b={ecco:a.ecco,epoch:d,inclo:a.inclo,no:a.no,method:a.method,opsmode:a.operationmode,xke:a.xke,j2:a.j2},O=t.initl(b),_=O.ao,P=O.con42,L=O.cosio,U=O.cosio2,z=O.eccsq,j=O.omeosq,J=O.posq,F=O.rp,q=O.rteosq,Y=O.sinio;if(a.no=O.no,a.con41=O.con41,a.gsto=O.gsto,a.a=Math.pow(a.no*a.tumin,-2/3),a.alta=a.a*(1+a.ecco)-1,a.altp=a.a*(1-a.ecco)-1,a.error=0,j>=0||a.no>=0){a.isimp=0,F<220/a.radiusearthkm+1&&(a.isimp=1);var H=C,k=x,B=(F-1)*a.radiusearthkm;if(B<156){H=B-78,B<98&&(H=20);var G=(120-H)/a.radiusearthkm;k=G*G*G*G,H=H/a.radiusearthkm+1}var V=1/J,K=1/(_-H);a.eta=_*a.ecco*K;var W=a.eta*a.eta,Z=a.ecco*a.eta,Q=Math.abs(1-W),X=k*Math.pow(K,4),$=X/Math.pow(Q,3.5),tt=$*a.no*(_*(1+1.5*W+Z*(4+W))+.375*D*K/Q*a.con41*(8+3*W*(8+W)));a.cc1=a.bstar*tt;var at=0;a.ecco>1e-4&&(at=-2*X*K*E*a.no*Y/a.ecco),a.x1mth2=1-U,a.cc4=2*a.no*$*_*j*(a.eta*(2+.5*W)+a.ecco*(.5+2*W)-D*K/(_*Q)*(-3*a.con41*(1-2*Z+W*(1.5-.5*Z))+.75*a.x1mth2*(2*W-Z*(1+W))*Math.cos(2*a.argpo))),a.cc5=2*$*_*j*(1+2.75*(W+Z)+Z*W);var et=U*U,nt=1.5*D*V*a.no,ot=.5*nt*D*V,rt=-.46875*w*V*V*a.no;a.mdot=a.no+.5*nt*q*a.con41+.0625*ot*q*(13-78*U+137*et),a.argpdot=-.5*nt*P+.0625*ot*(7-114*U+395*et)+rt*(3-36*U+49*et);var it=-nt*L;a.nodedot=it+(.5*ot*(4-19*U)+2*rt*(3-7*U))*L;var st=a.argpdot+a.nodedot;a.omgcof=a.bstar*at*Math.cos(a.argpo),a.xmcof=0,a.ecco>1e-4&&(a.xmcof=-c*X*a.bstar/Z),a.nodecf=3.5*j*it*a.cc1,a.t2cof=1.5*a.cc1,Math.abs(L+1)>15e-13?a.xlcof=-.25*E*Y*(3+5*L)/(1+L):a.xlcof=-.25*E*Y*(3+5*L)/l,a.aycof=-.5*E*Y;var ct=1+a.eta*Math.cos(a.mo);if(a.delmo=ct*ct*ct,a.sinmao=Math.sin(a.mo),a.x7thm1=7*U-1,i/a.no>=225){a.method="d",a.isimp=1;var lt=a.inclo,ut={epoch:d,ep:a.ecco,argpp:a.argpo,tc:0,inclp:a.inclo,nodep:a.nodeo,np:a.no,e3:a.e3,ee2:a.ee2,peo:a.peo,pgho:a.pgho,pho:a.pho,PInco:a.PInco,plo:a.plo,se2:a.se2,se3:a.se3,sgh2:a.sgh2,sgh3:a.sgh3,sgh4:a.sgh4,sh2:a.sh2,sh3:a.sh3,si2:a.si2,si3:a.si3,sl2:a.sl2,sl3:a.sl3,sl4:a.sl4,xgh2:a.xgh2,xgh3:a.xgh3,xgh4:a.xgh4,xh2:a.xh2,xh3:a.xh3,xi2:a.xi2,xi3:a.xi3,xl2:a.xl2,xl3:a.xl3,xl4:a.xl4,zmol:a.zmol,zmos:a.zmos},ht=t.dscom(ut);a.e3=ht.e3,a.ee2=ht.ee2,a.peo=ht.peo,a.pgho=ht.pgho,a.pho=ht.pho,a.PInco=ht.PInco,a.plo=ht.plo,a.se2=ht.se2,a.se3=ht.se3,a.sgh2=ht.sgh2,a.sgh3=ht.sgh3,a.sgh4=ht.sgh4,a.sh2=ht.sh2,a.sh3=ht.sh3,a.si2=ht.si2,a.si3=ht.si3,a.sl2=ht.sl2,a.sl3=ht.sl3,a.sl4=ht.sl4;var dt=ht.sinim,Mt=ht.cosim,pt=ht.em,mt=ht.emsq,ft=ht.s1,gt=ht.s2,yt=ht.s3,Tt=ht.s4,vt=ht.s5,At=ht.ss1,It=ht.ss2,Dt=ht.ss3,wt=ht.ss4,Nt=ht.ss5,Et=ht.sz1,Rt=ht.sz3,Ct=ht.sz11,St=ht.sz13,xt=ht.sz21,bt=ht.sz23,Ot=ht.sz31,_t=ht.sz33;a.xgh2=ht.xgh2,a.xgh3=ht.xgh3,a.xgh4=ht.xgh4,a.xh2=ht.xh2,a.xh3=ht.xh3,a.xi2=ht.xi2,a.xi3=ht.xi3,a.xl2=ht.xl2,a.xl3=ht.xl3,a.xl4=ht.xl4,a.zmol=ht.zmol,a.zmos=ht.zmos;var Pt=ht.nm,Lt=ht.z1,Ut=ht.z3,zt=ht.z11,jt=ht.z13,Jt=ht.z21,Ft=ht.z23,qt=ht.z31,Yt=ht.z33,Ht={inclo:lt,init:a.init,ep:a.ecco,inclp:a.inclo,nodep:a.nodeo,argpp:a.argpo,mp:a.mo,opsmode:a.operationmode},kt=t.dpper(a,Ht);a.ecco=kt.ep,a.inclo=kt.inclp,a.nodeo=kt.nodep,a.argpo=kt.argpp,a.mo=kt.mp;var Bt={xke:N,cosim:Mt,emsq:mt,argpo:a.argpo,s1:ft,s2:gt,s3:yt,s4:Tt,s5:vt,sinim:dt,ss1:At,ss2:It,ss3:Dt,ss4:wt,ss5:Nt,sz1:Et,sz3:Rt,sz11:Ct,sz13:St,sz21:xt,sz23:bt,sz31:Ot,sz33:_t,t:a.t,tc:0,gsto:a.gsto,mo:a.mo,mdot:a.mdot,no:a.no,nodeo:a.nodeo,nodedot:a.nodedot,xPIdot:st,z1:Lt,z3:Ut,z11:zt,z13:jt,z21:Jt,z23:Ft,z31:qt,z33:Yt,ecco:a.ecco,eccsq:z,em:pt,argpm:0,inclm:lt,mm:0,nm:Pt,nodem:0,irez:a.irez,atime:a.atime,d2201:a.d2201,d2211:a.d2211,d3210:a.d3210,d3222:a.d3222,d4410:a.d4410,d4422:a.d4422,d5220:a.d5220,d5232:a.d5232,d5421:a.d5421,d5433:a.d5433,dedt:a.dedt,didt:a.didt,dmdt:a.dmdt,dnodt:a.dnodt,domdt:a.domdt,del1:a.del1,del2:a.del2,del3:a.del3,xfact:a.xfact,xlamo:a.xlamo,xli:a.xli,xni:a.xni},Gt=t.dsinit(Bt);a.irez=Gt.irez,a.atime=Gt.atime,a.d2201=Gt.d2201,a.d2211=Gt.d2211,a.d3210=Gt.d3210,a.d3222=Gt.d3222,a.d4410=Gt.d4410,a.d4422=Gt.d4422,a.d5220=Gt.d5220,a.d5232=Gt.d5232,a.d5421=Gt.d5421,a.d5433=Gt.d5433,a.dedt=Gt.dedt,a.didt=Gt.didt,a.dmdt=Gt.dmdt,a.dnodt=Gt.dnodt,a.domdt=Gt.domdt,a.del1=Gt.del1,a.del2=Gt.del2,a.del3=Gt.del3,a.xfact=Gt.xfact,a.xlamo=Gt.xlamo,a.xli=Gt.xli,a.xni=Gt.xni}if(1!==a.isimp){var Vt=a.cc1*a.cc1;a.d2=4*_*K*Vt;var Kt=a.d2*K*a.cc1/3;a.d3=(17*_+H)*Kt,a.d4=.5*Kt*_*K*(221*_+31*H)*a.cc1,a.t3cof=a.d2+2*Vt,a.t4cof=.25*(3*a.d3+a.cc1*(12*a.d2+10*Vt)),a.t5cof=.2*(3*a.d4+12*a.cc1*a.d3+6*a.d2*a.d2+15*Vt*(2*a.d2+Vt))}}t.propagate(a,0),a.init="n"},t.propagate=function(a,e){var n=a.xke,o=a.j2,s=a.j3oj2,u=a.radiusearthkm*a.xke/60;a.t=e,a.error=0;var h=a.mo+a.mdot*a.t,d=a.argpo+a.argpdot*a.t,M=a.nodeo+a.nodedot*a.t,p=d,m=h,f=a.t*a.t,g=M+a.nodecf*f,y=1-a.cc1*a.t,T=a.bstar*a.cc4*a.t,v=a.t2cof*f;if(1!==a.isimp){var A=a.omgcof*a.t,I=1+a.eta*Math.cos(h),D=A+a.xmcof*(I*I*I-a.delmo);m=h+D,p=d-D;var w=f*a.t,N=w*a.t;y=y-a.d2*f-a.d3*w-a.d4*N,T+=a.bstar*a.cc5*(Math.sin(m)-a.sinmao),v=v+a.t3cof*w+N*(a.t4cof+a.t*a.t5cof)}var E=a.no,R=a.ecco,C=a.inclo;if("d"===a.method){var S=a.t,x=t.dspace(a.irez,a.d2201,a.d2211,a.d3210,a.d3222,a.d4410,a.d4422,a.d5220,a.d5232,a.d5421,a.d5433,a.dedt,a.del1,a.del2,a.del3,a.didt,a.dmdt,a.dnodt,a.domdt,a.argpo,a.argpdot,a.t,S,a.gsto,a.xfact,a.xlamo,a.no,a.atime,R,p,C,a.xli,m,a.xni,g,E);R=x[0],p=x[1],C=x[2],m=x[3],g=x[4],E=x[5]}if(E<=0)return a.error=2,{position:!1,velocity:!1};var b=Math.pow(n/E,c)*y*y;if(E=n/Math.pow(b,1.5),(R-=T)>=1||R<-.001)return a.error=1,{position:!1,velocity:!1};R<1e-6&&(R=1e-6);var O=(m+=a.no*v)+p+g,_=R,P=C,L=p%=i,U=g%=i,z=m=((O%=i)-p-g)%i,j=Math.sin(C),J=Math.cos(C);if("d"===a.method){var F={inclo:a.inclo,init:"n",ep:_,inclp:P,nodep:U,argpp:L,mp:z,opsmode:a.operationmode},q=t.dpper(a,F);if(_=q.ep,U=q.nodep,L=q.argpp,z=q.mp,(P=q.inclp)<0&&(P=-P,U+=r,L-=r),_<0||_>1)return a.error=3,{position:!1,velocity:!1}}"d"===a.method&&(j=Math.sin(P),J=Math.cos(P),a.aycof=-.5*s*j,Math.abs(J+1)>15e-13?a.xlcof=-.25*s*j*(3+5*J)/(1+J):a.xlcof=-.25*s*j*(3+5*J)/l);for(var Y,H,k=_*Math.cos(L),B=1/(b*(1-_*_)),G=_*Math.sin(L)+B*a.aycof,V=(z+L+U+B*a.xlcof*k-U)%i,K=V,W=9999.9,Z=1;Math.abs(W)>=1e-12&&Z<=10;)H=Math.sin(K),W=(V-G*(Y=Math.cos(K))+k*H-K)/(W=1-Y*k-H*G),Math.abs(W)>=.95&&(W=W>0?.95:-.95),K+=W,Z+=1;var Q=k*Y+G*H,X=k*H-G*Y,$=k*k+G*G,tt=b*(1-$);if(tt<0)return a.error=4,{position:!1,velocity:!1};var at=b*(1-Q),et=Math.sqrt(b)*X/at,nt=Math.sqrt(tt)/at,ot=Math.sqrt(1-$),rt=b/at*(H-G-k*(B=X/(1+ot))),it=b/at*(Y-k+G*B),st=Math.atan2(rt,it),ct=(it+it)*rt,lt=1-2*rt*rt,ut=.5*o*(B=1/tt),ht=ut*B;if("d"===a.method){var dt=J*J;a.con41=3*dt-1,a.x1mth2=1-dt,a.x7thm1=7*dt-1}var Mt=at*(1-1.5*ht*ot*a.con41)+.5*ut*a.x1mth2*lt;if(Mt<1)return a.error=6,{position:!1,velocity:!1};st-=.25*ht*a.x7thm1*ct;var pt=U+1.5*ht*J*ct,mt=P+1.5*ht*J*j*lt,ft=et-E*ut*a.x1mth2*ct/n,gt=nt+E*ut*(a.x1mth2*lt+1.5*a.con41)/n,yt=Math.sin(st),Tt=Math.cos(st),vt=Math.sin(pt),At=Math.cos(pt),It=Math.sin(mt),Dt=Math.cos(mt),wt=-vt*Dt,Nt=At*Dt,Et=wt*yt+At*Tt,Rt=Nt*yt+vt*Tt,Ct=It*yt,St=wt*Tt-At*yt,xt=Nt*Tt-vt*yt,bt=It*Tt;return{position:{x:Mt*Et*a.radiusearthkm,y:Mt*Rt*a.radiusearthkm,z:Mt*Ct*a.radiusearthkm},velocity:{x:(ft*Et+gt*St)*u,y:(ft*Rt+gt*xt)*u,z:(ft*Ct+gt*bt)*u}}},t.getgravconst=function(t){var a,e,n,o,r,i,s,c;switch(t){case"wgs72old":r=398600.79964,i=6378.135,s=1/(c=.0743669161),o=-165597e-11,n=(e=-253881e-11)/(a=.001082616);break;case"wgs72":r=398600.8,i=6378.135,s=1/(c=60/Math.sqrt(i*i*i/r)),o=-165597e-11,n=(e=-253881e-11)/(a=.001082616);break;case"wgs84":r=398600.5,i=6378.137,s=1/(c=60/Math.sqrt(i*i*i/r)),o=-161098761e-14,n=(e=-253215306e-14)/(a=.00108262998905);break;default:throw new Error("unknown gravity option ".concat(t))}return{tumin:s,mus:r,radiusearthkm:i,xke:c,j2:a,j3:e,j4:o,j3oj2:n}},t.createSatrec=function(a,e,n,o){void 0===n&&(n="wgs72"),void 0===o&&(o="i");var i,c={a:null,am:null,alta:null,altp:null,argpdot:null,argpo:null,aycof:null,bstar:null,cc1:null,cc4:null,cc5:null,con41:null,d2:null,d3:null,d4:null,d5232:null,d5421:null,d5433:null,dedt:null,delmo:null,del1:null,ecco:null,em:null,epochdays:null,epochyr:null,error:null,eta:null,gsto:null,im:null,inclo:null,init:null,isimp:null,jdsatepoch:null,mdot:null,method:null,mo:null,mm:null,nddot:null,ndot:null,no:null,nodecf:null,nodedot:null,nodeo:null,om:null,Om:null,omgcof:null,operationmode:null,satnum:null,sinmao:null,t:null,t2cof:null,t3cof:null,t4cof:null,t5cof:null,x1mth2:null,x7thm1:null,xlcof:null,xmcof:null,xfact:null,xlamo:null,xli:null,xgh4:null,xgh3:null,xh2:null,xi2:null,xi3:null,xl2:null,xl3:null,xl4:null,zmol:null,zmos:null,dmdt:null,dnodt:null,domdt:null,e3:null,ee2:null,peo:null,pgho:null,pho:null,PInco:null,plo:null,se2:null,se3:null,sgh2:null,sgh3:null,sgh4:null,sh2:null,sh3:null,si2:null,si3:null,sl2:null,sl3:null,sl4:null,xgh2:null,xh3:null,tumin:null,radiusearthkm:null,irez:null,d3210:null,d3222:null,d4410:null,d4422:null,d5220:null,del2:null,del3:null,didt:null,atime:null,j2:null,j3:null,j4:null,mus:null,xke:null,j3oj2:null,xni:null,d2201:null,d2211:null,nm:null},l=1440/(2*r);c.error=0,c.satnum=a.substring(2,7),c.epochyr=parseInt(a.substring(18,20)),c.epochdays=parseFloat(a.substring(20,32)),c.ndot=parseFloat(a.substring(33,43)),c.nddot=parseFloat("".concat(a.substring(44,45),".").concat(a.substring(45,50),"E").concat(a.substring(50,52))),c.bstar=parseFloat("".concat(a.substring(53,54),".").concat(a.substring(54,59),"E").concat(a.substring(59,61))),c.inclo=parseFloat(e.substring(8,16)),c.nodeo=parseFloat(e.substring(17,25)),c.ecco=parseFloat(".".concat(e.substring(26,33))),c.argpo=parseFloat(e.substring(34,42)),c.mo=parseFloat(e.substring(43,51)),c.no=parseFloat(e.substring(52,63)),c.no/=l,c.inclo*=s,c.nodeo*=s,c.argpo*=s,c.mo*=s,i=c.epochyr<57?c.epochyr+2e3:c.epochyr+1900;var u=t.days2mdhms(i,c.epochdays),h=u.mon,d=u.day,M=u.hr,p=u.min,m=u.sec,f=t.jday(i,h,d,M,p,m);return c.jdsatepoch=f.jd+f.jdFrac,t.sgp4init(c,{whichconst:n,opsmode:o,satn:c.satnum,epoch:c.jdsatepoch-2433281.5,xbstar:c.bstar,xecco:c.ecco,xargpo:c.argpo,xinclo:c.inclo,xndot:c.ndot,xnddot:c.nddot,xmo:c.mo,xno:c.no,xnodeo:c.nodeo}),c},t.gstime=function(t){var a=(t-2451545)/36525,e=-62e-7*a*a*a+.093104*a*a+3164400184.812866*a+67310.54841;return(e=e*s/240%i)<0&&(e+=i),e},t.sgn=function(t){return t<0?-1:1},t.mag=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},t.cross=function(t,a){var e=[0,0,0];return e[0]=t[1]*a[2]-t[2]*a[1],e[1]=t[2]*a[0]-t[0]*a[2],e[2]=t[0]*a[1]-t[1]*a[0],e},t.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},t.angle=function(a,e){var n=t.mag(a),o=t.mag(e);if(n*o>1e-8*1e-8){var r=t.dot(a,e)/(n*o);return Math.abs(r)>1&&(r=Number(t.sgn(r))),Math.acos(r)}return 999999.1},t.asinh=function(t){return Math.log(t+Math.sqrt(t*t+1))},t.newtonnu=function(a,e){var n=999999.9,o=999999.9,i=1e-8;if(Math.abs(a)<i)o=e,n=e;else if(a<1-i){var s=Math.sqrt(1-a*a)*Math.sin(e)/(1+a*Math.cos(e)),c=(a+Math.cos(e))/(1+a*Math.cos(e));o=(n=Math.atan2(s,c))-a*Math.sin(n)}else a>1+i?a>1&&Math.abs(e)+1e-5<r-Math.acos(1/a)&&(s=Math.sqrt(a*a-1)*Math.sin(e)/(1+a*Math.cos(e)),n=t.asinh(s),o=a*t.sinh(n)-n):Math.abs(e)<168*r/180&&(o=(n=Math.tan(.5*e))+n*n*n/3);return a<1&&((o%=2*r)<0&&(o+=2*r),n%=2*r),{e0:n,m:o}},t.sinh=function(t){return(Math.exp(t)-Math.exp(-t))/2},t.rv2coe=function(a,e,n){var o,s,c,l,u,h,d,M,p,m,f,g,y,T,v,A,I,D=[0,0,0],w=[0,0,0],N=.5*r,E=1e-8,R=999999.1,C=t.mag(a),S=t.mag(e),x=t.cross(a,e),b=t.mag(x);if(b>E){D[0]=-x[1],D[1]=x[0],D[2]=0,y=t.mag(D);var O=S*S-n/C;for(g=t.dot(a,e),A=0;A<=2;A++)w[A]=(O*a[A]-g*e[A])/n;if(c=t.mag(w),v=S*S*.5-n/C,s=Math.abs(v)>E?-n/(2*v):999999.9,o=b*b/n,T=x[2]/b,l=Math.acos(T),I=1,c<E?I=l<E||Math.abs(l-r)<E?2:3:(l<E||Math.abs(l-r)<E)&&(I=4),y>E){var _=D[0]/y;Math.abs(_)>1&&(_=t.sgn(_)),u=Math.acos(_),D[1]<0&&(u=i-u)}else u=R;1===I?(h=t.angle(D,w),w[2]<0&&(h=i-h)):h=R,1===I||4===I?(d=t.angle(w,a),g<0&&(d=i-d)):d=R,3===I?(p=t.angle(D,a),a[2]<0&&(p=i-p),M=p):p=R,c>E&&4===I?(_=w[0]/c,Math.abs(_)>1&&(_=t.sgn(_)),f=Math.acos(_),w[1]<0&&(f=i-f),l>N&&(f=i-f)):f=R,C>E&&2===I?(_=a[0]/C,Math.abs(_)>1&&(_=t.sgn(_)),m=Math.acos(_),a[1]<0&&(m=i-m),l>N&&(m=i-m),M=m):m=R,1!==I&&4!==I||(M=t.newtonnu(c,d).m)}else o=R,s=R,c=R,l=R,u=R,h=R,d=R,M=R,p=R,m=R,f=R;return{p:o,a:s,ecc:c,incl:l,omega:u,argp:h,nu:d,m:M,arglat:p,truelon:m,lonper:f}},t.jday=function(t,a,e,n,o,r,i){void 0===a&&(a=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===i&&(i=0),t instanceof Date&&(a=t.getUTCMonth()+1,e=t.getUTCDate(),n=t.getUTCHours(),o=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds(),t=t.getUTCFullYear());var s=367*t-Math.floor(7*(t+Math.floor((a+9)/12))*.25)+Math.floor(275*a/9)+e+1721013.5,c=(i/1e3+r+60*o+3600*n)/86400;if(Math.abs(c)>1){var l=Math.floor(c);s+=l,c-=l}return{jd:s,jdFrac:c}},t.days2mdhms=function(t,a){for(var e=[31,t%4==0?29:28,31,30,31,30,31,31,30,31,30,31],n=Math.floor(a),o=1,r=0;n>r+e[o-1]&&o<12;)r+=e[o-1],o+=1;var i=o,s=n-r,c=24*(a-n),l=Math.floor(c);c=60*(c-l);var u=Math.floor(c);return{mon:i,day:s,hr:l,min:u,sec:60*(c-u)}},t.invjday=function(a,e){var n,o;Math.abs(e)>=1&&(a+=Math.floor(e),e-=Math.floor(e));var r=a-Math.floor(a)-.5;Math.abs(r)>1e-8&&(a-=r,e+=r);var i=a-2415019.5,s=i/365.25,c=1900+Math.floor(s);n=Math.floor(.25*(c-1901)),(o=Math.floor(i-(365*(c-1900)+n)))+e<1&&(c-=1,n=Math.floor(.25*(c-1901)),o=Math.floor(i-(365*(c-1900)+n)));var l=t.days2mdhms(c,o+e);return{year:c,mon:l.mon,day:l.day,hr:l.hr,min:l.min,sec:l.sec}},t}(),M=function(){function t(){}return t.getDegLat=function(a){if(a<-r/2||a>r/2)throw new RangeError("Latitude radians must be in range [-PI/2; PI/2].");return t.rad2deg(a)},t.getDegLon=function(a){if(a<-r||a>r)throw new RangeError("Longitude radians must be in range [-PI; PI].");return t.rad2deg(a)},t.getRadLat=function(a){if(a<-90||a>90)throw new RangeError("Latitude degrees must be in range [-90; 90].");return t.deg2rad(a)},t.getRadLon=function(a){if(a<-180||a>180)throw new RangeError("Longitude degrees must be in range [-180; 180].");return t.deg2rad(a)},t.rad2deg=function(t){return 180*t/r},t.deg2rad=function(t){return t*r/180},t.ecf2eci=function(t,a){return{x:t.x*Math.cos(a)-t.y*Math.sin(a),y:t.x*Math.sin(a)+t.y*Math.cos(a),z:t.z}},t.ecf2rae=function(a,e){var n=t.lla2sez(a,e);return t.sez2rae(n)},t.eci2lla=function(t,a){for(var e=6378.137,n=Math.sqrt(t.x*t.x+t.y*t.y),o=(e-6356.7523142)/e,s=2*o-o*o,c=Math.atan2(t.y,t.x)-a;c<-r;)c+=i;for(;c>r;)c-=i;for(var l,u=0,h=Math.atan2(t.z,Math.sqrt(t.x*t.x+t.y*t.y));u<20;)l=1/Math.sqrt(1-s*(Math.sin(h)*Math.sin(h))),h=Math.atan2(t.z+e*l*s*Math.sin(h),n),u+=1;return{lon:c,lat:h,alt:n/Math.cos(h)-e*l}},t.eci2ecf=function(t,a){return{x:t.x*Math.cos(a)+t.y*Math.sin(a),y:t.x*-Math.sin(a)+t.y*Math.cos(a),z:t.z}},t.lla2ecf=function(t){var a=t.lon,e=t.lat,n=t.alt,o=6378.137,r=(o-6356.7523142)/o,i=2*r-r*r,s=o/Math.sqrt(1-i*(Math.sin(e)*Math.sin(e)));return{x:(s+n)*Math.cos(e)*Math.cos(a),y:(s+n)*Math.cos(e)*Math.sin(a),z:(s*(1-i)+n)*Math.sin(e)}},t.lla2sez=function(a,e){var n=a.lon,o=a.lat,r=t.lla2ecf(a),i=e.x-r.x,s=e.y-r.y,c=e.z-r.z;return{s:Math.sin(o)*Math.cos(n)*i+Math.sin(o)*Math.sin(n)*s-Math.cos(o)*c,e:-Math.sin(n)*i+Math.cos(n)*s,z:Math.cos(o)*Math.cos(n)*i+Math.cos(o)*Math.sin(n)*s+Math.sin(o)*c}},t.rae2sez=function(t){return{s:-t.rng*Math.cos(t.el)*Math.cos(t.az),e:t.rng*Math.cos(t.el)*Math.sin(t.az),z:t.rng*Math.sin(t.el)}},t.rae2ecf=function(a,e){var n=t.lla2ecf(e),o=t.rae2sez(a),r=Math.sin(e.lat),i=Math.sin(e.lon),s=Math.cos(e.lat),c=Math.cos(e.lon);return{x:r*c*o.s+-i*o.e+s*c*o.z+n.x,y:r*i*o.s+c*o.e+s*i*o.z+n.y,z:-s*o.s+r*o.z+n.z}},t.sez2rae=function(t){var a=Math.sqrt(t.s*t.s+t.e*t.e+t.z*t.z),e=Math.asin(t.z/a);return{rng:a,az:Math.atan2(-t.e,t.s)+r,el:e}},t}();!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PAYLOAD=1]="PAYLOAD",t[t.ROCKET_BODY=2]="ROCKET_BODY",t[t.DEBRIS=3]="DEBRIS",t[t.SPECIAL=4]="SPECIAL",t[t.RADAR_MEASUREMENT=5]="RADAR_MEASUREMENT",t[t.RADAR_TRACK=6]="RADAR_TRACK",t[t.RADAR_OBJECT=7]="RADAR_OBJECT",t[t.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",t[t.STAR=9]="STAR",t[t.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",t[t.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",t[t.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",t[t.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",t[t.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",t[t.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",t[t.LAUNCH_SITE=16]="LAUNCH_SITE",t[t.LAUNCH_POSITION=17]="LAUNCH_POSITION",t[t.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",t[t.CONTROL_FACILITY=19]="CONTROL_FACILITY",t[t.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",t[t.OPTICAL=21]="OPTICAL",t[t.MECHANICAL=22]="MECHANICAL",t[t.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",t[t.OBSERVER=24]="OBSERVER",t[t.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",t[t.COUNTRY=26]="COUNTRY",t[t.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",t[t.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER"}(o||(o={}));var p,m=2*Math.PI,f=function(){function t(){}return t.julianCycle=function(a,e){var n=e/m;return Math.round(a-t.J0-n)},t.observerAngle=function(t){return-2.076*Math.sqrt(t)/60},t.solarMeanAnomaly=function(t){return s*(357.5291+.98560028*t)},t.julian2date=function(a){return new Date((a-t.J1970)*u)},t.date2jSince2000=function(a){return a.getTime()/u+t.J1970-t.J2000},t.rightAscension=function(a,e){return Math.atan2(Math.sin(a)*Math.cos(t.e)-Math.tan(e)*Math.sin(t.e),Math.cos(a))},t.declination=function(a,e){return Math.asin(Math.sin(e)*Math.cos(t.e)+Math.cos(e)*Math.sin(t.e)*Math.sin(a))},t.azimuth=function(t,a,e){return Math.PI+Math.atan2(Math.sin(t),Math.cos(t)*Math.sin(a)-Math.tan(e)*Math.cos(a))},t.elevation=function(t,a,e){return Math.asin(Math.sin(a)*Math.sin(e)+Math.cos(a)*Math.cos(e)*Math.cos(t))},t.siderealTime=function(t,a){return s*(280.16+360.9856235*t)-a},t.astroRefraction=function(t){return t<0&&(t=0),2967e-7/Math.tan(t+.00312536/(t+.08901179))},t.eclipticLongitude=function(t){return t+s*(1.9148*Math.sin(t)+.02*Math.sin(2*t)+3e-4*Math.sin(3*t))+102.9372*s+Math.PI},t.eclipticLatitude=function(t){var a=m/360,e=t-.00569-.00478*Math.sin(a*t);return m*(e+3e-4*Math.sin(2*a*e))},t.julianCyle=function(a,e){return Math.round(a-t.J0-e/(2*m/2))},t.approxTransit=function(a,e,n){return t.J0+(a+e)/m+n},t.solarTransitJulian=function(a,e,n){return t.J2000+a+.0053*Math.sin(e)-.0069*Math.sin(2*n)},t.hourAngle=function(t,a,e){return Math.acos((Math.sin(t)-Math.sin(a)*Math.sin(e))/(Math.cos(a)*Math.cos(e)))},t.getSetJulian=function(a,e,n,o,r,i,s){var c=t.hourAngle(a,n,o),l=t.approxTransit(c,e,r);return t.solarTransitJulian(l,i,s)},t.getSetJ=function(a,e,n,o,r,i,s){var c=t.hourAngle(a,n,o),l=t.approxTransit(c,e,r);return t.solarTransitJulian(l,i,s)},t.getTimes=function(a,e,n,o,r){if(void 0===o&&(o=0),void 0===r&&(r=!1),isNaN(e))throw new Error("latitude missing");if(isNaN(n))throw new Error("longitude missing");var i=new Date(a);r?i.setUTCHours(12,0,0,0):i.setHours(12,0,0,0);var c,l=0,u=[],h=0,d=0,M=0,p=t.calculateJnoon(n,e,o,i),m=p.Jnoon,f=p.dh,g=p.lw,y=p.phi,T=p.dec,v=p.n,A=p.M,I=p.L,D={solarNoon:t.julian2date(m),nadir:t.julian2date(m+.5)};for(l=0,c=t.times.length;l<c;l+=1)h=((u=t.times[l])[0]+f)*s,M=m-((d=t.getSetJ(h,g,y,T,v,A,I))-m),D[u[1]]=t.julian2date(M),D[u[2]]=t.julian2date(d);return D},t.calculateJnoon=function(a,e,n,o){var r=s*-a,i=s*e,c=t.observerAngle(n),l=t.date2jSince2000(o),u=t.julianCycle(l,r),h=t.approxTransit(0,r,u),d=t.solarMeanAnomaly(h),M=t.eclipticLongitude(d),p=t.declination(M,0);return{Jnoon:t.solarTransitJulian(h,d,M),dh:c,lw:r,phi:i,dec:p,n:u,M:d,L:M}},t.getSunTimeByAzimuth=function(a,e,n,o,r){if(void 0===r&&(r=!1),isNaN(o))throw new Error("azimuth missing");if(isNaN(e))throw new Error("latitude missing");if(isNaN(n))throw new Error("longitude missing");r&&(o*=s);var i=new Date(a),c=s*-n,l=s*e,h=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0).getTime(),d=u;for(h+=d;d>200;){var M=t.date2jSince2000(new Date(h)),p=t.getSunRaDec(M),m=t.siderealTime(M,c)-p.ra;d/=2,t.getAzimuth(m,l,p.dec)<o?h+=d:h-=d}return new Date(Math.floor(h))},t.getAzimuth=function(t,a,e){return Math.atan2(Math.sin(t),Math.cos(t)*Math.sin(a)-Math.tan(e)*Math.cos(a))+Math.PI},t.getSolarTime=function(t,a,e){var n=new Date;n.setUTCFullYear(t.getUTCFullYear(),0,1),n.setUTCHours(0,0,0,0);var o=t.getTime()-n.getTime(),r=360/365*(Math.floor(o/u)-81)*s,i=9.87*Math.sin(2*r)-7.53*Math.cos(r)-1.5*Math.sin(r)+4*(e-15*a);return new Date(t.getTime()+60*i*1e3)},t.getStarAzEl=function(a,e,n,o,r){var i=-n*s,c=e*s,l=t.date2jSince2000(a),u=t.siderealTime(l,i)-o,h=t.elevation(u,c,r);return{az:t.azimuth(u,c,r),el:h+=t.astroRefraction(h)}},t.getSunAzEl=function(a,e,n){var o=-n*s,r=e*s,i=t.date2jSince2000(a),c=t.getSunRaDec(i),l=t.siderealTime(i,o)-c.ra;return{az:t.azimuth(l,r,c.dec),el:t.elevation(l,r,c.dec)}},t.getSunRaDec=function(a){var e=t.solarMeanAnomaly(a),n=t.eclipticLongitude(e);return{dec:t.declination(n,0),ra:t.rightAscension(n,0)}},t.J1970=2440587.5,t.J2000=2451545,t.J0=9e-4,t.e=23.4397*s,t.times=[[6,"goldenHourDawnEnd","goldenHourDuskStart"],[-.3,"sunriseEnd","sunsetStart"],[-.833,"sunriseStart","sunsetEnd"],[-1,"goldenHourDawnStart","goldenHourDuskEnd"],[-4,"blueHourDawnEnd","blueHourDuskStart"],[-6,"civilDawn","civilDusk"],[-8,"blueHourDawnStart","blueHourDuskEnd"],[-12,"nauticalDawn","nauticalDusk"],[-15,"amateurDawn","amateurDusk"],[-18,"astronomicalDawn","astronomicalDusk"]],t}(),g=function(){function t(){}return t.moonCoords=function(t){var a=s*(134.963+13.064993*t),e=s*(93.272+13.22935*t),n=s*(218.316+13.176396*t)+6.289*s*Math.sin(a),o=5.128*s*Math.sin(e),r=385001-20905*Math.cos(a);return{ra:f.rightAscension(n,o),dec:f.declination(n,o),dist:r}},t.hoursLater=function(t,a){return new Date(t.getTime()+a*u/24)},t.getMoonPosition=function(a,e,n){var o=s*-n,r=s*e,i=f.date2jSince2000(a),c=t.moonCoords(i),l=f.siderealTime(i,o)-c.ra,u=f.elevation(l,r,c.dec),h=Math.atan2(Math.sin(l),Math.tan(r)*Math.cos(c.dec)-Math.sin(c.dec)*Math.cos(l));return u+=f.astroRefraction(u),{az:f.azimuth(l,r,c.dec),el:u,rng:c.dist,parallacticAngle:h}},t.getMoonIllumination=function(a){var e=a instanceof Date?a.getTime():a,n=2551442778,o=f.date2jSince2000(new Date(e)),r=f.getSunRaDec(o),i=t.moonCoords(o),s=149598e3,c=Math.acos(Math.sin(r.dec)*Math.sin(i.dec)+Math.cos(r.dec)*Math.cos(i.dec)*Math.cos(r.ra-i.ra)),l=Math.atan2(s*Math.sin(c),i.dist-s*Math.cos(c)),u=Math.atan2(Math.cos(r.dec)*Math.sin(r.ra-i.ra),Math.sin(r.dec)*Math.cos(i.dec)-Math.cos(r.dec)*Math.sin(i.dec)*Math.cos(r.ra-i.ra)),h=.5+.5*l*(u<0?-1:1)/Math.PI,d=(e-94717884e4)%n;d<0&&(d+=n);var M=n-d+e,p=1275721389-d+e;p<e&&(p+=n);var m=637860694.5-d+e;m<e&&(m+=n);var g,y=1913582083.5-d+e;y<e&&(y+=n);for(var T,v=Math.min(M,m,p,y),A=0;A<t.moonCycles.length;A++){var I=t.moonCycles[A];if(h>=I.from&&h<=I.to){T=I;break}}return g=v===M?"newMoon":v===m?"firstQuarter":v===p?"fullMoon":"thirdQuarter",{fraction:(1+Math.cos(l))/2,phase:T,phaseValue:h,angle:u,next:{value:v,date:new Date(v).toISOString(),type:g,newMoon:{value:M,date:new Date(M).toISOString()},fullMoon:{value:p,date:new Date(p).toISOString()},firstQuarter:{value:m,date:new Date(m).toISOString()},thirdQuarter:{value:y,date:new Date(y).toISOString()}}}},t.getMoonTimes=function(a,e,n,o){void 0===o&&(o=!1);var r=new Date(a);o?r.setUTCHours(0,0,0,0):r.setHours(0,0,0,0);var i=t.calculateRiseSetTimes(r,e,n),s=i.rise,c=i.set,l=i.ye,u={rise:null,set:null,ye:null,alwaysUp:null,alwaysDown:null,highest:null};return u.rise=s?new Date(t.hoursLater(a,s)):NaN,u.set=c?new Date(t.hoursLater(a,c)):NaN,s||c?s&&c?(u.alwaysUp=!1,u.alwaysDown=!1,u.highest=new Date(t.hoursLater(a,Math.min(s,c)+Math.abs(c-s)/2))):(u.alwaysUp=!1,u.alwaysDown=!1):l>0?(u.alwaysUp=!0,u.alwaysDown=!1):(u.alwaysUp=!1,u.alwaysDown=!0),u},t.calculateRiseSetTimes=function(a,e,n){for(var o=.133*s,r=t.getMoonPosition(a,e,n).el-o,i=0,c=0,l=0,u=0,h=0,d=0,M=0,p=0,m=0,f=0,g=0,y=0,T=0,v=1;v<=24&&(i=t.getMoonPosition(t.hoursLater(a,v),e,n).el-o,p=((h=(r+(c=t.getMoonPosition(t.hoursLater(a,v+1),e,n).el-o))/2-i)*(M=-(d=(c-r)/2)/(2*h))+d)*M+i,f=0,(m=d*d-4*h*i)>=0&&(g=M-(T=Math.sqrt(m)/(2*Math.abs(h))),y=M+T,Math.abs(g)<=1&&f++,Math.abs(y)<=1&&f++,g<-1&&(g=y)),1===f?r<0?l=v+g:u=v+g:2===f&&(l=v+(p<0?y:g),u=v+(p<0?g:y)),!l||!u);v+=2)r=c;return{rise:l,set:u,ye:p}},t.moonCycles=[{from:0,to:.033863193308711,id:"newMoon",emoji:"🌚",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"},{from:.033863193308711,to:.216136806691289,id:"waxingCrescentMoon",emoji:"🌒",code:":waxing_crescent_moon:",name:"Waxing Crescent",weight:6.3825,css:"wi-moon-wax-cres"},{from:.216136806691289,to:.283863193308711,id:"firstQuarterMoon",emoji:"🌓",code:":first_quarter_moon:",name:"First Quarter",weight:1,css:"wi-moon-first-quart"},{from:.283863193308711,to:.466136806691289,id:"waxingGibbousMoon",emoji:"🌔",code:":waxing_gibbous_moon:",name:"Waxing Gibbous",weight:6.3825,css:"wi-moon-wax-gibb"},{from:.466136806691289,to:.533863193308711,id:"fullMoon",emoji:"🌝",code:":full_moon_with_face:",name:"Full Moon",weight:1,css:"wi-moon-full"},{from:.533863193308711,to:.716136806691289,id:"waningGibbousMoon",emoji:"🌖",code:":waning_gibbous_moon:",name:"Waning Gibbous",weight:6.3825,css:"wi-moon-wan-gibb"},{from:.716136806691289,to:.783863193308711,id:"thirdQuarterMoon",emoji:"🌗",code:":last_quarter_moon:",name:"third Quarter",weight:1,css:"wi-moon-third-quart"},{from:.783863193308711,to:.966136806691289,id:"waningCrescentMoon",emoji:"🌘",code:":waning_crescent_moon:",name:"Waning Crescent",weight:6.3825,css:"wi-moon-wan-cres"},{from:.966136806691289,to:1,id:"newMoon",emoji:"🌚",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"}],t}(),y=function(){function t(){}return t.distance=function(t,a){return Math.sqrt(Math.pow(t.x-a.x,2)+Math.pow(t.y-a.y,2)+Math.pow(t.z-a.z,2))},t.dopplerFactor=function(a,e,n){var o=7292115e-11,r={x:e.x-a.x,y:e.y-a.y,z:e.z-a.z},i=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2)+Math.pow(r.z,2)),s=n.x+o*a.y,c=n.y-o*a.x,l=n.z,u=(r.x*s+r.y*c+r.z*l)/i;return 1+u/299792.458*t.sign(u)},t.createVec=function(t,a,e){for(var n=[],o=t;o<=a;o+=e)n.push(o);return n},t.roundToNDecimalPlaces=function(t,a){return Math.round(t*Math.pow(10,a))/Math.pow(10,a)},t.Types=n,t.sign=function(t){return t>=0?1:-1},t.jday=function(t,a,e,n,o,r){if(!t){var i=new Date,s=new Date(i.getUTCFullYear(),0,0),c=i.getDate()-s.getDate();return Math.floor(c/h)}return 367*t-Math.floor(7*(t+Math.floor((a+9)/12))*.25)+Math.floor(275*a/9)+e+1721013.5+((r/60+o)/60+n)/24},t.SunMath=f,t.MoonMath=g,t}(),T=function(t,a){this.start=t-1,this.stop=a,this.length=this.stop-this.start},v=function(){return v=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);return t},v.apply(this,arguments)},A=function(){function t(){}return t.parseTle=function(a,e){var n=t.parseLine1(a),o=t.parseLine2(e);if(n.satNum!==o.satNum)throw new Error("Satellite numbers do not match");if(n.satNumRaw!==o.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==n.lineNumber1)throw new Error("First line number must be 1");if(2!==o.lineNumber2)throw new Error("Second line number must be 2");return{satNum:n.satNum,intlDes:n.intlDes,epochYear:n.epochYear,epochDay:n.epochDay,meanMoDev1:n.meanMoDev1,meanMoDev2:n.meanMoDev2,bstar:n.bstar,inclination:o.inclination,raan:o.raan,eccentricity:o.eccentricity,argOfPerigee:o.argOfPerigee,meanAnomaly:o.meanAnomaly,meanMotion:o.meanMotion}},t.parseTleFull=function(a,e){var n=t.parseLine1(a),o=t.parseLine2(e);if(n.satNum!==o.satNum)throw new Error("Satellite numbers do not match");if(n.satNumRaw!==o.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==n.lineNumber1)throw new Error("First line number must be 1");if(2!==o.lineNumber2)throw new Error("Second line number must be 2");return v(v({},n),o)},t.parseLine1=function(a){return{lineNumber1:t.getLineNumber(a),satNum:t.getSatNum(a),satNumRaw:t.getRawSatNum(a),classification:t.getClassification(a),intlDes:t.getIntlDes(a),intlDesYear:t.getIntlDesYear(a),intlDesLaunchNum:t.getIntlDesLaunchNum(a),intlDesLaunchPiece:t.getIntlDesLaunchPiece(a),epochYear:t.getEpochYear(a),epochYearFull:t.getEpochYearFull(a),epochDay:t.getEpochDay(a),meanMoDev1:t.getMeanMoDev1(a),meanMoDev2:t.getMeanMoDev2(a),bstar:t.getBstar(a),ephemerisType:t.getEphemerisType(a),elsetNum:t.getElsetNum(a),checksum1:t.getChecksum(a)}},t.parseLine2=function(a){return{lineNumber2:t.getLineNumber(a),satNum:t.getSatNum(a),satNumRaw:t.getRawSatNum(a),inclination:t.getInclination(a),raan:t.getRaan(a),eccentricity:t.getEccentricity(a),argOfPerigee:t.getArgOfPerigee(a),meanAnomaly:t.getMeanAnomaly(a),meanMotion:t.getMeanMotion(a),revNum:t.getRevNum(a),checksum2:t.getChecksum(a)}},t.getLineNumber=function(a){var e=parseInt(a.substring(t.lineNumber.start,t.lineNumber.stop));if(1!==e&&2!==e)throw new Error("Invalid line number");return e},t.getSatNum=function(a){var e=a.substring(t.satNum.start,t.satNum.stop),n=e.split("")[0].toLowerCase();return isNaN(parseInt(n))?parseInt(n.charCodeAt(0)-96+9+e.slice(1,5)):parseInt(e)},t.getRawSatNum=function(a){return a.substring(t.satNum.start,t.satNum.stop)},t.getClassification=function(a){return a.substring(t.classification.start,t.classification.stop)},t.getIntlDes=function(a){return a.substring(t.intlDes.start,t.intlDes.stop).trim()},t.getIntlDesYear=function(a){return parseInt(a.substring(t.intlDesYear.start,t.intlDesYear.stop))},t.getIntlDesLaunchNum=function(a){return parseInt(a.substring(t.intlDesLaunchNum.start,t.intlDesLaunchNum.stop))},t.getIntlDesLaunchPiece=function(a){return a.substring(t.intlDesLaunchPiece.start,t.intlDesLaunchPiece.stop).trim()},t.getEpochYear=function(a){var e=parseInt(a.substring(t.epochYear.start,t.epochYear.stop));if(e<0||e>99)throw new Error("Invalid epoch year");return e},t.getEpochYearFull=function(a){var e=parseInt(a.substring(t.epochYear.start,t.epochYear.stop));if(e<0||e>99)throw new Error("Invalid epoch year");return e<57?e+2e3:e+1900},t.getEpochDay=function(a){var e=parseFloat(a.substring(t.epochDay.start,t.epochDay.stop));if(e<1||e>365.99999999)throw new Error("Invalid epoch day");return y.roundToNDecimalPlaces(e,8)},t.getMeanMoDev1=function(a){var e=parseFloat(a.substring(t.meanMoDev1.start,t.meanMoDev1.stop));if(isNaN(e))throw new Error("Invalid first derivative of mean motion.");return y.roundToNDecimalPlaces(e,8)},t.getMeanMoDev2=function(a){var e=parseFloat(a.substring(t.meanMoDev2.start,t.meanMoDev2.stop));if(isNaN(e))throw new Error("Invalid second derivative of mean motion.");return e},t.getBstar=function(a){var e=t.bstar.start+1,n=t.bstar.start+6,o=t.bstar.stop-1,r=a.substring(t.bstar.start,e),i=parseFloat("0.".concat(a.substring(e,n))),s=a.substring(n,o),c=parseInt(a.substring(o,t.bstar.stop));if("-"===s)c*=-1;else if("+"!==s)throw new Error("Invalid BSTAR symbol: ".concat(r));if(i*=Math.pow(10,c),"-"===r)i*=-1;else if("+"!==r&&" "!==r)throw new Error("Invalid BSTAR symbol: ".concat(r));return y.roundToNDecimalPlaces(i,14)},t.getEphemerisType=function(a){return parseInt(a.substring(t.ephemerisType.start,t.ephemerisType.stop))},t.getElsetNum=function(a){return parseInt(a.substring(t.elsetNum.start,t.elsetNum.stop))},t.getChecksum=function(a){return parseInt(a.substring(t.checksum.start,t.checksum.stop))},t.getInclination=function(a){var e=parseFloat(a.substring(t.inclination.start,t.inclination.stop));if(e<0||e>180)throw new Error("Invalid inclination: ".concat(e));return y.roundToNDecimalPlaces(e,4)},t.getRaan=function(a){var e=parseFloat(a.substring(t.raan.start,t.raan.stop));if(!(e>=0&&e<=360))throw new Error("Invalid RAAN: ".concat(e));return y.roundToNDecimalPlaces(e,4)},t.getEccentricity=function(a){var e=parseFloat("0.".concat(a.substring(t.eccentricity.start,t.eccentricity.stop)));if(!(e>=0&&e<=1))throw new Error("Invalid eccentricity: ".concat(e));return y.roundToNDecimalPlaces(e,7)},t.getArgOfPerigee=function(a){var e=parseFloat(a.substring(t.argPerigee.start,t.argPerigee.stop));if(!(e>=0&&e<=360))throw new Error("Invalid argument of perigee: ".concat(e));return y.roundToNDecimalPlaces(e,4)},t.getMeanAnomaly=function(a){var e=parseFloat(a.substring(t.meanAnom.start,t.meanAnom.stop));if(!(e>=0&&e<=360))throw new Error("Invalid mean anomaly: ".concat(e));return y.roundToNDecimalPlaces(e,4)},t.getMeanMotion=function(a){var e=parseFloat(a.substring(t.meanMo.start,t.meanMo.stop));if(!(e>=0&&e<=17))throw new Error("Invalid mean motion: ".concat(e));return y.roundToNDecimalPlaces(e,8)},t.getRevNum=function(a){return parseInt(a.substring(t.revNum.start,t.revNum.stop))},t.lineNumber=new T(1,1),t.satNum=new T(3,7),t.classification=new T(8,8),t.intlDes=new T(10,17),t.intlDesYear=new T(10,11),t.intlDesLaunchNum=new T(12,14),t.intlDesLaunchPiece=new T(15,17),t.epochYear=new T(19,20),t.epochDay=new T(21,32),t.meanMoDev1=new T(34,43),t.meanMoDev2=new T(45,52),t.bstar=new T(54,61),t.ephemerisType=new T(63,63),t.elsetNum=new T(65,68),t.checksum=new T(69,69),t.inclination=new T(9,16),t.raan=new T(18,25),t.eccentricity=new T(27,33),t.argPerigee=new T(35,42),t.meanAnom=new T(44,51),t.meanMo=new T(53,63),t.revNum=new T(64,68),t}(),I=function(){function t(t){this.type=t.type||o.UNKNOWN,this.name=t.name||"Unknown",this.position=t.position||{x:0,y:0,z:0},this.time=t.time||new Date}return t.prototype.getName=function(){return this.name},t.prototype.getType=function(){return this.type},t.prototype.getTypeString=function(){switch(this.type){case o.UNKNOWN:return"Unknown";case o.PAYLOAD:return"Payload";case o.ROCKET_BODY:return"Rocket Body";case o.DEBRIS:return"Debris";case o.SPECIAL:return"Special";case o.RADAR_MEASUREMENT:return"Radar Measurement";case o.RADAR_TRACK:return"Radar Track";case o.RADAR_OBJECT:return"Radar Object";case o.BALLISTIC_MISSILE:return"Ballistic Missile";case o.STAR:return"Star";case o.INTERGOVERNMENTAL_ORGANIZATION:return"Intergovernmental Organization";case o.SUBORBITAL_PAYLOAD_OPERATOR:return"Suborbital Payload Operator";case o.PAYLOAD_OWNER:return"Payload Owner";case o.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER:return"Meteorological Rocket Launch Agency or Manufacturer";case o.PAYLOAD_MANUFACTURER:return"Payload Manufacturer";case o.LAUNCH_AGENCY:return"Launch Agency";case o.LAUNCH_SITE:return"Launch Site";case o.LAUNCH_POSITION:return"Launch Position";case o.LAUNCH_FACILITY:return"Launch Facility";case o.CONTROL_FACILITY:return"Control Facility";case o.GROUND_SENSOR_STATION:return"Ground Sensor Station";case o.OPTICAL:return"Optical";case o.MECHANICAL:return"Mechanical";case o.PHASED_ARRAY_RADAR:return"Phased Array Radar";case o.OBSERVER:return"Observer";case o.BISTATIC_RADIO_TELESCOPE:return"Bistatic Radio Telescope";case o.COUNTRY:return"Country";case o.LAUNCH_VEHICLE_MANUFACTURER:return"Launch Vehicle Manufacturer";case o.ENGINE_MANUFACTURER:return"Engine Manufacturer";default:return"Unknown"}},t}(),D=(p=function(t,a){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])},p(t,a)},function(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function e(){this.constructor=t}p(t,a),t.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}),w=function(t){function a(a){var e=t.call(this,a)||this;return a.rcs&&(e.rcs=a.rcs),a.vmag&&(e.vmag=a.vmag),e}return D(a,t),a.prototype.getRcs=function(){return this.rcs},a.prototype.getVmag=function(){return this.vmag},a}(I),N=function(){var t=function(a,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])},t(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=a}t(a,e),a.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),E=function(t){function a(a,e){var n=t.call(this,a)||this,o=A.parseTle(a.tle1,a.tle2);return n.satNum=o.satNum,n.intlDes=o.intlDes,n.epochYear=o.epochYear,n.epochDay=o.epochDay,n.meanMoDev1=o.meanMoDev1,n.meanMoDev2=o.meanMoDev2,n.bstar=o.bstar,n.inclination=o.inclination,n.raan=o.raan,n.eccentricity=o.eccentricity,n.argOfPerigee=o.argOfPerigee,n.meanAnomaly=o.meanAnomaly,n.meanMotion=o.meanMotion,n.period=1440/n.meanMotion,n.satrec=d.createSatrec(a.tle1,a.tle2),n.options=e,n}return N(a,t),a.prototype.propagateTo=function(t){var e=a.calculateTimeVariables(t,this.satrec).m,n=d.propagate(this.satrec,e).position||{x:0,y:0,z:0};return this.position=n,this.time=t,this},a.prototype.getStateVec=function(t){void 0===t&&(t=this.time);var e=a.calculateTimeVariables(t,this.satrec).m;return d.propagate(this.satrec,e)},a.prototype.getEci=function(t){void 0===t&&(t=this.time);var e=a.calculateTimeVariables(t,this.satrec).m;return d.propagate(this.satrec,e).position||{x:0,y:0,z:0}},a.prototype.getEcf=function(t){void 0===t&&(t=this.time);var e=a.calculateTimeVariables(t,this.satrec),n=e.m,o=e.gmst,r=d.propagate(this.satrec,n).position||{x:0,y:0,z:0};return M.eci2ecf(r,o)},a.prototype.getLla=function(t){void 0===t&&(t=this.time);var e=a.calculateTimeVariables(t,this.satrec),n=e.m,o=e.gmst,r=d.propagate(this.satrec,n).position||{x:0,y:0,z:0};return M.eci2lla(r,o)},a.prototype.getRae=function(t,e){void 0===e&&(e=this.time);var n=a.calculateTimeVariables(e,this.satrec),o=n.m,r=n.gmst,i=d.propagate(this.satrec,o).position||{x:0,y:0,z:0},s=M.eci2ecf(i,r);return M.ecf2rae({lat:t.lat,lon:t.lon,alt:t.alt},s)},a.calculateTimeVariables=function(t,a){var e=y.jday(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())+t.getUTCMilliseconds()*h;return{gmst:d.gstime(e),m:a?1440*(e-a.jdsatepoch):null,j:e}},a}(w),R=function(){var t=function(a,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])},t(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=a}t(a,e),a.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),C=function(t){function a(a,e,n){var o=t.call(this,a,e)||this;return o.setLaunchDetails(n.launchDetails),o.setSpaceCraftDetails(n.spaceCraftDetails),o.setOperationsDetails(n.operationsDetails),o}return R(a,t),a.prototype.setLaunchDetails=function(t){t.launchDate&&(this.launchDate=t.launchDate),t.launchMass&&(this.launchMass=t.launchMass),t.launchSite&&(this.launchSite=t.launchSite),t.launchVehicle&&(this.launchVehicle=t.launchVehicle)},a.prototype.getLaunchDetails=function(){return{launchDate:this.launchDate,launchMass:this.launchMass,launchSite:this.launchSite,launchVehicle:this.launchVehicle}},a.prototype.setSpaceCraftDetails=function(t){t.lifetime&&(this.lifetime=t.lifetime),t.maneuver&&(this.maneuver=t.maneuver),t.manufacturer&&(this.manufacturer=t.manufacturer),t.motor&&(this.motor=t.motor),t.power&&(this.power=t.power),t.payload&&(this.payload=t.payload),t.purpose&&(this.purpose=t.purpose),t.shape&&(this.shape=t.shape),t.span&&(this.span=t.span),t.configuration&&(this.configuration=t.configuration),t.equipment&&(this.equipment=t.equipment),t.dryMass&&(this.dryMass=t.dryMass)},a.prototype.getSpaceCraftDetails=function(){return{lifetime:this.lifetime,maneuver:this.maneuver,manufacturer:this.manufacturer,motor:this.motor,power:this.power,payload:this.payload,purpose:this.purpose,shape:this.shape,span:this.span,configuration:this.configuration,equipment:this.equipment,dryMass:this.dryMass}},a.prototype.setOperationsDetails=function(t){t.user&&(this.user=t.user),t.mission&&(this.mission=t.mission),t.owner&&(this.owner=t.owner),t.country&&(this.country=t.country)},a.prototype.getOperationsDetails=function(){return{user:this.user,mission:this.mission,owner:this.owner,country:this.country}},a}(E),S=function(){var t=function(a,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])},t(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=a}t(a,e),a.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),x=function(t){function a(a){var e=this;if(a.type)switch(a.type){case o.OPTICAL:case o.MECHANICAL:case o.PHASED_ARRAY_RADAR:case o.OBSERVER:case o.BISTATIC_RADIO_TELESCOPE:break;default:throw new Error("Invalid sensor type")}if(e=t.call(this,a)||this,!(a.lat>=-90&&a.lat<=90))throw new Error("Invalid latitude");if(e.lat=a.lat,!(a.lon>=-180&&a.lon<=180))throw new Error("Invalid longitude");if(e.lon=a.lon,!(a.alt>=0))throw new Error("Invalid altitude");return e.alt=a.alt,e}return S(a,t),a.prototype.setTime=function(t){return this.time=t,this},a.prototype.getRae=function(t,a){return void 0===a&&(a=this.time),t.getRae(this,a)},a}(I),b=function(){var t=function(a,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])},t(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=a}t(a,e),a.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),O=function(t){function a(a){var e=this;if(a.type&&a.type!==o.STAR)throw new Error("Invalid object type");return a.type=o.STAR,(e=t.call(this,a)||this).ra=a.ra,e.dec=a.dec,a.pname&&(e.pname=a.pname),a.bf&&(e.bf=a.bf),a.h&&(e.h=a.h),e}return b(a,t),a.prototype.getEci=function(t,e){void 0===t&&(t={lat:180,lon:0,alt:0}),void 0===e&&(e=this.time);var n=this.getRae(t,e),o=a.calculateTimeVariables(e).gmst;return M.ecf2eci(M.rae2ecf(n,{lat:0,lon:0,alt:0}),o)},a.prototype.getRae=function(t,a){void 0===t&&(t={lat:180,lon:0,alt:0}),void 0===a&&(a=this.time);var e=y.SunMath.getStarAzEl(a,t.lat*s,t.lon*s,this.ra,this.dec);return{az:e.az,el:e.el,rng:25e4}},a.calculateTimeVariables=function(t){var a=y.jday(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())+t.getUTCMilliseconds()*h;return{gmst:d.gstime(a),j:a}},a}(w)}},a={};function e(n){if(a[n])return a[n].exports;var o=a[n]={exports:{}};return t[n](o,o.exports,e),o.exports}return e.d=(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},e.o=(t,a)=>Object.prototype.hasOwnProperty.call(t,a),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e(636)})()}},a={};function e(n){var o=a[n];if(void 0!==o)return o.exports;var r=a[n]={exports:{}};return t[n].call(r.exports,r,r.exports,e),r.exports}(()=>{"use strict";var t=e(991);Math.PI;const a=2*Math.PI,n=a/360,o=6371;e(90);const r=(t,a,e,n,o,r)=>{if(t)return 367*t-Math.floor(7*(t+Math.floor((a+9)/12))*.25)+Math.floor(275*a/9)+e+1721013.5+((r/60+o)/60+n)/24;{const t=new Date,a=new Date(t.getUTCFullYear(),0,0),e=t.getDate()-a.getDate();return Math.floor(e/1.15741e-8)}};var i,s;(s=i||(i={}))[s.UNKNOWN=0]="UNKNOWN",s[s.PAYLOAD=1]="PAYLOAD",s[s.ROCKET_BODY=2]="ROCKET_BODY",s[s.DEBRIS=3]="DEBRIS",s[s.SPECIAL=4]="SPECIAL",s[s.RADAR_MEASUREMENT=5]="RADAR_MEASUREMENT",s[s.RADAR_TRACK=6]="RADAR_TRACK",s[s.RADAR_OBJECT=7]="RADAR_OBJECT",s[s.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",s[s.STAR=9]="STAR",s[s.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",s[s.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",s[s.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",s[s.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",s[s.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",s[s.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",s[s.LAUNCH_SITE=16]="LAUNCH_SITE",s[s.LAUNCH_POSITION=17]="LAUNCH_POSITION",s[s.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",s[s.CONTROL_FACILITY=19]="CONTROL_FACILITY",s[s.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",s[s.OPTICAL=21]="OPTICAL",s[s.MECHANICAL=22]="MECHANICAL",s[s.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",s[s.OBSERVER=24]="OBSERVER",s[s.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",s[s.COUNTRY=26]="COUNTRY",s[s.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",s[s.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER",s[s.NOTIONAL=29]="NOTIONAL";const c={JMod:2400000.5,J2000:2451545,J1900:2415020,B1900:2415020.3135,B1950:2433282.4235,JulianYear:365.25,JulianCentury:36525,BesselianYear:365.2421988,AU:149597870,EclCoord:function(t,a,e){if(isNaN(t)||isNaN(a))throw Error("Invalid EclCoord object: ("+t+", "+a+")");this.lat=t,this.lng=a,void 0!==e&&(this.h=e)}};c.EclCoord.prototype={toWgs84String:function(){return c.Math.formatNum(180*this.lat/Math.PI)+", "+c.Math.formatNum(180*-this.lng/Math.PI)}},c.EclCoordfromWgs84=function(t,a,e){return new c.EclCoord(t*Math.PI/180,-a*Math.PI/180,e)},c.EqCoord=function(t,a){if(isNaN(t)||isNaN(a))throw Error("Invalid EqCoord object: ("+t+", "+a+")");this.ra=t,this.dec=a},c.EqCoord.prototype={toString:function(){return"ra:"+c.Math.formatNum(180*this.ra/Math.PI)+", dec:"+c.Math.formatNum(180*this.dec/Math.PI)}},c.HzCoord=function(t,a){if(isNaN(t)||isNaN(a))throw Error("Invalid HzCoord object: ("+t+", "+a+")");this.az=t,this.alt=a},c.HzCoord.prototype={toString:function(){return"azi:"+c.Math.formatNum(180*this.az/Math.PI)+", alt:"+c.Math.formatNum(180*this.alt/Math.PI)}},c.Coord={dmsToDeg:function(t,a,e,n){return n=(60*(60*a+e)+n)/3600,t?-n:n},calcAngle:function(t,a,e,n){return c.Coord.dmsToDeg(t,a,e,n)*Math.PI/180},calcRA:function(t,a,e){return c.Coord.dmsToDeg(!1,t,a,e)%24*15*Math.PI/180},secondsToHMSStr:function(t){var a=Math.floor(t/86400);t=c.Math.pMod(t,86400);var e=Math.floor(t/3600)%24,n=Math.floor(t/60)%60;return(0!==a?a+"d ":"")+(10>e?"0":"")+e+":"+(10>n?"0":"")+n+":"+(10>(t=Math.floor(t%60))?"0":"")+t},secondsToHMStr:function(t){var a=Math.floor(t/86400);t=c.Math.pMod(t,86400);var e=Math.floor(t/3600)%24;return(0!==a?a+"d ":"")+(10>e?"0":"")+e+":"+(10>(t=Math.floor(t/60)%60)?"0":"")+t},eqToEcl:function(t,a){var e=Math.sin(t.ra),n=Math.sin(t.dec),o=Math.cos(t.dec),r=Math.sin(a);return a=Math.cos(a),new c.EclCoord(Math.atan2(e*a+n/o*r,Math.cos(t.ra)),Math.asin(n*a-o*r*e))},eclToEq:function(t,a){var e=Math.sin(t.lat),n=Math.sin(t.lng),o=Math.cos(t.lng),r=Math.sin(a);a=Math.cos(a);let i=Math.atan2(e*a-n/o*r,Math.cos(t.lat));return 0>i&&(i+=2*Math.PI),new c.EqCoord(i,Math.asin(n*a+o*r*e))},eqToHz:function(t,a,e){e=e-a.lng-t.ra;var n=Math.cos(e),o=Math.sin(a.lat);a=Math.cos(a.lat);var r=Math.sin(t.dec);return t=Math.cos(t.dec),new c.HzCoord(Math.atan2(Math.sin(e),n*o-r/t*a),Math.asin(o*r+a*t*n))}},c.DeltaT={jdToJde:function(t,a){return a||(a=c.DeltaT.estimate(t)),t+a/86400},jdeToJd:function(t,a){return a||(a=c.DeltaT.estimate(t)),t-a/86400},decimalYear:function(t){return(t=c.JulianDay.jdToCalendar(t)).y+(t.m-.5)/12},estimate:function(t){var a=c.DeltaT.decimalYear(t);return t=Math.pow,-500>a?32*t((a-1820)/100,2)-20:500>a?10583.6-1014.41*(a/=100)+33.78311*t(a,2)-5.952053*t(a,3)-.1798452*t(a,4)+.022174192*t(a,5)+.0090316521*t(a,6):1600>a?1574.2-556.01*(a=(a-1e3)/100)+71.23472*t(a,2)+.319781*t(a,3)-.8503463*t(a,4)-.005050998*t(a,5)+.0083572073*t(a,6):1700>a?120-.9808*(a-=1600)-.01532*t(a,2)+t(a,3)/7129:1800>a?8.83+.1603*(a-=1700)-.0059285*t(a,2)+13336e-8*t(a,3)-t(a,4)/1174e3:1860>a?13.72-.332447*(a-=1800)+.0068612*t(a,2)+.0041116*t(a,3)-37436e-8*t(a,4)+121272e-10*t(a,5)-1.699e-7*t(a,6)+8.75e-10*t(a,7):1900>a?7.62+.5737*(a-=1860)-.251754*t(a,2)+.01680668*t(a,3)-.0004473624*t(a,4)+t(a,5)/233174:1920>a?1.494119*(a-=1900)-2.79-.0598939*t(a,2)+.0061966*t(a,3)-197e-6*t(a,4):1941>a?21.2+.84493*(a-=1920)-.0761*t(a,2)+.0020936*t(a,3):1961>a?29.07+.407*(a-=1950)-t(a,2)/233+t(a,3)/2547:1986>a?45.45+1.067*(a-=1975)-t(a,2)/260-t(a,3)/718:2005>a?63.86+.3345*(a-=2e3)-.060374*t(a,2)+.0017275*t(a,3)+651814e-9*t(a,4)+2373599e-11*t(a,5):2050>a?62.92+.32217*(a-=2e3)+.005589*t(a,2):2150>a?32*t((a-1820)/100,2)-20-.5628*(2150-a):32*t((a-1820)/100,2)-20}},c.Globe={Er:6378.14,Fl:1/298.257,parallaxConstants:function(t,a){a||(a=0);var e=1-c.Globe.Fl;return a=.001*a/c.Globe.Er,{rhoslat:Math.sin(Math.atan(e*Math.tan(t)))*e+a*Math.sin(t),rhoclat:Math.cos(Math.atan(e*Math.tan(t)))+a*Math.cos(t)}}},c.Interp={newLen3:function(t,a,e){if(3!=e.length)throw"Error not 3";if(a==t)throw"Error no x range";var n=e[1]-e[0],o=e[2]-e[1];return{x1:t,x3:a,y:e,a:n,b:o,c:o-n,abSum:n+o,xSum:a+t,xDiff:a-t}},interpolateX:function(t,a){return c.Interp.interpolateN(t,(2*a-t.xSum)/t.xDiff)},interpolateN:function(t,a){return t.y[1]+.5*a*(t.abSum+a*t.c)}},c.JulianDay=function(t,a){t instanceof Date&&(t=c.JulianDay.dateToJD(t)),this.jd=t,this.deltaT=a||c.DeltaT.estimate(this.jd),this.jde=c.DeltaT.jdToJde(this.jd,this.deltaT)},c.JulianDay.prototype={toCalendar:function(){return c.JulianDay.jdToCalendar(this.jd)},toDate:function(){return c.JulianDay.jdToDate(this.jd)},jdJ2000Century:function(){return(this.jd-c.J2000)/c.JulianCentury},jdeJ2000Century:function(){return(this.jde-c.J2000)/c.JulianCentury},startOfDay:function(){return new c.JulianDay(Math.floor(this.jde-.5)+.5,this.deltaT)}},c.JulianDay.gregorianTimeStart=Date.UTC(1582,9,4),c.JulianDay.jdFromGregorian=function(t,a,e){return new c.JulianDay(c.JulianDay.jdFromGregorian(t,a,e))},c.JulianDay.jdFromJulian=function(t,a,e){return new c.JulianDay(c.JulianDay.calendarJulianToJD(t,a,e))},c.JulianDay.jdFromJDE=function(t){var a=c.DeltaT.estimate(t);return t=c.DeltaT.jdeToJd(t,a),new c.JulianDay(t,a)},c.JulianDay.dateToJD=function(t){var a=t.getUTCDate()+c.JulianDay.secondsFromHMS(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())/86400;return t.getTime()<c.JulianDay.gregorianTimeStart?c.JulianDay.calendarJulianToJD(t.getUTCFullYear(),t.getUTCMonth()+1,a):c.JulianDay.calendarGregorianToJD(t.getUTCFullYear(),t.getUTCMonth()+1,a)},c.JulianDay.calendarGregorianToJD=function(t,a,e){1!=a&&2!=a||(t--,a+=12);var n=Math.floor(t/100);return Math.floor(36525*(t+4716)/100)+Math.floor(306*(a+1)/10)+(2-n+Math.floor(n/4))+e-1524.5},c.JulianDay.calendarJulianToJD=function(t,a,e){return 1!=a&&2!=a||(t--,a+=12),Math.floor(36525*(t+4716)/100)+Math.floor(306*(a+1)/10)+e-1524.5},c.JulianDay.secondsFromHMS=function(t,a,e){return 3600*t+60*a+e},c.JulianDay.jdToDate=function(t){var a=c.JulianDay.jdToCalendar(t);return t=c.Math.modF(t+.5)[1],t=Math.round(86400*t),new Date(Date.UTC(a.y,a.m-1,Math.floor(a.d),Math.floor(t/3600)%24,Math.floor(t/60)%60,Math.floor(t%60)))},c.JulianDay.jdToCalendar=function(t){var a=(t=c.Math.modF(t+.5))[0],e=a;2299151<=a&&(e=a+1+(e=Math.floor((100*a-186721625)/3652425))-Math.floor(e/4));var n=e+1524;a=Math.floor((100*n-12210)/36525);var o=Math.floor(36525*a/100);return e=Math.floor(1e4*(n-o)/306001),t=n-o-Math.floor(306001*e/1e4)+t[1],{y:1==(e=14==e||15==e?e-13:e-1)||2==e?Math.floor(a)-4715:Math.floor(a)-4716,m:e,d:t}},c.JulianDay.leapYearGregorian=function(t){return 0==t%4&&0!=t%100||0==t%400},c.JulianDay.dayOfYear=function(t,a,e,n){return t=2,n&&t--,c.JulianDay._wholeMonths(a,t)+e},c.JulianDay._wholeMonths=function(t,a){return Math.round(275*t/9-(t+9)/12*a-30)},c.Math={pMod:function(t,a){return 0>(t%=a)&&(t+=a),t},modF:function(t){return 0>t?(t=-t,[-Math.floor(t),-t%1]):[Math.floor(t),t%1]},horner:function(t,a){var e=a.length-1;if(0>=e)throw"empty array not supported";for(var n=a[e];0<e;)n=n*t+a[--e];return n},formatNum:function(t,a){return a=Math.pow(10,4|a),Math.round(t*a)/a}},c.Moon={parallax:function(t){return Math.asin(6378.14/t)},apparentEquatorial:function(t){var a=c.Moon.geocentricPosition(t),e=c.Nutation.nutation(t);return t=c.Nutation.meanObliquityLaskar(t)+e.deltaobliquity,{eq:c.Coord.eclToEq(new c.EclCoord(a.lng+e.deltalng,a.lat),t),delta:a.delta}},apparentTopocentric:function(t,a,e){var n=c.Moon.apparentEquatorial(t),o=c.Globe.parallaxConstants(a.lat,a.h),r=c.Moon.parallax(n.delta);return e||(e=c.Sidereal.apparentInRa(t)),{eq:c.Parallax.topocentric(n.eq,r,o.rhoslat,o.rhoclat,a.lng,e),delta:n.delta}},topocentricPosition:function(t,a,e){var n=c.Sidereal.apparentInRa(t);t=c.Moon.apparentTopocentric(t,a,n);var o=c.Coord.eqToHz(t.eq,a,n);return!0===e&&(o.alt+=c.Refraction.bennett2(o.alt)),a=c.Moon.parallacticAngle(a.lat,n-(a.lng+t.eq.ra),t.eq.dec),{hz:o,eq:t.eq,delta:t.delta,q:a}},approxTransit:function(t,a){return t=t.startOfDay(),c.Rise.approxTransit(a,c.Sidereal.apparent0UT(t),c.Moon.apparentTopocentric(t,a).eq)},approxTimes:function(t,a){t=t.startOfDay();var e=c.Moon.apparentTopocentric(t,a),n=c.Moon.parallax(e.delta);return n=c.Rise.stdh0Lunar(n),t=c.Sidereal.apparent0UT(t),c.Rise.approxTimes(a,n,t,e.eq)},times:function(t,a){t=t.startOfDay();var e=c.Moon.apparentTopocentric(new c.JulianDay(t.jd-1,t.deltaT),a),n=c.Moon.apparentTopocentric(t,a),o=c.Moon.apparentTopocentric(new c.JulianDay(t.jd+1,t.deltaT),a),r=c.Moon.parallax(n.delta);r=c.Rise.stdh0Lunar(r);var i=c.Sidereal.apparent0UT(t);return c.Rise.times(a,t.deltaT,r,i,[e.eq,n.eq,o.eq])},parallacticAngle:function(t,a,e){return Math.atan2(Math.sin(a),Math.tan(t)*Math.cos(e)-Math.sin(e)*Math.cos(a))},geocentricPosition:function(t){var a=Math.PI/180,e=t.jdeJ2000Century();t=c.Math.pMod(c.Math.horner(e,[218.3164477*a,481267.88123421*a,-.0015786*a,a/538841,-a/65194e3]),2*Math.PI);var n=c.Math.pMod(c.Math.horner(e,[297.8501921*a,445267.1114034*a,-.0018819*a,a/545868,-a/113065e3]),2*Math.PI),o=c.Math.pMod(c.Math.horner(e,[357.5291092*a,35999.0502909*a,-1535e-7*a,a/2449e4]),2*Math.PI),r=c.Math.pMod(c.Math.horner(e,[134.9633964*a,477198.8675055*a,.0087414*a,a/69699,-a/14712e3]),2*Math.PI),i=c.Math.pMod(c.Math.horner(e,[93.272095*a,483202.0175233*a,-.0036539*a,-a/3526e3,a/86331e4]),2*Math.PI),s=119.75*a+131.849*a*e,l=53.09*a+479264.29*a*e,u=313.45*a+481266.484*a*e,h=(e=c.Math.horner(e,[1,-.002516,-74e-7]))*e;l=3958*Math.sin(s)+1962*Math.sin(t-i)+318*Math.sin(l);var d=0;for(s=-2235*Math.sin(t)+382*Math.sin(u)+175*Math.sin(s-i)+175*Math.sin(s+i)+127*Math.sin(t-r)-115*Math.sin(t+r),u=0;u<c.Moon.ta.length;u++){var M=c.Moon.ta[u],p=n*M[0]+o*M[1]+r*M[2]+i*M[3],m=Math.sin(p);switch(p=Math.cos(p),M[1]){case 0:l+=M[4]*m,d+=M[5]*p;break;case 1:case-1:l+=M[4]*m*e,d+=M[5]*p*e;break;case 2:case-2:l+=M[4]*m*h,d+=M[5]*p*h;break;default:throw"error"}}for(u=0;u<c.Moon.tb.length;u++)switch(M=c.Moon.tb[u],m=Math.sin(n*M[0]+o*M[1]+r*M[2]+i*M[3]),M[1]){case 0:s+=M[4]*m;break;case 1:case-1:s+=M[4]*m*e;break;case 2:case-2:s+=M[4]*m*h;break;default:throw"error"}return{lng:c.Math.pMod(t,2*Math.PI)+1e-6*l*a,lat:1e-6*s*a,delta:385000.56+.001*d}},ta:[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],tb:[[0,0,0,1,5128122],[0,0,1,1,280602],[0,0,1,-1,277693],[2,0,0,-1,173237],[2,0,-1,1,55413],[2,0,-1,-1,46271],[2,0,0,1,32573],[0,0,2,1,17198],[2,0,1,-1,9266],[0,0,2,-1,8822],[2,-1,0,-1,8216],[2,0,-2,-1,4324],[2,0,1,1,4200],[2,1,0,-1,-3359],[2,-1,-1,1,2463],[2,-1,0,1,2211],[2,-1,-1,-1,2065],[0,1,-1,-1,-1870],[4,0,-1,-1,1828],[0,1,0,1,-1794],[0,0,0,3,-1749],[0,1,-1,1,-1565],[1,0,0,1,-1491],[0,1,1,1,-1475],[0,1,1,-1,-1410],[0,1,0,-1,-1344],[1,0,0,-1,-1335],[0,0,3,1,1107],[4,0,0,-1,1021],[4,0,-1,1,833],[0,0,1,-3,777],[4,0,-2,1,671],[2,0,0,-3,607],[2,0,2,-1,596],[2,-1,1,-1,491],[2,0,-2,1,-451],[0,0,3,-1,439],[2,0,2,1,422],[2,0,-3,-1,421],[2,1,-1,1,-366],[2,1,0,1,-351],[4,0,0,1,331],[2,-1,1,1,315],[2,-2,0,-1,302],[0,0,1,3,-283],[2,1,1,-1,-229],[1,1,0,-1,223],[1,1,0,1,223],[0,1,-2,-1,-220],[2,1,-1,-1,-220],[1,0,1,1,-185],[2,-1,-2,-1,181],[0,1,2,1,-177],[4,0,-2,-1,176],[4,-1,-1,-1,166],[1,0,1,-1,-164],[4,0,1,-1,132],[1,0,-1,-1,-119],[4,-1,0,-1,115],[2,-2,0,1,107]]},c.MoonIllum={phaseAngleEq:function(t,a,e,n){return t=c.MoonIllum._coselong(t,e),Math.atan2(n*Math.sin(Math.acos(t)),a-n*t)},phaseAngleEq2:function(t,a){return Math.acos(-c.MoonIllum._coselong(t,a))},illuminated:function(t){return(1+Math.cos(t))/2},positionAngle:function(t,a){var e=Math.cos(a.dec);return Math.atan2(e*Math.sin(a.ra-t.ra),Math.sin(a.dec)*Math.cos(t.dec)-e*Math.sin(t.dec)*Math.cos(a.ra-t.ra))},_coselong:function(t,a){return Math.sin(a.dec)*Math.sin(t.dec)+Math.cos(a.dec)*Math.cos(t.dec)*Math.cos(a.ra-t.ra)}},c.Nutation={nutation:function(t){t=t.jdeJ2000Century();for(var a=c.Math.horner(t,[297.85036,445267.11148,-.0019142,1/189474])*Math.PI/180,e=c.Math.horner(t,[357.52772,35999.05034,-1603e-7,-1/3e5])*Math.PI/180,n=c.Math.horner(t,[134.96298,477198.867398,.0086972,1/5620])*Math.PI/180,o=c.Math.horner(t,[93.27191,483202.017538,-.0036825,1/327270])*Math.PI/180,r=c.Math.horner(t,[125.04452,-1934.136261,.0020708,1/45e4])*Math.PI/180,i=0,s=0,l=c.Nutation.table22A.length-1;0<=l;l--){var u=c.Nutation.table22A[l],h=u[0]*a+u[1]*e+u[2]*n+u[3]*o+u[4]*r,d=Math.cos(h);i+=Math.sin(h)*(u[5]+u[6]*t),s+=d*(u[7]+u[8]*t)}return{deltalng:1e-4/3600*i*(Math.PI/180),deltaobliquity:1e-4/3600*s*(Math.PI/180)}},nutationInRA:function(t){var a=c.Nutation.meanObliquityLaskar(t);return(t=c.Nutation.nutation(t)).deltalng*Math.cos(a+t.deltaobliquity)},trueObliquity:function(t){return c.Nutation.meanObliquityLaskar(t)+(t=c.Nutation.nutation(t)).deltaobliquity},meanObliquity:function(t){return c.Math.horner(t.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-46.815/3600*(Math.PI/180),-59e-5/3600*(Math.PI/180),.001813/3600*(Math.PI/180)])},meanObliquityLaskar:function(t){return c.Math.horner(.01*t.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-4680.93/3600*(Math.PI/180),-1.55/3600*(Math.PI/180),1999.25/3600*(Math.PI/180),-51.38/3600*(Math.PI/180),-249.67/3600*(Math.PI/180),-39.05/3600*(Math.PI/180),7.12/3600*(Math.PI/180),27.87/3600*(Math.PI/180),5.79/3600*(Math.PI/180),2.45/3600*(Math.PI/180)])},table22A:[[0,0,0,0,1,-171996,-174.2,92025,8.9],[-2,0,0,2,2,-13187,-1.6,5736,-3.1],[0,0,0,2,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[0,0,1,0,0,712,.1,-7,0],[-2,1,0,2,2,-517,1.2,224,-.6],[0,0,0,2,1,-386,-.4,200,0],[0,0,1,2,2,-301,0,129,-.1],[-2,-1,0,2,2,217,-.5,-95,.3],[-2,0,1,0,0,-158,0,0,0],[-2,0,0,2,1,129,.1,-70,0],[0,0,-1,2,2,123,0,-53,0],[2,0,0,0,0,63,0,0,0],[0,0,1,0,1,63,.1,-33,0],[2,0,-1,2,2,-59,0,26,0],[0,0,-1,0,1,-58,-.1,32,0],[0,0,1,2,1,-51,0,27,0],[-2,0,2,0,0,48,0,0,0],[0,0,-2,2,1,46,0,-24,0],[2,0,0,2,2,-38,0,16,0],[0,0,2,2,2,-31,0,13,0],[0,0,2,0,0,29,0,0,0],[-2,0,1,2,2,29,0,-12,0],[0,0,0,2,0,26,0,0,0],[-2,0,0,2,0,-22,0,0,0],[0,0,-1,2,1,21,0,-10,0],[0,2,0,0,0,17,-.1,0,0],[2,0,-1,0,1,16,0,-8,0],[-2,2,0,2,2,-16,.1,7,0],[0,1,0,0,1,-15,0,9,0],[-2,0,1,0,1,-13,0,7,0],[0,-1,0,0,1,-12,0,6,0],[0,0,2,-2,0,11,0,0,0],[2,0,-1,2,1,-10,0,5,0],[2,0,1,2,2,-8,0,3,0],[0,1,0,2,2,7,0,-3,0],[-2,1,1,0,0,-7,0,0,0],[0,-1,0,2,2,-7,0,3,0],[2,0,0,2,1,-7,0,3,0],[2,0,1,0,0,6,0,0,0],[-2,0,2,2,2,6,0,-3,0],[-2,0,1,2,1,6,0,-3,0],[2,0,-2,0,1,-6,0,3,0],[2,0,0,0,1,-6,0,3,0],[0,-1,1,0,0,5,0,0,0],[-2,-1,0,2,1,-5,0,3,0],[-2,0,0,0,1,-5,0,3,0],[0,0,2,2,1,-5,0,3,0],[-2,0,2,0,1,4,0,0,0],[-2,1,0,2,1,4,0,0,0],[0,0,1,-2,0,4,0,0,0],[-1,0,1,0,0,-4,0,0,0],[-2,1,0,0,0,-4,0,0,0],[1,0,0,0,0,-4,0,0,0],[0,0,1,2,0,3,0,0,0],[0,0,-2,2,2,-3,0,0,0],[-1,-1,1,0,0,-3,0,0,0],[0,1,1,0,0,-3,0,0,0],[0,-1,1,2,2,-3,0,0,0],[2,-1,-1,2,2,-3,0,0,0],[0,0,3,2,2,-3,0,0,0],[2,-1,0,2,2,-3,0,0,0]]},c.Parallax={earthsunParallax:8.794/60/60*Math.PI/180,horizontal:function(t){return 8.794/60/60*Math.PI/180/t},topocentric:function(t,a,e,n,o,r){o=c.Math.pMod(r-o-t.ra,2*Math.PI),a=Math.sin(a),r=Math.cos(o);var i=Math.cos(t.dec);return o=Math.atan2(-n*a*Math.sin(o),i-n*a*r),new c.EqCoord(t.ra+o,Math.atan2((Math.sin(t.dec)-e*a)*Math.cos(o),i-n*a*r))},topocentric2:function(t,a,e,n,o,r){return o=c.Math.pMod(r-o-t.ra,2*Math.PI),r=Math.cos(t.dec),new c.EqCoord(t.ra+-a*n*Math.sin(o)/r,t.dec+-a*(e*r-n*Math.cos(o)*Math.sin(t.dec)))}},c.Refraction={bennett:function(t){0>t&&(t=0);var a=Math.PI/180;return a/60/Math.tan(t+7.31*a*a/(t+4.4*a))},bennett2:function(t){var a=Math.PI/180,e=60/a,n=.06/e;return e=14.7*e*a,a*=13,(t=c.Refraction.bennett(t))-n*Math.sin(e*t+a)},saemundsson:function(t){var a=Math.PI/180;return 1.02*a/60/Math.tan(t+10.3*a*a/(t+5.11*a))}},c.Rise={meanRefraction:.5667*Math.PI/180,stdh0Stellar:-.5667*Math.PI/180,stdh0Solar:-.8333*Math.PI/180,stdh0LunarMean:.125*Math.PI/180,stdh0Lunar:function(t){return.7275*t-c.Rise.meanRefraction},circumpolar:function(t,a,e){return-1>(t=(Math.sin(a)-Math.sin(t)*Math.sin(e))/(Math.cos(t)*Math.cos(e)))||1<t?null:t},approxTransit:function(t,a,e){return 43200*(e.ra+t.lng)/Math.PI-a},approxTimes:function(t,a,e,n){return(a=c.Rise.circumpolar(t.lat,a,n.dec))?(a=43200*Math.acos(a)/Math.PI,t=43200*(n.ra+t.lng)/Math.PI-e,{transit:c.Math.pMod(t,86400),transitd:Math.floor(t/86400),rise:c.Math.pMod(t-a,86400),rised:Math.floor((t-a)/86400),set:c.Math.pMod(t+a,86400),setd:Math.floor((t+a)/86400)}):null},times:function(t,a,e,n,o){function r(o){var r=c.Math.pMod(n+360.985647*o/360,86400),i=o+a,u=c.Interp.interpolateX(s,i);return i=c.Interp.interpolateX(l,i),r=r*Math.PI/43200-(t.lng+u),u=Math.cos(i),c.Math.pMod(o+(h*Math.sin(i)+d*u*Math.cos(r)-e)/(u*d*Math.sin(r))*43200/Math.PI,86400)}var i=c.Rise.approxTimes(t,e,n,o[1]);if(!i)return null;var s=c.Interp.newLen3(-86400,86400,[o[0].ra,o[1].ra,o[2].ra]),l=c.Interp.newLen3(-86400,86400,[o[0].dec,o[1].dec,o[2].dec]);o=n+360.985647*i.transit/360;var u=c.Interp.interpolateX(s,i.transit+a);i.transit=c.Math.pMod(i.transit-(o-43200*(t.lng+u)/Math.PI),86400);var h=Math.sin(t.lat),d=Math.cos(t.lat);return i.rise=r(i.rise),i.set=r(i.set),i}},c.Sidereal={iau82:[24110.54841,8640184.812866,.093104,62e-7],jdToCFrac:function(t){return t=c.Math.modF(t.jd+.5),[new c.JulianDay(t[0]-.5).jdJ2000Century(),t[1]]},mean:function(t){return c.Math.pMod(c.Sidereal._mean(t),86400)},_mean:function(t){return(t=c.Sidereal._mean0UT(t)).s+86636.55536784*t.f},_meanInRA:function(t){return(t=c.Sidereal._mean0UT(t)).s*Math.PI/43200+2.0054758187*t.f*Math.PI},mean0UT:function(t){return t=c.Sidereal._mean0UT(t),c.Math.pMod(t.s,86400)},_mean0UT:function(t){return t=c.Sidereal.jdToCFrac(t),{s:c.Math.horner(t[0],c.Sidereal.iau82),f:t[1]}},apparentInRa:function(t){var a=c.Sidereal._meanInRA(t);return t=c.Nutation.nutationInRA(t),c.Math.pMod(a+t,2*Math.PI)},apparent:function(t){var a=c.Sidereal._mean(t);return t=648e3*c.Nutation.nutationInRA(t)/Math.PI/15,c.Math.pMod(a+t,86400)},apparentLocal:function(t,a){return t=c.Sidereal.apparent(t),c.Math.pMod(t-43200*a/Math.PI,86400)},apparent0UT:function(t){var a=c.Math.modF(t.jd+.5);return t=c.Math.modF(t.jde+.5),a=c.Math.horner((a[0]-.5-c.J2000)/36525,c.Sidereal.iau82)+86636.55536784*a[1],t=648e3*c.Nutation.nutationInRA(new c.JulianDay(t[0]))/Math.PI/15,c.Math.pMod(a+t,86400)}},c.Solar={earthsunDelta:149597870,apparentEquatorial:function(t){var a=t.jdJ2000Century(),e=c.Solar.node(a);return a=c.Solar.apparentLongitude(a,e),t=c.Nutation.meanObliquityLaskar(t)+.00256*Math.PI/180*Math.cos(e),e=Math.sin(a),new c.EqCoord(Math.atan2(Math.cos(t)*e,Math.cos(a)),Math.asin(Math.sin(t)*e))},apparentTopocentric:function(t,a,e){var n=c.Solar.apparentEquatorial(t),o=c.Globe.parallaxConstants(a.lat,a.h);return e||(e=c.Sidereal.apparentInRa(t)),c.Parallax.topocentric2(n,c.Parallax.earthsunParallax,o.rhoslat,o.rhoclat,a.lng,e)},topocentricPosition:function(t,a,e){var n=c.Sidereal.apparentInRa(t);return t=c.Solar.apparentTopocentric(t,a,n),a=c.Coord.eqToHz(t,a,n),!0===e&&(a.alt+=c.Refraction.bennett2(a.alt)),{hz:a,eq:t}},approxTransit:function(t,a){return t=t.startOfDay(),c.Rise.approxTransit(a,c.Sidereal.apparent0UT(t),c.Solar.apparentTopocentric(t,a))},approxTimes:function(t,a){var e=t.startOfDay();t=c.Solar.apparentTopocentric(e,a);var n=c.Rise.stdh0Solar;return e=c.Sidereal.apparent0UT(e),c.Rise.approxTimes(a,n,e,t)},times:function(t,a){t=t.startOfDay();var e=c.Solar.apparentTopocentric(new c.JulianDay(t.jd-1,t.deltaT),a),n=c.Solar.apparentTopocentric(t,a),o=c.Solar.apparentTopocentric(new c.JulianDay(t.jd+1,t.deltaT),a),r=c.Rise.stdh0Solar,i=c.Sidereal.apparent0UT(t);return c.Rise.times(a,t.deltaT,r,i,[e,n,o])},meanAnomaly:function(t){return c.Math.horner(t,[357.52911,35999.05029,-1537e-7])*Math.PI/180},trueLongitude:function(t){var a=c.Math.horner(t,[280.46646,36000.76983,3032e-7])*Math.PI/180,e=c.Solar.meanAnomaly(t);return t=(c.Math.horner(t,[1.914602,-.004817,-14e-6])*Math.sin(e)+(.019993-101e-6*t)*Math.sin(2*e)+289e-6*Math.sin(3*e))*Math.PI/180,{s:c.Math.pMod(a+t,2*Math.PI),v:c.Math.pMod(e+t,2*Math.PI)}},apparentLongitude:function(t,a){return a||(a=c.Solar.node(t)),c.Solar.trueLongitude(t).s-.00569*Math.PI/180-.00478*Math.PI/180*Math.sin(a)},node:function(t){return(125.04-1934.136*t)*Math.PI/180}},c.Solistice={march:function(t){return 1e3>t?c.Solistice._eq(t,c.Solistice.mc0):c.Solistice._eq(t-2e3,c.Solistice.mc2)},june:function(t){return 1e3>t?c.Solistice._eq(t,c.Solistice.jc0):c.Solistice._eq(t-2e3,c.Solistice.jc2)},september:function(t){return 1e3>t?c.Solistice._eq(t,c.Solistice.sc0):c.Solistice._eq(t-2e3,c.Solistice.sc2)},december:function(t){return 1e3>t?c.Solistice._eq(t,c.Solistice.dc0):c.Solistice._eq(t-2e3,c.Solistice.dc2)},_eq:function(t,a){a=((t=c.Math.horner(.001*t,a))-c.J2000)/c.JulianCentury;var e=35999.373*Math.PI/180*a-2.47*Math.PI/180;e=1+.0334*Math.cos(e)+7e-4*Math.cos(2*e);for(var n=0,o=this.terms.length-1;0<=o;o--){var r=this.terms[o];n+=r[0]*Math.cos((r[1]+r[2]*a)*Math.PI/180)}return t+1e-5*n/e},mc0:[1721139.29189,365242.1374,.06134,.00111,-71e-5],jc0:[1721233.25401,365241.72562,-.05232,.00907,25e-5],sc0:[1721325.70455,365242.49558,-.11677,-.00297,74e-5],dc0:[1721414.39987,365242.88257,-.00769,-.00933,-6e-5],mc2:[2451623.80984,365242.37404,.05169,-.00411,-57e-5],jc2:[2451716.56767,365241.62603,.00325,.00888,-3e-4],sc2:[2451810.21715,365242.01767,-.11575,.00337,78e-5],dc2:[2451900.05952,365242.74049,-.06223,-.00823,32e-5],terms:[[485,324.96,1934.136],[203,337.23,32964.467],[199,342.08,20.186],[182,27.85,445267.112],[156,73.14,45036.886],[136,171.52,22518.443],[77,222.54,65928.934],[74,296.72,3034.906],[70,243.58,9037.513],[58,119.81,33718.147],[52,297.17,150.678],[50,21.02,2281.226],[45,247.54,29929.562],[44,325.15,31555.956],[29,60.93,4443.417],[18,155.12,67555.328],[17,288.79,4562.452],[16,198.04,62894.029],[14,199.76,31436.921],[12,95.39,14577.848],[12,287.11,31931.756],[12,320.81,34777.259],[9,227.73,1222.114],[8,15.45,16859.074]]};const l=(t,a,e)=>{const n=new Date,o=n.getTime()-t;return n.setTime(t+a+o*e),n};let u,h=0,d=1;const M=[];let p,m=1,f=1;try{onmessage=t=>g(t)}catch(t){if(!process)throw t}const g=e=>{var i,s,c;if(e.data.isUpdate&&(!e.data.missile&&e.data.satId<99999&&(M[e.data.satId]=t.Sgp4.createSatrec(e.data.TLE1,e.data.TLE2)),e.data.missile&&(M[e.data.satId]=e.data)),e.data.orbitType&&(m=e.data.orbitType),u=void 0!==e.data.dynamicOffsetEpoch?e.data.dynamicOffsetEpoch:u,h=void 0!==e.data.staticOffset?e.data.staticOffset:h,d=void 0!==e.data.propRate?e.data.propRate:d,e.data.isInit){const a=JSON.parse(e.data.satData);f=JSON.parse(e.data.orbitFadeFactor);const n=a.length-1;let o=-1;for(;o<n;)o++,delete a[o].id,a[o].static||a[o].missile?M[o]=a[o]:M[o]=t.Sgp4.createSatrec(a[o].TLE1,a[o].TLE2);p=e.data.numSegs}if(void 0!==e.data.satId){const g=e.data.satId,T=e.data.isEcfOutput||!1,v=new Float32Array(4*(p+1)),A=l(u,h,d),I=1440*(r(A.getUTCFullYear(),A.getUTCMonth()+1,A.getUTCDate(),A.getUTCHours(),A.getUTCMinutes(),A.getUTCSeconds())+1.15741e-8*A.getUTCMilliseconds()-M[g].jdsatepoch),D=p+1;let w=0;if(M[g].missile)for(;w<D;){const a=M[g];if(0===(null===(i=a.latList)||void 0===i?void 0:i.length))v[4*w]=0,v[4*w+1]=0,v[4*w+2]=0,v[4*w+3]=0,w++;else{const e=Math.round(a.altList.length*(w/p)),i=l(u,h,d),s=r(i.getUTCFullYear(),i.getUTCMonth()+1,i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds())+1.15741e-8*i.getUTCMilliseconds(),c=t.Sgp4.gstime(s),M=Math.cos(a.latList[e]*n),m=Math.sin(a.latList[e]*n),g=Math.cos(a.lonList[e]*n+c),y=Math.sin(a.lonList[e]*n+c);v[4*w]=(o+a.altList[e])*M*g,v[4*w+1]=(o+a.altList[e])*M*y,v[4*w+2]=(o+a.altList[e])*m,v[4*w+3]=Math.min(f*(D/(w+1)),1),w++}}else{const e=2*Math.PI/M[g].no,n=e/p;let o;if(1===m)for(;w<D;){const r=I+w*n;o=null===(s=t.Sgp4.propagate(M[g],r))||void 0===s?void 0:s.position,T&&(o=t.Transforms.ecf2eci(o,-w*n*a/e)),(null==o?void 0:o.x)&&(null==o?void 0:o.y)&&(null==o?void 0:o.z)?(v[4*w]=o.x,v[4*w+1]=o.y,v[4*w+2]=o.z,v[4*w+3]=Math.min(f*(D/(w+1)),1)):(v[4*w]=0,v[4*w+1]=0,v[4*w+2]=0,v[4*w+3]=0),w++}else if(2===m)for(;w<D;){const r=I-w*n;o=null===(c=t.Sgp4.propagate(M[g],r))||void 0===c?void 0:c.position,T&&(o=t.Transforms.ecf2eci(o,-w*n*a/e)),(null==o?void 0:o.x)&&(null==o?void 0:o.y)&&(null==o?void 0:o.z)?(v[4*w]=o.x,v[4*w+1]=o.y,v[4*w+2]=o.z,v[4*w+3]=w<D/40?Math.min(f*(D/40/(2*(w+1))),1):0):(v[4*w]=0,v[4*w+1]=0,v[4*w+2]=0,v[4*w+3]=0),w++}}y({pointsOut:v,satId:g})}},y=t=>{const{pointsOut:a,satId:e}=t;try{postMessage({pointsOut:a.buffer,satId:e},[a.buffer])}catch(t){if(!process)throw t}}})()})();
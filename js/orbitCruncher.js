/*! For license information please see orbitCruncher.js.LICENSE.txt */
(()=>{"use strict";var t=Math.PI,a=2*t,o=t/180,n=6378.137,e=60/Math.sqrt(650944.0944816993),r=n*e/60,i=1/e,s=.00108262998905,d=-253215306e-14/s,c=2/3;function h(t,a,o,n,e,r){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return 367*t-Math.floor(7*(t+Math.floor((a+9)/12))*.25)+Math.floor(275*a/9)+o+1721013.5+((i/6e4+r/60+e)/60+n)/24}function l(t,a,o,n,e,r,i){if(t instanceof Date){var s=t;return h(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds())}return h(t,a,o,n,e,r,i)}function M(o,n){var e,r,i,s,d,c,h,l,M,u,p,m,f,g,x,T,I,C,v=o.e3,A=o.ee2,z=o.peo,R=o.pgho,y=o.pho,D=o.pinco,E=o.plo,S=o.se2,P=o.se3,N=o.sgh2,O=o.sgh3,U=o.sgh4,_=o.sh2,L=o.sh3,b=o.si2,q=o.si3,J=o.sl2,j=o.sl3,w=o.sl4,F=o.t,Y=o.xgh2,H=o.xgh3,G=o.xgh4,B=o.xh2,k=o.xh3,K=o.xi2,V=o.xi3,W=o.xl2,X=o.xl3,Z=o.xl4,Q=o.zmol,$=o.zmos,tt=n.init,at=n.opsmode,ot=n.ep,nt=n.inclp,et=n.nodep,rt=n.argpp,it=n.mp;C=$+119459e-10*F,"y"===tt&&(C=$),I=C+.0335*Math.sin(C);var st=S*(h=.5*(g=Math.sin(I))*g-.25)+P*(l=-.5*g*Math.cos(I)),dt=b*h+q*l,ct=J*h+j*l+w*g,ht=N*h+O*l+U*g,lt=_*h+L*l;return C=Q+.00015835218*F,"y"===tt&&(C=Q),I=C+.1098*Math.sin(C),M=st+(A*(h=.5*(g=Math.sin(I))*g-.25)+v*(l=-.5*g*Math.cos(I))),m=dt+(K*h+V*l),f=ct+(W*h+X*l+Z*g),u=ht+(Y*h+H*l+G*g),p=lt+(B*h+k*l),"n"===tt&&(f-=E,u-=R,p-=y,nt+=m-=D,ot+=M-=z,s=Math.sin(nt),i=Math.cos(nt),nt>=.2?(rt+=u-=i*(p/=s),et+=p,it+=f):(e=s*(c=Math.sin(et)),r=s*(d=Math.cos(et)),e+=p*d+m*i*c,r+=-p*c+m*i*d,(et%=a)<0&&"a"===at&&(et+=a),x=it+rt+i*et,x+=f+u-m*et*s,T=et,(et=Math.atan2(e,r))<0&&"a"===at&&(et+=a),Math.abs(T-et)>t&&(et<T?et+=a:et-=a),rt=x-(it+=f)-i*et)),{ep:ot,inclp:nt,nodep:et,argpp:rt,mp:it}}function u(t){var n=(t-2451545)/36525,e=-62e-7*n*n*n+.093104*n*n+3164400184.812866*n+67310.54841;return(e=e*o/240%a)<0&&(e+=a),e}function p(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?u(l.apply(void 0,arguments)):u.apply(void 0,arguments)}function m(o,i){var h,l,u,p,m,f,g,x,T,I,C,v,A,z,R,y,D,E,S,P,N,O,U,_,L,b;o.t=i,o.error=0;var q=o.mo+o.mdot*o.t,J=o.argpo+o.argpdot*o.t,j=o.nodeo+o.nodedot*o.t;x=J,P=q;var w=o.t*o.t;if(O=j+o.nodecf*w,y=1-o.cc1*o.t,D=o.bstar*o.cc4*o.t,E=o.t2cof*w,1!==o.isimp){f=o.omgcof*o.t;var F=1+o.eta*Math.cos(q);P=q+(R=f+o.xmcof*(F*F*F-o.delmo)),x=J-R,v=(C=w*o.t)*o.t,y=y-o.d2*w-o.d3*C-o.d4*v,D+=o.bstar*o.cc5*(Math.sin(P)-o.sinmao),E=E+o.t3cof*C+v*(o.t4cof+o.t*o.t5cof)}N=o.no;var Y=o.ecco;if(S=o.inclo,"d"===o.method){A=o.t;var H=function(t){var o,n,e,r,i,s,d,c,h=t.irez,l=t.d2201,M=t.d2211,u=t.d3210,p=t.d3222,m=t.d4410,f=t.d4422,g=t.d5220,x=t.d5232,T=t.d5421,I=t.d5433,C=t.del1,v=t.del2,A=t.del3,z=t.argpo,R=t.argpdot,y=t.t,D=t.xfact,E=t.xlamo,S=t.no,P=t.atime,N=t.em,O=t.argpm,U=t.inclm,_=t.xli,L=t.mm,b=t.xni,q=t.nodem,J=t.nm,j=.13130908,w=2.8843198,F=.37448087,Y=5.7686396,H=.95240898,G=1.8014998,B=1.050833,k=4.4108898,K=259200,V=0,W=0,X=(t.gsto+.0043752690880113*t.tc)%a;if(N+=t.dedt*y,U+=t.didt*y,O+=t.domdt*y,q+=t.dnodt*y,L+=t.dmdt*y,0!==h){(0===P||y*P<=0||Math.abs(y)<Math.abs(P))&&(P=0,b=S,_=E),o=y>0?720:-720;for(var Z=381;381===Z;)2!==h?(d=C*Math.sin(_-j)+v*Math.sin(2*(_-w))+A*Math.sin(3*(_-F)),i=b+D,s=C*Math.cos(_-j)+2*v*Math.cos(2*(_-w))+3*A*Math.cos(3*(_-F)),s*=i):(e=(c=z+R*P)+c,n=_+_,d=l*Math.sin(e+_-Y)+M*Math.sin(_-Y)+u*Math.sin(c+_-H)+p*Math.sin(-c+_-H)+m*Math.sin(e+n-G)+f*Math.sin(n-G)+g*Math.sin(c+_-B)+x*Math.sin(-c+_-B)+T*Math.sin(c+n-k)+I*Math.sin(-c+n-k),i=b+D,s=l*Math.cos(e+_-Y)+M*Math.cos(_-Y)+u*Math.cos(c+_-H)+p*Math.cos(-c+_-H)+g*Math.cos(c+_-B)+x*Math.cos(-c+_-B)+2*m*Math.cos(e+n-G)+f*Math.cos(n-G)+T*Math.cos(c+n-k)+I*Math.cos(-c+n-k),s*=i),Math.abs(y-P)>=720?Z=381:(W=y-P,Z=0),381===Z&&(_+=i*o+d*K,b+=d*o+s*K,P+=o);J=b+d*W+s*W*W*.5,r=_+i*W+d*W*W*.5,1!==h?(L=r-2*q+2*X,V=J-S):(L=r-q-O+X,V=J-S),J=S+V}return{atime:P,em:N,argpm:O,inclm:U,xli:_,mm:L,xni:b,nodem:q,dndt:V,nm:J}}({irez:o.irez,d2201:o.d2201,d2211:o.d2211,d3210:o.d3210,d3222:o.d3222,d4410:o.d4410,d4422:o.d4422,d5220:o.d5220,d5232:o.d5232,d5421:o.d5421,d5433:o.d5433,dedt:o.dedt,del1:o.del1,del2:o.del2,del3:o.del3,didt:o.didt,dmdt:o.dmdt,dnodt:o.dnodt,domdt:o.domdt,argpo:o.argpo,argpdot:o.argpdot,t:o.t,tc:A,gsto:o.gsto,xfact:o.xfact,xlamo:o.xlamo,no:o.no,atime:o.atime,em:Y,argpm:x,inclm:S,xli:o.xli,mm:P,xni:o.xni,nodem:O,nm:N});Y=H.em,x=H.argpm,S=H.inclm,P=H.mm,O=H.nodem,N=H.nm}if(N<=0)return o.error=2,[!1,!1];var G=Math.pow(e/N,c)*y*y;if(N=e/Math.pow(G,1.5),(Y-=D)>=1||Y<-.001)return o.error=1,[!1,!1];Y<1e-6&&(Y=1e-6),_=(P+=o.no*E)+x+O;var B=Y;if(U=S,T=x%=a,b=O%=a,L=P=((_%=a)-x-O)%a,p=Math.sin(S),u=Math.cos(S),"d"===o.method){var k=M(o,{inclo:o.inclo,init:"n",ep:B,inclp:U,nodep:b,argpp:T,mp:L,opsmode:o.operationmode});if(B=k.ep,b=k.nodep,T=k.argpp,L=k.mp,(U=k.inclp)<0&&(U=-U,b+=t,T-=t),B<0||B>1)return o.error=3,[!1,!1]}"d"===o.method&&(p=Math.sin(U),u=Math.cos(U),o.aycof=-.5*d*p,Math.abs(u+1)>15e-13?o.xlcof=-.25*d*p*(3+5*u)/(1+u):o.xlcof=-.25*d*p*(3+5*u)/15e-13);var K=B*Math.cos(T);R=1/(G*(1-B*B));var V=B*Math.sin(T)+R*o.aycof,W=(L+T+b+R*o.xlcof*K-b)%a;g=W,z=9999.9;for(var X=1;Math.abs(z)>=1e-12&&X<=10;)l=Math.sin(g),z=(W-V*(h=Math.cos(g))+K*l-g)/(z=1-h*K-l*V),Math.abs(z)>=.95&&(z=z>0?.95:-.95),g+=z,X+=1;var Z=K*h+V*l,Q=K*l-V*h,$=K*K+V*V,tt=G*(1-$);if(tt<0)return o.error=4,[!1,!1];var at=G*(1-Z),ot=Math.sqrt(G)*Q/at,nt=Math.sqrt(tt)/at,et=Math.sqrt(1-$),rt=G/at*(l-V-K*(R=Q/(1+et))),it=G/at*(h-K+V*R);I=Math.atan2(rt,it);var st=(it+it)*rt,dt=1-2*rt*rt,ct=.5*s*(R=1/tt),ht=ct*R;"d"===o.method&&(m=u*u,o.con41=3*m-1,o.x1mth2=1-m,o.x7thm1=7*m-1);var lt=at*(1-1.5*ht*et*o.con41)+.5*ct*o.x1mth2*dt;if(lt<1)return o.error=6,{position:!1,velocity:!1};I-=.25*ht*o.x7thm1*st;var Mt=b+1.5*ht*u*st,ut=U+1.5*ht*u*p*dt,pt=ot-N*ct*o.x1mth2*st/e,mt=nt+N*ct*(o.x1mth2*dt+1.5*o.con41)/e,ft=Math.sin(I),gt=Math.cos(I),xt=Math.sin(Mt),Tt=Math.cos(Mt),It=Math.sin(ut),Ct=Math.cos(ut),vt=-xt*Ct,At=Tt*Ct,zt=vt*ft+Tt*gt,Rt=At*ft+xt*gt,yt=It*ft;return{position:{x:lt*zt*n,y:lt*Rt*n,z:lt*yt*n},velocity:{x:(pt*zt+mt*(vt*gt-Tt*ft))*r,y:(pt*Rt+mt*(At*gt-xt*ft))*r,z:(pt*yt+mt*(It*gt))*r}}}function f(r,h){var u,f=1440/(2*t),g={error:0};g.satnum=r.substring(2,7),g.epochyr=parseInt(r.substring(18,20),10),g.epochdays=parseFloat(r.substring(20,32)),g.ndot=parseFloat(r.substring(33,43)),g.nddot=parseFloat(".".concat(parseInt(r.substring(44,50),10),"E").concat(r.substring(50,52))),g.bstar=parseFloat("".concat(r.substring(53,54),".").concat(parseInt(r.substring(54,59),10),"E").concat(r.substring(59,61))),g.inclo=parseFloat(h.substring(8,16)),g.nodeo=parseFloat(h.substring(17,25)),g.ecco=parseFloat(".".concat(h.substring(26,33))),g.argpo=parseFloat(h.substring(34,42)),g.mo=parseFloat(h.substring(43,51)),g.no=parseFloat(h.substring(52,63)),g.no/=f,g.a=Math.pow(g.no*i,-2/3),g.ndot/=1440*f,g.nddot/=1440*f*1440,g.inclo*=o,g.nodeo*=o,g.argpo*=o,g.mo*=o,g.alta=g.a*(1+g.ecco)-1,g.altp=g.a*(1-g.ecco)-1;var x=function(t,a){for(var o=[31,t%4==0?29:28,31,30,31,30,31,31,30,31,30,31],n=Math.floor(a),e=1,r=0;n>r+o[e-1]&&e<12;)r+=o[e-1],e+=1;var i=e,s=n-r,d=24*(a-n),c=Math.floor(d);d=60*(d-c);var h=Math.floor(d);return{mon:i,day:s,hr:c,minute:h,sec:60*(d-h)}}(u=g.epochyr<57?g.epochyr+2e3:g.epochyr+1900,g.epochdays),T=x.mon,I=x.day,C=x.hr,v=x.minute,A=x.sec;return g.jdsatepoch=l(u,T,I,C,v,A),function(o,r){var i,h,l,u,f,g,x,T,I,C,v,A,z,R,y,D,E,S,P,N,O,U,_,L,b,q,J,j,w,F,Y,H,G,B,k,K,V,W,X,Z,Q,$,tt,at,ot,nt,et,rt,it,st,dt,ct,ht=r.opsmode,lt=r.satn,Mt=r.epoch,ut=r.xbstar,pt=r.xecco,mt=r.xargpo,ft=r.xinclo,gt=r.xmo,xt=r.xno,Tt=r.xnodeo;o.isimp=0,o.method="n",o.aycof=0,o.con41=0,o.cc1=0,o.cc4=0,o.cc5=0,o.d2=0,o.d3=0,o.d4=0,o.delmo=0,o.eta=0,o.argpdot=0,o.omgcof=0,o.sinmao=0,o.t=0,o.t2cof=0,o.t3cof=0,o.t4cof=0,o.t5cof=0,o.x1mth2=0,o.x7thm1=0,o.mdot=0,o.nodedot=0,o.xlcof=0,o.xmcof=0,o.nodecf=0,o.irez=0,o.d2201=0,o.d2211=0,o.d3210=0,o.d3222=0,o.d4410=0,o.d4422=0,o.d5220=0,o.d5232=0,o.d5421=0,o.d5433=0,o.dedt=0,o.del1=0,o.del2=0,o.del3=0,o.didt=0,o.dmdt=0,o.dnodt=0,o.domdt=0,o.e3=0,o.ee2=0,o.peo=0,o.pgho=0,o.pho=0,o.pinco=0,o.plo=0,o.se2=0,o.se3=0,o.sgh2=0,o.sgh3=0,o.sgh4=0,o.sh2=0,o.sh3=0,o.si2=0,o.si3=0,o.sl2=0,o.sl3=0,o.sl4=0,o.gsto=0,o.xfact=0,o.xgh2=0,o.xgh3=0,o.xgh4=0,o.xh2=0,o.xh3=0,o.xi2=0,o.xi3=0,o.xl2=0,o.xl3=0,o.xl4=0,o.xlamo=0,o.zmol=0,o.zmos=0,o.atime=0,o.xli=0,o.xni=0,o.bstar=ut,o.ecco=pt,o.argpo=mt,o.inclo=ft,o.mo=gt,o.no=xt,o.nodeo=Tt,o.operationmode=ht,o.init="y",o.t=0;var It=function(t){var o=t.ecco,n=t.epoch,r=t.inclo,i=t.opsmode,d=t.no,h=o*o,l=1-h,M=Math.sqrt(l),u=Math.cos(r),m=u*u,f=Math.pow(e/d,c),g=.75*s*(3*m-1)/(M*l),x=g/(f*f),T=f*(1-x*x-x*(1/3+134*x*x/81));d/=1+(x=g/(T*T));var I,C=Math.pow(e/d,c),v=Math.sin(r),A=C*l,z=1-5*m,R=-z-m-m,y=1/C,D=A*A,E=C*(1-o);if("a"===i){var S=n-7305,P=Math.floor(S+1e-8),N=.017202791694070362;(I=(1.7321343856509375+N*P+(N+a)*(S-P)+S*S*5075514194322695e-30)%a)<0&&(I+=a)}else I=p(n+2433281.5);return{no:d,method:"n",ainv:y,ao:C,con41:R,con42:z,cosio:u,cosio2:m,eccsq:h,omeosq:l,posq:D,rp:E,rteosq:M,sinio:v,gsto:I}}({satn:lt,ecco:o.ecco,epoch:Mt,inclo:o.inclo,no:o.no,method:o.method,opsmode:o.operationmode}),Ct=It.ao,vt=It.con42,At=It.cosio,zt=It.cosio2,Rt=It.eccsq,yt=It.omeosq,Dt=It.posq,Et=It.rp,St=It.rteosq,Pt=It.sinio;if(o.no=It.no,o.con41=It.con41,o.gsto=It.gsto,o.error=0,yt>=0||o.no>=0){if(o.isimp=0,Et<220/n+1&&(o.isimp=1),L=1.0122292763545218,S=1.8802768006108976e-9,(y=(Et-1)*n)<156){L=y-78,y<98&&(L=20);var Nt=(120-L)/n;S=Nt*Nt*Nt*Nt,L=L/n+1}D=1/Dt,$=1/(Ct-L),o.eta=Ct*o.ecco*$,A=o.eta*o.eta,v=o.ecco*o.eta,E=Math.abs(1-A),u=(x=(g=S*Math.pow($,4))/Math.pow(E,3.5))*o.no*(Ct*(1+1.5*A+v*(4+A))+.375*s*$/E*o.con41*(8+3*A*(8+A))),o.cc1=o.bstar*u,f=0,o.ecco>1e-4&&(f=-2*g*$*d*o.no*Pt/o.ecco),o.x1mth2=1-zt,o.cc4=2*o.no*x*Ct*yt*(o.eta*(2+.5*A)+o.ecco*(.5+2*A)-s*$/(Ct*E)*(-3*o.con41*(1-2*v+A*(1.5-.5*v))+.75*o.x1mth2*(2*A-v*(1+A))*Math.cos(2*o.argpo))),o.cc5=2*x*Ct*yt*(1+2.75*(A+v)+v*A),T=zt*zt,Z=.5*(X=1.5*s*D*o.no)*s*D,Q=7.551504421875001e-7*D*D*o.no,o.mdot=o.no+.5*X*St*o.con41+.0625*Z*St*(13-78*zt+137*T),o.argpdot=-.5*X*vt+.0625*Z*(7-114*zt+395*T)+Q*(3-36*zt+49*T),at=-X*At,o.nodedot=at+(.5*Z*(4-19*zt)+2*Q*(3-7*zt))*At,tt=o.argpdot+o.nodedot,o.omgcof=o.bstar*f*Math.cos(o.argpo),o.xmcof=0,o.ecco>1e-4&&(o.xmcof=-c*g*o.bstar/v),o.nodecf=3.5*yt*at*o.cc1,o.t2cof=1.5*o.cc1,Math.abs(At+1)>15e-13?o.xlcof=-.25*d*Pt*(3+5*At)/(1+At):o.xlcof=-.25*d*Pt*(3+5*At)/15e-13,o.aycof=-.5*d*Pt;var Ot=1+o.eta*Math.cos(o.mo);if(o.delmo=Ot*Ot*Ot,o.sinmao=Math.sin(o.mo),o.x7thm1=7*zt-1,2*t/o.no>=225){o.method="d",o.isimp=1,z=o.inclo;var Ut=function(t){var o,n,e,r,i,s,d,c,h,l,M,u,p,m,f,g,x,T,I,C,v,A,z,R,y,D,E,S,P,N,O,U,_,L,b,q,J,j,w,F,Y,H,G,B,k,K,V,W,X,Z,Q,$,tt,at,ot,nt,et,rt,it,st,dt,ct,ht,lt=t.epoch,Mt=t.argpp,ut=t.tc,pt=t.inclp,mt=t.nodep,ft=.01675,gt=.0549,xt=t.np,Tt=t.ep,It=Math.sin(mt),Ct=Math.cos(mt),vt=Math.sin(Mt),At=Math.cos(Mt),zt=Math.sin(pt),Rt=Math.cos(pt),yt=Tt*Tt,Dt=1-yt,Et=Math.sqrt(Dt),St=lt+18261.5+ut/1440,Pt=(4.523602-.00092422029*St)%a,Nt=Math.sin(Pt),Ot=Math.cos(Pt),Ut=.91375164-.03568096*Ot,_t=Math.sqrt(1-Ut*Ut),Lt=.089683511*Nt/_t,bt=Math.sqrt(1-Lt*Lt),qt=5.8351514+.001944368*St,Jt=.39785416*Nt/_t,jt=bt*Ot+.91744867*Lt*Nt;Jt=Math.atan2(Jt,jt),Jt+=qt-Pt;var wt=Math.cos(Jt),Ft=Math.sin(Jt);C=.1945905,v=-.98088458,R=.91744867,y=.39785416,A=Ct,z=It,M=29864797e-13;for(var Yt=1/xt,Ht=0;Ht<2;)ot=-6*(o=C*A+v*R*z)*(i=-zt*(d=-C*z+v*R*A)+Rt*(c=v*y))+yt*(-24*(u=o*At+(n=Rt*d+zt*c)*vt)*(T=i*At)-6*(m=-o*vt+n*At)*(g=i*vt)),nt=-6*(o*(s=-zt*(h=v*z+C*R*A)+Rt*(l=C*y))+(e=-v*A+C*R*z)*i)+yt*(-24*((p=e*At+(r=Rt*h+zt*l)*vt)*T+u*(I=s*At))+-6*(m*(x=s*vt)+(f=-e*vt+r*At)*g)),et=-6*e*s+yt*(-24*p*I-6*f*x),rt=6*n*i+yt*(24*u*g-6*m*T),it=6*(r*i+n*s)+yt*(24*(p*g+u*x)-6*(f*T+m*I)),st=6*r*s+yt*(24*p*x-6*f*I),$=($=3*(o*o+n*n)+(dt=12*u*u-3*m*m)*yt)+$+Dt*dt,tt=(tt=6*(o*e+n*r)+(ct=24*u*p-6*m*f)*yt)+tt+Dt*ct,at=(at=3*(e*e+r*r)+(ht=12*p*p-3*f*f)*yt)+at+Dt*ht,K=-.5*(V=M*Yt)/Et,k=-15*Tt*(W=V*Et),X=u*m+p*f,Z=p*m+u*f,Q=p*f-u*m,1===(Ht+=1)&&(D=k,E=K,S=V,P=W,N=X,O=Z,U=Q,_=$,L=tt,b=at,q=ot,J=nt,j=et,w=rt,F=it,Y=st,H=dt,G=ct,B=ht,C=wt,v=Ft,R=Ut,y=_t,A=bt*Ct+Lt*It,z=It*bt-Ct*Lt,M=4.7968065e-7);return{snodm:It,cnodm:Ct,sinim:zt,cosim:Rt,sinomm:vt,cosomm:At,day:St,e3:2*k*Q,ee2:2*k*Z,em:Tt,emsq:yt,gam:qt,peo:0,pgho:0,pho:0,pinco:0,plo:0,rtemsq:Et,se2:2*D*O,se3:2*D*U,sgh2:2*P*G,sgh3:2*P*(B-H),sgh4:-18*P*ft,sh2:-2*E*F,sh3:-2*E*(Y-w),si2:2*E*J,si3:2*E*(j-q),sl2:-2*S*L,sl3:-2*S*(b-_),sl4:-2*S*(-21-9*yt)*ft,s1:k,s2:K,s3:V,s4:W,s5:X,s6:Z,s7:Q,ss1:D,ss2:E,ss3:S,ss4:P,ss5:N,ss6:O,ss7:U,sz1:_,sz2:L,sz3:b,sz11:q,sz12:J,sz13:j,sz21:w,sz22:F,sz23:Y,sz31:H,sz32:G,sz33:B,xgh2:2*W*ct,xgh3:2*W*(ht-dt),xgh4:-18*W*gt,xh2:-2*K*it,xh3:-2*K*(st-rt),xi2:2*K*nt,xi3:2*K*(et-ot),xl2:-2*V*tt,xl3:-2*V*(at-$),xl4:-2*V*(-21-9*yt)*gt,nm:xt,z1:$,z2:tt,z3:at,z11:ot,z12:nt,z13:et,z21:rt,z22:it,z23:st,z31:dt,z32:ct,z33:ht,zmol:(.2299715*St-qt+4.7199672)%a,zmos:(6.2565837+.017201977*St)%a}}({epoch:Mt,ep:o.ecco,argpp:o.argpo,tc:0,inclp:o.inclo,nodep:o.nodeo,np:o.no,e3:o.e3,ee2:o.ee2,peo:o.peo,pgho:o.pgho,pho:o.pho,pinco:o.pinco,plo:o.plo,se2:o.se2,se3:o.se3,sgh2:o.sgh2,sgh3:o.sgh3,sgh4:o.sgh4,sh2:o.sh2,sh3:o.sh3,si2:o.si2,si3:o.si3,sl2:o.sl2,sl3:o.sl3,sl4:o.sl4,xgh2:o.xgh2,xgh3:o.xgh3,xgh4:o.xgh4,xh2:o.xh2,xh3:o.xh3,xi2:o.xi2,xi3:o.xi3,xl2:o.xl2,xl3:o.xl3,xl4:o.xl4,zmol:o.zmol,zmos:o.zmos});o.e3=Ut.e3,o.ee2=Ut.ee2,o.peo=Ut.peo,o.pgho=Ut.pgho,o.pho=Ut.pho,o.pinco=Ut.pinco,o.plo=Ut.plo,o.se2=Ut.se2,o.se3=Ut.se3,o.sgh2=Ut.sgh2,o.sgh3=Ut.sgh3,o.sgh4=Ut.sgh4,o.sh2=Ut.sh2,o.sh3=Ut.sh3,o.si2=Ut.si2,o.si3=Ut.si3,o.sl2=Ut.sl2,o.sl3=Ut.sl3,o.sl4=Ut.sl4,h=Ut.sinim,i=Ut.cosim,I=Ut.em,C=Ut.emsq,P=Ut.s1,N=Ut.s2,O=Ut.s3,U=Ut.s4,_=Ut.s5,b=Ut.ss1,q=Ut.ss2,J=Ut.ss3,j=Ut.ss4,w=Ut.ss5,F=Ut.sz1,Y=Ut.sz3,H=Ut.sz11,G=Ut.sz13,B=Ut.sz21,k=Ut.sz23,K=Ut.sz31,V=Ut.sz33,o.xgh2=Ut.xgh2,o.xgh3=Ut.xgh3,o.xgh4=Ut.xgh4,o.xh2=Ut.xh2,o.xh3=Ut.xh3,o.xi2=Ut.xi2,o.xi3=Ut.xi3,o.xl2=Ut.xl2,o.xl3=Ut.xl3,o.xl4=Ut.xl4,o.zmol=Ut.zmol,o.zmos=Ut.zmos,R=Ut.nm,ot=Ut.z1,nt=Ut.z3,et=Ut.z11,rt=Ut.z13,it=Ut.z21,st=Ut.z23,dt=Ut.z31,ct=Ut.z33;var _t=M(o,{inclo:z,init:o.init,ep:o.ecco,inclp:o.inclo,nodep:o.nodeo,argpp:o.argpo,mp:o.mo,opsmode:o.operationmode});o.ecco=_t.ep,o.inclo=_t.inclp,o.nodeo=_t.nodep,o.argpo=_t.argpp,o.mo=_t.mp;var Lt=function(o){var n,r,i,s,d,h,l,M,u,p,m,f,g,x,T,I,C,v,A,z,R=o.cosim,y=o.argpo,D=o.s2,E=o.sinim,S=o.ss2,P=o.t,N=o.mo,O=o.mdot,U=o.no,_=o.nodeo,L=o.nodedot,b=o.xpidot,q=o.ecco,J=o.eccsq,j=o.emsq,w=o.em,F=o.argpm,Y=o.inclm,H=o.mm,G=o.nm,B=o.nodem,k=o.irez,K=o.atime,V=o.d2201,W=o.d2211,X=o.d3210,Z=o.d3222,Q=o.d4410,$=o.d4422,tt=o.d5220,at=o.d5232,ot=o.d5421,nt=o.d5433,et=o.dnodt,rt=o.domdt,it=o.del1,st=o.del2,dt=o.del3,ct=o.xfact,ht=o.xlamo,lt=o.xli,Mt=o.xni,ut=.0043752690880113,pt=.00015835218,mt=119459e-10;k=0,G<.0052359877&&G>.0034906585&&(k=1),G>=.00826&&G<=.00924&&w>=.5&&(k=2);var ft=-mt*S*(o.sz21+o.sz23);(Y<.052359877||Y>t-.052359877)&&(ft=0),0!==E&&(ft/=E);var gt=-pt*D*(o.z21+o.z23);(Y<.052359877||Y>t-.052359877)&&(gt=0),rt=o.ss4*mt*(o.sz31+o.sz33-6)-R*ft+o.s4*pt*(o.z31+o.z33-6),et=ft,0!==E&&(rt-=R/E*gt,et+=gt/E);var xt=(o.gsto+o.tc*ut)%a;if(w+=(v=o.ss1*mt*o.ss5+o.s1*pt*o.s5)*P,Y+=(A=S*mt*(o.sz11+o.sz13)+D*pt*(o.z11+o.z13))*P,F+=rt*P,B+=et*P,H+=(z=-mt*o.ss3*(o.sz1+o.sz3-14-6*j)-pt*o.s3*(o.z1+o.z3-14-6*j))*P,0!==k){if(T=Math.pow(G/e,c),2===k){var Tt=w,It=j;C=(w=q)*(j=J),w<=.65?(i=3.616-13.247*w+16.29*j,s=117.39*w-19.302-228.419*j+156.591*C,d=109.7927*w-18.9068-214.6334*j+146.5816*C,h=242.694*w-41.122-471.094*j+313.953*C,l=841.88*w-146.407-1629.014*j+1083.435*C,M=3017.977*w-532.114-5740.032*j+3708.276*C):(i=331.819*w-72.099-508.738*j+266.724*C,s=1582.851*w-346.844-2415.925*j+1246.113*C,d=1554.908*w-342.585-2366.899*j+1215.972*C,h=4758.686*w-1052.797-7193.992*j+3651.957*C,l=16178.11*w-3581.69-24462.77*j+12422.52*C,M=w>.715?29936.92*w-5149.66-54087.36*j+31324.56*C:1464.74-4664.75*w+3763.64*j),w<.7?(m=4988.61*w-919.2277-9064.77*j+5542.21*C,u=4568.6173*w-822.71072-8491.4146*j+5337.524*C,p=4690.25*w-853.666-8624.77*j+5341.4*C):(m=161616.52*w-37995.78-229838.2*j+109377.94*C,u=218913.95*w-51752.104-309468.16*j+146349.42*C,p=170470.89*w-40023.88-242699.48*j+115605.82*C),V=(g=17891679e-13*(x=G*G*3*(T*T)))*(n=.75*(1+2*R+(I=R*R)))*(-.306-.44*(w-.64)),W=g*(1.5*(f=E*E))*i,X=(g=3.7393792e-7*(x*=T))*(1.875*E*(1-2*R-3*I))*s,Z=g*(-1.875*E*(1+2*R-3*I))*d,Q=(g=2*(x*=T)*7.3636953e-9)*(35*f*n)*h,$=g*(39.375*f*f)*l,tt=(g=1.1428639e-7*(x*=T))*(9.84375*E*(f*(1-2*R-5*I)+.33333333*(4*R-2+6*I)))*M,at=g*(E*(4.92187512*f*(-2-4*R+10*I)+6.56250012*(1+2*R-3*I)))*p,ot=(g=2*x*2.1765803e-9)*(29.53125*E*(2-8*R+I*(8*R-12+10*I)))*u,nt=g*(29.53125*E*(-2-8*R+I*(12+8*R-10*I)))*m,ht=(N+_+_-(xt+xt))%a,ct=O+z+2*(L+et-ut)-U,w=Tt,j=It}1===k&&(r=1+R,st=2*(it=3*G*G*T*T)*(n=.75*(1+R)*(1+R))*(1+j*(.8125*j-2.5))*17891679e-13,dt=3*it*(r*=1.875*r*r)*(1+j*(6.60937*j-6))*2.2123015e-7*T,it=it*(.9375*E*E*(1+3*R)-.75*(1+R))*(s=1+2*j)*21460748e-13*T,ht=(N+_+y-xt)%a,ct=O+b+z+rt+et-(U+ut)),lt=ht,Mt=U,K=0,G=U+0}return{em:w,argpm:F,inclm:Y,mm:H,nm:G,nodem:B,irez:k,atime:K,d2201:V,d2211:W,d3210:X,d3222:Z,d4410:Q,d4422:$,d5220:tt,d5232:at,d5421:ot,d5433:nt,dedt:v,didt:A,dmdt:z,dndt:0,dnodt:et,domdt:rt,del1:it,del2:st,del3:dt,xfact:ct,xlamo:ht,xli:lt,xni:Mt}}({cosim:i,emsq:C,argpo:o.argpo,s1:P,s2:N,s3:O,s4:U,s5:_,sinim:h,ss1:b,ss2:q,ss3:J,ss4:j,ss5:w,sz1:F,sz3:Y,sz11:H,sz13:G,sz21:B,sz23:k,sz31:K,sz33:V,t:o.t,tc:0,gsto:o.gsto,mo:o.mo,mdot:o.mdot,no:o.no,nodeo:o.nodeo,nodedot:o.nodedot,xpidot:tt,z1:ot,z3:nt,z11:et,z13:rt,z21:it,z23:st,z31:dt,z33:ct,ecco:o.ecco,eccsq:Rt,em:I,argpm:0,inclm:z,mm:0,nm:R,nodem:0,irez:o.irez,atime:o.atime,d2201:o.d2201,d2211:o.d2211,d3210:o.d3210,d3222:o.d3222,d4410:o.d4410,d4422:o.d4422,d5220:o.d5220,d5232:o.d5232,d5421:o.d5421,d5433:o.d5433,dedt:o.dedt,didt:o.didt,dmdt:o.dmdt,dnodt:o.dnodt,domdt:o.domdt,del1:o.del1,del2:o.del2,del3:o.del3,xfact:o.xfact,xlamo:o.xlamo,xli:o.xli,xni:o.xni});o.irez=Lt.irez,o.atime=Lt.atime,o.d2201=Lt.d2201,o.d2211=Lt.d2211,o.d3210=Lt.d3210,o.d3222=Lt.d3222,o.d4410=Lt.d4410,o.d4422=Lt.d4422,o.d5220=Lt.d5220,o.d5232=Lt.d5232,o.d5421=Lt.d5421,o.d5433=Lt.d5433,o.dedt=Lt.dedt,o.didt=Lt.didt,o.dmdt=Lt.dmdt,o.dnodt=Lt.dnodt,o.domdt=Lt.domdt,o.del1=Lt.del1,o.del2=Lt.del2,o.del3=Lt.del3,o.xfact=Lt.xfact,o.xlamo=Lt.xlamo,o.xli=Lt.xli,o.xni=Lt.xni}1!==o.isimp&&(l=o.cc1*o.cc1,o.d2=4*Ct*$*l,W=o.d2*$*o.cc1/3,o.d3=(17*Ct+L)*W,o.d4=.5*W*Ct*$*(221*Ct+31*L)*o.cc1,o.t3cof=o.d2+2*l,o.t4cof=.25*(3*o.d3+o.cc1*(12*o.d2+10*l)),o.t5cof=.2*(3*o.d4+12*o.cc1*o.d3+6*o.d2*o.d2+15*l*(2*o.d2+l)))}m(o,0),o.init="n"}(g,{opsmode:"i",satn:g.satnum,epoch:g.jdsatepoch-2433281.5,xbstar:g.bstar,xecco:g.ecco,xargpo:g.argpo,xinclo:g.inclo,xmo:g.mo,xno:g.no,xnodeo:g.nodeo}),g}Math.PI;const g=2*Math.PI,x=g/360,T=6371,I=(t,a,o,n,e,r)=>{if(t)return 367*t-Math.floor(7*(t+Math.floor((a+9)/12))*.25)+Math.floor(275*a/9)+o+1721013.5+((r/60+e)/60+n)/24;{const t=new Date,a=new Date(t.getUTCFullYear(),0,0),o=t.getDate()-a.getDate();return Math.floor(o/1.15741e-8)}};var C,v;(v=C||(C={}))[v.UNKNOWN=0]="UNKNOWN",v[v.PAYLOAD=1]="PAYLOAD",v[v.ROCKET_BODY=2]="ROCKET_BODY",v[v.DEBRIS=3]="DEBRIS",v[v.SPECIAL=4]="SPECIAL",v[v.RADAR_MEASUREMENT=5]="RADAR_MEASUREMENT",v[v.RADAR_TRACK=6]="RADAR_TRACK",v[v.RADAR_OBJECT=7]="RADAR_OBJECT",v[v.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",v[v.STAR=9]="STAR",v[v.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",v[v.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",v[v.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",v[v.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",v[v.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",v[v.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",v[v.LAUNCH_SITE=16]="LAUNCH_SITE",v[v.LAUNCH_POSITION=17]="LAUNCH_POSITION",v[v.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",v[v.CONTROL_FACILITY=19]="CONTROL_FACILITY",v[v.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",v[v.OPTICAL=21]="OPTICAL",v[v.MECHANICAL=22]="MECHANICAL",v[v.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",v[v.OBSERVER=24]="OBSERVER",v[v.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",v[v.COUNTRY=26]="COUNTRY",v[v.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",v[v.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER";const A={JMod:2400000.5,J2000:2451545,J1900:2415020,B1900:2415020.3135,B1950:2433282.4235,JulianYear:365.25,JulianCentury:36525,BesselianYear:365.2421988,AU:149597870,EclCoord:function(t,a,o){if(isNaN(t)||isNaN(a))throw Error("Invalid EclCoord object: ("+t+", "+a+")");this.lat=t,this.lng=a,void 0!==o&&(this.h=o)}};A.EclCoord.prototype={toWgs84String:function(){return A.Math.formatNum(180*this.lat/Math.PI)+", "+A.Math.formatNum(180*-this.lng/Math.PI)}},A.EclCoordfromWgs84=function(t,a,o){return new A.EclCoord(t*Math.PI/180,-a*Math.PI/180,o)},A.EqCoord=function(t,a){if(isNaN(t)||isNaN(a))throw Error("Invalid EqCoord object: ("+t+", "+a+")");this.ra=t,this.dec=a},A.EqCoord.prototype={toString:function(){return"ra:"+A.Math.formatNum(180*this.ra/Math.PI)+", dec:"+A.Math.formatNum(180*this.dec/Math.PI)}},A.HzCoord=function(t,a){if(isNaN(t)||isNaN(a))throw Error("Invalid HzCoord object: ("+t+", "+a+")");this.az=t,this.alt=a},A.HzCoord.prototype={toString:function(){return"azi:"+A.Math.formatNum(180*this.az/Math.PI)+", alt:"+A.Math.formatNum(180*this.alt/Math.PI)}},A.Coord={dmsToDeg:function(t,a,o,n){return n=(60*(60*a+o)+n)/3600,t?-n:n},calcAngle:function(t,a,o,n){return A.Coord.dmsToDeg(t,a,o,n)*Math.PI/180},calcRA:function(t,a,o){return A.Coord.dmsToDeg(!1,t,a,o)%24*15*Math.PI/180},secondsToHMSStr:function(t){var a=Math.floor(t/86400);t=A.Math.pMod(t,86400);var o=Math.floor(t/3600)%24,n=Math.floor(t/60)%60;return(0!==a?a+"d ":"")+(10>o?"0":"")+o+":"+(10>n?"0":"")+n+":"+(10>(t=Math.floor(t%60))?"0":"")+t},secondsToHMStr:function(t){var a=Math.floor(t/86400);t=A.Math.pMod(t,86400);var o=Math.floor(t/3600)%24;return(0!==a?a+"d ":"")+(10>o?"0":"")+o+":"+(10>(t=Math.floor(t/60)%60)?"0":"")+t},eqToEcl:function(t,a){var o=Math.sin(t.ra),n=Math.sin(t.dec),e=Math.cos(t.dec),r=Math.sin(a);return a=Math.cos(a),new A.EclCoord(Math.atan2(o*a+n/e*r,Math.cos(t.ra)),Math.asin(n*a-e*r*o))},eclToEq:function(t,a){var o=Math.sin(t.lat),n=Math.sin(t.lng),e=Math.cos(t.lng),r=Math.sin(a);a=Math.cos(a);let i=Math.atan2(o*a-n/e*r,Math.cos(t.lat));return 0>i&&(i+=2*Math.PI),new A.EqCoord(i,Math.asin(n*a+e*r*o))},eqToHz:function(t,a,o){o=o-a.lng-t.ra;var n=Math.cos(o),e=Math.sin(a.lat);a=Math.cos(a.lat);var r=Math.sin(t.dec);return t=Math.cos(t.dec),new A.HzCoord(Math.atan2(Math.sin(o),n*e-r/t*a),Math.asin(e*r+a*t*n))}},A.DeltaT={jdToJde:function(t,a){return a||(a=A.DeltaT.estimate(t)),t+a/86400},jdeToJd:function(t,a){return a||(a=A.DeltaT.estimate(t)),t-a/86400},decimalYear:function(t){return(t=A.JulianDay.jdToCalendar(t)).y+(t.m-.5)/12},estimate:function(t){var a=A.DeltaT.decimalYear(t);return t=Math.pow,-500>a?32*t((a-1820)/100,2)-20:500>a?10583.6-1014.41*(a/=100)+33.78311*t(a,2)-5.952053*t(a,3)-.1798452*t(a,4)+.022174192*t(a,5)+.0090316521*t(a,6):1600>a?1574.2-556.01*(a=(a-1e3)/100)+71.23472*t(a,2)+.319781*t(a,3)-.8503463*t(a,4)-.005050998*t(a,5)+.0083572073*t(a,6):1700>a?120-.9808*(a-=1600)-.01532*t(a,2)+t(a,3)/7129:1800>a?8.83+.1603*(a-=1700)-.0059285*t(a,2)+13336e-8*t(a,3)-t(a,4)/1174e3:1860>a?13.72-.332447*(a-=1800)+.0068612*t(a,2)+.0041116*t(a,3)-37436e-8*t(a,4)+121272e-10*t(a,5)-1.699e-7*t(a,6)+8.75e-10*t(a,7):1900>a?7.62+.5737*(a-=1860)-.251754*t(a,2)+.01680668*t(a,3)-.0004473624*t(a,4)+t(a,5)/233174:1920>a?1.494119*(a-=1900)-2.79-.0598939*t(a,2)+.0061966*t(a,3)-197e-6*t(a,4):1941>a?21.2+.84493*(a-=1920)-.0761*t(a,2)+.0020936*t(a,3):1961>a?29.07+.407*(a-=1950)-t(a,2)/233+t(a,3)/2547:1986>a?45.45+1.067*(a-=1975)-t(a,2)/260-t(a,3)/718:2005>a?63.86+.3345*(a-=2e3)-.060374*t(a,2)+.0017275*t(a,3)+651814e-9*t(a,4)+2373599e-11*t(a,5):2050>a?62.92+.32217*(a-=2e3)+.005589*t(a,2):2150>a?32*t((a-1820)/100,2)-20-.5628*(2150-a):32*t((a-1820)/100,2)-20}},A.Globe={Er:6378.14,Fl:1/298.257,parallaxConstants:function(t,a){a||(a=0);var o=1-A.Globe.Fl;return a=.001*a/A.Globe.Er,{rhoslat:Math.sin(Math.atan(o*Math.tan(t)))*o+a*Math.sin(t),rhoclat:Math.cos(Math.atan(o*Math.tan(t)))+a*Math.cos(t)}}},A.Interp={newLen3:function(t,a,o){if(3!=o.length)throw"Error not 3";if(a==t)throw"Error no x range";var n=o[1]-o[0],e=o[2]-o[1];return{x1:t,x3:a,y:o,a:n,b:e,c:e-n,abSum:n+e,xSum:a+t,xDiff:a-t}},interpolateX:function(t,a){return A.Interp.interpolateN(t,(2*a-t.xSum)/t.xDiff)},interpolateN:function(t,a){return t.y[1]+.5*a*(t.abSum+a*t.c)}},A.JulianDay=function(t,a){t instanceof Date&&(t=A.JulianDay.dateToJD(t)),this.jd=t,this.deltaT=a||A.DeltaT.estimate(this.jd),this.jde=A.DeltaT.jdToJde(this.jd,this.deltaT)},A.JulianDay.prototype={toCalendar:function(){return A.JulianDay.jdToCalendar(this.jd)},toDate:function(){return A.JulianDay.jdToDate(this.jd)},jdJ2000Century:function(){return(this.jd-A.J2000)/A.JulianCentury},jdeJ2000Century:function(){return(this.jde-A.J2000)/A.JulianCentury},startOfDay:function(){return new A.JulianDay(Math.floor(this.jde-.5)+.5,this.deltaT)}},A.JulianDay.gregorianTimeStart=Date.UTC(1582,9,4),A.JulianDay.jdFromGregorian=function(t,a,o){return new A.JulianDay(A.JulianDay.jdFromGregorian(t,a,o))},A.JulianDay.jdFromJulian=function(t,a,o){return new A.JulianDay(A.JulianDay.calendarJulianToJD(t,a,o))},A.JulianDay.jdFromJDE=function(t){var a=A.DeltaT.estimate(t);return t=A.DeltaT.jdeToJd(t,a),new A.JulianDay(t,a)},A.JulianDay.dateToJD=function(t){var a=t.getUTCDate()+A.JulianDay.secondsFromHMS(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())/86400;return t.getTime()<A.JulianDay.gregorianTimeStart?A.JulianDay.calendarJulianToJD(t.getUTCFullYear(),t.getUTCMonth()+1,a):A.JulianDay.calendarGregorianToJD(t.getUTCFullYear(),t.getUTCMonth()+1,a)},A.JulianDay.calendarGregorianToJD=function(t,a,o){1!=a&&2!=a||(t--,a+=12);var n=Math.floor(t/100);return Math.floor(36525*(t+4716)/100)+Math.floor(306*(a+1)/10)+(2-n+Math.floor(n/4))+o-1524.5},A.JulianDay.calendarJulianToJD=function(t,a,o){return 1!=a&&2!=a||(t--,a+=12),Math.floor(36525*(t+4716)/100)+Math.floor(306*(a+1)/10)+o-1524.5},A.JulianDay.secondsFromHMS=function(t,a,o){return 3600*t+60*a+o},A.JulianDay.jdToDate=function(t){var a=A.JulianDay.jdToCalendar(t);return t=A.Math.modF(t+.5)[1],t=Math.round(86400*t),new Date(Date.UTC(a.y,a.m-1,Math.floor(a.d),Math.floor(t/3600)%24,Math.floor(t/60)%60,Math.floor(t%60)))},A.JulianDay.jdToCalendar=function(t){var a=(t=A.Math.modF(t+.5))[0],o=a;2299151<=a&&(o=a+1+(o=Math.floor((100*a-186721625)/3652425))-Math.floor(o/4));var n=o+1524;a=Math.floor((100*n-12210)/36525);var e=Math.floor(36525*a/100);return o=Math.floor(1e4*(n-e)/306001),t=n-e-Math.floor(306001*o/1e4)+t[1],{y:1==(o=14==o||15==o?o-13:o-1)||2==o?Math.floor(a)-4715:Math.floor(a)-4716,m:o,d:t}},A.JulianDay.leapYearGregorian=function(t){return 0==t%4&&0!=t%100||0==t%400},A.JulianDay.dayOfYear=function(t,a,o,n){return t=2,n&&t--,A.JulianDay._wholeMonths(a,t)+o},A.JulianDay._wholeMonths=function(t,a){return Math.round(275*t/9-(t+9)/12*a-30)},A.Math={pMod:function(t,a){return 0>(t%=a)&&(t+=a),t},modF:function(t){return 0>t?(t=-t,[-Math.floor(t),-t%1]):[Math.floor(t),t%1]},horner:function(t,a){var o=a.length-1;if(0>=o)throw"empty array not supported";for(var n=a[o];0<o;)n=n*t+a[--o];return n},formatNum:function(t,a){return a=Math.pow(10,4|a),Math.round(t*a)/a}},A.Moon={parallax:function(t){return Math.asin(6378.14/t)},apparentEquatorial:function(t){var a=A.Moon.geocentricPosition(t),o=A.Nutation.nutation(t);return t=A.Nutation.meanObliquityLaskar(t)+o.deltaobliquity,{eq:A.Coord.eclToEq(new A.EclCoord(a.lng+o.deltalng,a.lat),t),delta:a.delta}},apparentTopocentric:function(t,a,o){var n=A.Moon.apparentEquatorial(t),e=A.Globe.parallaxConstants(a.lat,a.h),r=A.Moon.parallax(n.delta);return o||(o=A.Sidereal.apparentInRa(t)),{eq:A.Parallax.topocentric(n.eq,r,e.rhoslat,e.rhoclat,a.lng,o),delta:n.delta}},topocentricPosition:function(t,a,o){var n=A.Sidereal.apparentInRa(t);t=A.Moon.apparentTopocentric(t,a,n);var e=A.Coord.eqToHz(t.eq,a,n);return!0===o&&(e.alt+=A.Refraction.bennett2(e.alt)),a=A.Moon.parallacticAngle(a.lat,n-(a.lng+t.eq.ra),t.eq.dec),{hz:e,eq:t.eq,delta:t.delta,q:a}},approxTransit:function(t,a){return t=t.startOfDay(),A.Rise.approxTransit(a,A.Sidereal.apparent0UT(t),A.Moon.apparentTopocentric(t,a).eq)},approxTimes:function(t,a){t=t.startOfDay();var o=A.Moon.apparentTopocentric(t,a),n=A.Moon.parallax(o.delta);return n=A.Rise.stdh0Lunar(n),t=A.Sidereal.apparent0UT(t),A.Rise.approxTimes(a,n,t,o.eq)},times:function(t,a){t=t.startOfDay();var o=A.Moon.apparentTopocentric(new A.JulianDay(t.jd-1,t.deltaT),a),n=A.Moon.apparentTopocentric(t,a),e=A.Moon.apparentTopocentric(new A.JulianDay(t.jd+1,t.deltaT),a),r=A.Moon.parallax(n.delta);r=A.Rise.stdh0Lunar(r);var i=A.Sidereal.apparent0UT(t);return A.Rise.times(a,t.deltaT,r,i,[o.eq,n.eq,e.eq])},parallacticAngle:function(t,a,o){return Math.atan2(Math.sin(a),Math.tan(t)*Math.cos(o)-Math.sin(o)*Math.cos(a))},geocentricPosition:function(t){var a=Math.PI/180,o=t.jdeJ2000Century();t=A.Math.pMod(A.Math.horner(o,[218.3164477*a,481267.88123421*a,-.0015786*a,a/538841,-a/65194e3]),2*Math.PI);var n=A.Math.pMod(A.Math.horner(o,[297.8501921*a,445267.1114034*a,-.0018819*a,a/545868,-a/113065e3]),2*Math.PI),e=A.Math.pMod(A.Math.horner(o,[357.5291092*a,35999.0502909*a,-1535e-7*a,a/2449e4]),2*Math.PI),r=A.Math.pMod(A.Math.horner(o,[134.9633964*a,477198.8675055*a,.0087414*a,a/69699,-a/14712e3]),2*Math.PI),i=A.Math.pMod(A.Math.horner(o,[93.272095*a,483202.0175233*a,-.0036539*a,-a/3526e3,a/86331e4]),2*Math.PI),s=119.75*a+131.849*a*o,d=53.09*a+479264.29*a*o,c=313.45*a+481266.484*a*o,h=(o=A.Math.horner(o,[1,-.002516,-74e-7]))*o;d=3958*Math.sin(s)+1962*Math.sin(t-i)+318*Math.sin(d);var l=0;for(s=-2235*Math.sin(t)+382*Math.sin(c)+175*Math.sin(s-i)+175*Math.sin(s+i)+127*Math.sin(t-r)-115*Math.sin(t+r),c=0;c<A.Moon.ta.length;c++){var M=A.Moon.ta[c],u=n*M[0]+e*M[1]+r*M[2]+i*M[3],p=Math.sin(u);switch(u=Math.cos(u),M[1]){case 0:d+=M[4]*p,l+=M[5]*u;break;case 1:case-1:d+=M[4]*p*o,l+=M[5]*u*o;break;case 2:case-2:d+=M[4]*p*h,l+=M[5]*u*h;break;default:throw"error"}}for(c=0;c<A.Moon.tb.length;c++)switch(M=A.Moon.tb[c],p=Math.sin(n*M[0]+e*M[1]+r*M[2]+i*M[3]),M[1]){case 0:s+=M[4]*p;break;case 1:case-1:s+=M[4]*p*o;break;case 2:case-2:s+=M[4]*p*h;break;default:throw"error"}return{lng:A.Math.pMod(t,2*Math.PI)+1e-6*d*a,lat:1e-6*s*a,delta:385000.56+.001*l}},ta:[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],tb:[[0,0,0,1,5128122],[0,0,1,1,280602],[0,0,1,-1,277693],[2,0,0,-1,173237],[2,0,-1,1,55413],[2,0,-1,-1,46271],[2,0,0,1,32573],[0,0,2,1,17198],[2,0,1,-1,9266],[0,0,2,-1,8822],[2,-1,0,-1,8216],[2,0,-2,-1,4324],[2,0,1,1,4200],[2,1,0,-1,-3359],[2,-1,-1,1,2463],[2,-1,0,1,2211],[2,-1,-1,-1,2065],[0,1,-1,-1,-1870],[4,0,-1,-1,1828],[0,1,0,1,-1794],[0,0,0,3,-1749],[0,1,-1,1,-1565],[1,0,0,1,-1491],[0,1,1,1,-1475],[0,1,1,-1,-1410],[0,1,0,-1,-1344],[1,0,0,-1,-1335],[0,0,3,1,1107],[4,0,0,-1,1021],[4,0,-1,1,833],[0,0,1,-3,777],[4,0,-2,1,671],[2,0,0,-3,607],[2,0,2,-1,596],[2,-1,1,-1,491],[2,0,-2,1,-451],[0,0,3,-1,439],[2,0,2,1,422],[2,0,-3,-1,421],[2,1,-1,1,-366],[2,1,0,1,-351],[4,0,0,1,331],[2,-1,1,1,315],[2,-2,0,-1,302],[0,0,1,3,-283],[2,1,1,-1,-229],[1,1,0,-1,223],[1,1,0,1,223],[0,1,-2,-1,-220],[2,1,-1,-1,-220],[1,0,1,1,-185],[2,-1,-2,-1,181],[0,1,2,1,-177],[4,0,-2,-1,176],[4,-1,-1,-1,166],[1,0,1,-1,-164],[4,0,1,-1,132],[1,0,-1,-1,-119],[4,-1,0,-1,115],[2,-2,0,1,107]]},A.MoonIllum={phaseAngleEq:function(t,a,o,n){return t=A.MoonIllum._coselong(t,o),Math.atan2(n*Math.sin(Math.acos(t)),a-n*t)},phaseAngleEq2:function(t,a){return Math.acos(-A.MoonIllum._coselong(t,a))},illuminated:function(t){return(1+Math.cos(t))/2},positionAngle:function(t,a){var o=Math.cos(a.dec);return Math.atan2(o*Math.sin(a.ra-t.ra),Math.sin(a.dec)*Math.cos(t.dec)-o*Math.sin(t.dec)*Math.cos(a.ra-t.ra))},_coselong:function(t,a){return Math.sin(a.dec)*Math.sin(t.dec)+Math.cos(a.dec)*Math.cos(t.dec)*Math.cos(a.ra-t.ra)}},A.Nutation={nutation:function(t){t=t.jdeJ2000Century();for(var a=A.Math.horner(t,[297.85036,445267.11148,-.0019142,1/189474])*Math.PI/180,o=A.Math.horner(t,[357.52772,35999.05034,-1603e-7,-1/3e5])*Math.PI/180,n=A.Math.horner(t,[134.96298,477198.867398,.0086972,1/5620])*Math.PI/180,e=A.Math.horner(t,[93.27191,483202.017538,-.0036825,1/327270])*Math.PI/180,r=A.Math.horner(t,[125.04452,-1934.136261,.0020708,1/45e4])*Math.PI/180,i=0,s=0,d=A.Nutation.table22A.length-1;0<=d;d--){var c=A.Nutation.table22A[d],h=c[0]*a+c[1]*o+c[2]*n+c[3]*e+c[4]*r,l=Math.cos(h);i+=Math.sin(h)*(c[5]+c[6]*t),s+=l*(c[7]+c[8]*t)}return{deltalng:1e-4/3600*i*(Math.PI/180),deltaobliquity:1e-4/3600*s*(Math.PI/180)}},nutationInRA:function(t){var a=A.Nutation.meanObliquityLaskar(t);return(t=A.Nutation.nutation(t)).deltalng*Math.cos(a+t.deltaobliquity)},trueObliquity:function(t){return A.Nutation.meanObliquityLaskar(t)+(t=A.Nutation.nutation(t)).deltaobliquity},meanObliquity:function(t){return A.Math.horner(t.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-46.815/3600*(Math.PI/180),-59e-5/3600*(Math.PI/180),.001813/3600*(Math.PI/180)])},meanObliquityLaskar:function(t){return A.Math.horner(.01*t.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-4680.93/3600*(Math.PI/180),-1.55/3600*(Math.PI/180),1999.25/3600*(Math.PI/180),-51.38/3600*(Math.PI/180),-249.67/3600*(Math.PI/180),-39.05/3600*(Math.PI/180),7.12/3600*(Math.PI/180),27.87/3600*(Math.PI/180),5.79/3600*(Math.PI/180),2.45/3600*(Math.PI/180)])},table22A:[[0,0,0,0,1,-171996,-174.2,92025,8.9],[-2,0,0,2,2,-13187,-1.6,5736,-3.1],[0,0,0,2,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[0,0,1,0,0,712,.1,-7,0],[-2,1,0,2,2,-517,1.2,224,-.6],[0,0,0,2,1,-386,-.4,200,0],[0,0,1,2,2,-301,0,129,-.1],[-2,-1,0,2,2,217,-.5,-95,.3],[-2,0,1,0,0,-158,0,0,0],[-2,0,0,2,1,129,.1,-70,0],[0,0,-1,2,2,123,0,-53,0],[2,0,0,0,0,63,0,0,0],[0,0,1,0,1,63,.1,-33,0],[2,0,-1,2,2,-59,0,26,0],[0,0,-1,0,1,-58,-.1,32,0],[0,0,1,2,1,-51,0,27,0],[-2,0,2,0,0,48,0,0,0],[0,0,-2,2,1,46,0,-24,0],[2,0,0,2,2,-38,0,16,0],[0,0,2,2,2,-31,0,13,0],[0,0,2,0,0,29,0,0,0],[-2,0,1,2,2,29,0,-12,0],[0,0,0,2,0,26,0,0,0],[-2,0,0,2,0,-22,0,0,0],[0,0,-1,2,1,21,0,-10,0],[0,2,0,0,0,17,-.1,0,0],[2,0,-1,0,1,16,0,-8,0],[-2,2,0,2,2,-16,.1,7,0],[0,1,0,0,1,-15,0,9,0],[-2,0,1,0,1,-13,0,7,0],[0,-1,0,0,1,-12,0,6,0],[0,0,2,-2,0,11,0,0,0],[2,0,-1,2,1,-10,0,5,0],[2,0,1,2,2,-8,0,3,0],[0,1,0,2,2,7,0,-3,0],[-2,1,1,0,0,-7,0,0,0],[0,-1,0,2,2,-7,0,3,0],[2,0,0,2,1,-7,0,3,0],[2,0,1,0,0,6,0,0,0],[-2,0,2,2,2,6,0,-3,0],[-2,0,1,2,1,6,0,-3,0],[2,0,-2,0,1,-6,0,3,0],[2,0,0,0,1,-6,0,3,0],[0,-1,1,0,0,5,0,0,0],[-2,-1,0,2,1,-5,0,3,0],[-2,0,0,0,1,-5,0,3,0],[0,0,2,2,1,-5,0,3,0],[-2,0,2,0,1,4,0,0,0],[-2,1,0,2,1,4,0,0,0],[0,0,1,-2,0,4,0,0,0],[-1,0,1,0,0,-4,0,0,0],[-2,1,0,0,0,-4,0,0,0],[1,0,0,0,0,-4,0,0,0],[0,0,1,2,0,3,0,0,0],[0,0,-2,2,2,-3,0,0,0],[-1,-1,1,0,0,-3,0,0,0],[0,1,1,0,0,-3,0,0,0],[0,-1,1,2,2,-3,0,0,0],[2,-1,-1,2,2,-3,0,0,0],[0,0,3,2,2,-3,0,0,0],[2,-1,0,2,2,-3,0,0,0]]},A.Parallax={earthsunParallax:8.794/60/60*Math.PI/180,horizontal:function(t){return 8.794/60/60*Math.PI/180/t},topocentric:function(t,a,o,n,e,r){e=A.Math.pMod(r-e-t.ra,2*Math.PI),a=Math.sin(a),r=Math.cos(e);var i=Math.cos(t.dec);return e=Math.atan2(-n*a*Math.sin(e),i-n*a*r),new A.EqCoord(t.ra+e,Math.atan2((Math.sin(t.dec)-o*a)*Math.cos(e),i-n*a*r))},topocentric2:function(t,a,o,n,e,r){return e=A.Math.pMod(r-e-t.ra,2*Math.PI),r=Math.cos(t.dec),new A.EqCoord(t.ra+-a*n*Math.sin(e)/r,t.dec+-a*(o*r-n*Math.cos(e)*Math.sin(t.dec)))}},A.Refraction={bennett:function(t){0>t&&(t=0);var a=Math.PI/180;return a/60/Math.tan(t+7.31*a*a/(t+4.4*a))},bennett2:function(t){var a=Math.PI/180,o=60/a,n=.06/o;return o=14.7*o*a,a*=13,(t=A.Refraction.bennett(t))-n*Math.sin(o*t+a)},saemundsson:function(t){var a=Math.PI/180;return 1.02*a/60/Math.tan(t+10.3*a*a/(t+5.11*a))}},A.Rise={meanRefraction:.5667*Math.PI/180,stdh0Stellar:-.5667*Math.PI/180,stdh0Solar:-.8333*Math.PI/180,stdh0LunarMean:.125*Math.PI/180,stdh0Lunar:function(t){return.7275*t-A.Rise.meanRefraction},circumpolar:function(t,a,o){return-1>(t=(Math.sin(a)-Math.sin(t)*Math.sin(o))/(Math.cos(t)*Math.cos(o)))||1<t?null:t},approxTransit:function(t,a,o){return 43200*(o.ra+t.lng)/Math.PI-a},approxTimes:function(t,a,o,n){return(a=A.Rise.circumpolar(t.lat,a,n.dec))?(a=43200*Math.acos(a)/Math.PI,t=43200*(n.ra+t.lng)/Math.PI-o,{transit:A.Math.pMod(t,86400),transitd:Math.floor(t/86400),rise:A.Math.pMod(t-a,86400),rised:Math.floor((t-a)/86400),set:A.Math.pMod(t+a,86400),setd:Math.floor((t+a)/86400)}):null},times:function(t,a,o,n,e){function r(e){var r=A.Math.pMod(n+360.985647*e/360,86400),i=e+a,c=A.Interp.interpolateX(s,i);return i=A.Interp.interpolateX(d,i),r=r*Math.PI/43200-(t.lng+c),c=Math.cos(i),A.Math.pMod(e+(h*Math.sin(i)+l*c*Math.cos(r)-o)/(c*l*Math.sin(r))*43200/Math.PI,86400)}var i=A.Rise.approxTimes(t,o,n,e[1]);if(!i)return null;var s=A.Interp.newLen3(-86400,86400,[e[0].ra,e[1].ra,e[2].ra]),d=A.Interp.newLen3(-86400,86400,[e[0].dec,e[1].dec,e[2].dec]);e=n+360.985647*i.transit/360;var c=A.Interp.interpolateX(s,i.transit+a);i.transit=A.Math.pMod(i.transit-(e-43200*(t.lng+c)/Math.PI),86400);var h=Math.sin(t.lat),l=Math.cos(t.lat);return i.rise=r(i.rise),i.set=r(i.set),i}},A.Sidereal={iau82:[24110.54841,8640184.812866,.093104,62e-7],jdToCFrac:function(t){return t=A.Math.modF(t.jd+.5),[new A.JulianDay(t[0]-.5).jdJ2000Century(),t[1]]},mean:function(t){return A.Math.pMod(A.Sidereal._mean(t),86400)},_mean:function(t){return(t=A.Sidereal._mean0UT(t)).s+86636.55536784*t.f},_meanInRA:function(t){return(t=A.Sidereal._mean0UT(t)).s*Math.PI/43200+2.0054758187*t.f*Math.PI},mean0UT:function(t){return t=A.Sidereal._mean0UT(t),A.Math.pMod(t.s,86400)},_mean0UT:function(t){return t=A.Sidereal.jdToCFrac(t),{s:A.Math.horner(t[0],A.Sidereal.iau82),f:t[1]}},apparentInRa:function(t){var a=A.Sidereal._meanInRA(t);return t=A.Nutation.nutationInRA(t),A.Math.pMod(a+t,2*Math.PI)},apparent:function(t){var a=A.Sidereal._mean(t);return t=648e3*A.Nutation.nutationInRA(t)/Math.PI/15,A.Math.pMod(a+t,86400)},apparentLocal:function(t,a){return t=A.Sidereal.apparent(t),A.Math.pMod(t-43200*a/Math.PI,86400)},apparent0UT:function(t){var a=A.Math.modF(t.jd+.5);return t=A.Math.modF(t.jde+.5),a=A.Math.horner((a[0]-.5-A.J2000)/36525,A.Sidereal.iau82)+86636.55536784*a[1],t=648e3*A.Nutation.nutationInRA(new A.JulianDay(t[0]))/Math.PI/15,A.Math.pMod(a+t,86400)}},A.Solar={earthsunDelta:149597870,apparentEquatorial:function(t){var a=t.jdJ2000Century(),o=A.Solar.node(a);return a=A.Solar.apparentLongitude(a,o),t=A.Nutation.meanObliquityLaskar(t)+.00256*Math.PI/180*Math.cos(o),o=Math.sin(a),new A.EqCoord(Math.atan2(Math.cos(t)*o,Math.cos(a)),Math.asin(Math.sin(t)*o))},apparentTopocentric:function(t,a,o){var n=A.Solar.apparentEquatorial(t),e=A.Globe.parallaxConstants(a.lat,a.h);return o||(o=A.Sidereal.apparentInRa(t)),A.Parallax.topocentric2(n,A.Parallax.earthsunParallax,e.rhoslat,e.rhoclat,a.lng,o)},topocentricPosition:function(t,a,o){var n=A.Sidereal.apparentInRa(t);return t=A.Solar.apparentTopocentric(t,a,n),a=A.Coord.eqToHz(t,a,n),!0===o&&(a.alt+=A.Refraction.bennett2(a.alt)),{hz:a,eq:t}},approxTransit:function(t,a){return t=t.startOfDay(),A.Rise.approxTransit(a,A.Sidereal.apparent0UT(t),A.Solar.apparentTopocentric(t,a))},approxTimes:function(t,a){var o=t.startOfDay();t=A.Solar.apparentTopocentric(o,a);var n=A.Rise.stdh0Solar;return o=A.Sidereal.apparent0UT(o),A.Rise.approxTimes(a,n,o,t)},times:function(t,a){t=t.startOfDay();var o=A.Solar.apparentTopocentric(new A.JulianDay(t.jd-1,t.deltaT),a),n=A.Solar.apparentTopocentric(t,a),e=A.Solar.apparentTopocentric(new A.JulianDay(t.jd+1,t.deltaT),a),r=A.Rise.stdh0Solar,i=A.Sidereal.apparent0UT(t);return A.Rise.times(a,t.deltaT,r,i,[o,n,e])},meanAnomaly:function(t){return A.Math.horner(t,[357.52911,35999.05029,-1537e-7])*Math.PI/180},trueLongitude:function(t){var a=A.Math.horner(t,[280.46646,36000.76983,3032e-7])*Math.PI/180,o=A.Solar.meanAnomaly(t);return t=(A.Math.horner(t,[1.914602,-.004817,-14e-6])*Math.sin(o)+(.019993-101e-6*t)*Math.sin(2*o)+289e-6*Math.sin(3*o))*Math.PI/180,{s:A.Math.pMod(a+t,2*Math.PI),v:A.Math.pMod(o+t,2*Math.PI)}},apparentLongitude:function(t,a){return a||(a=A.Solar.node(t)),A.Solar.trueLongitude(t).s-.00569*Math.PI/180-.00478*Math.PI/180*Math.sin(a)},node:function(t){return(125.04-1934.136*t)*Math.PI/180}},A.Solistice={march:function(t){return 1e3>t?A.Solistice._eq(t,A.Solistice.mc0):A.Solistice._eq(t-2e3,A.Solistice.mc2)},june:function(t){return 1e3>t?A.Solistice._eq(t,A.Solistice.jc0):A.Solistice._eq(t-2e3,A.Solistice.jc2)},september:function(t){return 1e3>t?A.Solistice._eq(t,A.Solistice.sc0):A.Solistice._eq(t-2e3,A.Solistice.sc2)},december:function(t){return 1e3>t?A.Solistice._eq(t,A.Solistice.dc0):A.Solistice._eq(t-2e3,A.Solistice.dc2)},_eq:function(t,a){a=((t=A.Math.horner(.001*t,a))-A.J2000)/A.JulianCentury;var o=35999.373*Math.PI/180*a-2.47*Math.PI/180;o=1+.0334*Math.cos(o)+7e-4*Math.cos(2*o);for(var n=0,e=this.terms.length-1;0<=e;e--){var r=this.terms[e];n+=r[0]*Math.cos((r[1]+r[2]*a)*Math.PI/180)}return t+1e-5*n/o},mc0:[1721139.29189,365242.1374,.06134,.00111,-71e-5],jc0:[1721233.25401,365241.72562,-.05232,.00907,25e-5],sc0:[1721325.70455,365242.49558,-.11677,-.00297,74e-5],dc0:[1721414.39987,365242.88257,-.00769,-.00933,-6e-5],mc2:[2451623.80984,365242.37404,.05169,-.00411,-57e-5],jc2:[2451716.56767,365241.62603,.00325,.00888,-3e-4],sc2:[2451810.21715,365242.01767,-.11575,.00337,78e-5],dc2:[2451900.05952,365242.74049,-.06223,-.00823,32e-5],terms:[[485,324.96,1934.136],[203,337.23,32964.467],[199,342.08,20.186],[182,27.85,445267.112],[156,73.14,45036.886],[136,171.52,22518.443],[77,222.54,65928.934],[74,296.72,3034.906],[70,243.58,9037.513],[58,119.81,33718.147],[52,297.17,150.678],[50,21.02,2281.226],[45,247.54,29929.562],[44,325.15,31555.956],[29,60.93,4443.417],[18,155.12,67555.328],[17,288.79,4562.452],[16,198.04,62894.029],[14,199.76,31436.921],[12,95.39,14577.848],[12,287.11,31931.756],[12,320.81,34777.259],[9,227.73,1222.114],[8,15.45,16859.074]]};const z=(t,a,o)=>{const n=new Date,e=n.getTime()-t;return n.setTime(t+a+e*o),n};let R,y=0,D=1;const E=[];let S,P=1;try{onmessage=t=>N(t)}catch(t){if(!process)throw t}const N=t=>{var a,o,n,e;if(t.data.isUpdate&&(!t.data.missile&&t.data.satId<99999&&(E[t.data.satId]=f(t.data.TLE1,t.data.TLE2)),t.data.missile&&(E[t.data.satId]=t.data)),R=void 0!==t.data.dynamicOffsetEpoch?t.data.dynamicOffsetEpoch:R,y=void 0!==t.data.staticOffset?t.data.staticOffset:y,D=void 0!==t.data.propRate?t.data.propRate:D,t.data.isInit){const a=JSON.parse(t.data.satData);P=JSON.parse(t.data.orbitFadeFactor);const o=a.length-1;let n=-1;for(;n<o;)n++,delete a[n].id,a[n].static||a[n].missile?E[n]=a[n]:E[n]=f(a[n].TLE1,a[n].TLE2);S=t.data.numSegs}if(void 0!==t.data.satId){const r=t.data.satId,i=t.data.isEcfOutput||!1,s=new Float32Array(4*(S+1)),d=z(R,y,D),c=1440*(I(d.getUTCFullYear(),d.getUTCMonth()+1,d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds())+1.15741e-8*d.getUTCMilliseconds()-E[r].jdsatepoch),h=S+1;let l=0;if(E[r].missile)for(;l<h;){const t=E[r];if(0===(null===(a=t.latList)||void 0===a?void 0:a.length))s[4*l]=0,s[4*l+1]=0,s[4*l+2]=0,s[4*l+3]=0,l++;else{const a=Math.round(t.altList.length*(l/S)),o=z(R,y,D),n=p(I(o.getUTCFullYear(),o.getUTCMonth()+1,o.getUTCDate(),o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds())+1.15741e-8*o.getUTCMilliseconds()),e=Math.cos(t.latList[a]*x),r=Math.sin(t.latList[a]*x),i=Math.cos(t.lonList[a]*x+n),d=Math.sin(t.lonList[a]*x+n);s[4*l]=(T+t.altList[a])*e*i,s[4*l+1]=(T+t.altList[a])*e*d,s[4*l+2]=(T+t.altList[a])*r,s[4*l+3]=Math.min(P*(h/(l+1)),1),l++}}else{const t=2*Math.PI/E[r].no,a=t/S;for(;l<h;){const d=c+l*a;let M;M=null===(o=m(E[r],d))||void 0===o?void 0:o.position,i&&(e=-l*a*g/t,M={x:(n=M).x*Math.cos(e)-n.y*Math.sin(e),y:n.x*Math.sin(e)+n.y*Math.cos(e),z:n.z}),(null==M?void 0:M.x)&&(null==M?void 0:M.y)&&(null==M?void 0:M.z)?(s[4*l]=M.x,s[4*l+1]=M.y,s[4*l+2]=M.z,s[4*l+3]=Math.min(P*(h/(l+1)),1)):(s[4*l]=0,s[4*l+1]=0,s[4*l+2]=0,s[4*l+3]=0),l++}}O({pointsOut:s,satId:r})}},O=t=>{const{pointsOut:a,satId:o}=t;try{postMessage({pointsOut:a.buffer,satId:o},[a.buffer])}catch(t){if(!process)throw t}}})();
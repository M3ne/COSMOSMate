(()=>{var t={991:function(t){var a;a=()=>(()=>{"use strict";var t={d:(a,n)=>{for(var e in n)t.o(n,e)&&!t.o(a,e)&&Object.defineProperty(a,e,{enumerable:!0,get:n[e]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},a={};t.r(a),t.d(a,{DetailedSat:()=>D,Sat:()=>x,Sensor:()=>O,Sgp4:()=>d,SpaceObjectType:()=>e,Star:()=>z,Tle:()=>I,Transforms:()=>M,Utils:()=>T});var n={};t.r(n),t.d(n,{SpaceObjectType:()=>e});var e,o=Math.PI,r=2*o,i=o/180,s=2/3,l=15e-13,c=360/r,u=864e5,h=1.15741e-8,d=function(){function t(){}return t.angle=function(a,n){var e=t.mag(a),o=t.mag(n);if(e*o>1e-8*1e-8){var r=t.dot(a,n)/(e*o);return Math.abs(r)>1&&(r=Number(t.sgn(r))),Math.acos(r)}return 999999.1},t.asinh=function(t){return Math.log(t+Math.sqrt(t*t+1))},t.createSatrec=function(a,n,e,r){void 0===e&&(e="wgs72"),void 0===r&&(r="i");var s,l={a:null,am:null,alta:null,altp:null,argpdot:null,argpo:null,aycof:null,bstar:null,cc1:null,cc4:null,cc5:null,con41:null,d2:null,d3:null,d4:null,d5232:null,d5421:null,d5433:null,dedt:null,delmo:null,del1:null,ecco:null,em:null,epochdays:null,epochyr:null,error:null,eta:null,gsto:null,im:null,inclo:null,init:null,isimp:null,jdsatepoch:null,mdot:null,method:null,mo:null,mm:null,nddot:null,ndot:null,no:null,nodecf:null,nodedot:null,nodeo:null,om:null,Om:null,omgcof:null,operationmode:null,satnum:null,sinmao:null,t:null,t2cof:null,t3cof:null,t4cof:null,t5cof:null,x1mth2:null,x7thm1:null,xlcof:null,xmcof:null,xfact:null,xlamo:null,xli:null,xgh4:null,xgh3:null,xh2:null,xi2:null,xi3:null,xl2:null,xl3:null,xl4:null,zmol:null,zmos:null,dmdt:null,dnodt:null,domdt:null,e3:null,ee2:null,peo:null,pgho:null,pho:null,PInco:null,plo:null,se2:null,se3:null,sgh2:null,sgh3:null,sgh4:null,sh2:null,sh3:null,si2:null,si3:null,sl2:null,sl3:null,sl4:null,xgh2:null,xh3:null,tumin:null,radiusearthkm:null,irez:null,d3210:null,d3222:null,d4410:null,d4422:null,d5220:null,del2:null,del3:null,didt:null,atime:null,j2:null,j3:null,j4:null,mus:null,xke:null,j3oj2:null,xni:null,d2201:null,d2211:null,nm:null},c=1440/(2*o);l.error=0,l.satnum=a.substring(2,7),l.epochyr=parseInt(a.substring(18,20)),l.epochdays=parseFloat(a.substring(20,32)),l.ndot=parseFloat(a.substring(33,43)),l.nddot=parseFloat("".concat(a.substring(44,45),".").concat(a.substring(45,50),"E").concat(a.substring(50,52))),l.bstar=parseFloat("".concat(a.substring(53,54),".").concat(a.substring(54,59),"E").concat(a.substring(59,61))),l.inclo=parseFloat(n.substring(8,16)),l.nodeo=parseFloat(n.substring(17,25)),l.ecco=parseFloat(".".concat(n.substring(26,33))),l.argpo=parseFloat(n.substring(34,42)),l.mo=parseFloat(n.substring(43,51)),l.no=parseFloat(n.substring(52,63)),l.no/=c,l.inclo*=i,l.nodeo*=i,l.argpo*=i,l.mo*=i,s=l.epochyr<57?l.epochyr+2e3:l.epochyr+1900;var u=t.days2mdhms(s,l.epochdays),h=u.mon,d=u.day,M=u.hr,p=u.min,m=u.sec,f=t.jday(s,h,d,M,p,m);return l.jdsatepoch=f.jd+f.jdFrac,t.sgp4init_(l,{whichconst:e,opsmode:r,satn:l.satnum,epoch:l.jdsatepoch-2433281.5,xbstar:l.bstar,xecco:l.ecco,xargpo:l.argpo,xinclo:l.inclo,xndot:l.ndot,xnddot:l.nddot,xmo:l.mo,xno:l.no,xnodeo:l.nodeo}),l},t.cross=function(t,a){var n=[0,0,0];return n[0]=t[1]*a[2]-t[2]*a[1],n[1]=t[2]*a[0]-t[0]*a[2],n[2]=t[0]*a[1]-t[1]*a[0],n},t.days2mdhms=function(t,a){for(var n=[31,t%4==0?29:28,31,30,31,30,31,31,30,31,30,31],e=Math.floor(a),o=1,r=0;e>r+n[o-1]&&o<12;)r+=n[o-1],o+=1;var i=o,s=e-r,l=24*(a-e),c=Math.floor(l);l=60*(l-c);var u=Math.floor(l);return{mon:i,day:s,hr:c,min:u,sec:60*(l-u)}},t.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},t.gstime=function(t){var a=(t-2451545)/36525,n=-62e-7*a*a*a+.093104*a*a+3164400184.812866*a+67310.54841;return(n=n*i/240%r)<0&&(n+=r),n},t.invjday=function(a,n){var e,o;Math.abs(n)>=1&&(a+=Math.floor(n),n-=Math.floor(n));var r=a-Math.floor(a)-.5;Math.abs(r)>1e-8&&(a-=r,n+=r);var i=a-2415019.5,s=i/365.25,l=1900+Math.floor(s);e=Math.floor(.25*(l-1901)),(o=Math.floor(i-(365*(l-1900)+e)))+n<1&&(l-=1,e=Math.floor(.25*(l-1901)),o=Math.floor(i-(365*(l-1900)+e)));var c=t.days2mdhms(l,o+n);return{year:l,mon:c.mon,day:c.day,hr:c.hr,min:c.min,sec:c.sec}},t.jday=function(t,a,n,e,o,r,i){void 0===a&&(a=0),void 0===n&&(n=0),void 0===e&&(e=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===i&&(i=0),t instanceof Date&&(a=t.getUTCMonth()+1,n=t.getUTCDate(),e=t.getUTCHours(),o=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds(),t=t.getUTCFullYear());var s=367*t-Math.floor(7*(t+Math.floor((a+9)/12))*.25)+Math.floor(275*a/9)+n+1721013.5,l=(i/1e3+r+60*o+3600*e)/86400;if(Math.abs(l)>1){var c=Math.floor(l);s+=c,l-=c}return{jd:s,jdFrac:l}},t.mag=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},t.newtonnu=function(a,n){var e=999999.9,r=999999.9,i=1e-8;if(Math.abs(a)<i)r=n,e=n;else if(a<1-i){var s=Math.sqrt(1-a*a)*Math.sin(n)/(1+a*Math.cos(n)),l=(a+Math.cos(n))/(1+a*Math.cos(n));r=(e=Math.atan2(s,l))-a*Math.sin(e)}else a>1+i?a>1&&Math.abs(n)+1e-5<o-Math.acos(1/a)&&(s=Math.sqrt(a*a-1)*Math.sin(n)/(1+a*Math.cos(n)),e=t.asinh(s),r=a*t.sinh(e)-e):Math.abs(n)<168*o/180&&(r=(e=Math.tan(.5*n))+e*e*e/3);return a<1&&((r%=2*o)<0&&(r+=2*o),e%=2*o),{e0:e,m:r}},t.propagate=function(a,n){var e=a.xke,i=a.j2,c=a.j3oj2,u=a.radiusearthkm*a.xke/60;a.t=n,a.error=0;var h=a.mo+a.mdot*a.t,d=a.argpo+a.argpdot*a.t,M=a.nodeo+a.nodedot*a.t,p=d,m=h,f=a.t*a.t,g=M+a.nodecf*f,v=1-a.cc1*a.t,T=a.bstar*a.cc4*a.t,A=a.t2cof*f;if(1!==a.isimp){var y=a.omgcof*a.t,I=1+a.eta*Math.cos(h),w=y+a.xmcof*(I*I*I-a.delmo);m=h+w,p=d-w;var E=f*a.t,R=E*a.t;v=v-a.d2*f-a.d3*E-a.d4*R,T+=a.bstar*a.cc5*(Math.sin(m)-a.sinmao),A=A+a.t3cof*E+R*(a.t4cof+a.t*a.t5cof)}var N=a.no,x=a.ecco,_=a.inclo;if("d"===a.method){var D=a.t,C=t.dspace_(a.irez,a.d2201,a.d2211,a.d3210,a.d3222,a.d4410,a.d4422,a.d5220,a.d5232,a.d5421,a.d5433,a.dedt,a.del1,a.del2,a.del3,a.didt,a.dmdt,a.dnodt,a.domdt,a.argpo,a.argpdot,a.t,D,a.gsto,a.xfact,a.xlamo,a.no,a.atime,x,p,_,a.xli,m,a.xni,g,N);x=C[0],p=C[1],_=C[2],m=C[3],g=C[4],N=C[5]}if(N<=0)return a.error=2,{position:!1,velocity:!1};var S=Math.pow(e/N,s)*v*v;if(N=e/Math.pow(S,1.5),(x-=T)>=1||x<-.001)return a.error=1,{position:!1,velocity:!1};x<1e-6&&(x=1e-6);var O=(m+=a.no*A)+p+g,b=x,z=_,P=p%=r,L=g%=r,U=m=((O%=r)-p-g)%r,j=Math.sin(_),F=Math.cos(_);if("d"===a.method){var q={inclo:a.inclo,init:"n",ep:b,inclp:z,nodep:L,argpp:P,mp:U,opsmode:a.operationmode},J=t.dpper_(a,q);if(b=J.ep,L=J.nodep,P=J.argpp,U=J.mp,(z=J.inclp)<0&&(z=-z,L+=o,P-=o),b<0||b>1)return a.error=3,{position:!1,velocity:!1}}"d"===a.method&&(j=Math.sin(z),F=Math.cos(z),a.aycof=-.5*c*j,Math.abs(F+1)>15e-13?a.xlcof=-.25*c*j*(3+5*F)/(1+F):a.xlcof=-.25*c*j*(3+5*F)/l);for(var Y,H,k=b*Math.cos(P),B=1/(S*(1-b*b)),G=b*Math.sin(P)+B*a.aycof,V=(U+P+L+B*a.xlcof*k-L)%r,W=V,K=9999.9,X=1;Math.abs(K)>=1e-12&&X<=10;)H=Math.sin(W),K=(V-G*(Y=Math.cos(W))+k*H-W)/(K=1-Y*k-H*G),Math.abs(K)>=.95&&(K=K>0?.95:-.95),W+=K,X+=1;var Q=k*Y+G*H,Z=k*H-G*Y,$=k*k+G*G,tt=S*(1-$);if(tt<0)return a.error=4,{position:!1,velocity:!1};var at=S*(1-Q),nt=Math.sqrt(S)*Z/at,et=Math.sqrt(tt)/at,ot=Math.sqrt(1-$),rt=S/at*(H-G-k*(B=Z/(1+ot))),it=S/at*(Y-k+G*B),st=Math.atan2(rt,it),lt=(it+it)*rt,ct=1-2*rt*rt,ut=.5*i*(B=1/tt),ht=ut*B;if("d"===a.method){var dt=F*F;a.con41=3*dt-1,a.x1mth2=1-dt,a.x7thm1=7*dt-1}var Mt=at*(1-1.5*ht*ot*a.con41)+.5*ut*a.x1mth2*ct;if(Mt<1)return a.error=6,{position:!1,velocity:!1};st-=.25*ht*a.x7thm1*lt;var pt=L+1.5*ht*F*lt,mt=z+1.5*ht*F*j*ct,ft=nt-N*ut*a.x1mth2*lt/e,gt=et+N*ut*(a.x1mth2*ct+1.5*a.con41)/e,vt=Math.sin(st),Tt=Math.cos(st),At=Math.sin(pt),yt=Math.cos(pt),It=Math.sin(mt),wt=Math.cos(mt),Et=-At*wt,Rt=yt*wt,Nt=Et*vt+yt*Tt,xt=Rt*vt+At*Tt,_t=It*vt,Dt=Et*Tt-yt*vt,Ct=Rt*Tt-At*vt,St=It*Tt;return{position:{x:Mt*Nt*a.radiusearthkm,y:Mt*xt*a.radiusearthkm,z:Mt*_t*a.radiusearthkm},velocity:{x:(ft*Nt+gt*Dt)*u,y:(ft*xt+gt*Ct)*u,z:(ft*_t+gt*St)*u}}},t.rv2coe=function(a,n,e){var i,s,l,c,u,h,d,M,p,m,f,g,v,T,A,y,I,w=[0,0,0],E=[0,0,0],R=.5*o,N=1e-8,x=999999.1,_=t.mag(a),D=t.mag(n),C=t.cross(a,n),S=t.mag(C);if(S>N){w[0]=-C[1],w[1]=C[0],w[2]=0,v=t.mag(w);var O=D*D-e/_;for(g=t.dot(a,n),y=0;y<=2;y++)E[y]=(O*a[y]-g*n[y])/e;if(l=t.mag(E),A=D*D*.5-e/_,s=Math.abs(A)>N?-e/(2*A):999999.9,i=S*S/e,T=C[2]/S,c=Math.acos(T),I=1,l<N?I=c<N||Math.abs(c-o)<N?2:3:(c<N||Math.abs(c-o)<N)&&(I=4),v>N){var b=w[0]/v;Math.abs(b)>1&&(b=t.sgn(b)),u=Math.acos(b),w[1]<0&&(u=r-u)}else u=x;1===I?(h=t.angle(w,E),E[2]<0&&(h=r-h)):h=x,1===I||4===I?(d=t.angle(E,a),g<0&&(d=r-d)):d=x,3===I?(p=t.angle(w,a),a[2]<0&&(p=r-p),M=p):p=x,l>N&&4===I?(b=E[0]/l,Math.abs(b)>1&&(b=t.sgn(b)),f=Math.acos(b),E[1]<0&&(f=r-f),c>R&&(f=r-f)):f=x,_>N&&2===I?(b=a[0]/_,Math.abs(b)>1&&(b=t.sgn(b)),m=Math.acos(b),a[1]<0&&(m=r-m),c>R&&(m=r-m),M=m):m=x,1!==I&&4!==I||(M=t.newtonnu(l,d).m)}else i=x,s=x,l=x,c=x,u=x,h=x,d=x,M=x,p=x,m=x,f=x;return{p:i,a:s,ecc:l,incl:c,omega:u,argp:h,nu:d,m:M,arglat:p,truelon:m,lonper:f}},t.sgn=function(t){return t<0?-1:1},t.sinh=function(t){return(Math.exp(t)-Math.exp(-t))/2},t.dpper_=function(t,a){var n=t.e3,e=t.ee2,i=t.peo,s=t.pgho,l=t.pho,c=t.PInco,u=t.plo,h=t.se2,d=t.se3,M=t.sgh2,p=t.sgh3,m=t.sgh4,f=t.sh2,g=t.sh3,v=t.si2,T=t.si3,A=t.sl2,y=t.sl3,I=t.sl4,w=t.t,E=t.xgh2,R=t.xgh3,N=t.xgh4,x=t.xh2,_=t.xh3,D=t.xi2,C=t.xi3,S=t.xl2,O=t.xl3,b=t.xl4,z=t.zmol,P=t.zmos,L=a.ep,U=a.inclp,j=a.nodep,F=a.argpp,q=a.mp,J=a.opsmode,Y=void 0===J?"i":J,H=a.init,k=P+119459e-10*w;"y"===H&&(k=P);var B=k+.0335*Math.sin(k),G=Math.sin(B),V=.5*G*G-.25,W=-.5*G*Math.cos(B),K=h*V+d*W,X=v*V+T*W,Q=A*V+y*W+I*G,Z=M*V+p*W+m*G,$=f*V+g*W;k=z+.00015835218*w,"y"===H&&(k=z),B=k+.1098*Math.sin(k);var tt=K+(e*(V=.5*(G=Math.sin(B))*G-.25)+n*(W=-.5*G*Math.cos(B))),at=X+(D*V+C*W),nt=Q+(S*V+O*W+b*G),et=Z+(E*V+R*W+N*G),ot=$+(x*V+_*W);if("n"===H){nt-=u,et-=s,ot-=l,U+=at-=c,L+=tt-=i;var rt=Math.sin(U),it=Math.cos(U);if(U>=.2)F+=et-=it*(ot/=rt),j+=ot,q+=nt;else{var st=Math.sin(j),lt=Math.cos(j),ct=rt*st,ut=rt*lt;ct+=ot*lt+at*it*st,ut+=-ot*st+at*it*lt,(j%=r)<0&&"a"===Y&&(j+=r);var ht=q+F+it*j;ht+=nt+et-at*j*rt;var dt=j;(j=Math.atan2(ct,ut))<0&&"a"===Y&&(j+=r),Math.abs(dt-j)>o&&(j<dt?j+=r:j-=r),F=ht-(q+=nt)-it*j}}return{ep:L,inclp:U,nodep:j,argpp:F,mp:q}},t.dscom_=function(t){var a,n,e,o,r,i,s,l,c,u,h,d,M,p,m,f,g,v,T,A,y,I,w,E,R,N,x,_,D,C,S,O,b,z,P,L,U,j,F=t.epoch,q=t.ep,J=t.argpp,Y=t.tc,H=t.inclp,k=t.nodep,B=t.np,G=.01675,V=.0549,W=2*Math.PI,K=B,X=q,Q=Math.sin(k),Z=Math.cos(k),$=Math.sin(J),tt=Math.cos(J),at=Math.sin(H),nt=Math.cos(H),et=X*X,ot=1-et,rt=Math.sqrt(ot),it=F+18261.5+Y/1440,st=(4.523602-.00092422029*it)%W,lt=Math.sin(st),ct=Math.cos(st),ut=.91375164-.03568096*ct,ht=Math.sqrt(1-ut*ut),dt=.089683511*lt/ht,Mt=Math.sqrt(1-dt*dt),pt=5.8351514+.001944368*it,mt=.39785416*lt/ht,ft=Mt*ct+.91744867*dt*lt;mt=Math.atan2(mt,ft),mt+=pt-st;for(var gt=Math.cos(mt),vt=Math.sin(mt),Tt=.1945905,At=-.98088458,yt=.91744867,It=.39785416,wt=Z,Et=Q,Rt=29864797e-13,Nt=1/K,xt=1;xt<=2;xt++){var _t=Tt*wt+At*yt*Et,Dt=-At*wt+Tt*yt*Et,Ct=-Tt*Et+At*yt*wt,St=At*It,Ot=At*Et+Tt*yt*wt,bt=Tt*It,zt=nt*Ct+at*St,Pt=nt*Ot+at*bt,Lt=-at*Ct+nt*St,Ut=-at*Ot+nt*bt,jt=_t*tt+zt*$,Ft=Dt*tt+Pt*$,qt=-_t*$+zt*tt,Jt=-Dt*$+Pt*tt,Yt=Lt*$,Ht=Ut*$,kt=Lt*tt,Bt=Ut*tt;_=-6*_t*Lt+et*(-24*jt*kt-6*qt*Yt),D=-6*(_t*Ut+Dt*Lt)+et*(-24*(Ft*kt+jt*Bt)+-6*(qt*Ht+Jt*Yt)),C=-6*Dt*Ut+et*(-24*Ft*Bt-6*Jt*Ht),O=6*zt*Lt+et*(24*jt*Yt-6*qt*kt),b=6*(Pt*Lt+zt*Ut)+et*(24*(Ft*Yt+jt*Ht)-6*(Jt*kt+qt*Bt)),z=6*Pt*Ut+et*(24*Ft*Ht-6*Jt*Bt),x=(x=3*(_t*_t+zt*zt)+(L=12*jt*jt-3*qt*qt)*et)+x+ot*L,S=(S=6*(_t*Dt+zt*Pt)+(U=24*jt*Ft-6*qt*Jt)*et)+S+ot*U,P=(P=3*(Dt*Dt+Pt*Pt)+(j=12*Ft*Ft-3*Jt*Jt)*et)+P+ot*j,n=-.5*(e=Rt*Nt)/rt,a=-15*X*(o=e*rt),r=jt*qt+Ft*Jt,i=Ft*qt+jt*Jt,s=Ft*Jt-jt*qt,1===xt&&(l=a,c=n,u=e,h=o,d=r,M=i,p=s,m=x,T=S,w=P,f=_,g=D,v=C,A=O,y=b,I=z,E=L,R=U,N=j,Tt=gt,At=vt,yt=ut,It=ht,wt=Mt*Z+dt*Q,Et=Q*Mt-Z*dt,Rt=4.7968065e-7)}return{snodm:Q,cnodm:Z,sinim:at,cosim:nt,sinomm:$,cosomm:tt,day:it,e3:2*a*s,ee2:2*a*i,em:X,emsq:et,gam:pt,peo:0,pgho:0,pho:0,PInco:0,plo:0,rtemsq:rt,se2:2*l*M,se3:2*l*p,sgh2:2*h*R,sgh3:2*h*(N-E),sgh4:-18*h*G,sh2:-2*c*y,sh3:-2*c*(I-A),si2:2*c*g,si3:2*c*(v-f),sl2:-2*u*T,sl3:-2*u*(w-m),sl4:-2*u*(-21-9*et)*G,s1:a,s2:n,s3:e,s4:o,s5:r,s6:i,s7:s,ss1:l,ss2:c,ss3:u,ss4:h,ss5:d,ss6:M,ss7:p,sz1:m,sz2:T,sz3:w,sz11:f,sz12:g,sz13:v,sz21:A,sz22:y,sz23:I,sz31:E,sz32:R,sz33:N,xgh2:2*o*U,xgh3:2*o*(j-L),xgh4:-18*o*V,xh2:-2*n*b,xh3:-2*n*(z-O),xi2:2*n*D,xi3:2*n*(C-_),xl2:-2*e*S,xl3:-2*e*(P-x),xl4:-2*e*(-21-9*et)*V,nm:K,z1:x,z2:S,z3:P,z11:_,z12:D,z13:C,z21:O,z22:b,z23:z,z31:L,z32:U,z33:j,zmol:(.2299715*it-pt+4.7199672)%W,zmos:(6.2565837+.017201977*it)%W}},t.dsinit_=function(t){var a=t.xke,n=t.cosim,e=t.argpo,i=t.s1,s=t.s2,l=t.s3,c=t.s4,u=t.s5,h=t.sinim,d=t.ss1,M=t.ss2,p=t.ss3,m=t.ss4,f=t.ss5,g=t.sz1,v=t.sz3,T=t.sz11,A=t.sz13,y=t.sz21,I=t.sz23,w=t.sz31,E=t.sz33,R=t.t,N=t.tc,x=t.gsto,_=t.mo,D=t.mdot,C=t.no,S=t.nodeo,O=t.nodedot,b=t.xPIdot,z=t.z1,P=t.z3,L=t.z11,U=t.z13,j=t.z21,F=t.z23,q=t.z31,J=t.z33,Y=t.ecco,H=t.eccsq,k=t.emsq,B=t.em,G=t.argpm,V=t.inclm,W=t.mm,K=t.nm,X=t.nodem,Q=t.irez,Z=t.atime,$=t.d2201,tt=t.d2211,at=t.d3210,nt=t.d3222,et=t.d4410,ot=t.d4422,rt=t.d5220,it=t.d5232,st=t.d5421,lt=t.d5433,ct=t.dedt,ut=t.didt,ht=t.dmdt,dt=t.dnodt,Mt=t.domdt,pt=t.del1,mt=t.del2,ft=t.del3,gt=t.xfact,vt=t.xlamo,Tt=t.xli,At=t.xni,yt=.0043752690880113,It=.00015835218,wt=119459e-10;Q=0,K<.0052359877&&K>.0034906585&&(Q=1),K>=.00826&&K<=.00924&&B>=.5&&(Q=2);var Et=-wt*M*(y+I);(V<.052359877||V>o-.052359877)&&(Et=0),0!==h&&(Et/=h);var Rt=-It*s*(j+F);(V<.052359877||V>o-.052359877)&&(Rt=0),Mt=m*wt*(w+E-6)-n*Et+c*It*(q+J-6),dt=Et,0!==h&&(Mt-=n/h*Rt,dt+=Rt/h);var Nt=(x+N*yt)%r;if(B+=(ct=d*wt*f+i*It*u)*R,V+=(ut=M*wt*(T+A)+s*It*(L+U))*R,G+=Mt*R,X+=dt*R,W+=(ht=-wt*p*(g+v-14-6*k)-It*l*(z+P-14-6*k))*R,0!==Q){var xt=Math.pow(K/a,2/3);if(2===Q){var _t=n*n,Dt=B,Ct=k,St=(B=Y)*(k=H),Ot=void 0,bt=void 0,zt=void 0,Pt=void 0,Lt=void 0,Ut=void 0,jt=void 0,Ft=void 0,qt=void 0;B<=.65?(Ot=3.616-13.247*B+16.29*k,bt=117.39*B-19.302-228.419*k+156.591*St,zt=109.7927*B-18.9068-214.6334*k+146.5816*St,Pt=242.694*B-41.122-471.094*k+313.953*St,Lt=841.88*B-146.407-1629.014*k+1083.435*St,Ut=3017.977*B-532.114-5740.032*k+3708.276*St):(Ot=331.819*B-72.099-508.738*k+266.724*St,bt=1582.851*B-346.844-2415.925*k+1246.113*St,zt=1554.908*B-342.585-2366.899*k+1215.972*St,Pt=4758.686*B-1052.797-7193.992*k+3651.957*St,Lt=16178.11*B-3581.69-24462.77*k+12422.52*St,Ut=B>.715?29936.92*B-5149.66-54087.36*k+31324.56*St:1464.74-4664.75*B+3763.64*k),B<.7?(qt=4988.61*B-919.2277-9064.77*k+5542.21*St,jt=4568.6173*B-822.71072-8491.4146*k+5337.524*St,Ft=4690.25*B-853.666-8624.77*k+5341.4*St):(qt=161616.52*B-37995.78-229838.2*k+109377.94*St,jt=218913.95*B-51752.104-309468.16*k+146349.42*St,Ft=170470.89*B-40023.88-242699.48*k+115605.82*St);var Jt=h*h,Yt=K*K*3*(xt*xt),Ht=17891679e-13*Yt;$=Ht*(kt=.75*(1+2*n+_t))*(-.306-.44*(B-.64)),tt=Ht*(1.5*Jt)*Ot,at=(Ht=3.7393792e-7*(Yt*=xt))*(1.875*h*(1-2*n-3*_t))*bt,nt=Ht*(-1.875*h*(1+2*n-3*_t))*zt,et=(Ht=2*(Yt*=xt)*7.3636953e-9)*(35*Jt*kt)*Pt,ot=Ht*(39.375*Jt*Jt)*Lt,rt=(Ht=1.1428639e-7*(Yt*=xt))*(9.84375*h*(Jt*(1-2*n-5*_t)+.33333333*(4*n-2+6*_t)))*Ut,it=Ht*(h*(4.92187512*Jt*(-2-4*n+10*_t)+6.56250012*(1+2*n-3*_t)))*Ft,st=(Ht=2*Yt*2.1765803e-9)*(29.53125*h*(2-8*n+_t*(8*n-12+10*_t)))*jt,lt=Ht*(29.53125*h*(-2-8*n+_t*(12+8*n-10*_t)))*qt,vt=(_+S+S-(Nt+Nt))%r,gt=D+ht+2*(O+dt-yt)-C,B=Dt,k=Ct}if(1===Q){var kt,Bt=1+n;mt=2*(pt=3*K*K*xt*xt)*(kt=.75*(1+n)*(1+n))*(1+k*(.8125*k-2.5))*17891679e-13,ft=3*pt*(Bt*=1.875*Bt*Bt)*(1+k*(6.60937*k-6))*2.2123015e-7*xt,pt=pt*(.9375*h*h*(1+3*n)-.75*(1+n))*(bt=1+2*k)*21460748e-13*xt,vt=(_+S+e-Nt)%r,gt=D+b+ht+Mt+dt-(C+yt)}Tt=vt,At=C,Z=0,K=C+0}return{em:B,argpm:G,inclm:V,mm:W,nm:K,nodem:X,irez:Q,atime:Z,d2201:$,d2211:tt,d3210:at,d3222:nt,d4410:et,d4422:ot,d5220:rt,d5232:it,d5421:st,d5433:lt,dedt:ct,didt:ut,dmdt:ht,dndt:0,dnodt:dt,domdt:Mt,del1:pt,del2:mt,del3:ft,xfact:gt,xlamo:vt,xli:Tt,xni:At}},t.dspace_=function(t,a,n,e,o,i,s,l,c,u,h,d,M,p,m,f,g,v,T,A,y,I,w,E,R,N,x,_,D,C,S,O,b,z,P,L){var U=.13130908,j=2.8843198,F=.37448087,q=5.7686396,J=.95240898,Y=1.8014998,H=1.050833,k=4.4108898,B=259200,G=0,V=(E+.0043752690880113*w)%r;if(D+=d*I,S+=f*I,C+=T*I,P+=v*I,b+=g*I,0!==t){var W;(0===_||I*_<=0||Math.abs(I)<Math.abs(_))&&(_=0,z=x,O=N),W=I>0?720:-720;for(var K=void 0,X=void 0,Q=void 0,Z=void 0,$=void 0,tt=void 0,at=void 0,nt=381;381===nt;)2!==t?(tt=M*Math.sin(O-U)+p*Math.sin(2*(O-j))+m*Math.sin(3*(O-F)),Z=z+R,$=M*Math.cos(O-U)+2*p*Math.cos(2*(O-j))+3*m*Math.cos(3*(O-F)),$*=Z):(Q=(at=A+y*_)+at,X=O+O,tt=a*Math.sin(Q+O-q)+n*Math.sin(O-q)+e*Math.sin(at+O-J)+o*Math.sin(-at+O-J)+i*Math.sin(Q+X-Y)+s*Math.sin(X-Y)+l*Math.sin(at+O-H)+c*Math.sin(-at+O-H)+u*Math.sin(at+X-k)+h*Math.sin(-at+X-k),Z=z+R,$=a*Math.cos(Q+O-q)+n*Math.cos(O-q)+e*Math.cos(at+O-J)+o*Math.cos(-at+O-J)+l*Math.cos(at+O-H)+c*Math.cos(-at+O-H)+2*(i*Math.cos(Q+X-Y)+s*Math.cos(X-Y)+u*Math.cos(at+X-k)+h*Math.cos(-at+X-k)),$*=Z),Math.abs(I-_)>=720?nt=381:(K=I-_,nt=0),381===nt&&(O+=Z*W+tt*B,z+=tt*W+$*B,_+=W);L=z+tt*K+$*K*K*.5;var et=O+Z*K+tt*K*K*.5;1!==t?(b=et-2*P+2*V,G=L-x):(b=et-P-C+V,G=L-x),L=x+G}return[D,C,S,b,P,L]},t.getgravconst_=function(t){var a,n,e,o,r,i,s,l;switch(t){case"wgs72old":r=398600.79964,i=6378.135,s=1/(l=.0743669161),o=-165597e-11,e=(n=-253881e-11)/(a=.001082616);break;case"wgs72":r=398600.8,i=6378.135,s=1/(l=60/Math.sqrt(i*i*i/r)),o=-165597e-11,e=(n=-253881e-11)/(a=.001082616);break;case"wgs84":r=398600.5,i=6378.137,s=1/(l=60/Math.sqrt(i*i*i/r)),o=-161098761e-14,e=(n=-253215306e-14)/(a=.00108262998905);break;default:throw new Error("unknown gravity option ".concat(t))}return{tumin:s,mus:r,radiusearthkm:i,xke:l,j2:a,j3:n,j4:o,j3oj2:e}},t.initl_=function(a){var n=a.opsmode,e=a.ecco,o=a.epoch,r=a.inclo,i=a.xke,s=a.j2,l=a.no,c=2*Math.PI,u=2/3,h=e*e,d=1-h,M=Math.sqrt(d),p=Math.cos(r),m=p*p,f=Math.pow(i/l,u),g=.75*s*(3*m-1)/(M*d),v=g/(f*f),T=f*(1-v*v-v*(1/3+134*v*v/81));l/=1+(v=g/(T*T));var A,y=Math.pow(i/l,u),I=Math.sin(r),w=y*d,E=1-5*m,R=-E-m-m,N=1/y,x=w*w,_=y*(1-e);if("a"===n){var D=o-7305,C=Math.floor(D+1e-8),S=.017202791694070362;(A=(1.7321343856509375+S*C+(S+c)*(D-C)+D*D*5075514194322695e-30)%c)<0&&(A+=c)}else A=t.gstime(o+2433281.5);return{no:l,method:"n",ainv:N,ao:y,con41:R,con42:E,cosio:p,cosio2:m,eccsq:h,omeosq:d,posq:x,rp:_,rteosq:M,sinio:I,gsto:A}},t.sgp4init_=function(a,n){var e=n.whichconst,o=void 0===e?"wgs72":e,i=n.opsmode,c=void 0===i?"i":i,u=n.satn,h=void 0===u?a.satnum:u,d=n.epoch,M=n.xbstar,p=n.xecco,m=n.xargpo,f=n.xinclo,g=n.xndot,v=n.xnddot,T=n.xmo,A=n.xno,y=n.xnodeo;a.isimp=0,a.method="n",a.aycof=0,a.con41=0,a.cc1=0,a.cc4=0,a.cc5=0,a.d2=0,a.d3=0,a.d4=0,a.delmo=0,a.eta=0,a.argpdot=0,a.omgcof=0,a.sinmao=0,a.t=0,a.t2cof=0,a.t3cof=0,a.t4cof=0,a.t5cof=0,a.x1mth2=0,a.x7thm1=0,a.mdot=0,a.nodedot=0,a.xlcof=0,a.xmcof=0,a.nodecf=0,a.irez=0,a.d2201=0,a.d2211=0,a.d3210=0,a.d3222=0,a.d4410=0,a.d4422=0,a.d5220=0,a.d5232=0,a.d5421=0,a.d5433=0,a.dedt=0,a.del1=0,a.del2=0,a.del3=0,a.didt=0,a.dmdt=0,a.dnodt=0,a.domdt=0,a.e3=0,a.ee2=0,a.peo=0,a.pgho=0,a.pho=0,a.PInco=0,a.plo=0,a.se2=0,a.se3=0,a.sgh2=0,a.sgh3=0,a.sgh4=0,a.sh2=0,a.sh3=0,a.si2=0,a.si3=0,a.sl2=0,a.sl3=0,a.sl4=0,a.gsto=0,a.xfact=0,a.xgh2=0,a.xgh3=0,a.xgh4=0,a.xh2=0,a.xh3=0,a.xi2=0,a.xi3=0,a.xl2=0,a.xl3=0,a.xl4=0,a.xlamo=0,a.zmol=0,a.zmos=0,a.atime=0,a.xli=0,a.xni=0;var I=t.getgravconst_(o);a.tumin=I.tumin,a.mus=I.mus,a.radiusearthkm=I.radiusearthkm,a.xke=I.xke,a.j2=I.j2,a.j3=I.j3,a.j4=I.j4,a.j3oj2=I.j3oj2;var w=I.j2,E=I.j4,R=I.xke,N=I.j3oj2;a.error=0,a.operationmode=c;var x=h.split("")[0].toLowerCase();isNaN(parseInt(x))?a.satnum=parseInt(x.charCodeAt(0)-96+9+a.satnum.slice(1,5)).toString():a.satnum=h,a.bstar=M,a.ndot=g,a.nddot=v,a.ecco=p,a.argpo=m,a.inclo=f,a.mo=T,a.no=A,a.nodeo=y;var _=78/a.radiusearthkm+1,D=42/a.radiusearthkm,C=D*D*D*D;a.init="y",a.t=0;var S={ecco:a.ecco,epoch:d,inclo:a.inclo,no:a.no,method:a.method,opsmode:a.operationmode,xke:a.xke,j2:a.j2},O=t.initl_(S),b=O.ao,z=O.con42,P=O.cosio,L=O.cosio2,U=O.eccsq,j=O.omeosq,F=O.posq,q=O.rp,J=O.rteosq,Y=O.sinio;if(a.no=O.no,a.con41=O.con41,a.gsto=O.gsto,a.a=Math.pow(a.no*a.tumin,-2/3),a.alta=a.a*(1+a.ecco)-1,a.altp=a.a*(1-a.ecco)-1,a.error=0,j>=0||a.no>=0){a.isimp=0,q<220/a.radiusearthkm+1&&(a.isimp=1);var H=_,k=C,B=(q-1)*a.radiusearthkm;if(B<156){H=B-78,B<98&&(H=20);var G=(120-H)/a.radiusearthkm;k=G*G*G*G,H=H/a.radiusearthkm+1}var V=1/F,W=1/(b-H);a.eta=b*a.ecco*W;var K=a.eta*a.eta,X=a.ecco*a.eta,Q=Math.abs(1-K),Z=k*Math.pow(W,4),$=Z/Math.pow(Q,3.5),tt=$*a.no*(b*(1+1.5*K+X*(4+K))+.375*w*W/Q*a.con41*(8+3*K*(8+K)));a.cc1=a.bstar*tt;var at=0;a.ecco>1e-4&&(at=-2*Z*W*N*a.no*Y/a.ecco),a.x1mth2=1-L,a.cc4=2*a.no*$*b*j*(a.eta*(2+.5*K)+a.ecco*(.5+2*K)-w*W/(b*Q)*(-3*a.con41*(1-2*X+K*(1.5-.5*X))+.75*a.x1mth2*(2*K-X*(1+K))*Math.cos(2*a.argpo))),a.cc5=2*$*b*j*(1+2.75*(K+X)+X*K);var nt=L*L,et=1.5*w*V*a.no,ot=.5*et*w*V,rt=-.46875*E*V*V*a.no;a.mdot=a.no+.5*et*J*a.con41+.0625*ot*J*(13-78*L+137*nt),a.argpdot=-.5*et*z+.0625*ot*(7-114*L+395*nt)+rt*(3-36*L+49*nt);var it=-et*P;a.nodedot=it+(.5*ot*(4-19*L)+2*rt*(3-7*L))*P;var st=a.argpdot+a.nodedot;a.omgcof=a.bstar*at*Math.cos(a.argpo),a.xmcof=0,a.ecco>1e-4&&(a.xmcof=-s*Z*a.bstar/X),a.nodecf=3.5*j*it*a.cc1,a.t2cof=1.5*a.cc1,Math.abs(P+1)>15e-13?a.xlcof=-.25*N*Y*(3+5*P)/(1+P):a.xlcof=-.25*N*Y*(3+5*P)/l,a.aycof=-.5*N*Y;var lt=1+a.eta*Math.cos(a.mo);if(a.delmo=lt*lt*lt,a.sinmao=Math.sin(a.mo),a.x7thm1=7*L-1,r/a.no>=225){a.method="d",a.isimp=1;var ct=a.inclo,ut={epoch:d,ep:a.ecco,argpp:a.argpo,tc:0,inclp:a.inclo,nodep:a.nodeo,np:a.no,e3:a.e3,ee2:a.ee2,peo:a.peo,pgho:a.pgho,pho:a.pho,PInco:a.PInco,plo:a.plo,se2:a.se2,se3:a.se3,sgh2:a.sgh2,sgh3:a.sgh3,sgh4:a.sgh4,sh2:a.sh2,sh3:a.sh3,si2:a.si2,si3:a.si3,sl2:a.sl2,sl3:a.sl3,sl4:a.sl4,xgh2:a.xgh2,xgh3:a.xgh3,xgh4:a.xgh4,xh2:a.xh2,xh3:a.xh3,xi2:a.xi2,xi3:a.xi3,xl2:a.xl2,xl3:a.xl3,xl4:a.xl4,zmol:a.zmol,zmos:a.zmos},ht=t.dscom_(ut);a.e3=ht.e3,a.ee2=ht.ee2,a.peo=ht.peo,a.pgho=ht.pgho,a.pho=ht.pho,a.PInco=ht.PInco,a.plo=ht.plo,a.se2=ht.se2,a.se3=ht.se3,a.sgh2=ht.sgh2,a.sgh3=ht.sgh3,a.sgh4=ht.sgh4,a.sh2=ht.sh2,a.sh3=ht.sh3,a.si2=ht.si2,a.si3=ht.si3,a.sl2=ht.sl2,a.sl3=ht.sl3,a.sl4=ht.sl4;var dt=ht.sinim,Mt=ht.cosim,pt=ht.em,mt=ht.emsq,ft=ht.s1,gt=ht.s2,vt=ht.s3,Tt=ht.s4,At=ht.s5,yt=ht.ss1,It=ht.ss2,wt=ht.ss3,Et=ht.ss4,Rt=ht.ss5,Nt=ht.sz1,xt=ht.sz3,_t=ht.sz11,Dt=ht.sz13,Ct=ht.sz21,St=ht.sz23,Ot=ht.sz31,bt=ht.sz33;a.xgh2=ht.xgh2,a.xgh3=ht.xgh3,a.xgh4=ht.xgh4,a.xh2=ht.xh2,a.xh3=ht.xh3,a.xi2=ht.xi2,a.xi3=ht.xi3,a.xl2=ht.xl2,a.xl3=ht.xl3,a.xl4=ht.xl4,a.zmol=ht.zmol,a.zmos=ht.zmos;var zt=ht.nm,Pt=ht.z1,Lt=ht.z3,Ut=ht.z11,jt=ht.z13,Ft=ht.z21,qt=ht.z23,Jt=ht.z31,Yt=ht.z33,Ht={inclo:ct,init:a.init,ep:a.ecco,inclp:a.inclo,nodep:a.nodeo,argpp:a.argpo,mp:a.mo,opsmode:a.operationmode},kt=t.dpper_(a,Ht);a.ecco=kt.ep,a.inclo=kt.inclp,a.nodeo=kt.nodep,a.argpo=kt.argpp,a.mo=kt.mp;var Bt={xke:R,cosim:Mt,emsq:mt,argpo:a.argpo,s1:ft,s2:gt,s3:vt,s4:Tt,s5:At,sinim:dt,ss1:yt,ss2:It,ss3:wt,ss4:Et,ss5:Rt,sz1:Nt,sz3:xt,sz11:_t,sz13:Dt,sz21:Ct,sz23:St,sz31:Ot,sz33:bt,t:a.t,tc:0,gsto:a.gsto,mo:a.mo,mdot:a.mdot,no:a.no,nodeo:a.nodeo,nodedot:a.nodedot,xPIdot:st,z1:Pt,z3:Lt,z11:Ut,z13:jt,z21:Ft,z23:qt,z31:Jt,z33:Yt,ecco:a.ecco,eccsq:U,em:pt,argpm:0,inclm:ct,mm:0,nm:zt,nodem:0,irez:a.irez,atime:a.atime,d2201:a.d2201,d2211:a.d2211,d3210:a.d3210,d3222:a.d3222,d4410:a.d4410,d4422:a.d4422,d5220:a.d5220,d5232:a.d5232,d5421:a.d5421,d5433:a.d5433,dedt:a.dedt,didt:a.didt,dmdt:a.dmdt,dnodt:a.dnodt,domdt:a.domdt,del1:a.del1,del2:a.del2,del3:a.del3,xfact:a.xfact,xlamo:a.xlamo,xli:a.xli,xni:a.xni},Gt=t.dsinit_(Bt);a.irez=Gt.irez,a.atime=Gt.atime,a.d2201=Gt.d2201,a.d2211=Gt.d2211,a.d3210=Gt.d3210,a.d3222=Gt.d3222,a.d4410=Gt.d4410,a.d4422=Gt.d4422,a.d5220=Gt.d5220,a.d5232=Gt.d5232,a.d5421=Gt.d5421,a.d5433=Gt.d5433,a.dedt=Gt.dedt,a.didt=Gt.didt,a.dmdt=Gt.dmdt,a.dnodt=Gt.dnodt,a.domdt=Gt.domdt,a.del1=Gt.del1,a.del2=Gt.del2,a.del3=Gt.del3,a.xfact=Gt.xfact,a.xlamo=Gt.xlamo,a.xli=Gt.xli,a.xni=Gt.xni}if(1!==a.isimp){var Vt=a.cc1*a.cc1;a.d2=4*b*W*Vt;var Wt=a.d2*W*a.cc1/3;a.d3=(17*b+H)*Wt,a.d4=.5*Wt*b*W*(221*b+31*H)*a.cc1,a.t3cof=a.d2+2*Vt,a.t4cof=.25*(3*a.d3+a.cc1*(12*a.d2+10*Vt)),a.t5cof=.2*(3*a.d4+12*a.cc1*a.d3+6*a.d2*a.d2+15*Vt*(2*a.d2+Vt))}}t.propagate(a,0),a.init="n"},t}(),M=function(){function t(){}return t.getDegLat=function(a){if(a<-o/2||a>o/2)throw new RangeError("Latitude radians must be in range [-PI/2; PI/2].");return t.rad2deg(a)},t.getDegLon=function(a){if(a<-o||a>o)throw new RangeError("Longitude radians must be in range [-PI; PI].");return t.rad2deg(a)},t.getRadLat=function(a){if(a<-90||a>90)throw new RangeError("Latitude degrees must be in range [-90; 90].");return t.deg2rad(a)},t.getRadLon=function(a){if(a<-180||a>180)throw new RangeError("Longitude degrees must be in range [-180; 180].");return t.deg2rad(a)},t.rad2deg=function(t){return 180*t/o},t.deg2rad=function(t){return t*o/180},t.ecf2eci=function(t,a){return{x:t.x*Math.cos(a)-t.y*Math.sin(a),y:t.x*Math.sin(a)+t.y*Math.cos(a),z:t.z}},t.ecf2rae=function(a,n){var e=t.lla2sez(a,n);return t.sez2rae(e)},t.eci2lla=function(t,a){for(var n=6378.137,e=Math.sqrt(t.x*t.x+t.y*t.y),i=(n-6356.7523142)/n,s=2*i-i*i,l=Math.atan2(t.y,t.x)-a;l<-o;)l+=r;for(;l>o;)l-=r;for(var c,u=0,h=Math.atan2(t.z,Math.sqrt(t.x*t.x+t.y*t.y));u<20;)c=1/Math.sqrt(1-s*(Math.sin(h)*Math.sin(h))),h=Math.atan2(t.z+n*c*s*Math.sin(h),e),u+=1;return{lon:l,lat:h,alt:e/Math.cos(h)-n*c}},t.eci2ecf=function(t,a){return{x:t.x*Math.cos(a)+t.y*Math.sin(a),y:t.x*-Math.sin(a)+t.y*Math.cos(a),z:t.z}},t.lla2ecf=function(t){var a=t.lon,n=t.lat,e=t.alt,o=6378.137,r=(o-6356.7523142)/o,i=2*r-r*r,s=o/Math.sqrt(1-i*(Math.sin(n)*Math.sin(n)));return{x:(s+e)*Math.cos(n)*Math.cos(a),y:(s+e)*Math.cos(n)*Math.sin(a),z:(s*(1-i)+e)*Math.sin(n)}},t.lla2sez=function(a,n){var e=a.lon,o=a.lat,r=t.lla2ecf(a),i=n.x-r.x,s=n.y-r.y,l=n.z-r.z;return{s:Math.sin(o)*Math.cos(e)*i+Math.sin(o)*Math.sin(e)*s-Math.cos(o)*l,e:-Math.sin(e)*i+Math.cos(e)*s,z:Math.cos(o)*Math.cos(e)*i+Math.cos(o)*Math.sin(e)*s+Math.sin(o)*l}},t.rae2sez=function(t){return{s:-t.rng*Math.cos(t.el)*Math.cos(t.az),e:t.rng*Math.cos(t.el)*Math.sin(t.az),z:t.rng*Math.sin(t.el)}},t.rae2ecf=function(a,n){var e=t.lla2ecf(n),o=t.rae2sez(a),r=Math.sin(n.lat),i=Math.sin(n.lon),s=Math.cos(n.lat),l=Math.cos(n.lon);return{x:r*l*o.s+-i*o.e+s*l*o.z+e.x,y:r*i*o.s+l*o.e+s*i*o.z+e.y,z:-s*o.s+r*o.z+e.z}},t.sez2rae=function(t){var a=Math.sqrt(t.s*t.s+t.e*t.e+t.z*t.z),n=Math.asin(t.z/a);return{rng:a,az:Math.atan2(-t.e,t.s)+o,el:n}},t.lla2ecef=function(t){var a=t.lat,n=t.lon,e=t.alt,o=6378.137,r=Math.sqrt(1-Math.pow(6356.752314245,2)/Math.pow(o,2)),i=o/Math.sqrt(1-Math.pow(r,2)*Math.pow(Math.sin(a),2));return{x:(i+e)*Math.cos(a)*Math.cos(n),y:(i+e)*Math.cos(a)*Math.sin(n),z:(i*(1-Math.pow(r,2))+e)*Math.sin(a)}},t.ecf2enu=function(t,a){var n=a.lat,e=a.lon,o=t.x,r=t.y,i=t.z;return{x:-Math.sin(e)*o+Math.cos(e)*r,y:-Math.sin(n)*Math.cos(e)*o-Math.sin(n)*Math.sin(e)*r+Math.cos(n)*i,z:Math.cos(n)*Math.cos(e)*o+Math.cos(n)*Math.sin(e)*r+Math.sin(n)*i}},t.rae2enu=function(t){return{x:t.rng*Math.cos(t.el)*Math.sin(t.az),y:t.rng*Math.cos(t.el)*Math.cos(t.az),z:t.rng*Math.sin(t.el)}},t.enu2rf=function(t,a,n){var e=t.x,o=t.y,r=t.z;return{x:Math.cos(n)*Math.cos(a)*e-Math.sin(a)*o+Math.sin(n)*Math.cos(a)*r,y:Math.cos(n)*Math.sin(a)*e+Math.cos(a)*o+Math.sin(n)*Math.sin(a)*r,z:-Math.sin(n)*e+Math.cos(n)*r}},t.azel2uv=function(t,a,n){if(t>n&&t<n)throw new RangeError("Azimuth is out of bounds: ".concat(t));if(a>n&&a<n)throw new RangeError("Elevation is out of bounds: ".concat(a));var e=t/(n*c)*90,o=a/(n*c)*90,r=Math.sin(e),i=-Math.sin(o);return{u:r,v:i=Object.is(i,-0)?0:i}},t.uv2azel=function(t,a,n){if(t>1||t<-1)throw new RangeError("u is out of bounds: ".concat(t));if(a>1||a<-1)throw new RangeError("v is out of bounds: ".concat(a));var e=Math.asin(t),o=Math.asin(a);return{az:e/90*(n*c),el:o/90*(n*c)}},t.rae2ruv=function(t,a,n){var e=this.rae2raeOffBoresight(t,a,n),o=e.az,r=e.el,i=this.azel2uv(o,r,a.coneHalfAngle),s=i.u,l=i.v;return{rng:t.rng,u:s,v:l}},t.rae2raeOffBoresight=function(t,a,n){return t.az=t.az>n*i?t.az-r:t.az,{az:t.az-a.boresight.az,el:t.el-a.boresight.el}},t}();!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PAYLOAD=1]="PAYLOAD",t[t.ROCKET_BODY=2]="ROCKET_BODY",t[t.DEBRIS=3]="DEBRIS",t[t.SPECIAL=4]="SPECIAL",t[t.RADAR_MEASUREMENT=5]="RADAR_MEASUREMENT",t[t.RADAR_TRACK=6]="RADAR_TRACK",t[t.RADAR_OBJECT=7]="RADAR_OBJECT",t[t.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",t[t.STAR=9]="STAR",t[t.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",t[t.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",t[t.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",t[t.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",t[t.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",t[t.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",t[t.LAUNCH_SITE=16]="LAUNCH_SITE",t[t.LAUNCH_POSITION=17]="LAUNCH_POSITION",t[t.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",t[t.CONTROL_FACILITY=19]="CONTROL_FACILITY",t[t.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",t[t.OPTICAL=21]="OPTICAL",t[t.MECHANICAL=22]="MECHANICAL",t[t.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",t[t.OBSERVER=24]="OBSERVER",t[t.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",t[t.COUNTRY=26]="COUNTRY",t[t.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",t[t.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER"}(e||(e={}));var p,m,f=2*Math.PI,g=function(){function t(){}return t.approxTransit=function(a,n,e){return t.J0_+(a+n)/f+e},t.astroRefraction=function(t){return t<0&&(t=0),2967e-7/Math.tan(t+.00312536/(t+.08901179))},t.azimuth=function(t,a,n){return Math.PI+Math.atan2(Math.sin(t),Math.cos(t)*Math.sin(a)-Math.tan(n)*Math.cos(a))},t.date2jSince2000=function(a){return a.getTime()/u+t.J1970_-t.J2000_},t.declination=function(a,n){return Math.asin(Math.sin(n)*Math.cos(t.e_)+Math.cos(n)*Math.sin(t.e_)*Math.sin(a))},t.eclipticLatitude=function(t){var a=f/360,n=t-.00569-.00478*Math.sin(a*t);return f*(n+3e-4*Math.sin(2*a*n))},t.eclipticLongitude=function(t){return t+i*(1.9148*Math.sin(t)+.02*Math.sin(2*t)+3e-4*Math.sin(3*t))+102.9372*i+Math.PI},t.elevation=function(t,a,n){return Math.asin(Math.sin(a)*Math.sin(n)+Math.cos(a)*Math.cos(n)*Math.cos(t))},t.getSetJulian=function(a,n,e,o,r,i,s){var l=t.hourAngle(a,e,o),c=t.approxTransit(l,n,r);return t.solarTransitJulian(c,i,s)},t.getSolarTime=function(t,a,n){var e=new Date;e.setUTCFullYear(t.getUTCFullYear(),0,1),e.setUTCHours(0,0,0,0);var o=t.getTime()-e.getTime(),r=360/365*(Math.floor(o/u)-81)*i,s=9.87*Math.sin(2*r)-7.53*Math.cos(r)-1.5*Math.sin(r)+4*(n-15*a);return new Date(t.getTime()+60*s*1e3)},t.getStarAzEl=function(a,n,e,o,r){var s=-e*i,l=n*i,c=t.date2jSince2000(a),u=t.siderealTime(c,s)-o,h=t.elevation(u,l,r);return{az:t.azimuth(u,l,r),el:h+=t.astroRefraction(h)}},t.getSunAzEl=function(a,n,e){var o=-e*i,r=n*i,s=t.date2jSince2000(a),l=t.getSunRaDec(s),c=t.siderealTime(s,o)-l.ra;return{az:t.azimuth(c,r,l.dec),el:t.elevation(c,r,l.dec)}},t.getSunRaDec=function(a){var n=t.solarMeanAnomaly_(a),e=t.eclipticLongitude(n);return{dec:t.declination(e,0),ra:t.rightAscension(e,0)}},t.getSunTimeByAzimuth=function(a,n,e,o,r){if(void 0===r&&(r=!1),isNaN(o))throw new Error("azimuth missing");if(isNaN(n))throw new Error("latitude missing");if(isNaN(e))throw new Error("longitude missing");r&&(o*=i);var s=new Date(a),l=i*-e,c=i*n,h=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0).getTime(),d=u;for(h+=d;d>200;){var M=t.date2jSince2000(new Date(h)),p=t.getSunRaDec(M),m=t.siderealTime(M,l)-p.ra;d/=2,t.getAzimuth_(m,c,p.dec)<o?h+=d:h-=d}return new Date(Math.floor(h))},t.getTimes=function(a,n,e,o,r){if(void 0===o&&(o=0),void 0===r&&(r=!1),isNaN(n))throw new Error("latitude missing");if(isNaN(e))throw new Error("longitude missing");var s=new Date(a);r?s.setUTCHours(12,0,0,0):s.setHours(12,0,0,0);var l,c=0,u=[],h=0,d=0,M=0,p=t.calculateJnoon_(e,n,o,s),m=p.Jnoon,f=p.dh,g=p.lw,v=p.phi,T=p.dec,A=p.n,y=p.M,I=p.L,w={solarNoon:t.julian2date(m),nadir:t.julian2date(m+.5)};for(c=0,l=t.times_.length;c<l;c+=1)h=((u=t.times_[c])[0]+f)*i,M=m-((d=t.getSetJ_(h,g,v,T,A,y,I))-m),w[u[1]]=t.julian2date(M),w[u[2]]=t.julian2date(d);return w},t.hourAngle=function(t,a,n){return Math.acos((Math.sin(t)-Math.sin(a)*Math.sin(n))/(Math.cos(a)*Math.cos(n)))},t.julian2date=function(a){return new Date((a-t.J1970_)*u)},t.julianCyle=function(a,n){return Math.round(a-t.J0_-n/(2*f/2))},t.rightAscension=function(a,n){return Math.atan2(Math.sin(a)*Math.cos(t.e_)-Math.tan(n)*Math.sin(t.e_),Math.cos(a))},t.siderealTime=function(t,a){return i*(280.16+360.9856235*t)-a},t.solarTransitJulian=function(a,n,e){return t.J2000_+a+.0053*Math.sin(n)-.0069*Math.sin(2*e)},t.calculateJnoon_=function(a,n,e,o){var r=i*-a,s=i*n,l=t.observerAngle_(e),c=t.date2jSince2000(o),u=t.julianCycle_(c,r),h=t.approxTransit(0,r,u),d=t.solarMeanAnomaly_(h),M=t.eclipticLongitude(d),p=t.declination(M,0);return{Jnoon:t.solarTransitJulian(h,d,M),dh:l,lw:r,phi:s,dec:p,n:u,M:d,L:M}},t.getAzimuth_=function(t,a,n){return Math.atan2(Math.sin(t),Math.cos(t)*Math.sin(a)-Math.tan(n)*Math.cos(a))+Math.PI},t.getSetJ_=function(a,n,e,o,r,i,s){var l=t.hourAngle(a,e,o),c=t.approxTransit(l,n,r);return t.solarTransitJulian(c,i,s)},t.julianCycle_=function(a,n){var e=n/f;return Math.round(a-t.J0_-e)},t.observerAngle_=function(t){return-2.076*Math.sqrt(t)/60},t.solarMeanAnomaly_=function(t){return i*(357.5291+.98560028*t)},t.J0_=9e-4,t.J1970_=2440587.5,t.J2000_=2451545,t.e_=23.4397*i,t.times_=[[6,"goldenHourDawnEnd","goldenHourDuskStart"],[-.3,"sunriseEnd","sunsetStart"],[-.833,"sunriseStart","sunsetEnd"],[-1,"goldenHourDawnStart","goldenHourDuskEnd"],[-4,"blueHourDawnEnd","blueHourDuskStart"],[-6,"civilDawn","civilDusk"],[-8,"blueHourDawnStart","blueHourDuskEnd"],[-12,"nauticalDawn","nauticalDusk"],[-15,"amateurDawn","amateurDusk"],[-18,"astronomicalDawn","astronomicalDusk"]],t}(),v=function(){function t(){}return t.getMoonIllumination=function(a){var n=a instanceof Date?a.getTime():a,e=2551442778,o=g.date2jSince2000(new Date(n)),r=g.getSunRaDec(o),i=t.moonCoords(o),s=149598e3,l=Math.acos(Math.sin(r.dec)*Math.sin(i.dec)+Math.cos(r.dec)*Math.cos(i.dec)*Math.cos(r.ra-i.ra)),c=Math.atan2(s*Math.sin(l),i.dist-s*Math.cos(l)),u=Math.atan2(Math.cos(r.dec)*Math.sin(r.ra-i.ra),Math.sin(r.dec)*Math.cos(i.dec)-Math.cos(r.dec)*Math.sin(i.dec)*Math.cos(r.ra-i.ra)),h=.5+.5*c*(u<0?-1:1)/Math.PI,d=(n-94717884e4)%e;d<0&&(d+=e);var M=e-d+n,p=1275721389-d+n;p<n&&(p+=e);var m=637860694.5-d+n;m<n&&(m+=e);var f,v=1913582083.5-d+n;v<n&&(v+=e);for(var T,A=Math.min(M,m,p,v),y=0;y<t.moonCycles_.length;y++){var I=t.moonCycles_[y];if(h>=I.from&&h<=I.to){T=I;break}}return f=A===M?"newMoon":A===m?"firstQuarter":A===p?"fullMoon":"thirdQuarter",{fraction:(1+Math.cos(c))/2,phase:T,phaseValue:h,angle:u,next:{value:A,date:new Date(A).toISOString(),type:f,newMoon:{value:M,date:new Date(M).toISOString()},fullMoon:{value:p,date:new Date(p).toISOString()},firstQuarter:{value:m,date:new Date(m).toISOString()},thirdQuarter:{value:v,date:new Date(v).toISOString()}}}},t.getMoonPosition=function(a,n,e){var o=i*-e,r=i*n,s=g.date2jSince2000(a),l=t.moonCoords(s),c=g.siderealTime(s,o)-l.ra,u=g.elevation(c,r,l.dec),h=Math.atan2(Math.sin(c),Math.tan(r)*Math.cos(l.dec)-Math.sin(l.dec)*Math.cos(c));return u+=g.astroRefraction(u),{az:g.azimuth(c,r,l.dec),el:u,rng:l.dist,parallacticAngle:h}},t.getMoonTimes=function(a,n,e,o){void 0===o&&(o=!1);var r=new Date(a);o?r.setUTCHours(0,0,0,0):r.setHours(0,0,0,0);var i=t.calculateRiseSetTimes_(r,n,e),s=i.rise,l=i.set,c=i.ye,u={rise:null,set:null,ye:null,alwaysUp:null,alwaysDown:null,highest:null};return u.rise=s?new Date(t.hoursLater(r,s)):NaN,u.set=l?new Date(t.hoursLater(r,l)):NaN,s||l?s&&l?(u.alwaysUp=!1,u.alwaysDown=!1,u.highest=new Date(t.hoursLater(r,Math.min(s,l)+Math.abs(l-s)/2))):(u.alwaysUp=!1,u.alwaysDown=!1):c>0?(u.alwaysUp=!0,u.alwaysDown=!1):(u.alwaysUp=!1,u.alwaysDown=!0),u},t.hoursLater=function(t,a){return new Date(t.getTime()+a*u/24)},t.moonCoords=function(t){var a=i*(134.963+13.064993*t),n=i*(93.272+13.22935*t),e=i*(218.316+13.176396*t)+6.289*i*Math.sin(a),o=5.128*i*Math.sin(n),r=385001-20905*Math.cos(a);return{ra:g.rightAscension(e,o),dec:g.declination(e,o),dist:r}},t.calculateRiseSetTimes_=function(a,n,e){for(var o=.133*i,r=t.getMoonPosition(a,n,e).el-o,s=0,l=0,c=0,u=0,h=0,d=0,M=0,p=0,m=0,f=0,g=0,v=0,T=0,A=1;A<=24&&(s=t.getMoonPosition(t.hoursLater(a,A),n,e).el-o,p=((h=(r+(l=t.getMoonPosition(t.hoursLater(a,A+1),n,e).el-o))/2-s)*(M=-(d=(l-r)/2)/(2*h))+d)*M+s,f=0,(m=d*d-4*h*s)>=0&&(g=M-(T=Math.sqrt(m)/(2*Math.abs(h))),v=M+T,Math.abs(g)<=1&&f++,Math.abs(v)<=1&&f++,g<-1&&(g=v)),1===f?r<0?c=A+g:u=A+g:2===f&&(c=A+(p<0?v:g),u=A+(p<0?g:v)),!c||!u);A+=2)r=l;return{rise:c,set:u,ye:p}},t.moonCycles_=[{from:0,to:.033863193308711,id:"newMoon",emoji:"🌚",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"},{from:.033863193308711,to:.216136806691289,id:"waxingCrescentMoon",emoji:"🌒",code:":waxing_crescent_moon:",name:"Waxing Crescent",weight:6.3825,css:"wi-moon-wax-cres"},{from:.216136806691289,to:.283863193308711,id:"firstQuarterMoon",emoji:"🌓",code:":first_quarter_moon:",name:"First Quarter",weight:1,css:"wi-moon-first-quart"},{from:.283863193308711,to:.466136806691289,id:"waxingGibbousMoon",emoji:"🌔",code:":waxing_gibbous_moon:",name:"Waxing Gibbous",weight:6.3825,css:"wi-moon-wax-gibb"},{from:.466136806691289,to:.533863193308711,id:"fullMoon",emoji:"🌝",code:":full_moon_with_face:",name:"Full Moon",weight:1,css:"wi-moon-full"},{from:.533863193308711,to:.716136806691289,id:"waningGibbousMoon",emoji:"🌖",code:":waning_gibbous_moon:",name:"Waning Gibbous",weight:6.3825,css:"wi-moon-wan-gibb"},{from:.716136806691289,to:.783863193308711,id:"thirdQuarterMoon",emoji:"🌗",code:":last_quarter_moon:",name:"third Quarter",weight:1,css:"wi-moon-third-quart"},{from:.783863193308711,to:.966136806691289,id:"waningCrescentMoon",emoji:"🌘",code:":waning_crescent_moon:",name:"Waning Crescent",weight:6.3825,css:"wi-moon-wan-cres"},{from:.966136806691289,to:1,id:"newMoon",emoji:"🌚",code:":new_moon_with_face:",name:"New Moon",weight:1,css:"wi-moon-new"}],t}(),T=function(){function t(){}return t.createVec=function(t,a,n){for(var e=[],o=t;o<=a;o+=n)e.push(o);return e},t.distance=function(t,a){return Math.sqrt(Math.pow(t.x-a.x,2)+Math.pow(t.y-a.y,2)+Math.pow(t.z-a.z,2))},t.dopplerFactor=function(a,n,e){var o=7292115e-11,r={x:n.x-a.x,y:n.y-a.y,z:n.z-a.z},i=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2)+Math.pow(r.z,2)),s=e.x+o*a.y,l=e.y-o*a.x,c=e.z,u=(r.x*s+r.y*l+r.z*c)/i;return 1+u/299792.458*t.sign_(u)},t.getDayOfYear=function(a){var n=(a=a||new Date).getMonth(),e=a.getUTCDate(),o=[0,31,59,90,120,151,181,212,243,273,304,334][n]+e;return n>1&&t.isLeapYear_(a)&&o++,o},t.roundToNDecimalPlaces=function(t,a){return Math.round(t*Math.pow(10,a))/Math.pow(10,a)},t.isLeapYear_=function(t){var a=t.getUTCFullYear();return 0==(3&a)&&(a%100!=0||a%400==0)},t.sign_=function(t){return t>=0?1:-1},t.MoonMath=v,t.SunMath=g,t.Types=n,t.jday=function(t,a,n,e,o,r){if(!t){var i=new Date,s=new Date(i.getUTCFullYear(),0,0),l=i.getDate()-s.getDate();return Math.floor(l/h)}return 367*t-Math.floor(7*(t+Math.floor((a+9)/12))*.25)+Math.floor(275*a/9)+n+1721013.5+((r/60+o)/60+e)/24},t}(),A=function(t,a){this.start=t-1,this.stop=a,this.length=this.stop-this.start},y=function(){return y=Object.assign||function(t){for(var a,n=1,e=arguments.length;n<e;n++)for(var o in a=arguments[n])Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);return t},y.apply(this,arguments)},I=function(){function t(){}return t.parseTle=function(a,n){var e=t.parseLine1(a),o=t.parseLine2(n);if(e.satNum!==o.satNum)throw new Error("Satellite numbers do not match");if(e.satNumRaw!==o.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==e.lineNumber1)throw new Error("First line number must be 1");if(2!==o.lineNumber2)throw new Error("Second line number must be 2");return{satNum:e.satNum,intlDes:e.intlDes,epochYear:e.epochYear,epochDay:e.epochDay,meanMoDev1:e.meanMoDev1,meanMoDev2:e.meanMoDev2,bstar:e.bstar,inclination:o.inclination,raan:o.raan,eccentricity:o.eccentricity,argOfPerigee:o.argOfPerigee,meanAnomaly:o.meanAnomaly,meanMotion:o.meanMotion}},t.parseTleFull=function(a,n){var e=t.parseLine1(a),o=t.parseLine2(n);if(e.satNum!==o.satNum)throw new Error("Satellite numbers do not match");if(e.satNumRaw!==o.satNumRaw)throw new Error("Raw satellite numbers do not match");if(1!==e.lineNumber1)throw new Error("First line number must be 1");if(2!==o.lineNumber2)throw new Error("Second line number must be 2");return y(y({},e),o)},t.parseLine1=function(a){return{lineNumber1:t.getLineNumber(a),satNum:t.getSatNum(a),satNumRaw:t.getRawSatNum(a),classification:t.getClassification(a),intlDes:t.getIntlDes(a),intlDesYear:t.getIntlDesYear(a),intlDesLaunchNum:t.getIntlDesLaunchNum(a),intlDesLaunchPiece:t.getIntlDesLaunchPiece(a),epochYear:t.getEpochYear(a),epochYearFull:t.getEpochYearFull(a),epochDay:t.getEpochDay(a),meanMoDev1:t.getMeanMoDev1(a),meanMoDev2:t.getMeanMoDev2(a),bstar:t.getBstar(a),ephemerisType:t.getEphemerisType(a),elsetNum:t.getElsetNum(a),checksum1:t.getChecksum(a)}},t.parseLine2=function(a){return{lineNumber2:t.getLineNumber(a),satNum:t.getSatNum(a),satNumRaw:t.getRawSatNum(a),inclination:t.getInclination(a),raan:t.getRaan(a),eccentricity:t.getEccentricity(a),argOfPerigee:t.getArgOfPerigee(a),meanAnomaly:t.getMeanAnomaly(a),meanMotion:t.getMeanMotion(a),revNum:t.getRevNum(a),checksum2:t.getChecksum(a)}},t.getLineNumber=function(a){var n=parseInt(a.substring(t.lineNumber.start,t.lineNumber.stop));if(1!==n&&2!==n)throw new Error("Invalid line number");return n},t.getSatNum=function(a){var n=a.substring(t.satNum.start,t.satNum.stop),e=n.split("")[0].toLowerCase();return isNaN(parseInt(e))?parseInt(e.charCodeAt(0)-96+9+n.slice(1,5)):parseInt(n)},t.getRawSatNum=function(a){return a.substring(t.satNum.start,t.satNum.stop)},t.getClassification=function(a){return a.substring(t.classification.start,t.classification.stop)},t.getIntlDes=function(a){return a.substring(t.intlDes.start,t.intlDes.stop).trim()},t.getIntlDesYear=function(a){return parseInt(a.substring(t.intlDesYear.start,t.intlDesYear.stop))},t.getIntlDesLaunchNum=function(a){return parseInt(a.substring(t.intlDesLaunchNum.start,t.intlDesLaunchNum.stop))},t.getIntlDesLaunchPiece=function(a){return a.substring(t.intlDesLaunchPiece.start,t.intlDesLaunchPiece.stop).trim()},t.getEpochYear=function(a){var n=parseInt(a.substring(t.epochYear.start,t.epochYear.stop));if(n<0||n>99)throw new Error("Invalid epoch year");return n},t.getEpochYearFull=function(a){var n=parseInt(a.substring(t.epochYear.start,t.epochYear.stop));if(n<0||n>99)throw new Error("Invalid epoch year");return n<57?n+2e3:n+1900},t.getEpochDay=function(a){var n=parseFloat(a.substring(t.epochDay.start,t.epochDay.stop));if(n<1||n>365.99999999)throw new Error("Invalid epoch day");return T.roundToNDecimalPlaces(n,8)},t.getMeanMoDev1=function(a){var n=parseFloat(a.substring(t.meanMoDev1.start,t.meanMoDev1.stop));if(isNaN(n))throw new Error("Invalid first derivative of mean motion.");return T.roundToNDecimalPlaces(n,8)},t.getMeanMoDev2=function(a){var n=parseFloat(a.substring(t.meanMoDev2.start,t.meanMoDev2.stop));if(isNaN(n))throw new Error("Invalid second derivative of mean motion.");return n},t.getBstar=function(a){var n=t.bstar.start+1,e=t.bstar.start+6,o=t.bstar.stop-1,r=a.substring(t.bstar.start,n),i=parseFloat("0.".concat(a.substring(n,e))),s=a.substring(e,o),l=parseInt(a.substring(o,t.bstar.stop));if("-"===s)l*=-1;else if("+"!==s)throw new Error("Invalid BSTAR symbol: ".concat(r));if(i*=Math.pow(10,l),"-"===r)i*=-1;else if("+"!==r&&" "!==r)throw new Error("Invalid BSTAR symbol: ".concat(r));return T.roundToNDecimalPlaces(i,14)},t.getEphemerisType=function(a){return parseInt(a.substring(t.ephemerisType.start,t.ephemerisType.stop))},t.getElsetNum=function(a){return parseInt(a.substring(t.elsetNum.start,t.elsetNum.stop))},t.getChecksum=function(a){return parseInt(a.substring(t.checksum.start,t.checksum.stop))},t.getInclination=function(a){var n=parseFloat(a.substring(t.inclination.start,t.inclination.stop));if(n<0||n>180)throw new Error("Invalid inclination: ".concat(n));return T.roundToNDecimalPlaces(n,4)},t.getRaan=function(a){var n=parseFloat(a.substring(t.raan.start,t.raan.stop));if(!(n>=0&&n<=360))throw new Error("Invalid RAAN: ".concat(n));return T.roundToNDecimalPlaces(n,4)},t.getEccentricity=function(a){var n=parseFloat("0.".concat(a.substring(t.eccentricity.start,t.eccentricity.stop)));if(!(n>=0&&n<=1))throw new Error("Invalid eccentricity: ".concat(n));return T.roundToNDecimalPlaces(n,7)},t.getArgOfPerigee=function(a){var n=parseFloat(a.substring(t.argPerigee.start,t.argPerigee.stop));if(!(n>=0&&n<=360))throw new Error("Invalid argument of perigee: ".concat(n));return T.roundToNDecimalPlaces(n,4)},t.getMeanAnomaly=function(a){var n=parseFloat(a.substring(t.meanAnom.start,t.meanAnom.stop));if(!(n>=0&&n<=360))throw new Error("Invalid mean anomaly: ".concat(n));return T.roundToNDecimalPlaces(n,4)},t.getMeanMotion=function(a){var n=parseFloat(a.substring(t.meanMo.start,t.meanMo.stop));if(!(n>=0&&n<=17))throw new Error("Invalid mean motion: ".concat(n));return T.roundToNDecimalPlaces(n,8)},t.getRevNum=function(a){return parseInt(a.substring(t.revNum.start,t.revNum.stop))},t.lineNumber=new A(1,1),t.satNum=new A(3,7),t.classification=new A(8,8),t.intlDes=new A(10,17),t.intlDesYear=new A(10,11),t.intlDesLaunchNum=new A(12,14),t.intlDesLaunchPiece=new A(15,17),t.epochYear=new A(19,20),t.epochDay=new A(21,32),t.meanMoDev1=new A(34,43),t.meanMoDev2=new A(45,52),t.bstar=new A(54,61),t.ephemerisType=new A(63,63),t.elsetNum=new A(65,68),t.checksum=new A(69,69),t.inclination=new A(9,16),t.raan=new A(18,25),t.eccentricity=new A(27,33),t.argPerigee=new A(35,42),t.meanAnom=new A(44,51),t.meanMo=new A(53,63),t.revNum=new A(64,68),t}(),w=function(){function t(t){this.type=t.type||e.UNKNOWN,this.name=t.name||"Unknown",this.position=t.position||{x:0,y:0,z:0},this.time=t.time||new Date}return t.prototype.getName=function(){return this.name},t.prototype.getType=function(){return this.type},t.prototype.getTypeString=function(){var t;return((t={})[e.UNKNOWN]="Unknown",t[e.PAYLOAD]="Payload",t[e.ROCKET_BODY]="Rocket Body",t[e.DEBRIS]="Debris",t[e.SPECIAL]="Special",t[e.RADAR_MEASUREMENT]="Radar Measurement",t[e.RADAR_TRACK]="Radar Track",t[e.RADAR_OBJECT]="Radar Object",t[e.BALLISTIC_MISSILE]="Ballistic Missile",t[e.STAR]="Star",t[e.INTERGOVERNMENTAL_ORGANIZATION]="Intergovernmental Organization",t[e.SUBORBITAL_PAYLOAD_OPERATOR]="Suborbital Payload Operator",t[e.PAYLOAD_OWNER]="Payload Owner",t[e.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER]="Meteorological Rocket Launch Agency or Manufacturer",t[e.PAYLOAD_MANUFACTURER]="Payload Manufacturer",t[e.LAUNCH_AGENCY]="Launch Agency",t[e.LAUNCH_SITE]="Launch Site",t[e.LAUNCH_POSITION]="Launch Position",t[e.LAUNCH_FACILITY]="Launch Facility",t[e.CONTROL_FACILITY]="Control Facility",t[e.GROUND_SENSOR_STATION]="Ground Sensor Station",t[e.OPTICAL]="Optical",t[e.MECHANICAL]="Mechanical",t[e.PHASED_ARRAY_RADAR]="Phased Array Radar",t[e.OBSERVER]="Observer",t[e.BISTATIC_RADIO_TELESCOPE]="Bistatic Radio Telescope",t[e.COUNTRY]="Country",t[e.LAUNCH_VEHICLE_MANUFACTURER]="Launch Vehicle Manufacturer",t[e.ENGINE_MANUFACTURER]="Engine Manufacturer",t)[this.type]||"Unknown"},t}(),E=(p=function(t,a){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])},p(t,a)},function(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}p(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}),R=function(t){function a(a){var n=t.call(this,a)||this;return a.rcs&&(n.rcs=a.rcs),a.vmag&&(n.vmag=a.vmag),n}return E(a,t),a.prototype.getRcs=function(){return this.rcs},a.prototype.getVmag=function(){return this.vmag},a}(w),N=function(){var t=function(a,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])},t(a,n)};return function(a,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=a}t(a,n),a.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),x=function(t){function a(a,n){var e=t.call(this,a)||this,o=I.parseTle(a.tle1,a.tle2);return e.satNum=o.satNum,e.intlDes=o.intlDes,e.epochYear=o.epochYear,e.epochDay=o.epochDay,e.meanMoDev1=o.meanMoDev1,e.meanMoDev2=o.meanMoDev2,e.bstar=o.bstar,e.inclination=o.inclination,e.raan=o.raan,e.eccentricity=o.eccentricity,e.argOfPerigee=o.argOfPerigee,e.meanAnomaly=o.meanAnomaly,e.meanMotion=o.meanMotion,e.period=1440/e.meanMotion,e.satrec=d.createSatrec(a.tle1,a.tle2),e.options=n||{},e}return N(a,t),a.prototype.propagateTo=function(t){var n=a.calculateTimeVariables(t,this.satrec).m,e=d.propagate(this.satrec,n).position||{x:0,y:0,z:0};return this.position=e,this.time=t,this},a.prototype.getStateVec=function(t){void 0===t&&(t=this.time);var n=a.calculateTimeVariables(t,this.satrec).m;return d.propagate(this.satrec,n)},a.prototype.getEci=function(t){void 0===t&&(t=this.time);var n=a.calculateTimeVariables(t,this.satrec).m;return d.propagate(this.satrec,n).position||{x:0,y:0,z:0}},a.prototype.getEcf=function(t){void 0===t&&(t=this.time);var n=a.calculateTimeVariables(t,this.satrec),e=n.m,o=n.gmst,r=d.propagate(this.satrec,e).position||{x:0,y:0,z:0};return M.eci2ecf(r,o)},a.prototype.getLla=function(t){void 0===t&&(t=this.time);var n=a.calculateTimeVariables(t,this.satrec),e=n.m,o=n.gmst,r=d.propagate(this.satrec,e).position||{x:0,y:0,z:0};return M.eci2lla(r,o)},a.prototype.getRae=function(t,n){void 0===n&&(n=this.time);var e=a.calculateTimeVariables(n,this.satrec),o=e.m,r=e.gmst,i=d.propagate(this.satrec,o).position||{x:0,y:0,z:0},s=M.eci2ecf(i,r);return M.ecf2rae({lat:t.lat,lon:t.lon,alt:t.alt},s)},a.prototype.getAzimuth=function(t,a){return void 0===a&&(a=this.time),this.getRae(t,a).az},a.prototype.getElevation=function(t,a){return void 0===a&&(a=this.time),this.getRae(t,a).el},a.prototype.getRange=function(t,a){return void 0===a&&(a=this.time),this.getRae(t,a).rng},a.calculateTimeVariables=function(t,a){var n=T.jday(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())+t.getUTCMilliseconds()*h;return{gmst:d.gstime(n),m:a?1440*(n-a.jdsatepoch):null,j:n}},a.checkSatrec=function(t){return!(isNaN(t.a)||isNaN(t.am)||isNaN(t.alta)||isNaN(t.em)||isNaN(t.mo)||isNaN(t.ecco)||isNaN(t.no))},a}(R),_=function(){var t=function(a,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])},t(a,n)};return function(a,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=a}t(a,n),a.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),D=function(t){function a(a,n,e){var o=t.call(this,a,n)||this;return o.setLaunchDetails(e.launchDetails),o.setSpaceCraftDetails(e.spaceCraftDetails),o.setOperationsDetails(e.operationsDetails),o}return _(a,t),a.prototype.setLaunchDetails=function(t){t.launchDate&&(this.launchDate=t.launchDate),t.launchMass&&(this.launchMass=t.launchMass),t.launchSite&&(this.launchSite=t.launchSite),t.launchVehicle&&(this.launchVehicle=t.launchVehicle)},a.prototype.getLaunchDetails=function(){return{launchDate:this.launchDate,launchMass:this.launchMass,launchSite:this.launchSite,launchVehicle:this.launchVehicle}},a.prototype.setSpaceCraftDetails=function(t){t.lifetime&&(this.lifetime=t.lifetime),t.maneuver&&(this.maneuver=t.maneuver),t.manufacturer&&(this.manufacturer=t.manufacturer),t.motor&&(this.motor=t.motor),t.power&&(this.power=t.power),t.payload&&(this.payload=t.payload),t.purpose&&(this.purpose=t.purpose),t.shape&&(this.shape=t.shape),t.span&&(this.span=t.span),t.configuration&&(this.configuration=t.configuration),t.equipment&&(this.equipment=t.equipment),t.dryMass&&(this.dryMass=t.dryMass)},a.prototype.getSpaceCraftDetails=function(){return{lifetime:this.lifetime,maneuver:this.maneuver,manufacturer:this.manufacturer,motor:this.motor,power:this.power,payload:this.payload,purpose:this.purpose,shape:this.shape,span:this.span,configuration:this.configuration,equipment:this.equipment,dryMass:this.dryMass}},a.prototype.setOperationsDetails=function(t){t.user&&(this.user=t.user),t.mission&&(this.mission=t.mission),t.owner&&(this.owner=t.owner),t.country&&(this.country=t.country)},a.prototype.getOperationsDetails=function(){return{user:this.user,mission:this.mission,owner:this.owner,country:this.country}},a}(x),C=function(){var t=function(a,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])},t(a,n)};return function(a,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=a}t(a,n),a.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();!function(t){t[t.OUT_OF_VIEW=-1]="OUT_OF_VIEW",t[t.ENTER=0]="ENTER",t[t.IN_VIEW=1]="IN_VIEW",t[t.EXIT=2]="EXIT"}(m||(m={}));var S=2*Math.PI,O=function(t){function a(a){var n=this;if(a.type)switch(a.type){case e.OPTICAL:case e.MECHANICAL:case e.PHASED_ARRAY_RADAR:case e.OBSERVER:case e.BISTATIC_RADIO_TELESCOPE:break;default:throw new Error("Invalid sensor type")}return(n=t.call(this,a)||this).validateInputData(a),n}return C(a,t),a.prototype.validateInputData=function(t){this.validateLla(t),this.validateFov(t)},a.prototype.validateFov=function(t){this.validateMinAz(t),this.validateMaxAz(t),this.validateMinEl(t),this.validateMaxEl(t),this.validateMinRng(t),this.validateMaxRng(t)},a.prototype.validateMaxRng=function(t){if(t.maxRng>=0)this.maxRng=t.maxRng;else{if(void 0!==t.maxRng)throw new Error("Invalid maximum range - must be greater than 0");this.maxRng=5e4}},a.prototype.validateMinRng=function(t){if(t.minRng>=0)this.minRng=t.minRng;else{if(void 0!==t.minRng)throw new Error("Invalid minimum range - must be greater than 0");this.minRng=0}},a.prototype.validateMaxEl=function(t){if(t.maxEl>=0&&t.maxEl<=180)this.maxEl=t.maxEl;else{if(void 0!==t.maxEl)throw new Error("Invalid maximum elevation - must be between 0 and 180");this.maxEl=90}},a.prototype.validateMinEl=function(t){if(t.minEl>=0&&t.minEl<=90)this.minEl=t.minEl;else{if(void 0!==t.minEl)throw new Error("Invalid minimum elevation - must be between 0 and 90");this.minEl=0}},a.prototype.validateMaxAz=function(t){if(t.maxAz>=0&&t.maxAz<=360)this.maxAz=t.maxAz;else{if(void 0!==t.maxAz)throw new Error("Invalid maximum azimuth - must be between 0 and 360");this.maxAz=360}},a.prototype.validateMinAz=function(t){if(t.minAz>=0&&t.minAz<=360)this.minAz=t.minAz;else{if(void 0!==t.minAz)throw new Error("Invalid minimum azimuth - must be between 0 and 360");this.minAz=0}},a.prototype.validateLla=function(t){if(!(t.lat>=-90&&t.lat<=90))throw new Error("Invalid latitude");if(this.lat=t.lat,!(t.lon>=-180&&t.lon<=180))throw new Error("Invalid longitude");if(this.lon=t.lon,!(t.alt>=0))throw new Error("Invalid altitude");this.alt=t.alt},a.prototype.setTime=function(t){return this.time=t,this},a.prototype.getRae=function(t,a){return void 0===a&&(a=this.time),t.getRae(this,a)},a.prototype.isRaeInFov=function(t){if(t.el*c<this.minEl||t.el*c>this.maxEl)return!1;if(t.rng<this.minRng||t.rng>this.maxRng)return!1;if(this.minAz*c>this.maxAz){if(t.az*c<this.minAz&&t.az*c>this.maxAz)return!1}else if(t.az*c<this.minAz||t.az*c>this.maxAz)return!1;return!0},a.prototype.isSatInFov=function(t,a){return void 0===a&&(a=this.time),this.isRaeInFov(this.getRae(t,a))},a.prototype.calculatePasses=function(t,n,e){void 0===e&&(e=this.time);for(var o=!1,r=0,i=[],s=e.getTime(),l=0;l<t;l++){var c=new Date(s+1e3*l),u=this.getRae(n,c),h=360*u.az/S,d=360*u.el/S,M=this.isRaeInFov(u);if(0===l){var p=this.getRae(n,new Date(Date.now()-1e3));o=this.isRaeInFov(p)}var f=a.getPassType_(M,o);if(r=Math.max(r,u.el),f===m.ENTER||f===m.EXIT){var g={type:f,time:c,az:h,el:d,rng:u.rng};f===m.EXIT&&(g.maxElPass=r),i.push(g),r=0}o=M}return i},a.getPassType_=function(t,a){var n=m.OUT_OF_VIEW;return t&&!a?n=m.ENTER:!t&&a?n=m.EXIT:t&&a&&(n=m.IN_VIEW),n},a}(w),b=function(){var t=function(a,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])},t(a,n)};return function(a,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=a}t(a,n),a.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),z=function(t){function a(a){var n=this;if(a.type&&a.type!==e.STAR)throw new Error("Invalid object type");return a.type=e.STAR,(n=t.call(this,a)||this).ra=a.ra,n.dec=a.dec,a.pname&&(n.pname=a.pname),a.bf&&(n.bf=a.bf),a.h&&(n.h=a.h),n}return b(a,t),a.prototype.getEci=function(t,n){void 0===t&&(t={lat:180*i,lon:0,alt:0}),void 0===n&&(n=this.time);var e=this.getRae(t,n),o=a.calculateTimeVariables_(n).gmst;return M.ecf2eci(M.rae2ecf(e,{lat:0,lon:0,alt:0}),o)},a.prototype.getRae=function(t,a){void 0===t&&(t={lat:180*i,lon:0,alt:0}),void 0===a&&(a=this.time);var n=T.SunMath.getStarAzEl(a,t.lat*c,t.lon*c,this.ra,this.dec);return{az:n.az,el:n.el,rng:25e4}},a.calculateTimeVariables_=function(t){var a=T.jday(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())+t.getUTCMilliseconds()*h;return{gmst:d.gstime(a),j:a}},a}(R);return a})(),t.exports=a()}},a={};function n(e){var o=a[e];if(void 0!==o)return o.exports;var r=a[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}(()=>{"use strict";var t=n(991);Math.PI,Math.PI;const a=2*Math.PI,e=a/360,o=6371,r=(t,a,n,e,o,r)=>{if(t<0||a<1||n<0||e<0||o<0||r<0)throw new Error("Invalid negative value");if(a>12)throw new Error("Invalid month value");if(n>31)throw new Error("Invalid day value");if(e>23)throw new Error("Invalid hour value");if(o>59)throw new Error("Invalid minute value");if(r>60)throw new Error("Invalid second value");return 367*t-Math.trunc(7*(t+Math.trunc((a+9)/12))*.25)+Math.trunc(275*a/9)+n+1721013.5+((r/60+o)/60+e)/24},i={JMod:2400000.5,J2000:2451545,J1900:2415020,B1900:2415020.3135,B1950:2433282.4235,JulianYear:365.25,JulianCentury:36525,BesselianYear:365.2421988,AU:149597870};var s,l;i.EclCoord=function(t,a,n){if(isNaN(t)||isNaN(a))throw Error("Invalid EclCoord object: ("+t+", "+a+")");this.lat=t,this.lng=a,void 0!==n&&(this.h=n)},i.EclCoord.prototype={toWgs84String:function(){return i.Math.formatNum(180*this.lat/Math.PI)+", "+i.Math.formatNum(180*-this.lng/Math.PI)}},i.EclCoordfromWgs84=function(t,a,n){return new i.EclCoord(t*Math.PI/180,-a*Math.PI/180,n)},i.EqCoord=function(t,a){if(isNaN(t)||isNaN(a))throw Error("Invalid EqCoord object: ("+t+", "+a+")");this.ra=t,this.dec=a},i.EqCoord.prototype={toString:function(){return"ra:"+i.Math.formatNum(180*this.ra/Math.PI)+", dec:"+i.Math.formatNum(180*this.dec/Math.PI)}},i.HzCoord=function(t,a){if(isNaN(t)||isNaN(a))throw Error("Invalid HzCoord object: ("+t+", "+a+")");this.az=t,this.alt=a},i.HzCoord.prototype={toString:function(){return"azi:"+i.Math.formatNum(180*this.az/Math.PI)+", alt:"+i.Math.formatNum(180*this.alt/Math.PI)}},i.Coord={dmsToDeg:function(t,a,n,e){return e=(60*(60*a+n)+e)/3600,t?-e:e},calcAngle:function(t,a,n,e){return i.Coord.dmsToDeg(t,a,n,e)*Math.PI/180},calcRA:function(t,a,n){return i.Coord.dmsToDeg(!1,t,a,n)%24*15*Math.PI/180},secondsToHMSStr:function(t){var a=Math.floor(t/86400);t=i.Math.pMod(t,86400);var n=Math.floor(t/3600)%24,e=Math.floor(t/60)%60;return(0!==a?a+"d ":"")+(10>n?"0":"")+n+":"+(10>e?"0":"")+e+":"+(10>(t=Math.floor(t%60))?"0":"")+t},secondsToHMStr:function(t){var a=Math.floor(t/86400);t=i.Math.pMod(t,86400);var n=Math.floor(t/3600)%24;return(0!==a?a+"d ":"")+(10>n?"0":"")+n+":"+(10>(t=Math.floor(t/60)%60)?"0":"")+t},eqToEcl:function(t,a){var n=Math.sin(t.ra),e=Math.sin(t.dec),o=Math.cos(t.dec),r=Math.sin(a);return a=Math.cos(a),new i.EclCoord(Math.atan2(n*a+e/o*r,Math.cos(t.ra)),Math.asin(e*a-o*r*n))},eclToEq:function(t,a){var n=Math.sin(t.lat),e=Math.sin(t.lng),o=Math.cos(t.lng),r=Math.sin(a);a=Math.cos(a);let s=Math.atan2(n*a-e/o*r,Math.cos(t.lat));return 0>s&&(s+=2*Math.PI),new i.EqCoord(s,Math.asin(e*a+o*r*n))},eqToHz:function(t,a,n){n=n-a.lng-t.ra;var e=Math.cos(n),o=Math.sin(a.lat);a=Math.cos(a.lat);var r=Math.sin(t.dec);return t=Math.cos(t.dec),new i.HzCoord(Math.atan2(Math.sin(n),e*o-r/t*a),Math.asin(o*r+a*t*e))}},i.DeltaT={jdToJde:function(t,a){return a||(a=i.DeltaT.estimate(t)),t+a/86400},jdeToJd:function(t,a){return a||(a=i.DeltaT.estimate(t)),t-a/86400},decimalYear:function(t){return(t=i.JulianDay.jdToCalendar(t)).y+(t.m-.5)/12},estimate:function(t){var a=i.DeltaT.decimalYear(t);return t=Math.pow,-500>a?32*t((a-1820)/100,2)-20:500>a?10583.6-1014.41*(a/=100)+33.78311*t(a,2)-5.952053*t(a,3)-.1798452*t(a,4)+.022174192*t(a,5)+.0090316521*t(a,6):1600>a?1574.2-556.01*(a=(a-1e3)/100)+71.23472*t(a,2)+.319781*t(a,3)-.8503463*t(a,4)-.005050998*t(a,5)+.0083572073*t(a,6):1700>a?120-.9808*(a-=1600)-.01532*t(a,2)+t(a,3)/7129:1800>a?8.83+.1603*(a-=1700)-.0059285*t(a,2)+13336e-8*t(a,3)-t(a,4)/1174e3:1860>a?13.72-.332447*(a-=1800)+.0068612*t(a,2)+.0041116*t(a,3)-37436e-8*t(a,4)+121272e-10*t(a,5)-1.699e-7*t(a,6)+8.75e-10*t(a,7):1900>a?7.62+.5737*(a-=1860)-.251754*t(a,2)+.01680668*t(a,3)-.0004473624*t(a,4)+t(a,5)/233174:1920>a?1.494119*(a-=1900)-2.79-.0598939*t(a,2)+.0061966*t(a,3)-197e-6*t(a,4):1941>a?21.2+.84493*(a-=1920)-.0761*t(a,2)+.0020936*t(a,3):1961>a?29.07+.407*(a-=1950)-t(a,2)/233+t(a,3)/2547:1986>a?45.45+1.067*(a-=1975)-t(a,2)/260-t(a,3)/718:2005>a?63.86+.3345*(a-=2e3)-.060374*t(a,2)+.0017275*t(a,3)+651814e-9*t(a,4)+2373599e-11*t(a,5):2050>a?62.92+.32217*(a-=2e3)+.005589*t(a,2):2150>a?32*t((a-1820)/100,2)-20-.5628*(2150-a):32*t((a-1820)/100,2)-20}},i.Globe={Er:6378.14,Fl:1/298.257,parallaxConstants:function(t,a){a||(a=0);var n=1-i.Globe.Fl;return a=.001*a/i.Globe.Er,{rhoslat:Math.sin(Math.atan(n*Math.tan(t)))*n+a*Math.sin(t),rhoclat:Math.cos(Math.atan(n*Math.tan(t)))+a*Math.cos(t)}}},i.Interp={newLen3:function(t,a,n){if(3!=n.length)throw"Error not 3";if(a==t)throw"Error no x range";var e=n[1]-n[0],o=n[2]-n[1];return{x1:t,x3:a,y:n,a:e,b:o,c:o-e,abSum:e+o,xSum:a+t,xDiff:a-t}},interpolateX:function(t,a){return i.Interp.interpolateN(t,(2*a-t.xSum)/t.xDiff)},interpolateN:function(t,a){return t.y[1]+.5*a*(t.abSum+a*t.c)}},i.JulianDay=function(t,a){t instanceof Date&&(t=i.JulianDay.dateToJD(t)),this.jd=t,this.deltaT=a||i.DeltaT.estimate(this.jd),this.jde=i.DeltaT.jdToJde(this.jd,this.deltaT)},i.JulianDay.prototype={toCalendar:function(){return i.JulianDay.jdToCalendar(this.jd)},toDate:function(){return i.JulianDay.jdToDate(this.jd)},jdJ2000Century:function(){return(this.jd-i.J2000)/i.JulianCentury},jdeJ2000Century:function(){return(this.jde-i.J2000)/i.JulianCentury},startOfDay:function(){return new i.JulianDay(Math.floor(this.jde-.5)+.5,this.deltaT)}},i.JulianDay.gregorianTimeStart=Date.UTC(1582,9,4),i.JulianDay.jdFromGregorian=function(t,a,n){return new i.JulianDay(i.JulianDay.jdFromGregorian(t,a,n))},i.JulianDay.jdFromJulian=function(t,a,n){return new i.JulianDay(i.JulianDay.calendarJulianToJD(t,a,n))},i.JulianDay.jdFromJDE=function(t){var a=i.DeltaT.estimate(t);return t=i.DeltaT.jdeToJd(t,a),new i.JulianDay(t,a)},i.JulianDay.dateToJD=function(t){var a=t.getUTCDate()+i.JulianDay.secondsFromHMS(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())/86400;return t.getTime()<i.JulianDay.gregorianTimeStart?i.JulianDay.calendarJulianToJD(t.getUTCFullYear(),t.getUTCMonth()+1,a):i.JulianDay.calendarGregorianToJD(t.getUTCFullYear(),t.getUTCMonth()+1,a)},i.JulianDay.calendarGregorianToJD=function(t,a,n){1!=a&&2!=a||(t--,a+=12);var e=Math.floor(t/100);return Math.floor(36525*(t+4716)/100)+Math.floor(306*(a+1)/10)+(2-e+Math.floor(e/4))+n-1524.5},i.JulianDay.calendarJulianToJD=function(t,a,n){return 1!=a&&2!=a||(t--,a+=12),Math.floor(36525*(t+4716)/100)+Math.floor(306*(a+1)/10)+n-1524.5},i.JulianDay.secondsFromHMS=function(t,a,n){return 3600*t+60*a+n},i.JulianDay.jdToDate=function(t){var a=i.JulianDay.jdToCalendar(t);return t=i.Math.modF(t+.5)[1],t=Math.round(86400*t),new Date(Date.UTC(a.y,a.m-1,Math.floor(a.d),Math.floor(t/3600)%24,Math.floor(t/60)%60,Math.floor(t%60)))},i.JulianDay.jdToCalendar=function(t){var a=(t=i.Math.modF(t+.5))[0],n=a;2299151<=a&&(n=a+1+(n=Math.floor((100*a-186721625)/3652425))-Math.floor(n/4));var e=n+1524;a=Math.floor((100*e-12210)/36525);var o=Math.floor(36525*a/100);return n=Math.floor(1e4*(e-o)/306001),t=e-o-Math.floor(306001*n/1e4)+t[1],{y:1==(n=14==n||15==n?n-13:n-1)||2==n?Math.floor(a)-4715:Math.floor(a)-4716,m:n,d:t}},i.JulianDay.leapYearGregorian=function(t){return 0==t%4&&0!=t%100||0==t%400},i.JulianDay.dayOfYear=function(t,a,n,e){return t=2,e&&t--,i.JulianDay._wholeMonths(a,t)+n},i.JulianDay._wholeMonths=function(t,a){return Math.round(275*t/9-(t+9)/12*a-30)},i.Math={pMod:function(t,a){return 0>(t%=a)&&(t+=a),t},modF:function(t){return 0>t?(t=-t,[-Math.floor(t),-t%1]):[Math.floor(t),t%1]},horner:function(t,a){var n=a.length-1;if(0>=n)throw"empty array not supported";for(var e=a[n];0<n;)e=e*t+a[--n];return e},formatNum:function(t,a){return a=Math.pow(10,4|a),Math.round(t*a)/a}},i.Moon={parallax:function(t){return Math.asin(6378.14/t)},apparentEquatorial:function(t){var a=i.Moon.geocentricPosition(t),n=i.Nutation.nutation(t);return t=i.Nutation.meanObliquityLaskar(t)+n.deltaobliquity,{eq:i.Coord.eclToEq(new i.EclCoord(a.lng+n.deltalng,a.lat),t),delta:a.delta}},apparentTopocentric:function(t,a,n){var e=i.Moon.apparentEquatorial(t),o=i.Globe.parallaxConstants(a.lat,a.h),r=i.Moon.parallax(e.delta);return n||(n=i.Sidereal.apparentInRa(t)),{eq:i.Parallax.topocentric(e.eq,r,o.rhoslat,o.rhoclat,a.lng,n),delta:e.delta}},topocentricPosition:function(t,a,n){var e=i.Sidereal.apparentInRa(t);t=i.Moon.apparentTopocentric(t,a,e);var o=i.Coord.eqToHz(t.eq,a,e);return!0===n&&(o.alt+=i.Refraction.bennett2(o.alt)),a=i.Moon.parallacticAngle(a.lat,e-(a.lng+t.eq.ra),t.eq.dec),{hz:o,eq:t.eq,delta:t.delta,q:a}},approxTransit:function(t,a){return t=t.startOfDay(),i.Rise.approxTransit(a,i.Sidereal.apparent0UT(t),i.Moon.apparentTopocentric(t,a).eq)},approxTimes:function(t,a){t=t.startOfDay();var n=i.Moon.apparentTopocentric(t,a),e=i.Moon.parallax(n.delta);return e=i.Rise.stdh0Lunar(e),t=i.Sidereal.apparent0UT(t),i.Rise.approxTimes(a,e,t,n.eq)},times:function(t,a){t=t.startOfDay();var n=i.Moon.apparentTopocentric(new i.JulianDay(t.jd-1,t.deltaT),a),e=i.Moon.apparentTopocentric(t,a),o=i.Moon.apparentTopocentric(new i.JulianDay(t.jd+1,t.deltaT),a),r=i.Moon.parallax(e.delta);r=i.Rise.stdh0Lunar(r);var s=i.Sidereal.apparent0UT(t);return i.Rise.times(a,t.deltaT,r,s,[n.eq,e.eq,o.eq])},parallacticAngle:function(t,a,n){return Math.atan2(Math.sin(a),Math.tan(t)*Math.cos(n)-Math.sin(n)*Math.cos(a))},geocentricPosition:function(t){var a=Math.PI/180,n=t.jdeJ2000Century();t=i.Math.pMod(i.Math.horner(n,[218.3164477*a,481267.88123421*a,-.0015786*a,a/538841,-a/65194e3]),2*Math.PI);var e=i.Math.pMod(i.Math.horner(n,[297.8501921*a,445267.1114034*a,-.0018819*a,a/545868,-a/113065e3]),2*Math.PI),o=i.Math.pMod(i.Math.horner(n,[357.5291092*a,35999.0502909*a,-1535e-7*a,a/2449e4]),2*Math.PI),r=i.Math.pMod(i.Math.horner(n,[134.9633964*a,477198.8675055*a,.0087414*a,a/69699,-a/14712e3]),2*Math.PI),s=i.Math.pMod(i.Math.horner(n,[93.272095*a,483202.0175233*a,-.0036539*a,-a/3526e3,a/86331e4]),2*Math.PI),l=119.75*a+131.849*a*n,c=53.09*a+479264.29*a*n,u=313.45*a+481266.484*a*n,h=(n=i.Math.horner(n,[1,-.002516,-74e-7]))*n;c=3958*Math.sin(l)+1962*Math.sin(t-s)+318*Math.sin(c);var d=0;for(l=-2235*Math.sin(t)+382*Math.sin(u)+175*Math.sin(l-s)+175*Math.sin(l+s)+127*Math.sin(t-r)-115*Math.sin(t+r),u=0;u<i.Moon.ta.length;u++){var M=i.Moon.ta[u],p=e*M[0]+o*M[1]+r*M[2]+s*M[3],m=Math.sin(p);switch(p=Math.cos(p),M[1]){case 0:c+=M[4]*m,d+=M[5]*p;break;case 1:case-1:c+=M[4]*m*n,d+=M[5]*p*n;break;case 2:case-2:c+=M[4]*m*h,d+=M[5]*p*h;break;default:throw"error"}}for(u=0;u<i.Moon.tb.length;u++)switch(M=i.Moon.tb[u],m=Math.sin(e*M[0]+o*M[1]+r*M[2]+s*M[3]),M[1]){case 0:l+=M[4]*m;break;case 1:case-1:l+=M[4]*m*n;break;case 2:case-2:l+=M[4]*m*h;break;default:throw"error"}return{lng:i.Math.pMod(t,2*Math.PI)+1e-6*c*a,lat:1e-6*l*a,delta:385000.56+.001*d}},ta:[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],tb:[[0,0,0,1,5128122],[0,0,1,1,280602],[0,0,1,-1,277693],[2,0,0,-1,173237],[2,0,-1,1,55413],[2,0,-1,-1,46271],[2,0,0,1,32573],[0,0,2,1,17198],[2,0,1,-1,9266],[0,0,2,-1,8822],[2,-1,0,-1,8216],[2,0,-2,-1,4324],[2,0,1,1,4200],[2,1,0,-1,-3359],[2,-1,-1,1,2463],[2,-1,0,1,2211],[2,-1,-1,-1,2065],[0,1,-1,-1,-1870],[4,0,-1,-1,1828],[0,1,0,1,-1794],[0,0,0,3,-1749],[0,1,-1,1,-1565],[1,0,0,1,-1491],[0,1,1,1,-1475],[0,1,1,-1,-1410],[0,1,0,-1,-1344],[1,0,0,-1,-1335],[0,0,3,1,1107],[4,0,0,-1,1021],[4,0,-1,1,833],[0,0,1,-3,777],[4,0,-2,1,671],[2,0,0,-3,607],[2,0,2,-1,596],[2,-1,1,-1,491],[2,0,-2,1,-451],[0,0,3,-1,439],[2,0,2,1,422],[2,0,-3,-1,421],[2,1,-1,1,-366],[2,1,0,1,-351],[4,0,0,1,331],[2,-1,1,1,315],[2,-2,0,-1,302],[0,0,1,3,-283],[2,1,1,-1,-229],[1,1,0,-1,223],[1,1,0,1,223],[0,1,-2,-1,-220],[2,1,-1,-1,-220],[1,0,1,1,-185],[2,-1,-2,-1,181],[0,1,2,1,-177],[4,0,-2,-1,176],[4,-1,-1,-1,166],[1,0,1,-1,-164],[4,0,1,-1,132],[1,0,-1,-1,-119],[4,-1,0,-1,115],[2,-2,0,1,107]]},i.MoonIllum={phaseAngleEq:function(t,a,n,e){return t=i.MoonIllum._coselong(t,n),Math.atan2(e*Math.sin(Math.acos(t)),a-e*t)},phaseAngleEq2:function(t,a){return Math.acos(-i.MoonIllum._coselong(t,a))},illuminated:function(t){return(1+Math.cos(t))/2},positionAngle:function(t,a){var n=Math.cos(a.dec);return Math.atan2(n*Math.sin(a.ra-t.ra),Math.sin(a.dec)*Math.cos(t.dec)-n*Math.sin(t.dec)*Math.cos(a.ra-t.ra))},_coselong:function(t,a){return Math.sin(a.dec)*Math.sin(t.dec)+Math.cos(a.dec)*Math.cos(t.dec)*Math.cos(a.ra-t.ra)}},i.Nutation={nutation:function(t){t=t.jdeJ2000Century();for(var a=i.Math.horner(t,[297.85036,445267.11148,-.0019142,1/189474])*Math.PI/180,n=i.Math.horner(t,[357.52772,35999.05034,-1603e-7,-1/3e5])*Math.PI/180,e=i.Math.horner(t,[134.96298,477198.867398,.0086972,1/5620])*Math.PI/180,o=i.Math.horner(t,[93.27191,483202.017538,-.0036825,1/327270])*Math.PI/180,r=i.Math.horner(t,[125.04452,-1934.136261,.0020708,1/45e4])*Math.PI/180,s=0,l=0,c=i.Nutation.table22A.length-1;0<=c;c--){var u=i.Nutation.table22A[c],h=u[0]*a+u[1]*n+u[2]*e+u[3]*o+u[4]*r,d=Math.cos(h);s+=Math.sin(h)*(u[5]+u[6]*t),l+=d*(u[7]+u[8]*t)}return{deltalng:1e-4/3600*s*(Math.PI/180),deltaobliquity:1e-4/3600*l*(Math.PI/180)}},nutationInRA:function(t){var a=i.Nutation.meanObliquityLaskar(t);return(t=i.Nutation.nutation(t)).deltalng*Math.cos(a+t.deltaobliquity)},trueObliquity:function(t){return i.Nutation.meanObliquityLaskar(t)+(t=i.Nutation.nutation(t)).deltaobliquity},meanObliquity:function(t){return i.Math.horner(t.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-46.815/3600*(Math.PI/180),-59e-5/3600*(Math.PI/180),.001813/3600*(Math.PI/180)])},meanObliquityLaskar:function(t){return i.Math.horner(.01*t.jdeJ2000Century(),[84381.448/3600*(Math.PI/180),-4680.93/3600*(Math.PI/180),-1.55/3600*(Math.PI/180),1999.25/3600*(Math.PI/180),-51.38/3600*(Math.PI/180),-249.67/3600*(Math.PI/180),-39.05/3600*(Math.PI/180),7.12/3600*(Math.PI/180),27.87/3600*(Math.PI/180),5.79/3600*(Math.PI/180),2.45/3600*(Math.PI/180)])},table22A:[[0,0,0,0,1,-171996,-174.2,92025,8.9],[-2,0,0,2,2,-13187,-1.6,5736,-3.1],[0,0,0,2,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[0,0,1,0,0,712,.1,-7,0],[-2,1,0,2,2,-517,1.2,224,-.6],[0,0,0,2,1,-386,-.4,200,0],[0,0,1,2,2,-301,0,129,-.1],[-2,-1,0,2,2,217,-.5,-95,.3],[-2,0,1,0,0,-158,0,0,0],[-2,0,0,2,1,129,.1,-70,0],[0,0,-1,2,2,123,0,-53,0],[2,0,0,0,0,63,0,0,0],[0,0,1,0,1,63,.1,-33,0],[2,0,-1,2,2,-59,0,26,0],[0,0,-1,0,1,-58,-.1,32,0],[0,0,1,2,1,-51,0,27,0],[-2,0,2,0,0,48,0,0,0],[0,0,-2,2,1,46,0,-24,0],[2,0,0,2,2,-38,0,16,0],[0,0,2,2,2,-31,0,13,0],[0,0,2,0,0,29,0,0,0],[-2,0,1,2,2,29,0,-12,0],[0,0,0,2,0,26,0,0,0],[-2,0,0,2,0,-22,0,0,0],[0,0,-1,2,1,21,0,-10,0],[0,2,0,0,0,17,-.1,0,0],[2,0,-1,0,1,16,0,-8,0],[-2,2,0,2,2,-16,.1,7,0],[0,1,0,0,1,-15,0,9,0],[-2,0,1,0,1,-13,0,7,0],[0,-1,0,0,1,-12,0,6,0],[0,0,2,-2,0,11,0,0,0],[2,0,-1,2,1,-10,0,5,0],[2,0,1,2,2,-8,0,3,0],[0,1,0,2,2,7,0,-3,0],[-2,1,1,0,0,-7,0,0,0],[0,-1,0,2,2,-7,0,3,0],[2,0,0,2,1,-7,0,3,0],[2,0,1,0,0,6,0,0,0],[-2,0,2,2,2,6,0,-3,0],[-2,0,1,2,1,6,0,-3,0],[2,0,-2,0,1,-6,0,3,0],[2,0,0,0,1,-6,0,3,0],[0,-1,1,0,0,5,0,0,0],[-2,-1,0,2,1,-5,0,3,0],[-2,0,0,0,1,-5,0,3,0],[0,0,2,2,1,-5,0,3,0],[-2,0,2,0,1,4,0,0,0],[-2,1,0,2,1,4,0,0,0],[0,0,1,-2,0,4,0,0,0],[-1,0,1,0,0,-4,0,0,0],[-2,1,0,0,0,-4,0,0,0],[1,0,0,0,0,-4,0,0,0],[0,0,1,2,0,3,0,0,0],[0,0,-2,2,2,-3,0,0,0],[-1,-1,1,0,0,-3,0,0,0],[0,1,1,0,0,-3,0,0,0],[0,-1,1,2,2,-3,0,0,0],[2,-1,-1,2,2,-3,0,0,0],[0,0,3,2,2,-3,0,0,0],[2,-1,0,2,2,-3,0,0,0]]},i.Parallax={earthsunParallax:8.794/60/60*Math.PI/180,horizontal:function(t){return 8.794/60/60*Math.PI/180/t},topocentric:function(t,a,n,e,o,r){o=i.Math.pMod(r-o-t.ra,2*Math.PI),a=Math.sin(a),r=Math.cos(o);var s=Math.cos(t.dec);return o=Math.atan2(-e*a*Math.sin(o),s-e*a*r),new i.EqCoord(t.ra+o,Math.atan2((Math.sin(t.dec)-n*a)*Math.cos(o),s-e*a*r))},topocentric2:function(t,a,n,e,o,r){return o=i.Math.pMod(r-o-t.ra,2*Math.PI),r=Math.cos(t.dec),new i.EqCoord(t.ra+-a*e*Math.sin(o)/r,t.dec+-a*(n*r-e*Math.cos(o)*Math.sin(t.dec)))}},i.Refraction={bennett:function(t){0>t&&(t=0);var a=Math.PI/180;return a/60/Math.tan(t+7.31*a*a/(t+4.4*a))},bennett2:function(t){var a=Math.PI/180,n=60/a,e=.06/n;return n=14.7*n*a,a*=13,(t=i.Refraction.bennett(t))-e*Math.sin(n*t+a)},saemundsson:function(t){var a=Math.PI/180;return 1.02*a/60/Math.tan(t+10.3*a*a/(t+5.11*a))}},i.Rise={meanRefraction:.5667*Math.PI/180,stdh0Stellar:-.5667*Math.PI/180,stdh0Solar:-.8333*Math.PI/180,stdh0LunarMean:.125*Math.PI/180,stdh0Lunar:function(t){return.7275*t-i.Rise.meanRefraction},circumpolar:function(t,a,n){return-1>(t=(Math.sin(a)-Math.sin(t)*Math.sin(n))/(Math.cos(t)*Math.cos(n)))||1<t?null:t},approxTransit:function(t,a,n){return 43200*(n.ra+t.lng)/Math.PI-a},approxTimes:function(t,a,n,e){return(a=i.Rise.circumpolar(t.lat,a,e.dec))?(a=43200*Math.acos(a)/Math.PI,t=43200*(e.ra+t.lng)/Math.PI-n,{transit:i.Math.pMod(t,86400),transitd:Math.floor(t/86400),rise:i.Math.pMod(t-a,86400),rised:Math.floor((t-a)/86400),set:i.Math.pMod(t+a,86400),setd:Math.floor((t+a)/86400)}):null},times:function(t,a,n,e,o){function r(o){var r=i.Math.pMod(e+360.985647*o/360,86400),s=o+a,u=i.Interp.interpolateX(l,s);return s=i.Interp.interpolateX(c,s),r=r*Math.PI/43200-(t.lng+u),u=Math.cos(s),i.Math.pMod(o+(h*Math.sin(s)+d*u*Math.cos(r)-n)/(u*d*Math.sin(r))*43200/Math.PI,86400)}var s=i.Rise.approxTimes(t,n,e,o[1]);if(!s)return null;var l=i.Interp.newLen3(-86400,86400,[o[0].ra,o[1].ra,o[2].ra]),c=i.Interp.newLen3(-86400,86400,[o[0].dec,o[1].dec,o[2].dec]);o=e+360.985647*s.transit/360;var u=i.Interp.interpolateX(l,s.transit+a);s.transit=i.Math.pMod(s.transit-(o-43200*(t.lng+u)/Math.PI),86400);var h=Math.sin(t.lat),d=Math.cos(t.lat);return s.rise=r(s.rise),s.set=r(s.set),s}},i.Sidereal={iau82:[24110.54841,8640184.812866,.093104,62e-7],jdToCFrac:function(t){return t=i.Math.modF(t.jd+.5),[new i.JulianDay(t[0]-.5).jdJ2000Century(),t[1]]},mean:function(t){return i.Math.pMod(i.Sidereal._mean(t),86400)},_mean:function(t){return(t=i.Sidereal._mean0UT(t)).s+86636.55536784*t.f},_meanInRA:function(t){return(t=i.Sidereal._mean0UT(t)).s*Math.PI/43200+2.0054758187*t.f*Math.PI},mean0UT:function(t){return t=i.Sidereal._mean0UT(t),i.Math.pMod(t.s,86400)},_mean0UT:function(t){return t=i.Sidereal.jdToCFrac(t),{s:i.Math.horner(t[0],i.Sidereal.iau82),f:t[1]}},apparentInRa:function(t){var a=i.Sidereal._meanInRA(t);return t=i.Nutation.nutationInRA(t),i.Math.pMod(a+t,2*Math.PI)},apparent:function(t){var a=i.Sidereal._mean(t);return t=648e3*i.Nutation.nutationInRA(t)/Math.PI/15,i.Math.pMod(a+t,86400)},apparentLocal:function(t,a){return t=i.Sidereal.apparent(t),i.Math.pMod(t-43200*a/Math.PI,86400)},apparent0UT:function(t){var a=i.Math.modF(t.jd+.5);return t=i.Math.modF(t.jde+.5),a=i.Math.horner((a[0]-.5-i.J2000)/36525,i.Sidereal.iau82)+86636.55536784*a[1],t=648e3*i.Nutation.nutationInRA(new i.JulianDay(t[0]))/Math.PI/15,i.Math.pMod(a+t,86400)}},i.Solar={earthsunDelta:149597870,apparentEquatorial:function(t){var a=t.jdJ2000Century(),n=i.Solar.node(a);return a=i.Solar.apparentLongitude(a,n),t=i.Nutation.meanObliquityLaskar(t)+.00256*Math.PI/180*Math.cos(n),n=Math.sin(a),new i.EqCoord(Math.atan2(Math.cos(t)*n,Math.cos(a)),Math.asin(Math.sin(t)*n))},apparentTopocentric:function(t,a,n){var e=i.Solar.apparentEquatorial(t),o=i.Globe.parallaxConstants(a.lat,a.h);return n||(n=i.Sidereal.apparentInRa(t)),i.Parallax.topocentric2(e,i.Parallax.earthsunParallax,o.rhoslat,o.rhoclat,a.lng,n)},topocentricPosition:function(t,a,n){var e=i.Sidereal.apparentInRa(t);return t=i.Solar.apparentTopocentric(t,a,e),a=i.Coord.eqToHz(t,a,e),!0===n&&(a.alt+=i.Refraction.bennett2(a.alt)),{hz:a,eq:t}},approxTransit:function(t,a){return t=t.startOfDay(),i.Rise.approxTransit(a,i.Sidereal.apparent0UT(t),i.Solar.apparentTopocentric(t,a))},approxTimes:function(t,a){var n=t.startOfDay();t=i.Solar.apparentTopocentric(n,a);var e=i.Rise.stdh0Solar;return n=i.Sidereal.apparent0UT(n),i.Rise.approxTimes(a,e,n,t)},times:function(t,a){t=t.startOfDay();var n=i.Solar.apparentTopocentric(new i.JulianDay(t.jd-1,t.deltaT),a),e=i.Solar.apparentTopocentric(t,a),o=i.Solar.apparentTopocentric(new i.JulianDay(t.jd+1,t.deltaT),a),r=i.Rise.stdh0Solar,s=i.Sidereal.apparent0UT(t);return i.Rise.times(a,t.deltaT,r,s,[n,e,o])},meanAnomaly:function(t){return i.Math.horner(t,[357.52911,35999.05029,-1537e-7])*Math.PI/180},trueLongitude:function(t){var a=i.Math.horner(t,[280.46646,36000.76983,3032e-7])*Math.PI/180,n=i.Solar.meanAnomaly(t);return t=(i.Math.horner(t,[1.914602,-.004817,-14e-6])*Math.sin(n)+(.019993-101e-6*t)*Math.sin(2*n)+289e-6*Math.sin(3*n))*Math.PI/180,{s:i.Math.pMod(a+t,2*Math.PI),v:i.Math.pMod(n+t,2*Math.PI)}},apparentLongitude:function(t,a){return a||(a=i.Solar.node(t)),i.Solar.trueLongitude(t).s-.00569*Math.PI/180-.00478*Math.PI/180*Math.sin(a)},node:function(t){return(125.04-1934.136*t)*Math.PI/180}},i.Solistice={march:function(t){return 1e3>t?i.Solistice._eq(t,i.Solistice.mc0):i.Solistice._eq(t-2e3,i.Solistice.mc2)},june:function(t){return 1e3>t?i.Solistice._eq(t,i.Solistice.jc0):i.Solistice._eq(t-2e3,i.Solistice.jc2)},september:function(t){return 1e3>t?i.Solistice._eq(t,i.Solistice.sc0):i.Solistice._eq(t-2e3,i.Solistice.sc2)},december:function(t){return 1e3>t?i.Solistice._eq(t,i.Solistice.dc0):i.Solistice._eq(t-2e3,i.Solistice.dc2)},_eq:function(t,a){a=((t=i.Math.horner(.001*t,a))-i.J2000)/i.JulianCentury;var n=35999.373*Math.PI/180*a-2.47*Math.PI/180;n=1+.0334*Math.cos(n)+7e-4*Math.cos(2*n);for(var e=0,o=this.terms.length-1;0<=o;o--){var r=this.terms[o];e+=r[0]*Math.cos((r[1]+r[2]*a)*Math.PI/180)}return t+1e-5*e/n},mc0:[1721139.29189,365242.1374,.06134,.00111,-71e-5],jc0:[1721233.25401,365241.72562,-.05232,.00907,25e-5],sc0:[1721325.70455,365242.49558,-.11677,-.00297,74e-5],dc0:[1721414.39987,365242.88257,-.00769,-.00933,-6e-5],mc2:[2451623.80984,365242.37404,.05169,-.00411,-57e-5],jc2:[2451716.56767,365241.62603,.00325,.00888,-3e-4],sc2:[2451810.21715,365242.01767,-.11575,.00337,78e-5],dc2:[2451900.05952,365242.74049,-.06223,-.00823,32e-5],terms:[[485,324.96,1934.136],[203,337.23,32964.467],[199,342.08,20.186],[182,27.85,445267.112],[156,73.14,45036.886],[136,171.52,22518.443],[77,222.54,65928.934],[74,296.72,3034.906],[70,243.58,9037.513],[58,119.81,33718.147],[52,297.17,150.678],[50,21.02,2281.226],[45,247.54,29929.562],[44,325.15,31555.956],[29,60.93,4443.417],[18,155.12,67555.328],[17,288.79,4562.452],[16,198.04,62894.029],[14,199.76,31436.921],[12,95.39,14577.848],[12,287.11,31931.756],[12,320.81,34777.259],[9,227.73,1222.114],[8,15.45,16859.074]]},(l=s||(s={}))[l.UNKNOWN=0]="UNKNOWN",l[l.PAYLOAD=1]="PAYLOAD",l[l.ROCKET_BODY=2]="ROCKET_BODY",l[l.DEBRIS=3]="DEBRIS",l[l.SPECIAL=4]="SPECIAL",l[l.RADAR_MEASUREMENT=5]="RADAR_MEASUREMENT",l[l.RADAR_TRACK=6]="RADAR_TRACK",l[l.RADAR_OBJECT=7]="RADAR_OBJECT",l[l.BALLISTIC_MISSILE=8]="BALLISTIC_MISSILE",l[l.STAR=9]="STAR",l[l.INTERGOVERNMENTAL_ORGANIZATION=10]="INTERGOVERNMENTAL_ORGANIZATION",l[l.SUBORBITAL_PAYLOAD_OPERATOR=11]="SUBORBITAL_PAYLOAD_OPERATOR",l[l.PAYLOAD_OWNER=12]="PAYLOAD_OWNER",l[l.METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER=13]="METEOROLOGICAL_ROCKET_LAUNCH_AGENCY_OR_MANUFACTURER",l[l.PAYLOAD_MANUFACTURER=14]="PAYLOAD_MANUFACTURER",l[l.LAUNCH_AGENCY=15]="LAUNCH_AGENCY",l[l.LAUNCH_SITE=16]="LAUNCH_SITE",l[l.LAUNCH_POSITION=17]="LAUNCH_POSITION",l[l.LAUNCH_FACILITY=18]="LAUNCH_FACILITY",l[l.CONTROL_FACILITY=19]="CONTROL_FACILITY",l[l.GROUND_SENSOR_STATION=20]="GROUND_SENSOR_STATION",l[l.OPTICAL=21]="OPTICAL",l[l.MECHANICAL=22]="MECHANICAL",l[l.PHASED_ARRAY_RADAR=23]="PHASED_ARRAY_RADAR",l[l.OBSERVER=24]="OBSERVER",l[l.BISTATIC_RADIO_TELESCOPE=25]="BISTATIC_RADIO_TELESCOPE",l[l.COUNTRY=26]="COUNTRY",l[l.LAUNCH_VEHICLE_MANUFACTURER=27]="LAUNCH_VEHICLE_MANUFACTURER",l[l.ENGINE_MANUFACTURER=28]="ENGINE_MANUFACTURER",l[l.NOTIONAL=29]="NOTIONAL",l[l.FRAGMENT=30]="FRAGMENT";const c=(t,a,n)=>{const e=new Date,o=e.getTime()-t;return e.setTime(t+a+o*n),e};let u,h=0,d=1;const M=[];let p,m=1,f=1;try{onmessage=t=>g(t)}catch(t){if(!process)throw t}const g=n=>{var i,s,l;if(n.data.isUpdate&&(!n.data.missile&&n.data.satId<99999&&(M[n.data.satId]=t.Sgp4.createSatrec(n.data.TLE1,n.data.TLE2)),n.data.missile&&(M[n.data.satId]=n.data)),n.data.orbitType&&(m=n.data.orbitType),u=void 0!==n.data.dynamicOffsetEpoch?n.data.dynamicOffsetEpoch:u,h=void 0!==n.data.staticOffset?n.data.staticOffset:h,d=void 0!==n.data.propRate?n.data.propRate:d,n.data.isInit){const a=JSON.parse(n.data.satData);f=JSON.parse(n.data.orbitFadeFactor);const e=a.length-1;let o=-1;for(;o<e;)o++,delete a[o].id,a[o].static||a[o].missile?M[o]=a[o]:M[o]=t.Sgp4.createSatrec(a[o].TLE1,a[o].TLE2);p=n.data.numSegs}if(void 0!==n.data.satId){const g=n.data.satId,T=n.data.isEcfOutput||!1,A=new Float32Array(4*(p+1)),y=c(u,h,d),I=1440*(r(y.getUTCFullYear(),y.getUTCMonth()+1,y.getUTCDate(),y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds())+1.15741e-8*y.getUTCMilliseconds()-M[g].jdsatepoch),w=p+1;let E=0;if(M[g].missile)for(;E<w;){const a=M[g];if(0===(null===(i=a.latList)||void 0===i?void 0:i.length))A[4*E]=0,A[4*E+1]=0,A[4*E+2]=0,A[4*E+3]=0,E++;else{const n=Math.round(a.altList.length*(E/p)),i=c(u,h,d),s=r(i.getUTCFullYear(),i.getUTCMonth()+1,i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds())+1.15741e-8*i.getUTCMilliseconds(),l=t.Sgp4.gstime(s),M=Math.cos(a.latList[n]*e),m=Math.sin(a.latList[n]*e),g=Math.cos(a.lonList[n]*e+l),v=Math.sin(a.lonList[n]*e+l);A[4*E]=(o+a.altList[n])*M*g,A[4*E+1]=(o+a.altList[n])*M*v,A[4*E+2]=(o+a.altList[n])*m,A[4*E+3]=Math.min(f*(w/(E+1)),1),E++}}else{const n=2*Math.PI/M[g].no,e=n/p;let o;if(1===m)for(;E<w;){const r=I+E*e;o=null===(s=t.Sgp4.propagate(M[g],r))||void 0===s?void 0:s.position,T&&(o=t.Transforms.ecf2eci(o,-E*e*a/n)),(null==o?void 0:o.x)&&(null==o?void 0:o.y)&&(null==o?void 0:o.z)?(A[4*E]=o.x,A[4*E+1]=o.y,A[4*E+2]=o.z,A[4*E+3]=Math.min(f*(w/(E+1)),1)):(A[4*E]=0,A[4*E+1]=0,A[4*E+2]=0,A[4*E+3]=0),E++}else if(2===m)for(;E<w;){const r=I-E*e;o=null===(l=t.Sgp4.propagate(M[g],r))||void 0===l?void 0:l.position,T&&(o=t.Transforms.ecf2eci(o,-E*e*a/n)),(null==o?void 0:o.x)&&(null==o?void 0:o.y)&&(null==o?void 0:o.z)?(A[4*E]=o.x,A[4*E+1]=o.y,A[4*E+2]=o.z,A[4*E+3]=E<w/40?Math.min(f*(w/40/(2*(E+1))),1):0):(A[4*E]=0,A[4*E+1]=0,A[4*E+2]=0,A[4*E+3]=0),E++}}v({pointsOut:A,satId:g})}},v=({pointsOut:t,satId:a})=>{try{postMessage({pointsOut:t,satId:a})}catch(t){if(!process)throw t}}})()})();